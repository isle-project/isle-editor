/*! For license information please see LassoRegression.4f3627ac.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6794],{248453:function(t,e,r){var n=r(113449);t.exports=n},113449:function(t,e,r){var n=r(384871)(r(588703));t.exports=n},881447:function(t,e,r){var n=r(324169);t.exports=n},324169:function(t,e,r){var n=r(555528);t.exports=function(t,e,r){n(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r})}},854509:function(t,e,r){r.r(e),r.d(e,{default:function(){return yt}});var n=r(202784),i=r(213980),a=r.n(i),s=r(198),o=r(822736),l=r(287013),u=r.n(l),c=r(309765),h=r.n(c),p=r(770561),f=r(112114),d=r(257457),m=r(89596),v=r.n(m);var b=function(t,e){const r=v()(e);if(!v()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!(0,c.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const n=t.length,i=new Array(n);if(r){if(n!==e.length)throw new Error("invalid input argument. Array to be multiplied must have a length equal to that of the input array.");for(let r=0;r<n;r++)i[r]=t[r]*e[r]}else for(let a=0;a<n;a++)i[a]=t[a]*e;return i},g=r(99733),y=r(201),w=r(881447),E=r.n(w);var x=function(t,e=!0,r=!0){const n=(0,g.Z)(t),i=(0,y.Z)(t),a=t.length,s=new Array(a);if(e)if(r)for(let o=0;o<a;o++)s[o]=(t[o]-n)/i;else for(let o=0;o<a;o++)s[o]=t[o]-n;else if(r)for(let o=0;o<a;o++)s[o]=t[o]/i;else s=t.slice();return E()(s,"mu",n),E()(s,"sigma",i),s},T=r(741082),P=r(848285),Z=r(588703),q=r.n(Z),A=r(147777),O=r.n(A),k=r(471205),N=r.n(k),F=r(437069),S=r.n(F),V=r(695688),$=r.n(V);var j=function(t,e,r,n){q()(t)||(t=[t]);const i=[],a=[],s={},o={},l={},c=e[t[0]].length;for(let h=0;h<t.length;h++)if(u()(r,t[h])){const r=x(e[t[h]]);o[t[h]]=r,a.push(t[h])}else{const r=e[t[h]],i=O()(r,N()),o=t[h].categories||S()(i);for(let e=n?1:0;e<o.length;e++){const r=`${t[h]}_${o[e]}`;a.push(r);const n=i[o[e]]/c;l[r]={mu:n,sigma:$()(n*(1-n))}}s[t[h]]=o}for(let h=0;h<c;h++){const a=[];n&&a.push(1);for(let i=0;i<t.length;i++)if(u()(r,t[i])){const e=o[t[i]];a.push(e[h])}else{const r=e[t[i]],o=s[t[i]],u=r[h];for(let e=n?1:0;e<o.length;e++){const{mu:r,sigma:n}=l[`${t[i]}_${o[e]}`];a.push(u===o[e]?(1-r)/n:-r/n)}}i.push(a)}return{matrix:i,predictors:a,categoricalStats:l,standardized:o}},z=r(690299),R=r.n(z),C=r(605977),K=r.n(C),_=r(916290),M=r.n(_),B=r(248453),D=r.n(B),I=r(335396),W=r.n(I),X=r(879224),G=r.n(X),H=r(973670),J=r.n(H),L=r(32593),Q=r.n(L),U=r(537941),Y=r(983817),tt=r(30468);var et=function(t,e,r){const n=v()(e);if(!v()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!n&&!(0,c.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const i=t.length,a=new Array(i);if(n){if(i!==e.length)throw new Error("invalid input argument. Array to be divided must have a length equal to that of the input array.");for(let r=0;r<i;r++)a[r]=t[r]/e[r]}else for(let s=0;s<i;s++)a[s]=t[s]/e;return a};var rt=function(t,e,r){let n=0;const i=t.shape[0];for(let a=0;a<i;a++){const i=t.get(a,r),s=e.get(a,r);0!==i&&0!==s&&(n+=i*s)}return n};var nt=function(t,e){const r=t.length;let n=0;for(let i=0;i<r;i++)n+=t[i]*e[i];return n};var it=function(t,e){return t>e?t-e:t<-e?t+e:0};const at=R()("isle:lasso"),st=1e-9,ot=(t,e)=>{const r=new Float64Array(t.shape[0]);for(let n=0;n<r.length;n++)r[n]=t.get(n,e);return r};function lt(t,e,r){this.y=t,this.x=e,this.lambda=r,this.N=e.shape[0],this.p=e.shape[1],this.beta=new Float64Array(this.p),this.betast=new Float64Array(this.p),this.active=K()(0,this.beta.length,1),this.nonactive=[],this.presid=G()("float64",new Float64Array(e._buffer.length),e.shape,e.strides,e.offset,e.order),this.init=()=>{this.iteration=0,this.iterate()},this.init()}lt.prototype.testKKT=function(){const t=this.beta,e=this.N,r=this.x,n=this.y,i=(0,tt.Z)(n,(0,U.Z)(r,t)),a=et((0,U.Z)((0,Y.Z)(r),i),e);for(let s=0;s<t.length;s++)if(0===t[s]){if(Q()(a[s])>this.lambda+st)return!1}else if(t[s]>0&&a[s]-this.lambda*M()(t[s])>st)return!1;return!0},lt.prototype.testActiveSet=function(){let t=!1;const{residuals:e}=this.predict(this.x);for(let r=0;r<this.nonactive.length;r++){const n=this.nonactive[r],i=ot(this.x,n);Q()(nt(i,e))/this.N>this.lambda&&(this.active.push(n),this.nonactive.splice(r,1),t=!0)}return at("Active set changes..."),t},lt.prototype.iterate=function(){const t=this.N,e=this.p,r=this.x,n=this.y;if(this.iteration+=1,this.iteration>1e4)return;let i=!0;for(let a=0;a<this.active.length;a++){const s=this.active[a];for(let i=0;i<t;i++){const t=n[i];for(let n=0;n<e;n++)t-=s!==n?r.get(i,n)*this.beta[n]:0;this.presid.set(i,s,t)}this.betast[s]=1/t*rt(r,this.presid,s);const o=this.beta[s],l=it(this.betast[s],this.lambda);Q()(l-o)>st&&(i=!1),this.beta[s]=l}for(let a=this.active.length-1;a>=0;a--){const t=this.active[a];Q()(this.beta[t])<st&&(this.active.splice(a,1),this.nonactive.push(t))}(!1===i||this.testActiveSet())&&this.iterate()},lt.prototype.predict=function(t){D()(t)&&(t=J()(t));return(0,U.Z)(t,this.beta)};var ut=function(t,e,r){if(!h())throw new TypeError("invalid input argument. The third argument must be a number primitive. Value: `"+r+"`");if(!v()(e))throw new TypeError("invalid input argument. The second argument must be array-like. Value: `"+e+"`");if(D()(t))t=J()(t);else if(!W()(t)){throw new TypeError("invalid input argument. The first argument must be a matrix or an array-of-arrays. Value: `"+t+"`")}return new lt(e,t,r)},ct=Object.defineProperty,ht=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,dt=(t,e,r)=>e in t?ct(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mt=(t,e)=>{for(var r in e||(e={}))pt.call(e,r)&&dt(t,r,e[r]);if(ht)for(var r of ht(e))ft.call(e,r)&&dt(t,r,e[r]);return t};let vt=0;const bt=({x:t,y:e,lambda:r,data:n,quantitative:i,intercept:a})=>{try{let s=n[e];s=x(s,!1,!0);const{matrix:o,predictors:l,categoricalStats:c,standardized:h}=j(t,n,i,a),p=new ut(o,s,r);if(a){let t=0;for(let e=1;e<p.beta.length;e++){const r=l[e-1];u()(i,r)?(p.beta[e]*=s.sigma/h[r].sigma,t+=p.beta[e]*h[r].mu):(p.beta[e]*=s.sigma/c[r].sigma,t+=p.beta[e]*c[r].mu)}p.beta[0]=s.mu-t}else for(let t=0;t<p.beta.length;t++){const e=l[t];u()(i,e)?p.beta[t]*=s.sigma/h[e].sigma:p.beta[t]*=s.sigma/c[e].sigma}return{predictors:l,result:p,yvalues:s}}catch(s){return{}}};class gt extends n.Component{constructor(t){var e;super(t),dt(this,"symbol"!=typeof(e="handlePredict")?e+"":e,(()=>{this.props.onPredict((t=>{const{matrix:e}=j(this.props.x,t,this.props.quantitative,this.props.intercept);let r=this.state.result.predict(e);r=b(r,this.state.yvalues.sigma);const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=t[this.props.y][i]-r[i];return{fitted:r,residuals:n}}),vt)})),vt+=1;const{x:r,y:n,lambda:i,data:a,quantitative:s,intercept:o}=t;this.state=mt(mt({},bt({x:r,y:n,lambda:i,data:a,quantitative:s,intercept:o})),t)}static getDerivedStateFromProps(t,e){if(t.data!==e.data||t.quantitative!==e.quantitative||t.x!==e.x||t.y!==e.y||t.intercept!==e.intercept||t.lambda!==e.lambda){const{x:e,y:r,lambda:n,data:i,quantitative:a,intercept:s}=t;return mt(mt({},bt({x:e,y:r,lambda:n,data:i,quantitative:a,intercept:s})),t)}return null}render(){const{y:t,intercept:e,lambda:r,onPredict:i,t:a}=this.props,{result:s,predictors:l}=this.state;return s?(0,c.isPrimitive)(r)?n.createElement("div",{style:{overflowX:"auto",width:"100%"}},n.createElement("span",{className:"title"},a("lasso-title",{y:t,lambda:r.toFixed(4),counter:vt})),((t,e,r,i)=>n.createElement(d.Z,{bordered:!0,size:"sm"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,i("predictor")),n.createElement("th",null,i("coefficient")))),n.createElement("tbody",null,e?n.createElement("tr",null,n.createElement("th",null,i("intercept")),n.createElement("td",null,r.beta[0].toFixed(6))):null,t.map(((t,i)=>n.createElement("tr",{key:i},n.createElement("th",null,t),n.createElement("td",null,r.beta[i+Number(e)].toFixed(6))))))))(l,e,s,a),n.createElement("p",null,s.testKKT()?a("kkt-satisfied"):a("kkt-not-satisfied")),i?n.createElement(f.Z,{tooltip:a("use-model-to-predict-tooltip")},n.createElement(p.Z,{variant:"secondary",size:"sm",onClick:this.handlePredict},this.props.t("use-model-to-predict"))):null):n.createElement(o.Z,{variant:"danger"},a("lambda-not-number")):n.createElement(o.Z,{variant:"danger"},a("missing-attributes"))}}gt.defaultProps={lambda:.001,intercept:!0,onPredict(){}},gt.propTypes={data:a().object.isRequired,y:a().string.isRequired,x:a().oneOfType([a().arrayOf(a().oneOfType([a().string,a().instanceOf(P.E)])),a().string,a().instanceOf(P.E)]).isRequired,quantitative:a().arrayOf(a().string).isRequired,lambda:a().number,intercept:a().bool,onPredict:a().func};var yt=(0,s.Z)("models")((0,T.W)(gt))},537941:function(t,e){e.Z=function(t,e){const r=t.shape[0],n=t.shape[1];let i=new Float64Array(r);for(let a=0;a<r;a++){let r=0;for(let i=0;i<n;i++)r+=t.get(a,i)*e[i];i[a]=r}return i}},30468:function(t,e,r){var n=r(89596),i=r.n(n),a=r(309765);e.Z=function(t,e){const r=i()(e);if(!i()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!(0,a.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const n=t.length,s=new Array(n);if(r){if(n!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(let r=0;r<n;r++)s[r]=t[r]-e[r]}else for(let i=0;i<n;i++)s[i]=t[i]-e;return s}},983817:function(t,e,r){var n=r(879224),i=r.n(n);e.Z=t=>{const e=[t.shape[1],t.shape[0]],r=[t.strides[1],t.strides[0]],n=t.offset,a=t.order;return i()("float64",t._buffer,e,r,n,a)}},770561:function(t,e,r){var n=r(72779),i=r.n(n),a=r(202784),s=r(247830),o=r(429658),l=r(552322);const u=a.forwardRef((({as:t,bsPrefix:e,variant:r,size:n,active:a,className:u,...c},h)=>{const p=(0,o.vE)(e,"btn"),[f,{tagName:d}]=(0,s.FT)({tagName:t,...c}),m=d;return(0,l.jsx)(m,{...f,...c,ref:h,className:i()(u,p,a&&"active",r&&`${p}-${r}`,n&&`${p}-${n}`,c.href&&c.disabled&&"disabled")})}));u.displayName="Button",u.defaultProps={variant:"primary",active:!1,disabled:!1},e.Z=u}}]);
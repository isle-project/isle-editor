"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[82],{615697:function(e,n,t){var a=(0,t(708717).Z)((function(){return t.e(6131).then(t.bind(t,102149))}));n.Z=a},479538:function(e,n,t){t.r(n);var a=t(202784),r=t(213980),u=t.n(r),l=t(690299),i=t.n(l),o=t(376699),s=t(219637),c=t(770561),m=t(26266),d=t(10863),f=t(830650),h=t(973777),b=t(287013),p=t.n(b),q=t(409961),E=t.n(q),g=t(77461),v=t(708579),Z=t(615697),w=t(473861),C=t(262600),H=t(267682),y=t(382617),z=t(10206),N=i()("isle:queue"),Q=(0,g.Z)("queue"),k=function(e){if(0===e.questions.length)return a.createElement("p",null,e.t("no-questions"));var n=e.session;return a.createElement(h.Z,{className:"queue-table",showPageSizeOptions:!1,data:e.questions,resizable:!1,sortable:!1,columns:[{Header:"Pic",id:"pic",accessor:function(e){for(var t=n.userList,a=0;a<t.length;a++)if(t[a].name===e.name)return t[a].picture;return""},Cell:function(e){return a.createElement("img",{className:"queue-table-pic",alt:"User thumbnail",src:n.server+"/thumbnail/"+e.value})},maxWidth:46,minWidth:46,style:{color:"darkslategrey"}},{Header:e.t("name"),id:"nameCol",accessor:"name",width:150,Cell:function(e){return a.createElement(v.Z,{tooltip:e.value+" ("+e.original.email+")"},a.createElement("span",{className:"queue-table-name"},e.value))}},{Header:e.t("cohort"),id:"cohortCol",accessor:function(e){for(var t=n.cohorts,a=0;a<t.length;a++)if(p()(t[a].members,e.email))return t[a].title;return""}},{Header:e.t("question"),id:"qCol",accessor:"value",width:350,style:{"white-space":"unset"}},{Header:e.t("chat"),Cell:function(n){var t="Queue_"+n.original.name;return a.createElement(Z.Z,{tooltip:e.t("queue-start-chat"),for:t})}},{Header:"",accessor:"remove",Cell:function(t){return a.createElement(v.Z,{placement:"left",tooltip:e.t("mark-and-remove")},a.createElement(c.Z,{variant:"secondary",size:"sm",onClick:function(){n.removeQuestionFromQueue(t.original)}},a.createElement("i",{className:"fas fa-check"})))},filterable:!1,width:45}],pageSize:8})},x=function(e){var n=e.id,t=e.draggable,r=e.show,u=e.onHide,l=e.onNewQuestion;n=n||Q();var i,h=(0,a.useContext)(H.Z),b=h.questions,p=(0,o.$)("internal/toolbar/queue").t,q=(0,a.useState)(""),g=q[0],v=q[1],x=(0,a.useState)(null),L=x[0],W=x[1],F=function(){N("Send the signal to enter the queue..."),h.log({id:n,type:y.bq,value:g},"members");var e={name:h.user.name,email:h.user.email,value:g};h.addQuestionToQueue(e)},S=function(e){e.target.className&&e.target.className.includes("queue-panel")&&u()};if((0,a.useEffect)((function(){var e;return h&&(N("We have a session, subscribe the component..."),e=h.subscribe((function(e,t){if(e===z.Kd){for(var a=t,r=null,u=0;u<a.length;u++)if(a[u].email===h.user.email){r=u;break}W(r)}t&&t.id===n&&t.type===y.bq&&h.isOwner()&&l()}))),function(){e&&e()}}),[n,l,h]),r){if(h.isOwner())return N("User is an owner..."),i=a.createElement(C.Z,{className:"queue-panel",tabIndex:0,role:"button",header:p("queue"),onHide:u,minimizable:!0,trapFocus:!0},a.createElement(k,{questions:h.questions,t:p,session:h,for:n})),t&&(i=a.createElement(w.Z,{bounds:"#Lesson",cancel:".queue-table",onEscape:S,resizable:!0,minWidth:300,minHeight:150},i)),i;var P=function(){v(""),u()};if(!E()(L)){var T="Queue_"+h.user.name;return i=a.createElement(C.Z,{className:"queue-panel",tabIndex:0,role:"button",header:p("queue"),onHide:P,minimizable:!0,trapFocus:!0},a.createElement("p",null,a.createElement(s.c,{i18nKey:"queue-status",ns:"Queue"},"Your question: ",a.createElement("i",null,{question:g}),a.createElement("br",null),"You are currently at position ",a.createElement("strong",null,{spot:L})," on the queue.",a.createElement("br",null),"There are ",a.createElement("strong",null,{size:h.questions.length})," individual(s) in the queue.")),a.createElement(Z.Z,{for:T,showTooltip:!1}),a.createElement(c.Z,{style:{marginLeft:10},size:"sm",onClick:function(){var e={name:h.user.name,email:h.user.email,value:g};h.removeQuestionFromQueue(e)}},p("remove-myself-from-queue"))),t&&(i=a.createElement(w.Z,{bounds:"#Lesson",onEscape:S,resizable:!0,minWidth:300,minHeight:150},i)),i}return i=a.createElement(C.Z,{className:"queue-panel",tabIndex:0,role:"button",header:p("queue"),onHide:P,minimizable:!0,trapFocus:!0},a.createElement("p",null,p("queue-prompt")),a.createElement(d.Z,null,a.createElement(f.Z,null,p("question")),a.createElement(m.Z,{type:"text",id:"queue_form",value:g,onChange:function(e){v(e.target.value)},onKeyPress:function(e){13===e.charCode&&g.length>0&&F()},width:500})),a.createElement(c.Z,{disabled:0===g.length,onClick:F},p("submit-question")),a.createElement("span",{style:{marginLeft:8}},p("queue-size",{n:b.length}))),t&&(i=a.createElement(w.Z,{bounds:"#Lesson",cancel:"#queue_form",onEscape:S,resizable:!0,minWidth:300,minHeight:150},i)),i}return null};x.defaultProps={draggable:!0,show:!0,onHide:function(){},onNewQuestion:function(){}},x.propTypes={draggable:u().bool,show:u().bool,onHide:u().func,onNewQuestion:u().func},n.default=x},77461:function(e,n){n.Z=function(e){var n=1;return function(){return e+"-"+(n+=1)}}}}]);
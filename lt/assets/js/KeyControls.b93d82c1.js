"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7659],{951596:function(e,t,n){n.r(t);var o=n(202784),i=n(928316),s=n(213980),r=n.n(s),a=n(690299),c=n.n(a),p=n(437069),d=n.n(p),m=n(777628),l=n.n(m),u=n(213939),h=n.n(u),f=n(294565),v=n(123103),y=Object.defineProperty,g=(e,t,n)=>(((e,t,n)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const E=c()("isle:key-controls"),k=/^[a-z]$/i,b=["input","textarea"];class C extends o.Component{constructor(e){super(e),g(this,"addListeners",(()=>{const e=d()(this.props.actions);if(E(`Add keydown event listeners for ${this.props.container?"container":"document"}: ${e.join(", ")}`),this.props.container)try{let e;e=(0,f.isPrimitive)(this.props.container)?document.querySelector(this.props.container):i.findDOMNode(this.props.container),e.addEventListener("keydown",this.triggerEvent)}catch(t){E(t.message)}else document.addEventListener("keydown",this.triggerDocEvent)})),g(this,"removeListeners",(e=>{const t=d()(this.props.actions);if(E(`Remove keydown event listeners for ${e?"container":"document"}: ${t.join(", ")}`),e)try{let e;e=(0,f.isPrimitive)(this.props.container)?document.querySelector(this.props.container):i.findDOMNode(this.props.container),e.removeEventListener("keydown",this.triggerEvent)}catch(n){E(n.message)}document.removeEventListener("keydown",this.triggerDocEvent)})),g(this,"triggerEvent",(e=>{let t=e.key;E(`Received key press for container: ${t}`);let n="";e.ctrlKey&&(n+="ctrl+"),e.shiftKey&&(t=l()(t),n+="shift+"),e.altKey&&(n+="alt+"),e.metaKey&&(n+="meta+");const o=this.props.actions[n+t];if(document.activeElement===this.props.container&&h()(o)){if(!n&&k.test(t)&&document.activeElement!==document.body){const e=document.activeElement;if(e&&(-1!==b.indexOf(e.tagName.toLowerCase())||e.isContentEditable)||"CANVAS"===e.tagName)return}e.preventDefault(),e.stopPropagation(),o(e)}})),g(this,"triggerDocEvent",(e=>{let t=e.key;E(`Received key press for document: ${t}`);let n="";e.ctrlKey&&(n+="ctrl+"),e.shiftKey&&(t=l()(t),n+="shift+"),e.altKey&&(n+="alt+"),e.metaKey&&(n+="meta+");const o=this.props.actions[n+t];if(h()(o)){if(!n&&k.test(t)&&document.activeElement!==document.body){const e=document.activeElement;if(e&&(-1!==b.indexOf(e.tagName.toLowerCase())||e.isContentEditable)||"CANVAS"===e.tagName)return}e.preventDefault(),e.stopPropagation(),o(e)}}))}componentDidMount(){E("Component has mounted..."),this.addListeners()}componentDidUpdate(e){this.props.container!==e.container&&(E("Container has changed, re-attach event listeners..."),this.removeListeners(e.container),this.addListeners())}componentWillUnmount(){E("Component has unmounted..."),this.removeListeners()}render(){return null}}C.defaultProps={actions:{},container:null},C.propTypes={actions:r().objectOf(r().func),container:r().oneOfType([r().object,r().element,r().string])},C.contextType=v.Z,t.default=C}}]);
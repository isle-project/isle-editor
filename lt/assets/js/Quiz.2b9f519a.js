"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1055],{510036:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe}});var i=n(497326),s=n(894578),o=n(55196),r=n(202784),a=n(213980),l=n.n(a),c=n(912895),u=n.n(c),d=n(198),p=n(318967),h=n.n(p),f=n(10863),m=n(423184),b=n(770561),v=n(398781),g=n(260952),y=n(690299),w=n.n(y),k=n(240054),S=n.n(k),Z=n(588703),E=n.n(Z),C=n(833022),q=n.n(C),N=n(623102),F=n.n(N),x=n(294565),z=n(605977),P=n.n(z),Q=n(996920),O=n(289676),B=n(532077),M=n(935602),R=n(830799),j=n(755543),I=n(42141),T=n(433733),H=n(476709),L=n(267682),D=n(137941),V=n(24551),A=n(382617),G=n(338664);var J=function(e){return q()(e)&&e.component},U=n(81982),W=Object.defineProperty,X=function(e,t,n){return function(e,t,n){t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},_=function(e){function t(){var t;return t=e.apply(this,arguments)||this,X((0,i.Z)(t),"clickHide",(function(){t.props.onHide()})),X((0,i.Z)(t),"handleClick",(function(){t.props.onSubmit(),t.props.onHide()})),t}return(0,s.Z)(t,e),t.prototype.render=function(){return r.createElement(U.Z,{onHide:this.clickHide,show:this.props.show,dialogClassName:"modal-w30"},r.createElement(U.Z.Header,{closeButton:!0},r.createElement(U.Z.Title,{as:"h4"},this.props.t("finish"),"?")),r.createElement(U.Z.Body,null,this.props.t("finish-prompt")),r.createElement(U.Z.Footer,null,r.createElement(b.Z,{variant:"secondary",onClick:this.clickHide},this.props.t("cancel")),r.createElement(b.Z,{variant:"warning",onClick:this.handleClick},this.props.t("confirm"))))},t}(r.Component);_.propTypes={onHide:l().func,onSubmit:l().func,show:l().bool.isRequired},_.defaultProps={onHide:function(){},onSubmit:function(){}};var K=_,Y=(n(697927),Object.defineProperty),$=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,se=function(e,t,n){return t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},oe=function(e,t){for(var n in t||(t={}))ne.call(t,n)&&se(e,n,t[n]);if(te)for(var i,s=(0,o.Z)(te(t));!(i=s()).done;){n=i.value;ie.call(t,n)&&se(e,n,t[n])}return e},re=function(e,t){return $(e,ee(t))},ae=function(e,t,n){return se(e,"symbol"!=typeof t?t+"":t,n),n},le=w()("isle:quiz"),ce=(0,V.Z)("quiz"),ue={header:{fontSize:24,bold:!0,margin:[0,0,0,10]},author:{fontSize:16,italics:!0,margin:[0,0,0,10],alignment:"center"},date:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},subheader:{fontSize:18,bold:!0,margin:[0,30,0,10]},question:{fontSize:15,margin:[0,10,0,0],italics:!0},boldTitle:{fontSize:14,margin:[0,5,0,5],bold:!0}},de=function(e){function t(t){var n;le("Instantiating quiz component..."),n=e.call(this,t)||this,ae((0,i.Z)(n),"toggleFinishModal",(function(){n.setState({showFinishModal:!n.state.showFinishModal})})),ae((0,i.Z)(n),"handleFinishClick",(function(){n.setState({counter:n.state.count},(function(){n.handleNextClick()}))})),ae((0,i.Z)(n),"handleNextClick",(function(){for(var e=n.quizBody.getElementsByClassName("submit-button"),t=0;t<e.length;t++)e[t].click();le("Display next question...");var i=n.state.questions[n.state.current],s=n.context;n.state.answered||s.log({id:i.props.id,type:A.g,value:!0}),i.props&&i.props.id&&n.state.selectedConfidence&&s.log({id:i.props.id+"_confidence",type:A.Wm,value:n.state.selectedConfidence}),n.props.onSubmit();var o={},r=n.state.counter;(r+=1)>=n.state.count?(le("No further questions should be shown..."),o.finished=!0,s.log({id:n.id,type:A.mr,value:!0}),n.props.onFinished()):(r===n.state.count-1&&(o.last=!0),o.current=n.sample()[0],le("Selected question at index "+o.current)),o.answered=!1,o.selectedConfidence=null,o.answerSelected=!1,o.counter=r,n.setState(o)})),ae((0,i.Z)(n),"markSelected",(function(){le("Mark answer as selected..."),n.setState({answerSelected:!0})})),ae((0,i.Z)(n),"handleSubmission",(function(e){var t,i,s=n.state.questions[n.state.current],o=n.state.answers.slice();if(s.props){if(E()(s.props.answers)&&void 0!==s.props.solution){t=s.props.answers[e].content;var r=s.props.solution;if(E()(r)){i="";for(var a=0;a<r.length;a++)i+=s.props.answers[r[a]],i+="; "}else i=s.props.answers[r].content}else if(E()(s.props.elements)){le("Create answer and solution string for <MatchListQuestion />"),t="",i="";for(var l=0;l<s.props.elements.length;l++){for(var c=s.props.elements[l],u=0;u<e.length;u++){var d=e[u];if(d.a===c.a){t+=d.a+":"+d.b+"; ";break}}i+=c.a+":"+c.b+"; "}}else if(E()(s.props.options)){t="",i="";for(var p=0;p<s.props.options.length;p++){var h=s.props.options[p],f=e[p];i+=h.text+"; ",t+=f.text+"; "}}else t=e,i=s.props.solution,E()(i)&&(t=t.join(", "),i=i.join(", "));o[n.state.current]={question:s.props?s.props.question:null,answer:t,solution:i,counter:n.state.counter}}n.setState({answered:!0,answers:o})})),ae((0,i.Z)(n),"handleConfidenceChange",(function(e){var t=e.target.value;le("Choosing confidence: "+t);var i=n.state.confidences.slice();i[n.state.current]=t,n.setState({selectedConfidence:t,confidences:i})})),ae((0,i.Z)(n),"toggleInstructorView",(function(){n.setState({showInstructorView:!n.state.showInstructorView})})),n.id=t.id||ce(t);var s=t.questions;t.questions||(s=[]);var o=null;if(s.length>0){var r=P()(0,s.length,1);n.sample=S().factory(r,{size:1,mutate:!0,replace:!1}),o=n.sample()[0]}return n.state={answers:new Array(s.length),answered:!1,confidences:new Array(s.length),current:o,count:t.count||s.length,counter:0,finished:!1,answerSelected:!1,last:!1,selectedConfidence:null,showInstructorView:!1,showFinishModal:!1,questions:[],questionIDs:[]},n}(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){if(e.questions&&e.questions.length!==t.questions.length){for(var n=e.questions.length,i=new Array(n),s=0;s<n;s++){var o=e.questions[s];o.props&&o.props.id?i[s]=o.props.id:i[s]=t.id+"-"+s}return{questions:e.questions,questionIDs:i}}return null};var n=t.prototype;return n.componentDidUpdate=function(e){if(le("Component did update..."),this.props.count!==e.count||this.props.questions&&this.props.questions.length!==e.questions.length){le("Resetting component...");var t=P()(0,this.props.questions.length,1);this.sample=S().factory(t,{size:1,mutate:!0}),this.setState({count:this.props.count||this.prop.questions.length})}},n.downloadResponsesFactory=function(e){var t=this;return function(){var n={content:[{text:t.props.t("answer-for",{id:t.id}),style:"header",alignment:"center"}],styles:ue},i=t.context;F()(i.user)||n.content.push({text:t.props.t("by")+" "+i.user.name+" ("+i.user.email+")",style:"author"});var s=new Date;n.content.push({text:s.toLocaleDateString()+" - "+s.toLocaleTimeString(),style:"date"});for(var o=0;o<e.length;o++){var r=e[o],a=r.question,l=r.answer,c=r.solution,d=r.confidence;a=(0,x.isPrimitive)(a)?a:h()(a),l=(0,x.isPrimitive)(l)?l:h()(l),c=(0,x.isPrimitive)(c)?c:h()(c),n.content.push({text:a,style:"question"}),n.content.push({text:t.props.t("answer")+":",style:"boldTitle"}),n.content.push({text:l,style:{color:l===c?"#3c763d":"#d9534f",margin:[0,0,0,10]}}),d&&(n.content.push({text:t.props.t("your-confidence")+":",style:"boldTitle"}),n.content.push({text:d})),n.content.push({text:t.props.t("solution")+":",style:"boldTitle"}),n.content.push({text:(0,x.isPrimitive)(c)?c:h()(c)})}u().createPdf(n).download("responses.pdf")}},n.renderScoreboard=function(){var e=this;if(le("Rendering scoreboard..."),!this.props.provideFeedback)return r.createElement("h3",null,this.props.t("quiz-finished"));for(var t=this.state.answers.slice(),n=0;n<t.length;n++)t[n]&&(t[n].confidence=this.state.confidences[n]);return t.sort((function(e,t){return e.counter>t.counter})),t=t.filter((function(e){return q()(e)})),r.createElement("div",null,r.createElement("p",null,this.props.duration?this.props.t("time-up"):this.props.t("quiz-finished"),this.props.t("summary-label"),":"),r.createElement("table",{className:"table table-bordered"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,this.props.t("question")),r.createElement("th",null,this.props.t("your-answer")),r.createElement("th",null,this.props.t("solution")),this.props.confidence?r.createElement("th",null,this.props.t("your-confidence")):null)),r.createElement("tbody",null,t.map((function(t,n){var i;i=t.answer===t.solution?"quiz-right-answer":"quiz-wrong-answer";var s=t.question;J(s)&&(s=(0,D.Z)(s));var o=t.answer;J(o)&&(o=(0,D.Z)(o));var a=t.solution;return J(a)&&(a=(0,D.Z)(a)),r.createElement("tr",{className:i,key:n},r.createElement("td",null,s),r.createElement("td",null,o),r.createElement("td",null,a),e.props.confidence?r.createElement("td",null,t.confidence):null)})))),this.props.downloadButton?r.createElement(b.Z,{onClick:this.downloadResponsesFactory(t)},this.props.t("download-pdf")):null)},n.renderQuestion=function(e,t){if(!e)return null;var n=e.props||{};switch(J(n.question)&&(le("Question property is an object, convert to JSX..."),n.question=(0,D.Z)(n.question)),e.component){case"Fragment":case"div":return(0,D.Z)(e);case"FreeTextQuestion":return r.createElement(O.Z,re(oe({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},n),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"MultipleChoiceQuestion":return r.createElement(B.Z,re(oe({disableSubmitNotification:!0,feedback:!1,provideFeedback:"none"},n),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"MatchListQuestion":return r.createElement(M.Z,re(oe({disableSubmitNotification:!0,feedback:!1,showSolution:!1},n),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"NumberQuestion":return r.createElement(R.Z,re(oe({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},n),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"OrderQuestion":return r.createElement(j.Z,re(oe({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},n),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"RangeQuestion":return r.createElement(I.Z,re(oe({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},n),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"SelectQuestion":return r.createElement(T.Z,re(oe({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},n),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));default:return r.createElement(e.type,re(oe(oe({},e.props),n),{disableSubmitNotification:!0,feedback:!1,provideFeedback:!1,onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}))}},n.renderConfidenceSurvey=function(){return this.props.confidence?r.createElement(g.Z,{className:"center",style:{width:"75%"}},r.createElement(f.Z,{className:"center"},r.createElement(v.Z.Label,null,this.props.t("confidence-prompt")),r.createElement("br",null),r.createElement(v.Z.Check,{type:"radio",label:this.props.t("guessed"),checked:"Guessed"===this.state.selectedConfidence,value:"Guessed",inline:!0,onClick:this.handleConfidenceChange})," ",r.createElement(v.Z.Check,{type:"radio",label:this.props.t("somewhat-sure"),checked:"Somewhat sure"===this.state.selectedConfidence,value:"Somewhat sure",inline:!0,onClick:this.handleConfidenceChange})," ",r.createElement(v.Z.Check,{type:"radio",label:this.props.t("confident"),checked:"Confident"===this.state.selectedConfidence,value:"Confident",inline:!0,onClick:this.handleConfidenceChange}))):null},n.renderFooterNodes=function(e,t){var n,i=this;return e.props&&(n=e.props.id),n||(n=this.id+"-"+t),r.Children.map(this.props.footerNodes,(function(e,t){return r.cloneElement(e,{id:e.props.id+"-footer-"+n,key:i.state.current+"-"+t})}))},n.render=function(){var e,t=this;if(le("Rendering component..."),e=!this.state.finished&&(this.state.answered||this.state.answerSelected||this.props.skippable),this.state.showInstructorView)return r.createElement(g.Z,{className:"quiz"},r.createElement(g.Z.Header,null,r.createElement("span",null,r.createElement("h3",{style:{display:"inline-block"}},this.props.t("instructor-view")),r.createElement(b.Z,{variant:"secondary",style:{float:"right"},onClick:this.toggleInstructorView},this.props.t("close-instructor-view")))),r.createElement(g.Z.Body,null,this.state.questions.map((function(e,n){var i=t.state.questionIDs[n];return r.createElement("div",{key:n},r.createElement("h3",null,t.props.t("question")," ",n+1,":"),t.renderQuestion(e,i),t.renderFooterNodes(e,n))}))),r.createElement(b.Z,{className:"quiz-button",variant:"secondary",onClick:this.toggleInstructorView},this.props.t("close-instructor-view")));var n=this.state.questions[this.state.current],i=this.state.questionIDs[this.state.current];return r.createElement(r.Fragment,null,this.props.duration?r.createElement(Q.Z,{invisible:!0,id:this.id,active:this.props.active,duration:this.props.duration,onTimeUp:function(){le("Time is up..."),t.context.log({id:t.id,type:A.mr,value:!0}),t.setState({finished:!0},(function(){t.props.onFinished()}))}}):null,r.createElement(g.Z,{className:"quiz"},r.createElement(g.Z.Header,null,this.state.finished?r.createElement("h3",null,this.props.t("answer-summary")):r.createElement("h3",null,this.props.t("question")," ",this.state.counter+1,"/",this.state.count)),r.createElement(g.Z.Body,null,r.createElement("div",{ref:function(e){t.quizBody=e}},this.state.finished?this.renderScoreboard():r.createElement("span",{key:this.state.current},this.renderQuestion(n,i)),this.state.finished?null:this.renderConfidenceSurvey(),n?this.renderFooterNodes(n):null,r.createElement(m.Z,{style:{float:"right"}},r.createElement(H.Z,{owner:!0,banner:null},r.createElement(b.Z,{className:"quiz-button",variant:"secondary",onClick:this.toggleInstructorView,style:{marginRight:10}},this.props.t("open-instructor-view"))),!this.props.showFinishButton&&!this.state.last||this.state.finished?null:r.createElement(b.Z,{style:{marginRight:10},className:"quiz-button",variant:"secondary",onClick:this.state.last?this.handleFinishClick:this.toggleFinishModal},this.props.finishLabel||this.props.t("finish-label")),e&&!this.state.last?r.createElement(b.Z,{className:"quiz-button",variant:"primary",onClick:this.handleNextClick,disabled:this.props.forceConfidence&&!this.state.selectedConfidence&&this.state.answerSelected},this.props.nextLabel||this.props.t("next-question")):null)))),r.createElement(K,{show:this.state.showFinishModal,onSubmit:this.handleFinishClick,onHide:this.toggleFinishModal,t:this.props.t}))},t}(r.Component);de.propTypes={confidence:l().bool,forceConfidence:l().bool,count:l().number,questions:l().array.isRequired,active:l().bool,duration:l().number,skippable:l().bool,footerNodes:l().array,nextLabel:l().string,provideFeedback:l().bool,showFinishButton:l().bool,finishLabel:l().string,downloadButton:l().bool,onFinished:l().func,onSubmit:l().func},de.defaultProps={confidence:!1,forceConfidence:!1,count:null,active:!0,duration:null,skippable:!0,footerNodes:[],nextLabel:null,provideFeedback:!0,showFinishButton:!1,finishLabel:null,downloadButton:!0,onFinished:function(){},onSubmit:function(){}},de.contextType=L.Z;var pe=(0,d.Z)("questions/quiz")((0,G.W)(de))},137941:function(e,t,n){var i=n(202784),s=n(690299),o=n.n(s),r=n(588703),a=n.n(r),l=n(833022),c=n.n(l),u=n(224008),d=n.n(u),p=n(837898),h=n(289676),f=n(532077),m=n(673613),b=n(935602),v=n(830799),g=n(755543),y=n(42141),w=n(433733),k=o()("isle:convert-json");t.Z=function e(t){k("Convert JSON "+t.component+" object to React element...");var n=d()(t.children);if(a()(n))for(var s=0;s<n.length;s++){var o=n[s];c()(o)&&(n[s]=e(o))}else c()(n)&&(n=e(n));var r=t.component;switch(r){case"Fragment":r=i.Fragment;break;case"TeX":r=p.Z;break;case"FreeTextQuestion":r=h.Z;break;case"MultipleChoiceMatrix":r=m.Z;break;case"MultipleChoiceQuestion":r=f.Z;break;case"MatchListQuestion":r=b.Z;break;case"NumberQuestion":r=v.Z;break;case"OrderQuestion":r=g.Z;break;case"RangeQuestion":r=y.Z;break;case"SelectQuestion":r=w.Z;break;default:r=t.component}var l=t.props||{};return(0,i.createElement)(r,l,n)}},783679:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(202784);function s(e){var t=(0,i.useRef)(null);return(0,i.useEffect)((function(){t.current=e})),t.current}},770561:function(e,t,n){var i=n(807896),s=n(231461),o=n(72779),r=n.n(o),a=n(202784),l=n(429658),c=n(482695),u=["bsPrefix","variant","size","active","className","block","type","as"],d=a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.variant,d=e.size,p=e.active,h=e.className,f=e.block,m=e.type,b=e.as,v=(0,s.Z)(e,u),g=(0,l.vE)(n,"btn"),y=r()(h,g,p&&"active",o&&g+"-"+o,f&&g+"-block",d&&g+"-"+d);if(v.href)return a.createElement(c.Z,(0,i.Z)({},v,{as:b,ref:t,className:r()(y,v.disabled&&"disabled")}));t&&(v.ref=t),m?v.type=m:b||(v.type="button");var w=b||"button";return a.createElement(w,(0,i.Z)({},v,{className:y}))}));d.displayName="Button",d.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=d},423184:function(e,t,n){var i=n(807896),s=n(231461),o=n(72779),r=n.n(o),a=n(202784),l=n(429658),c=["bsPrefix","size","toggle","vertical","className","as"],u=a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.size,u=e.toggle,d=e.vertical,p=e.className,h=e.as,f=void 0===h?"div":h,m=(0,s.Z)(e,c),b=(0,l.vE)(n,"btn-group"),v=b;return d&&(v=b+"-vertical"),a.createElement(f,(0,i.Z)({},m,{ref:t,className:r()(p,v,o&&b+"-"+o,u&&b+"-toggle")}))}));u.displayName="ButtonGroup",u.defaultProps={vertical:!1,toggle:!1,role:"group"},t.Z=u},318967:function(e){var t=function(e,t){return e+n(t)},n=function(e){return null===e||"boolean"==typeof e||void 0===e?"":"number"==typeof e?e.toString():"string"==typeof e?e:Array.isArray(e)?e.reduce(t,""):function(e){return Object.prototype.hasOwnProperty.call(e,"props")}(e)&&Object.prototype.hasOwnProperty.call(e.props,"children")?n(e.props.children):""};n.default=n,e.exports=n}}]);
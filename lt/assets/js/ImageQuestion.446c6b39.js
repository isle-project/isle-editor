"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2414],{134656:function(e,t,n){var a=(0,n(708717).Z)((function(){return n.e(112).then(n.bind(n,643549))}));t.Z=a},569904:function(e,t,n){var a=n(867855),i=n(202784),r=n(213980),l=n.n(r),o=Object.defineProperty,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=function(e,t,n){return t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},f=function(e){var t=e,n=t.children,r=function(e,t){var n={};for(var i in e)s.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&u)for(var r,l=(0,a.Z)(u(e));!(r=l()).done;)i=r.value,t.indexOf(i)<0&&c.call(e,i)&&(n[i]=e[i]);return n}(t,["children"]);return i.createElement("div",function(e,t){for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(u)for(var i,r=(0,a.Z)(u(t));!(i=r()).done;)n=i.value,c.call(t,n)&&d(e,n,t[n]);return e}({},r),n)};f.defaultProps={className:"",style:{}},f.propTypes={className:l().string,style:l().object},t.Z=f},615697:function(e,t,n){var a=(0,n(708717).Z)((function(){return n.e(6131).then(n.bind(n,102149))}));t.Z=a},870717:function(e,t,n){var a=(0,n(708717).Z)((function(){return Promise.all([n.e(532),n.e(4507)]).then(n.bind(n,552767))}));t.Z=a},723495:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var a=n(867855),i=n(202784),r=n(213980),l=n.n(r),o=n(690299),u=n.n(o),s=n(376699),c=n(457447),d=n(790817),f=n(770561),m=n(287013),p=n.n(m),b=n(24551),h=n(103824),g=n(891027),v=n(569904),y=n(301158),E=n(864892),Z=n(134656),k=n(615697),w=n(261398),N=n(269891),C=n(870717),O=n(267682),S=n(264797);var P=function(e){e.stopPropagation(),e.preventDefault()},q=n(23228),D=n(382617),j=n(10206),L=n(615558),R=Object.defineProperty,T=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,F=function(e,t,n){return t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},B=(0,b.Z)("image-question"),z=u()("isle:image-question"),U=/src="([^"]*)"/,H=function(e){var t=(0,i.useRef)(e.id||B(e)),n=(0,i.useContext)(O.Z),r=(0,s.$)("questions/image").t,l=(0,i.useRef)(null),o=(0,i.useState)(!1),u=o[0],m=o[1],b=n.currentUserActions,L=(0,q.Z)(b,t.current,D.Dm),R=(0,i.useState)(L),H=R[0],I=R[1],W=(0,i.useState)(0===e.hints.length),M=W[0],G=W[1],$=(0,i.useState)(!1),_=$[0],J=$[1],K=(0,i.useState)(!1),Q=K[0],V=K[1],X=(0,i.useCallback)((function(){z("Set submission to last action for question "+t.current+" if available...");var e=n.currentUserActions,a=(0,q.Z)(e,t.current,D.Dm);a&&a!==H&&(I(a),m(!0))}),[n,H]);(0,i.useEffect)((function(){var e=n.subscribe((function(e){e===j.u&&X()}));return function(){e()}}),[n,X]);var Y,ee=(0,i.useCallback)((function(e){I(e.target.result)}),[]),te=(0,i.useCallback)((function(){J(!_)}),[_]),ne=e.hints,ae=ne.length,ie=i.createElement(y.Z,{disabled:!u||!M,onClick:te,hasHints:ne.length>0}),re=(0,i.useCallback)((function(e){z("Logging hint..."),n.log({id:t.current,type:D.RG,value:e})}),[n]),le=(0,i.useCallback)((function(){n.addNotification({title:r("submitted"),message:r("answer-submitted"),level:"info"})}),[n,r]),oe=(0,i.useCallback)((function(){I(null)}),[]),ue=(0,i.useCallback)((function(){G(!0)}),[]),se=function(){(e.disableSubmitNotification||le(),e.onSubmit(),m(!0),H)?n.log({id:t.current,type:D.Dm,value:H}):document.getElementById(t.current+"-canvas").toBlob((function(e){(0,S.Z)(e).then((function(e){n.log({id:t.current,type:D.Dm,value:e}),I(e)}))}))};return Q||(Y=H?i.createElement("div",{className:"center",style:{maxWidth:600}},_?i.createElement(h.Z,{alt:r("model-solution"),src:e.solution,width:"50%",height:"auto",style:{border:"solid 1px gold"}}):i.createElement(h.Z,{alt:r("upload"),src:H,width:"50%",height:"auto"})):i.createElement(i.Fragment,null,i.createElement("div",{className:"image-question-dropzone",onDrop:function(e){e.stopPropagation(),e.preventDefault(),V(!0);var t=e.dataTransfer,n=new FileReader,a=null;if(t.items&&t.items.length>0){var i=t.items[0];"file"===i.kind?a=i.getAsFile():"string"===i.kind&&i.getAsString((function(e){if(p()(e,"<img")){var t=e.match(U);t&&(I(t[1]),V(!1))}else if(p()(e,"<thead")){var n=document.createElement("table");n.innerHTML=e,document.body.appendChild(n),(0,c.hi)(n,{backgroundColor:"white",style:{fontSize:12},width:600}).then((function(e){I(e),V(!1),n.remove()}))}else{var a=document.createElement("pre");a.innerHTML=e,document.body.appendChild(a),(0,c.hi)(a,{backgroundColor:"white",style:{fontSize:14}}).then((function(e){I(e),V(!1),a.remove()}))}}))}else t.files&&t.files.length>0&&(a=t.files[0]);a&&a&&(n.addEventListener("load",ee,!1),n.readAsDataURL(a))},onDragOver:P,onDragEnd:P},i.createElement("span",null,r("drop-image"))),i.createElement("p",{className:"center"},r("or")),i.createElement("input",{id:t.current+"-upload",className:"image-question-upload center",type:"file",accept:"image/*",onChange:function(){var e=new FileReader,t=l.current.files[0];e.addEventListener("load",ee,!1),e.readAsDataURL(t)},ref:l}),e.sketchpad?i.createElement(i.Fragment,null,i.createElement("p",{className:"center"},r("or")),i.createElement(w.Z,function(e,t){for(var n in t||(t={}))x.call(t,n)&&F(e,n,t[n]);if(T)for(var i,r=(0,a.Z)(T(t));!(i=r()).done;)n=i.value,A.call(t,n)&&F(e,n,t[n]);return e}({id:t.current,hideNavigationButtons:!0,hideSaveButtons:!0,hideTransmitButtons:!0,canvasWidth:900,canvasHeight:600},e.sketchpad))):null)),i.createElement(d.Z,{id:t.current,className:"image-question "+e.className,style:e.style},i.createElement(d.Z.Body,{className:"d-grid gap-2",style:{width:e.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},i.createElement("label",null,e.question),i.createElement(g.Z,{running:Q,width:256,height:128}),Y,e.feedback?i.createElement(N.Z,{vertical:!0,id:t.current+"_feedback",style:{position:"absolute",right:"4px",top:"4px"}}):null,i.createElement(v.Z,{buttonLabel:"Answers",id:t.current,info:D.Dm,data:{question:e.question,type:"image"},points:e.points}),i.createElement("div",{className:"image-question-toolbar"},ae>0?i.createElement(Z.Z,{onClick:re,hints:e.hints,placement:e.hintPlacement,onFinished:ue}):null,H?i.createElement(f.Z,{size:"sm",variant:"warning",onClick:oe},r("reset")):null,e.until&&n.startTime>e.until?i.createElement("span",{className:"title",style:{marginLeft:4}},r("question-closed")):i.createElement(E.Z,{className:"submit-button",variant:"primary",size:"sm",onClick:se,disabled:!H||Q},r(u?"resubmit":"submit")),e.solution?ie:null,e.chat?i.createElement(k.Z,{for:t.current}):null),i.createElement(C.Z,{for:t.current,points:e.points})))};H.defaultProps={question:"",hints:[],hintPlacement:"bottom",feedback:!0,chat:!1,disableSubmitNotification:!1,className:"",sketchpad:null,solution:null,until:null,points:10,style:{},onSubmit:function(){}},H.propTypes={question:l().oneOfType([l().string,l().node]),hintPlacement:l().string,hints:l().arrayOf(l().oneOfType([l().string,l().node])),feedback:l().bool,chat:l().bool,disableSubmitNotification:l().bool,className:l().string,sketchpad:l().object,solution:l().string,until:l().instanceOf(Date),points:l().number,style:l().object,onSubmit:l().func};var I=(0,L.W)(H)},301158:function(e,t,n){var a=(0,n(708717).Z)((function(){return n.e(8905).then(n.bind(n,804154))}));t.Z=a},264797:function(e,t){t.Z=function(e){var t=new(0,window.FileReader);return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))}},23228:function(e,t,n){var a=n(588703),i=n.n(a),r=n(830324),l=n.n(r);t.Z=function(e,t,n){if(l()(e)){var a=e[t];if(i()(a)&&(a=a.filter((function(e){return e.type===n}))).length>0)return a[0].value}return null}}}]);
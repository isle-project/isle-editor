"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[86588],{455253:function(t,e,s){s.r(e),s.d(e,{default:function(){return A}});var r=s(202784),a=s(213980),o=s.n(a),n=s(822736),i=s(872204);class l extends i.X{constructor(t,e,s){super(),this.matrix=t,this.rows=e,this.columns=s}}class h extends l{constructor(t){super(t,t.columns,t.rows)}set(t,e,s){return this.matrix.set(e,t,s),this}get(t,e){return this.matrix.get(e,t)}}var g=s(49909),c=s(70756),f=s(31845);class u{constructor(t,e={}){const{assumeSymmetric:s=!1}=e;if(!(t=c.Z.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r,a,o=t.columns,n=new i.Z(o,o),l=new Float64Array(o),h=new Float64Array(o),g=t,u=!1;if(u=!!s||t.isSymmetric(),u){for(r=0;r<o;r++)for(a=0;a<o;a++)n.set(r,a,g.get(r,a));!function(t,e,s,r){let a,o,n,i,l,h,g,c;for(l=0;l<t;l++)s[l]=r.get(t-1,l);for(i=t-1;i>0;i--){for(c=0,n=0,h=0;h<i;h++)c+=Math.abs(s[h]);if(0===c)for(e[i]=s[i-1],l=0;l<i;l++)s[l]=r.get(i-1,l),r.set(i,l,0),r.set(l,i,0);else{for(h=0;h<i;h++)s[h]/=c,n+=s[h]*s[h];for(a=s[i-1],o=Math.sqrt(n),a>0&&(o=-o),e[i]=c*o,n-=a*o,s[i-1]=a-o,l=0;l<i;l++)e[l]=0;for(l=0;l<i;l++){for(a=s[l],r.set(l,i,a),o=e[l]+r.get(l,l)*a,h=l+1;h<=i-1;h++)o+=r.get(h,l)*s[h],e[h]+=r.get(h,l)*a;e[l]=o}for(a=0,l=0;l<i;l++)e[l]/=n,a+=e[l]*s[l];for(g=a/(n+n),l=0;l<i;l++)e[l]-=g*s[l];for(l=0;l<i;l++){for(a=s[l],o=e[l],h=l;h<=i-1;h++)r.set(h,l,r.get(h,l)-(a*e[h]+o*s[h]));s[l]=r.get(i-1,l),r.set(i,l,0)}}s[i]=n}for(i=0;i<t-1;i++){if(r.set(t-1,i,r.get(i,i)),r.set(i,i,1),n=s[i+1],0!==n){for(h=0;h<=i;h++)s[h]=r.get(h,i+1)/n;for(l=0;l<=i;l++){for(o=0,h=0;h<=i;h++)o+=r.get(h,i+1)*r.get(h,l);for(h=0;h<=i;h++)r.set(h,l,r.get(h,l)-o*s[h])}}for(h=0;h<=i;h++)r.set(h,i+1,0)}for(l=0;l<t;l++)s[l]=r.get(t-1,l),r.set(t-1,l,0);r.set(t-1,t-1,1),e[0]=0}(o,h,l,n),function(t,e,s,r){let a,o,n,i,l,h,g,c,u,m,d,p,b,M,w,v,x;for(n=1;n<t;n++)e[n-1]=e[n];e[t-1]=0;let E=0,S=0,y=Number.EPSILON;for(h=0;h<t;h++){for(S=Math.max(S,Math.abs(s[h])+Math.abs(e[h])),g=h;g<t&&!(Math.abs(e[g])<=y*S);)g++;if(g>h){x=0;do{for(x+=1,a=s[h],c=(s[h+1]-a)/(2*e[h]),u=(0,f.G)(c,1),c<0&&(u=-u),s[h]=e[h]/(c+u),s[h+1]=e[h]*(c+u),m=s[h+1],o=a-s[h],n=h+2;n<t;n++)s[n]-=o;for(E+=o,c=s[g],d=1,p=d,b=d,M=e[h+1],w=0,v=0,n=g-1;n>=h;n--)for(b=p,p=d,v=w,a=d*e[n],o=d*c,u=(0,f.G)(c,e[n]),e[n+1]=w*u,w=e[n]/u,d=c/u,c=d*s[n]-w*a,s[n+1]=o+w*(d*a+w*s[n]),l=0;l<t;l++)o=r.get(l,n+1),r.set(l,n+1,w*r.get(l,n)+d*o),r.set(l,n,d*r.get(l,n)-w*o);c=-w*v*b*M*e[h]/m,e[h]=w*c,s[h]=d*c}while(Math.abs(e[h])>y*S)}s[h]=s[h]+E,e[h]=0}for(n=0;n<t-1;n++){for(l=n,c=s[n],i=n+1;i<t;i++)s[i]<c&&(l=i,c=s[i]);if(l!==n)for(s[l]=s[n],s[n]=c,i=0;i<t;i++)c=r.get(i,n),r.set(i,n,r.get(i,l)),r.set(i,l,c)}}(o,h,l,n)}else{let t=new i.Z(o,o),e=new Float64Array(o);for(a=0;a<o;a++)for(r=0;r<o;r++)t.set(r,a,g.get(r,a));!function(t,e,s,r){let a,o,n,i,l,h,g,c=0,f=t-1;for(h=c+1;h<=f-1;h++){for(g=0,i=h;i<=f;i++)g+=Math.abs(e.get(i,h-1));if(0!==g){for(n=0,i=f;i>=h;i--)s[i]=e.get(i,h-1)/g,n+=s[i]*s[i];for(o=Math.sqrt(n),s[h]>0&&(o=-o),n-=s[h]*o,s[h]=s[h]-o,l=h;l<t;l++){for(a=0,i=f;i>=h;i--)a+=s[i]*e.get(i,l);for(a/=n,i=h;i<=f;i++)e.set(i,l,e.get(i,l)-a*s[i])}for(i=0;i<=f;i++){for(a=0,l=f;l>=h;l--)a+=s[l]*e.get(i,l);for(a/=n,l=h;l<=f;l++)e.set(i,l,e.get(i,l)-a*s[l])}s[h]=g*s[h],e.set(h,h-1,g*o)}}for(i=0;i<t;i++)for(l=0;l<t;l++)r.set(i,l,i===l?1:0);for(h=f-1;h>=c+1;h--)if(0!==e.get(h,h-1)){for(i=h+1;i<=f;i++)s[i]=e.get(i,h-1);for(l=h;l<=f;l++){for(o=0,i=h;i<=f;i++)o+=s[i]*r.get(i,l);for(o=o/s[h]/e.get(h,h-1),i=h;i<=f;i++)r.set(i,l,r.get(i,l)+o*s[i])}}}(o,t,e,n),function(t,e,s,r,a){let o,n,i,l,h,g,c,f,u,d,p,b,M,w,v,x=t-1,E=0,S=t-1,y=Number.EPSILON,V=0,C=0,Z=0,N=0,R=0,U=0,k=0,F=0;for(o=0;o<t;o++)for((o<E||o>S)&&(s[o]=a.get(o,o),e[o]=0),n=Math.max(o-1,0);n<t;n++)C+=Math.abs(a.get(o,n));for(;x>=E;){for(l=x;l>E&&(U=Math.abs(a.get(l-1,l-1))+Math.abs(a.get(l,l)),0===U&&(U=C),!(Math.abs(a.get(l,l-1))<y*U));)l--;if(l===x)a.set(x,x,a.get(x,x)+V),s[x]=a.get(x,x),e[x]=0,x--,F=0;else if(l===x-1){if(c=a.get(x,x-1)*a.get(x-1,x),Z=(a.get(x-1,x-1)-a.get(x,x))/2,N=Z*Z+c,k=Math.sqrt(Math.abs(N)),a.set(x,x,a.get(x,x)+V),a.set(x-1,x-1,a.get(x-1,x-1)+V),f=a.get(x,x),N>=0){for(k=Z>=0?Z+k:Z-k,s[x-1]=f+k,s[x]=s[x-1],0!==k&&(s[x]=f-c/k),e[x-1]=0,e[x]=0,f=a.get(x,x-1),U=Math.abs(f)+Math.abs(k),Z=f/U,N=k/U,R=Math.sqrt(Z*Z+N*N),Z/=R,N/=R,n=x-1;n<t;n++)k=a.get(x-1,n),a.set(x-1,n,N*k+Z*a.get(x,n)),a.set(x,n,N*a.get(x,n)-Z*k);for(o=0;o<=x;o++)k=a.get(o,x-1),a.set(o,x-1,N*k+Z*a.get(o,x)),a.set(o,x,N*a.get(o,x)-Z*k);for(o=E;o<=S;o++)k=r.get(o,x-1),r.set(o,x-1,N*k+Z*r.get(o,x)),r.set(o,x,N*r.get(o,x)-Z*k)}else s[x-1]=f+Z,s[x]=f+Z,e[x-1]=k,e[x]=-k;x-=2,F=0}else{if(f=a.get(x,x),u=0,c=0,l<x&&(u=a.get(x-1,x-1),c=a.get(x,x-1)*a.get(x-1,x)),10===F){for(V+=f,o=E;o<=x;o++)a.set(o,o,a.get(o,o)-f);U=Math.abs(a.get(x,x-1))+Math.abs(a.get(x-1,x-2)),f=u=.75*U,c=-.4375*U*U}if(30===F&&(U=(u-f)/2,U=U*U+c,U>0)){for(U=Math.sqrt(U),u<f&&(U=-U),U=f-c/((u-f)/2+U),o=E;o<=x;o++)a.set(o,o,a.get(o,o)-U);V+=U,f=u=c=.964}for(F+=1,h=x-2;h>=l&&(k=a.get(h,h),R=f-k,U=u-k,Z=(R*U-c)/a.get(h+1,h)+a.get(h,h+1),N=a.get(h+1,h+1)-k-R-U,R=a.get(h+2,h+1),U=Math.abs(Z)+Math.abs(N)+Math.abs(R),Z/=U,N/=U,R/=U,h!==l)&&!(Math.abs(a.get(h,h-1))*(Math.abs(N)+Math.abs(R))<y*(Math.abs(Z)*(Math.abs(a.get(h-1,h-1))+Math.abs(k)+Math.abs(a.get(h+1,h+1)))));)h--;for(o=h+2;o<=x;o++)a.set(o,o-2,0),o>h+2&&a.set(o,o-3,0);for(i=h;i<=x-1&&(w=i!==x-1,i!==h&&(Z=a.get(i,i-1),N=a.get(i+1,i-1),R=w?a.get(i+2,i-1):0,f=Math.abs(Z)+Math.abs(N)+Math.abs(R),0!==f&&(Z/=f,N/=f,R/=f)),0!==f);i++)if(U=Math.sqrt(Z*Z+N*N+R*R),Z<0&&(U=-U),0!==U){for(i!==h?a.set(i,i-1,-U*f):l!==h&&a.set(i,i-1,-a.get(i,i-1)),Z+=U,f=Z/U,u=N/U,k=R/U,N/=Z,R/=Z,n=i;n<t;n++)Z=a.get(i,n)+N*a.get(i+1,n),w&&(Z+=R*a.get(i+2,n),a.set(i+2,n,a.get(i+2,n)-Z*k)),a.set(i,n,a.get(i,n)-Z*f),a.set(i+1,n,a.get(i+1,n)-Z*u);for(o=0;o<=Math.min(x,i+3);o++)Z=f*a.get(o,i)+u*a.get(o,i+1),w&&(Z+=k*a.get(o,i+2),a.set(o,i+2,a.get(o,i+2)-Z*R)),a.set(o,i,a.get(o,i)-Z),a.set(o,i+1,a.get(o,i+1)-Z*N);for(o=E;o<=S;o++)Z=f*r.get(o,i)+u*r.get(o,i+1),w&&(Z+=k*r.get(o,i+2),r.set(o,i+2,r.get(o,i+2)-Z*R)),r.set(o,i,r.get(o,i)-Z),r.set(o,i+1,r.get(o,i+1)-Z*N)}}}if(0===C)return;for(x=t-1;x>=0;x--)if(Z=s[x],N=e[x],0===N)for(l=x,a.set(x,x,1),o=x-1;o>=0;o--){for(c=a.get(o,o)-Z,R=0,n=l;n<=x;n++)R+=a.get(o,n)*a.get(n,x);if(e[o]<0)k=c,U=R;else if(l=o,0===e[o]?a.set(o,x,0!==c?-R/c:-R/(y*C)):(f=a.get(o,o+1),u=a.get(o+1,o),N=(s[o]-Z)*(s[o]-Z)+e[o]*e[o],g=(f*U-k*R)/N,a.set(o,x,g),a.set(o+1,x,Math.abs(f)>Math.abs(k)?(-R-c*g)/f:(-U-u*g)/k)),g=Math.abs(a.get(o,x)),y*g*g>1)for(n=o;n<=x;n++)a.set(n,x,a.get(n,x)/g)}else if(N<0)for(l=x-1,Math.abs(a.get(x,x-1))>Math.abs(a.get(x-1,x))?(a.set(x-1,x-1,N/a.get(x,x-1)),a.set(x-1,x,-(a.get(x,x)-Z)/a.get(x,x-1))):(v=m(0,-a.get(x-1,x),a.get(x-1,x-1)-Z,N),a.set(x-1,x-1,v[0]),a.set(x-1,x,v[1])),a.set(x,x-1,0),a.set(x,x,1),o=x-2;o>=0;o--){for(d=0,p=0,n=l;n<=x;n++)d+=a.get(o,n)*a.get(n,x-1),p+=a.get(o,n)*a.get(n,x);if(c=a.get(o,o)-Z,e[o]<0)k=c,R=d,U=p;else if(l=o,0===e[o]?(v=m(-d,-p,c,N),a.set(o,x-1,v[0]),a.set(o,x,v[1])):(f=a.get(o,o+1),u=a.get(o+1,o),b=(s[o]-Z)*(s[o]-Z)+e[o]*e[o]-N*N,M=2*(s[o]-Z)*N,0===b&&0===M&&(b=y*C*(Math.abs(c)+Math.abs(N)+Math.abs(f)+Math.abs(u)+Math.abs(k))),v=m(f*R-k*d+N*p,f*U-k*p-N*d,b,M),a.set(o,x-1,v[0]),a.set(o,x,v[1]),Math.abs(f)>Math.abs(k)+Math.abs(N)?(a.set(o+1,x-1,(-d-c*a.get(o,x-1)+N*a.get(o,x))/f),a.set(o+1,x,(-p-c*a.get(o,x)-N*a.get(o,x-1))/f)):(v=m(-R-u*a.get(o,x-1),-U-u*a.get(o,x),k,N),a.set(o+1,x-1,v[0]),a.set(o+1,x,v[1]))),g=Math.max(Math.abs(a.get(o,x-1)),Math.abs(a.get(o,x))),y*g*g>1)for(n=o;n<=x;n++)a.set(n,x-1,a.get(n,x-1)/g),a.set(n,x,a.get(n,x)/g)}for(o=0;o<t;o++)if(o<E||o>S)for(n=o;n<t;n++)r.set(o,n,a.get(o,n));for(n=t-1;n>=E;n--)for(o=E;o<=S;o++){for(k=0,i=E;i<=Math.min(n,S);i++)k+=r.get(o,i)*a.get(i,n);r.set(o,n,k)}}(o,h,l,n,t)}this.n=o,this.e=h,this.d=l,this.V=n}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,s=this.n,r=this.e,a=this.d,o=new i.Z(s,s);for(t=0;t<s;t++){for(e=0;e<s;e++)o.set(t,e,0);o.set(t,t,a[t]),r[t]>0?o.set(t,t+1,r[t]):r[t]<0&&o.set(t,t-1,r[t])}return o}}function m(t,e,s,r){let a,o;return Math.abs(s)>Math.abs(r)?(a=r/s,o=s+a*r,[(t+a*e)/o,(e-a*t)/o]):(a=s/r,o=r+a*s,[(a*t+e)/o,(a*e-t)/o])}var d=s(835042);class p{constructor(t,e={}){t=c.Z.checkMatrix(t);let{Y:s}=e;const{scaleScores:r=!1,maxIterations:a=1e3,terminationCriteria:o=1e-10}=e;let n;if(s){if(s=(0,d.N)(s)&&"number"==typeof s[0]?i.Z.columnVector(s):c.Z.checkMatrix(s),s.rows!==t.rows)throw new Error("Y should have the same number of rows as X");n=s.getColumnVector(0)}else n=t.getColumnVector(0);let l,h,g,f,u=1;for(let i=0;i<a&&u>o;i++)g=t.transpose().mmul(n).div(n.transpose().mmul(n).get(0,0)),g=g.div(g.norm()),l=t.mmul(g).div(g.transpose().mmul(g).get(0,0)),i>0&&(u=l.clone().sub(f).pow(2).sum()),f=l.clone(),s?(h=s.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),h=h.div(h.norm()),n=s.mmul(h).div(h.transpose().mmul(h).get(0,0))):n=l;if(s){let e=t.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));e=e.div(e.norm());let r=t.clone().sub(l.clone().mmul(e.transpose())),a=n.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),o=s.clone().sub(l.clone().mulS(a.get(0,0)).mmul(h.transpose()));this.t=l,this.p=e.transpose(),this.w=g.transpose(),this.q=h,this.u=n,this.s=l.transpose().mmul(l),this.xResidual=r,this.yResidual=o,this.betas=a}else this.w=g.transpose(),this.s=l.transpose().mmul(l).sqrt(),this.t=r?l.clone().div(this.s.get(0,0)):l,this.xResidual=t.sub(l.mmul(g.transpose()))}}class b{constructor(t,e={}){if(!0===t){const t=e;return this.center=t.center,this.scale=t.scale,this.means=t.means,this.stdevs=t.stdevs,this.U=i.Z.checkMatrix(t.U),this.S=t.S,this.R=t.R,void(this.excludedFeatures=t.excludedFeatures||[])}t=new i.Z(t);const{isCovarianceMatrix:s=!1,method:r="SVD",nCompNIPALS:a=2,center:o=!0,scale:n=!1,ignoreZeroVariance:l=!1}=e;if(this.center=o,this.scale=n,this.means=null,this.stdevs=null,this.excludedFeatures=[],s)this._computeFromCovarianceMatrix(t);else switch(this._adjust(t,l),r){case"covarianceMatrix":{const e=new h(t).mmul(t).div(t.rows-1);this._computeFromCovarianceMatrix(e);break}case"NIPALS":this._computeWithNIPALS(t,a);break;case"SVD":{const e=new g.Z(t,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=e.rightSingularVectors;const s=e.diagonal,r=[];for(const a of s)r.push(a*a/(t.rows-1));this.S=r;break}default:throw new Error(`unknown method: ${r}`)}}static load(t){if("string"!=typeof t.name)throw new TypeError("model must have a name property");if("PCA"!==t.name)throw new RangeError(`invalid model: ${t.name}`);return new b(!0,t)}predict(t,e={}){const{nComponents:s=this.U.columns}=e;if(t=new i.Z(t),this.center&&(t.subRowVector(this.means),this.scale)){for(let e of this.excludedFeatures)t.removeColumn(e);t.divRowVector(this.stdevs)}let r=t.mmul(this.U);return r.subMatrix(0,r.rows-1,0,s-1)}invert(t){let e=(t=i.Z.checkMatrix(t)).mmul(this.U.transpose());return this.center&&(this.scale&&e.mulRowVector(this.stdevs),e.addRowVector(this.means)),e}getExplainedVariance(){let t=0;for(const e of this.S)t+=e;return this.S.map((e=>e/t))}getCumulativeVariance(){let t=this.getExplainedVariance();for(let e=1;e<t.length;e++)t[e]+=t[e-1];return t}getEigenvectors(){return this.U}getEigenvalues(){return this.S}getStandardDeviations(){return this.S.map((t=>Math.sqrt(t)))}getLoadings(){return this.U.transpose()}toJSON(){return{name:"PCA",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S,excludedFeatures:this.excludedFeatures}}_adjust(t,e){if(this.center){const s=t.mean("column"),r=this.scale?t.standardDeviation("column",{mean:s}):null;if(this.means=s,t.subRowVector(s),this.scale){for(let s=0;s<r.length;s++)if(0===r[s]){if(!e)throw new RangeError(`Cannot scale the dataset (standard deviation is zero at index ${s}`);t.removeColumn(s),r.splice(s,1),this.excludedFeatures.push(s),s--}this.stdevs=r,t.divRowVector(r)}}}_computeFromCovarianceMatrix(t){const e=new u(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix,this.U.flipRows(),this.S=e.realEigenvalues,this.S.reverse()}_computeWithNIPALS(t,e){this.U=new i.Z(e,t.columns),this.S=[];let s=t;for(let r=0;r<e;r++){let t=new p(s);this.U.setRow(r,t.w.transpose()),this.S.push(Math.pow(t.s.get(0,0),2)),s=t.xResidual}this.U=this.U.transpose()}}var M=s(198),w=s(257457),v=s(605977),x=s.n(v),E=s(46739),S=s(741082),y=s(55902),V=Object.defineProperty,C=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,R=(t,e,s)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,U=(t,e)=>{for(var s in e||(e={}))Z.call(e,s)&&R(t,s,e[s]);if(C)for(var s of C(e))N.call(e,s)&&R(t,s,e[s]);return t};const k=({data:t,variables:e,scale:s,center:r,noComponents:a})=>{try{const o=[],n=t[e[0]].length;for(let s=0;s<n;s++){const r=[];let a=!1;for(let o=0;o<e.length;o++){const n=t[e[o]][s];if(!(0,y.Z)(n)){a=!0;break}r.push(n)}a||o.push(r)}const i=new b(o,{center:r,scale:s}),l=i.predict(o,{noComponents:a});return{pca:i,components:l}}catch(o){return{}}};class F extends r.Component{constructor(t){super(t);const{data:e,variables:s,scale:r,center:a,noComponents:o}=t,{pca:n,components:i}=k({data:e,variables:s,scale:r,center:a,noComponents:o});this.state=U({pca:n,components:i},t),n&&t.onResult(this.state.pca,this.state.components)}static getDerivedStateFromProps(t,e){if(t.data!==e.data||t.variables!==e.variables){const{data:e,variables:s,scale:r,center:a,noComponents:o}=t,n=U(U({},k({data:e,variables:s,scale:r,center:a,noComponents:o})),t);return n.pca&&t.onResult(n.pca,n.components),n}return null}render(){const{pca:t}=this.state,{t:e}=this.props;if(!t)return r.createElement(n.Z,{variant:"danger"},e("missing-attributes"));const s=t.getStandardDeviations(),a=t.getExplainedVariance(),o=t.getCumulativeVariance(),i={x:x()(0,a.length,1),y:a,type:"scatter",name:e("proportion-of-variance")};return r.createElement("div",{style:{overflowX:"auto",width:"100%"}},r.createElement("span",{className:"title"},e("pca-summary")),((t,e,s,a)=>r.createElement(w.Z,{bordered:!0,size:"sm"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null),r.createElement("th",null,a("standard-deviation")),r.createElement("th",null,a("proportion-of-variance")),r.createElement("th",null,a("cumulative-variance")))),r.createElement("tbody",null,t.map(((t,a)=>r.createElement("tr",{key:a},r.createElement("th",null," ",`PC${a+1}`," "),r.createElement("td",null," ",t.toFixed(3)," "),r.createElement("td",null," ",e[a].toFixed(3)," "),r.createElement("td",null," ",s[a].toFixed(3)," ")))))))(s,a,o,e),r.createElement(E.Z,{editable:!0,data:[i],layout:{xaxis:{title:e("principal-component")},yaxis:{title:e("explained-proportion")}}}))}}F.defaultProps={center:!0,scale:!1,noComponents:0,onResult(){}},F.propTypes={data:o().object.isRequired,variables:o().arrayOf(o().string).isRequired,center:o().bool,scale:o().bool,noComponents:o().number,onResult:o().func};var A=(0,M.Z)("models")((0,S.W)(F))},49909:function(t,e,s){s.d(e,{Z:function(){return n}});var r=s(872204),a=s(70756),o=s(31845);class n{constructor(t,e={}){if((t=a.Z.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let s=t.rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:l=!0,autoTranspose:h=!1}=e;let g,c=Boolean(i),f=Boolean(l),u=!1;if(s<n)if(h){g=t.transpose(),s=g.rows,n=g.columns,u=!0;let e=c;c=f,f=e}else g=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else g=t.clone();let m=Math.min(s,n),d=Math.min(s+1,n),p=new Float64Array(d),b=new r.Z(s,m),M=new r.Z(n,n),w=new Float64Array(n),v=new Float64Array(s),x=new Float64Array(d);for(let r=0;r<d;r++)x[r]=r;let E=Math.min(s-1,n),S=Math.max(0,Math.min(n-2,s)),y=Math.max(E,S);for(let r=0;r<y;r++){if(r<E){p[r]=0;for(let t=r;t<s;t++)p[r]=(0,o.G)(p[r],g.get(t,r));if(0!==p[r]){g.get(r,r)<0&&(p[r]=-p[r]);for(let t=r;t<s;t++)g.set(t,r,g.get(t,r)/p[r]);g.set(r,r,g.get(r,r)+1)}p[r]=-p[r]}for(let t=r+1;t<n;t++){if(r<E&&0!==p[r]){let e=0;for(let a=r;a<s;a++)e+=g.get(a,r)*g.get(a,t);e=-e/g.get(r,r);for(let a=r;a<s;a++)g.set(a,t,g.get(a,t)+e*g.get(a,r))}w[t]=g.get(r,t)}if(c&&r<E)for(let t=r;t<s;t++)b.set(t,r,g.get(t,r));if(r<S){w[r]=0;for(let t=r+1;t<n;t++)w[r]=(0,o.G)(w[r],w[t]);if(0!==w[r]){w[r+1]<0&&(w[r]=0-w[r]);for(let t=r+1;t<n;t++)w[t]/=w[r];w[r+1]+=1}if(w[r]=-w[r],r+1<s&&0!==w[r]){for(let t=r+1;t<s;t++)v[t]=0;for(let t=r+1;t<s;t++)for(let e=r+1;e<n;e++)v[t]+=w[e]*g.get(t,e);for(let t=r+1;t<n;t++){let e=-w[t]/w[r+1];for(let a=r+1;a<s;a++)g.set(a,t,g.get(a,t)+e*v[a])}}if(f)for(let t=r+1;t<n;t++)M.set(t,r,w[t])}}let V=Math.min(n,s+1);if(E<n&&(p[E]=g.get(E,E)),s<V&&(p[V-1]=0),S+1<V&&(w[S]=g.get(S,V-1)),w[V-1]=0,c){for(let t=E;t<m;t++){for(let e=0;e<s;e++)b.set(e,t,0);b.set(t,t,1)}for(let t=E-1;t>=0;t--)if(0!==p[t]){for(let e=t+1;e<m;e++){let r=0;for(let a=t;a<s;a++)r+=b.get(a,t)*b.get(a,e);r=-r/b.get(t,t);for(let a=t;a<s;a++)b.set(a,e,b.get(a,e)+r*b.get(a,t))}for(let e=t;e<s;e++)b.set(e,t,-b.get(e,t));b.set(t,t,1+b.get(t,t));for(let e=0;e<t-1;e++)b.set(e,t,0)}else{for(let e=0;e<s;e++)b.set(e,t,0);b.set(t,t,1)}}if(f)for(let r=n-1;r>=0;r--){if(r<S&&0!==w[r])for(let t=r+1;t<n;t++){let e=0;for(let s=r+1;s<n;s++)e+=M.get(s,r)*M.get(s,t);e=-e/M.get(r+1,r);for(let s=r+1;s<n;s++)M.set(s,t,M.get(s,t)+e*M.get(s,r))}for(let t=0;t<n;t++)M.set(t,r,0);M.set(r,r,1)}let C=V-1,Z=0,N=Number.EPSILON;for(;V>0;){let t,e;for(t=V-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+N*Math.abs(p[t]+Math.abs(p[t+1]));if(Math.abs(w[t])<=e||Number.isNaN(w[t])){w[t]=0;break}}if(t===V-2)e=4;else{let s;for(s=V-1;s>=t&&s!==t;s--){let e=(s!==V?Math.abs(w[s]):0)+(s!==t+1?Math.abs(w[s-1]):0);if(Math.abs(p[s])<=N*e){p[s]=0;break}}s===t?e=3:s===V-1?e=1:(e=2,t=s)}switch(t++,e){case 1:{let e=w[V-2];w[V-2]=0;for(let s=V-2;s>=t;s--){let r=(0,o.G)(p[s],e),a=p[s]/r,i=e/r;if(p[s]=r,s!==t&&(e=-i*w[s-1],w[s-1]=a*w[s-1]),f)for(let t=0;t<n;t++)r=a*M.get(t,s)+i*M.get(t,V-1),M.set(t,V-1,-i*M.get(t,s)+a*M.get(t,V-1)),M.set(t,s,r)}break}case 2:{let e=w[t-1];w[t-1]=0;for(let r=t;r<V;r++){let a=(0,o.G)(p[r],e),n=p[r]/a,i=e/a;if(p[r]=a,e=-i*w[r],w[r]=n*w[r],c)for(let e=0;e<s;e++)a=n*b.get(e,r)+i*b.get(e,t-1),b.set(e,t-1,-i*b.get(e,r)+n*b.get(e,t-1)),b.set(e,r,a)}break}case 3:{const e=Math.max(Math.abs(p[V-1]),Math.abs(p[V-2]),Math.abs(w[V-2]),Math.abs(p[t]),Math.abs(w[t])),r=p[V-1]/e,a=p[V-2]/e,i=w[V-2]/e,l=p[t]/e,h=w[t]/e,g=((a+r)*(a-r)+i*i)/2,u=r*i*(r*i);let m=0;0===g&&0===u||(m=g<0?0-Math.sqrt(g*g+u):Math.sqrt(g*g+u),m=u/(g+m));let d=(l+r)*(l-r)+m,v=l*h;for(let x=t;x<V-1;x++){let e=(0,o.G)(d,v);0===e&&(e=Number.MIN_VALUE);let r=d/e,a=v/e;if(x!==t&&(w[x-1]=e),d=r*p[x]+a*w[x],w[x]=r*w[x]-a*p[x],v=a*p[x+1],p[x+1]=r*p[x+1],f)for(let t=0;t<n;t++)e=r*M.get(t,x)+a*M.get(t,x+1),M.set(t,x+1,-a*M.get(t,x)+r*M.get(t,x+1)),M.set(t,x,e);if(e=(0,o.G)(d,v),0===e&&(e=Number.MIN_VALUE),r=d/e,a=v/e,p[x]=e,d=r*w[x]+a*p[x+1],p[x+1]=-a*w[x]+r*p[x+1],v=a*w[x+1],w[x+1]=r*w[x+1],c&&x<s-1)for(let t=0;t<s;t++)e=r*b.get(t,x)+a*b.get(t,x+1),b.set(t,x+1,-a*b.get(t,x)+r*b.get(t,x+1)),b.set(t,x,e)}w[V-2]=d,Z+=1;break}case 4:if(p[t]<=0&&(p[t]=p[t]<0?-p[t]:0,f))for(let e=0;e<=C;e++)M.set(e,t,-M.get(e,t));for(;t<C&&!(p[t]>=p[t+1]);){let e=p[t];if(p[t]=p[t+1],p[t+1]=e,f&&t<n-1)for(let s=0;s<n;s++)e=M.get(s,t+1),M.set(s,t+1,M.get(s,t)),M.set(s,t,e);if(c&&t<s-1)for(let r=0;r<s;r++)e=b.get(r,t+1),b.set(r,t+1,b.get(r,t)),b.set(r,t,e);t++}Z=0,V--}}if(u){let t=M;M=b,b=t}this.m=s,this.n=n,this.s=p,this.U=b,this.V=M}solve(t){let e=t,s=this.threshold,a=this.s.length,o=r.Z.zeros(a,a);for(let r=0;r<a;r++)Math.abs(this.s[r])<=s?o.set(r,r,0):o.set(r,r,1/this.s[r]);let n=this.U,i=this.rightSingularVectors,l=i.mmul(o),h=i.rows,g=n.rows,c=r.Z.zeros(h,g);for(let r=0;r<h;r++)for(let t=0;t<g;t++){let e=0;for(let s=0;s<a;s++)e+=l.get(r,s)*n.get(t,s);c.set(r,t,e)}return c.mmul(e)}solveForDiagonal(t){return this.solve(r.Z.diag(t))}inverse(){let t=this.V,e=this.threshold,s=t.rows,a=t.columns,o=new r.Z(s,this.s.length);for(let r=0;r<s;r++)for(let s=0;s<a;s++)Math.abs(this.s[s])>e&&o.set(r,s,t.get(r,s)/this.s[s]);let n=this.U,i=n.rows,l=n.columns,h=new r.Z(s,i);for(let r=0;r<s;r++)for(let t=0;t<i;t++){let e=0;for(let s=0;s<l;s++)e+=o.get(r,s)*n.get(t,s);h.set(r,t,e)}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,s=this.s;for(let r=0,a=s.length;r<a;r++)s[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return r.Z.diag(this.s)}}},31845:function(t,e,s){function r(t,e){let s=0;return Math.abs(t)>Math.abs(e)?(s=e/t,Math.abs(t)*Math.sqrt(1+s*s)):0!==e?(s=t/e,Math.abs(e)*Math.sqrt(1+s*s)):0}s.d(e,{G:function(){return r}})},70756:function(t,e,s){s.d(e,{Z:function(){return a}});var r=s(872204);class a extends r.X{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,s){return this.data[t][e]=s,this}get(t,e){return this.data[t][e]}}}}]);
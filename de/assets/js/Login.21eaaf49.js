"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4438],{282199:function(e,t,n){n.r(t);var s=n(497326),a=n(894578),o=n(202784),r=n(928316),l=n(213980),i=n.n(l),p=n(690299),c=n.n(p),h=n(198),u=n(770561),d=n(26266),m=n(10863),f=n(830650),w=n(398781),v=n(618245),g=n(81982),Z=n(435376),y=n(203858),E=n(175891),P=n(267682),b=Object.defineProperty,I=function(e,t,n){return function(e,t,n){t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},C=c()("isle:login"),T=function(e){function t(t){var n;return n=e.call(this,t)||this,I((0,s.Z)(n),"handleInputChange",(function(e){var t;e.stopPropagation();var s=e.target,a=s.value,o=s.name;n.setState(((t={})[o]=a,t))})),I((0,s.Z)(n),"handleForgotPassword",(function(e){(e.preventDefault(),""===n.state.email)?n.setState({showInputOverlay:!0,overlayTarget:r.findDOMNode(n.emailInput),invalidInputMessage:n.props.t("enter-email-before-password-reset")}):n.context.forgotPassword(n.state.email)})),I((0,s.Z)(n),"hideAfterDelay",(function(){setTimeout((function(){n.setState({showInputOverlay:!1})}),2e3)})),I((0,s.Z)(n),"handleKeyPress",(function(e){e.stopPropagation(),13===e.charCode&&n.handleSubmit(e)})),I((0,s.Z)(n),"handleSubmit",(function(e){e.preventDefault();var t={password:n.state.password,email:n.state.email};if(n.state.showTFA)return t.token=n.state.token,n.context.login(t,(function(e,t,s){e||"ok"!==s.message||n.props.onClose()}));if(""===t.email)C("Email input field is empty, show message..."),n.setState({showInputOverlay:!0,overlayTarget:r.findDOMNode(n.emailInput),invalidInputMessage:n.props.t("enter-email")},n.hideAfterDelay);else if(""===t.password)C("Password input field is empty, show message..."),n.setState({showInputOverlay:!0,overlayTarget:r.findDOMNode(n.passwordInput),invalidInputMessage:n.props.t("enter-password")},n.hideAfterDelay);else{n.context.login(t,(function(e,t,s){if(!e){var a=s.message,o=s.type;"ok"===a?n.props.onClose():"finish-login-via-tfa"===a?n.setState({showTFA:!0}):n.setState({showInputOverlay:!0,overlayTarget:"no_user"===o?n.emailInput:n.passwordInput,invalidInputMessage:a},n.hideAfterDelay)}}))}})),n.state={email:"",password:"",show:t.show,showTFA:!1,token:""},n}return(0,a.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.show!==t.show?{email:"",password:"",show:e.show,showTFA:!1}:null},t.prototype.render=function(){var e=this;return o.createElement(g.Z,{show:this.props.show,className:"login-modal",onHide:this.props.onClose},o.createElement(g.Z.Header,{closeButton:!0},o.createElement(g.Z.Title,{as:"h3"},this.props.t("login"))),o.createElement(g.Z.Body,null,o.createElement(w.Z,{horizontal:!0},o.createElement(m.Z,{controlId:"form-email"},o.createElement(f.Z,null,this.props.t("email")),o.createElement(d.Z,{name:"email",type:"email",placeholder:"Email",autoComplete:"username",onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,ref:function(t){e.emailInput=t},disabled:this.state.showTFA})),o.createElement(m.Z,{controlId:"form-password"},o.createElement(f.Z,null,this.props.t("password")),o.createElement(d.Z,{name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,ref:function(t){e.passwordInput=t},disabled:this.state.showTFA})),this.state.showTFA?o.createElement(m.Z,{controlId:"form-tfa"},o.createElement(f.Z,null,this.props.t("enter-tfa-token")),o.createElement(d.Z,{name:"token",type:"text",placeholder:this.props.t("enter-token"),onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoFocus:!0})):null)),o.createElement(g.Z.Footer,null,o.createElement("button",{className:"forgot-password-button",onClick:this.handleForgotPassword},this.props.t("forgot-password")),o.createElement(u.Z,{variant:"primary",type:"submit",onClick:this.handleSubmit},this.props.t("signin")),o.createElement(u.Z,{onClick:this.props.onClose},this.props.t("close"))),o.createElement(v.Z,{show:this.state.showInputOverlay,target:this.state.overlayTarget,placement:"right",containerPadding:20},o.createElement(Z.Z,{id:"popover-contained"},o.createElement(y.Z,null,this.props.t("invalid")),o.createElement(E.Z,null,this.state.invalidInputMessage))))},t}(o.Component);T.defaultProps={onClose:function(){},show:!1},T.propTypes={onClose:i().func,show:i().bool},T.contextType=P.Z,t.default=(0,h.Z)("internal/login")(T)},435376:function(e,t,n){var s=n(807896),a=n(231461),o=n(72779),r=n.n(o),l=n(202784),i=(n(840368),n(429658)),p=n(203858),c=n(175891),h=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],u=l.forwardRef((function(e,t){var n=e.bsPrefix,o=e.placement,p=e.className,u=e.style,d=e.children,m=e.content,f=e.arrowProps,w=(e.popper,e.show,(0,a.Z)(e,h)),v=(0,i.vE)(n,"popover"),g=((null==o?void 0:o.split("-"))||[])[0];return l.createElement("div",(0,s.Z)({ref:t,role:"tooltip",style:u,"x-placement":g,className:r()(p,v,g&&"bs-popover-"+g)},w),l.createElement("div",(0,s.Z)({className:"arrow"},f)),m?l.createElement(c.Z,null,d):d)}));u.defaultProps={placement:"right"},u.Title=p.Z,u.Content=c.Z,t.Z=u},175891:function(e,t,n){var s=n(807896),a=n(231461),o=n(72779),r=n.n(o),l=n(202784),i=n(429658),p=["as","bsPrefix","className","children"],c=l.forwardRef((function(e,t){var n=e.as,o=void 0===n?"div":n,c=e.bsPrefix,h=e.className,u=e.children,d=(0,a.Z)(e,p);return c=(0,i.vE)(c,"popover-body"),l.createElement(o,(0,s.Z)({ref:t},d,{className:r()(h,c)}),u)}));t.Z=c},203858:function(e,t,n){var s=n(807896),a=n(231461),o=n(72779),r=n.n(o),l=n(202784),i=n(429658),p=["as","bsPrefix","className","children"],c=l.forwardRef((function(e,t){var n=e.as,o=void 0===n?"div":n,c=e.bsPrefix,h=e.className,u=e.children,d=(0,a.Z)(e,p);return c=(0,i.vE)(c,"popover-header"),l.createElement(o,(0,s.Z)({ref:t},d,{className:r()(c,h)}),u)}));t.Z=c}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[809],{158811:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var a=n(497326),i=n(894578),l=n(202784),s=n(213980),r=n.n(s),c=n(689653),o=n.n(c),m=n(690299),h=n.n(m),p=n(188304),u=n(26266),d=n(830650),f=n(10863),g=n(770561),E=n(941695),v=n(473861),C=n(464558),Z=n(708579),k=n(262600),b=(0,n(708717).Z)((function(){return Promise.all([n.e(1882),n.e(9753)]).then(n.bind(n,505470))})),y=Object.defineProperty,N=function(e,t,n){return function(e,t,n){t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},S=h()("isle:toolbar:ticketing"),w=["General"];n.g.COMPONENT_LIST&&(w=w.concat(n.g.COMPONENT_LIST));var F=function(e){function t(t){var n;return n=e.call(this,t)||this,N((0,a.Z)(n),"handleTitleChange",(function(e){n.setState({title:e.target.value})})),N((0,a.Z)(n),"handleDescriptionChange",(function(e){n.setState({description:e})})),N((0,a.Z)(n),"handleComponentChange",(function(e){n.setState({component:e})})),N((0,a.Z)(n),"attachFile",(function(){var e=n.props,t=e.session,a=e.t;if(n.state.files.length>=6)return t.addNotification({title:a("maximum-num-attachments"),message:a("maximum-num-attachments-message"),level:"warning",position:"tr"});var i=document.createElement("input");i.type="file",i.onchange=function(e){var t=e.target.files,a=[].concat(n.state.files,t);n.setState({files:a})},i.click()})),N((0,a.Z)(n),"handleSubmit",(function(){S("Create ticket...");var e=n.props,t=e.session,a=e.t,i={title:n.state.title,description:n.state.description,component:n.state.component,platform:{name:o().name,version:o().version,product:o().product,manufacturer:o().manufacturer,os:o().os,description:o().description},files:n.state.files};t.createTicket(i).then((function(){n.setState({showAlert:!0})})).catch((function(e){t.addNotification({title:a("encountered-error"),message:e.message,level:"error",position:"tc"})}))})),N((0,a.Z)(n),"removeFileFactory",(function(e){return function(){var t=n.state.files.slice();t.splice(e,1),n.setState({files:t})}})),n.state={title:"",description:"",component:null,showAlert:!1,files:[]},n}(0,i.Z)(t,e);var n=t.prototype;return n.renderAttachments=function(){var e=this;return 0===this.state.files.length?null:l.createElement(l.Fragment,null,l.createElement("span",{className:"title"},this.props.t("attachments"),":"),l.createElement(p.Z,{className:"ticketing-attachment-list"},this.state.files.map((function(t,n){return l.createElement(p.Z.Item,{key:"file-"+n},t.name,l.createElement(g.Z,{"aria-label":e.props.t("delete"),variant:"danger",size:"sm",onClick:e.removeFileFactory(n),style:{float:"right"}},l.createElement("i",{className:"fas fa-times"})))}))))},n.render=function(){var e=this,t=this.props,n=t.t;return t.show?l.createElement(l.Fragment,null,l.createElement(v.Z,{dragHandleClassName:"card-header"},l.createElement(k.Z,{header:l.createElement("span",null,l.createElement("span",{className:"fa fa-lg fa-medkit",style:{marginRight:6}}),n("ticketing")),onHide:this.props.onHide,minimizable:!0,trapFocus:!0,style:{maxWidth:560},bodyStyle:{maxHeight:"75vh"}},l.createElement("p",null,n("ticketing-intro")),l.createElement(E.Z,{legend:n("component"),options:w,onChange:this.handleComponentChange}),l.createElement(f.Z,{controlId:"ticket-title"},l.createElement(d.Z,null,n("title"),":"),l.createElement(u.Z,{type:"text",placeholder:n("title-placeholder"),onChange:this.handleTitleChange})),l.createElement(C.Z,{legend:n("description"),value:this.state.description,onChange:this.handleDescriptionChange,placeholder:n("description-placeholder")}),this.renderAttachments(),l.createElement(Z.Z,{tooltip:n("attach-file")},l.createElement(g.Z,{"aria-label":n("attach-file"),onClick:this.attachFile},l.createElement("i",{className:"fas fa-paperclip"}))),l.createElement(g.Z,{onClick:this.handleSubmit,style:{float:"right"},disabled:!this.state.title||!this.state.description},n("create-ticket")))),l.createElement(b,{title:n("ticket-created"),message:n("ticket-created-message"),show:this.state.showAlert,close:function(){e.setState({title:"",description:"",showAlert:!1,files:[]}),e.props.onHide()}})):null},t}(l.Component);F.propTypes={session:r().object.isRequired,onHide:r().func.isRequired};var T=F}}]);
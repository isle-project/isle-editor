"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[459],{558340:function(e,t,n){n.r(t);var a=n(202784),l=n(213980),r=n.n(l),o=n(376699),i=n(260952),s=n(998856),u=n(423134),d=n.n(u),p=n(686605),c=n.n(p),f=n(267682),m=n(413262),g=n(338664);function v(e){e.stopPropagation(),e.preventDefault()}var h=function(e){var t=e.title,n=e.onUpload,l=(0,a.useState)(0),r=l[0],u=l[1],p=(0,a.useState)(!1),g=p[0],h=p[1],E=(0,a.useState)(!0),b=E[0],C=E[1],k=(0,o.$)("spreadsheet-upload").t,y=(0,a.useContext)(f.Z),x=(0,a.useRef)(null),w=(0,a.useCallback)((function(e){var t=e.target.result;u(0),h(!1),d()({noheader:!b,checkType:!0,ignoreEmpty:!0}).fromString(t).then((function(e){n(null,e)})).catch((function(e){y.addNotification({title:k("error-title"),message:k("error-message")+": "+e.message,level:"error",position:"tr"}),n(e)}))}),[b,y,n,k]),S=(0,a.useCallback)((function(){h(!0);var e=new FileReader,t=x.current.files[0];e.addEventListener("load",w,!1),e.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;u(t)}}),!1),e.readAsText(t,"utf-8")}),[w]),T=(0,a.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer,n=new FileReader,a=null;if(t.items?"file"===t.items[0].kind&&(a=t.items[0].getAsFile()):a=t.files[0],a){if("text/csv"!==a.type)return y.addNotification({title:k("no-csv"),message:k("no-csv-message"),level:"error",position:"tr"});n.addEventListener("load",w,!1),n.readAsText(a,"utf-8")}}),[y,w,k]),Z=(0,a.useCallback)((function(e){C(e)}),[]),D=c()(100*r);return a.createElement(i.Z,null,a.createElement(i.Z.Header,{as:"h2"},t||k("title")),a.createElement(i.Z.Body,null,a.createElement("label",{htmlFor:"CSVUpload"},k("csv-upload-prompt"),":"),a.createElement("input",{id:"CSVUpload",type:"file",accept:".csv",onChange:S,ref:x,style:{margin:"auto"}}),a.createElement("p",null,k("or")),a.createElement("div",{onDrop:T,onDragOver:v,onDragEnd:v,style:{minHeight:"150px",width:"250px",border:"1px solid blue",padding:"10px"}},a.createElement("span",null,k("drop-file"))),a.createElement(m.Z,{legend:k("first-row-names"),defaultValue:!0,onChange:Z}),g?a.createElement(s.Z,{"aria-label":k("csv-upload-progress"),now:D,label:D+"%"}):null))};h.defaultProps={onUpload:function(){},title:null},h.propTypes={onUpload:r().func,title:r().oneOfType([r().string,r().node])},t.default=(0,g.W)(h)}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40809],{873964:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var i=s(202784),a=s(213980),n=s.n(a),l=s(689653),r=s.n(l),c=s(690299),o=s.n(c),h=s(188304),m=s(26266),p=s(830650),d=s(10863),u=s(770561),f=s(440835),g=s(377174),E=s(430391),C=s(112114),k=s(426214);var b=(0,s(217431).Z)((()=>Promise.all([s.e(15318),s.e(69753)]).then(s.bind(s,688825)))),y=Object.defineProperty,v=(e,t,s)=>(((e,t,s)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s);const Z=o()("isle:toolbar:ticketing");let N=["General"];s.g.COMPONENT_LIST&&(N=N.concat(s.g.COMPONENT_LIST));class S extends i.Component{constructor(e){super(e),v(this,"handleTitleChange",(e=>{this.setState({title:e.target.value})})),v(this,"handleDescriptionChange",(e=>{this.setState({description:e})})),v(this,"handleComponentChange",(e=>{this.setState({component:e})})),v(this,"attachFile",(()=>{const{session:e,t:t}=this.props;if(this.state.files.length>=6)return e.addNotification({title:t("maximum-num-attachments"),message:t("maximum-num-attachments-message"),level:"warning",position:"tr"});const s=document.createElement("input");s.type="file",s.onchange=e=>{const t=e.target.files,s=[...this.state.files,...t];this.setState({files:s})},s.click()})),v(this,"handleSubmit",(()=>{Z("Create ticket...");const{session:e,t:t}=this.props,s={title:this.state.title,description:this.state.description,component:this.state.component,platform:{name:r().name,version:r().version,product:r().product,manufacturer:r().manufacturer,os:r().os,description:r().description},files:this.state.files};e.createTicket(s).then((()=>{this.setState({showAlert:!0})})).catch((s=>{e.addNotification({title:t("encountered-error"),message:s.message,level:"error",position:"tc"})}))})),v(this,"removeFileFactory",(e=>()=>{const t=this.state.files.slice();t.splice(e,1),this.setState({files:t})})),this.state={title:"",description:"",component:null,showAlert:!1,files:[]}}renderAttachments(){return 0===this.state.files.length?null:i.createElement(i.Fragment,null,i.createElement("span",{className:"title"},this.props.t("attachments"),":"),i.createElement(h.Z,{className:"ticketing-attachment-list"},this.state.files.map(((e,t)=>i.createElement(h.Z.Item,{key:`file-${t}`},e.name,i.createElement(u.Z,{"aria-label":this.props.t("delete"),variant:"danger",size:"sm",onClick:this.removeFileFactory(t),style:{float:"right"}},i.createElement("i",{className:"fas fa-times"})))))))}render(){const{t:e,show:t}=this.props;return t?i.createElement(i.Fragment,null,i.createElement(g.Z,{dragHandleClassName:"card-header"},i.createElement(k.Z,{header:i.createElement("span",null,i.createElement("span",{className:"fa fa-lg fa-medkit",style:{marginRight:6}}),e("ticketing")),onHide:this.props.onHide,minimizable:!0,trapFocus:!0,style:{maxWidth:560},bodyStyle:{maxHeight:"75vh"}},i.createElement("p",null,e("ticketing-intro")),i.createElement(f.Z,{legend:e("component"),options:N,onChange:this.handleComponentChange}),i.createElement(d.Z,{controlId:"ticket-title"},i.createElement(p.Z,null,e("title"),":"),i.createElement(m.Z,{type:"text",placeholder:e("title-placeholder"),onChange:this.handleTitleChange})),i.createElement(E.Z,{legend:e("description"),value:this.state.description,onChange:this.handleDescriptionChange,placeholder:e("description-placeholder")}),this.renderAttachments(),i.createElement(C.Z,{tooltip:e("attach-file")},i.createElement(u.Z,{"aria-label":e("attach-file"),onClick:this.attachFile},i.createElement("i",{className:"fas fa-paperclip"}))),i.createElement(u.Z,{onClick:this.handleSubmit,style:{float:"right"},disabled:!this.state.title||!this.state.description},e("create-ticket")))),i.createElement(b,{title:e("ticket-created"),message:e("ticket-created-message"),show:this.state.showAlert,close:()=>{this.setState({title:"",description:"",showAlert:!1,files:[]}),this.props.onHide()}})):null}}S.propTypes={session:n().object.isRequired,onHide:n().func.isRequired};var w=S}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2792],{134656:function(t,e,i){var s=(0,i(525263).Z)((function(){return i.e(3269).then(i.bind(i,643549))}));e.Z=s},569904:function(t,e,i){var s=i(467177),n=i(202784),o=i(213980),r=i.n(o),a=Object.defineProperty,l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=function(t,e,i){return e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i},d=function(t){var e=t,i=e.children,o=function(t,e){var i={};for(var n in t)u.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&l)for(var o,r=(0,s.Z)(l(t));!(o=r()).done;)n=o.value,e.indexOf(n)<0&&c.call(t,n)&&(i[n]=t[n]);return i}(e,["children"]);return n.createElement("div",function(t,e){for(var i in e||(e={}))u.call(e,i)&&p(t,i,e[i]);if(l)for(var n,o=(0,s.Z)(l(e));!(n=o()).done;)i=n.value,c.call(e,i)&&p(t,i,e[i]);return t}({},o),i)};d.defaultProps={className:"",style:{}},d.propTypes={className:r().string,style:r().object},e.Z=d},615697:function(t,e,i){var s=(0,i(525263).Z)((function(){return i.e(6131).then(i.bind(i,102149))}));e.Z=s},870717:function(t,e,i){var s=(0,i(525263).Z)((function(){return Promise.all([i.e(3312),i.e(4507)]).then(i.bind(i,552767))}));e.Z=s},218057:function(t,e,i){i.r(e),i.d(e,{default:function(){return U}});var s=i(497326),n=i(894578),o=i(202784),r=i(928316),a=i(213980),l=i.n(a),u=i(198),c=i(770561),p=i(482228),d=i(26266),h=i(10863),m=i(31071),b=i(690299),f=i.n(b),v=i(294565),g=i(24551),y=i(262600),Z=i(615697),x=i(864892),E=i(569904),N=i(301158),w=i(134656),S=i(923723),k=i(259893),P=i(269891),q=i(870717),D=i(267682),T=i(23228),C=i(434910),O=i(382617),L=i(10206),H=i(338664),z=JSON.parse('[{"command":"appendText","trigger":"insert","description":"Dictate your answer","params":["text"],"regexp":"/insert[a-z]* (?<text>[\\\\s\\\\S]+)/i"},{"command":"handleSolutionClick","trigger":"solution","description":"Toggle the solution"},{"command":"submitHandler","trigger":"submit","description":"Submit your answer"},{"command":"triggerHint","trigger":"hint","description":"Toggle hint"}]'),F=Object.defineProperty,M=function(t,e,i){return function(t,e,i){e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i}(t,"symbol"!=typeof e?e+"":e,i),i},j=(0,g.Z)("free-text-question"),A=f()("isle:free-text-question"),B=function(t){function e(e,i){var n;n=t.call(this,e)||this,M((0,s.Z)(n),"handleChange",(function(t){var e=t.target.value;n.setState({value:e}),n.beforeUnload||(window.addEventListener("beforeunload",C.Z),n.beforeUnload=!0),n.props.onChange(e)})),M((0,s.Z)(n),"appendText",(function(t){n.setState({value:n.state.value+" "+t})})),M((0,s.Z)(n),"sendSubmitNotification",(function(){var t=n.context;if(n.state.submitted)t.addNotification({title:n.props.t("answer-resubmitted"),message:n.props.resubmissionMsg,level:"success"});else{var e=n.props.submissionMsg;""===e&&(e=n.props.solution&&n.props.provideFeedback?n.props.t("submission-message-solution"):n.props.t("submission-message-no-solution")),t.addNotification({title:n.props.t("answer-submitted"),message:e,level:"success"})}})),M((0,s.Z)(n),"submitHandler",(function(t){var e=n.context;n.props.disableSubmitNotification||n.sendSubmitNotification(),n.props.onSubmit(n.state.value),n.setState({submitted:!0}),window.removeEventListener("beforeunload",C.Z),n.beforeUnload=!1,e.log({id:n.id,type:O.Ql,value:n.state.value})})),M((0,s.Z)(n),"handleSolutionClick",(function(){var t=n.context;n.state.solutionDisplayed?n.setState({solutionDisplayed:!1,value:n.state.studentAnswer}):(t.log({id:n.id,type:O.Lu,value:null}),n.setState({solutionDisplayed:!0,studentAnswer:n.state.value,value:n.props.solution}))})),M((0,s.Z)(n),"logHint",(function(t){A("Logging hint..."),n.context.log({id:n.id,type:O.sF,value:t})})),A("Invoking constructor of FreeTextQuestion...");var o=i.currentUserActions;n.id=e.id||j(e);var r=(0,T.Z)(o,n.id,O.Ql);return n.state={exhaustedHints:0===e.hints.length,value:(0,v.isPrimitive)(r)?r:"",solutionDisplayed:!1,submitted:(0,v.isPrimitive)(r),placeholder:e.placeholder,solution:e.solution,question:e.question},n}(0,n.Z)(e,t),e.getDerivedStateFromProps=function(t,e){return t.placeholder!==e.placeholder||t.solution!==e.solution||t.question!==e.question?{value:"",solutionDisplayed:!1,submitted:!1,placeholder:t.placeholder,solution:t.solution,question:t.question}:null};var i=e.prototype;return i.componentDidMount=function(){var t=this,e=this.context;this.unsubscribe=e.subscribe((function(e){e===L.u&&t.setToLastAction()}))},i.componentWillUnmount=function(){this.unsubscribe()},i.setToLastAction=function(){var t=this.context.currentUserActions,e=(0,T.Z)(t,this.id,O.Ql);(0,v.isPrimitive)(e)&&e!==this.state.value&&this.setState({value:e,submitted:!0})},i.triggerHint=function(){r.findDOMNode(this.hintButton).click()},i.renderSubmitButton=function(){var t=this.context;return this.props.until&&t.startTime>this.props.until?o.createElement("span",{className:"title",style:{marginLeft:4}},this.props.t("question-closed")):this.state.value.length>=1&&!this.state.solutionDisplayed?o.createElement(x.Z,{className:"submit-button",variant:"primary",size:"sm",onClick:this.submitHandler,duration:5,style:{marginLeft:"4px"}},this.state.submitted?this.props.t("resubmit"):this.props.t("submit")):o.createElement(k.Z,{placement:"top",positionLeft:100,overlay:o.createElement(m.Z,{id:"submitTooltip"},this.props.t("submit-tooltip")),rootClose:!0},o.createElement("div",{style:{display:"inline-block"}},o.createElement(c.Z,{className:"submit-button",variant:"primary",size:"sm",style:{pointerEvents:"none",marginLeft:"4px"},disabled:!0},this.props.t("submit"))))},i.render=function(){var t=this,e=this.props.hints.length,i=o.createElement(N.Z,{disabled:!(this.props.instantSolution||this.state.submitted&&this.state.exhaustedHints),onClick:this.handleSolutionClick,hasHints:this.props.hints.length>0});return o.createElement(y.Z,{id:this.id,className:"free-text-question "+this.props.className,style:this.props.style,fullscreen:!0,bodyStyle:{width:this.props.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},o.createElement(S.Z,{id:this.props.voiceID,reference:this,commands:z}),this.props.question?o.createElement("div",{className:"title"},this.props.question):null,o.createElement(h.Z,null,o.createElement("label",{htmlFor:this.id+"-textarea"},this.state.solutionDisplayed?this.props.t("solution"):this.props.t("your-answer")),this.state.solutionDisplayed?o.createElement("div",{className:"free-text-question-solution-wrapper",style:{height:"calc("+1.5*this.props.rows+"rem + 14px)"}},this.state.value):o.createElement(d.Z,{id:this.id+"-textarea",as:"textarea",placeholder:this.props.placeholder||this.props.t("enter-your-answer-here"),onChange:this.handleChange,style:{resize:this.props.resizable?"both":"none"},maxLength:this.props.maxlength,rows:this.props.rows,value:this.state.value,disabled:this.state.solutionDisplayed})),o.createElement(E.Z,{buttonLabel:this.props.t("answers"),id:this.id,info:O.Ql,data:{question:this.props.question,solution:this.props.solution},style:{float:"left"},points:this.props.points}),o.createElement(p.Z,{className:"free-text-question-toolbar"},e>0?o.createElement(w.Z,{id:this.id+"-hints",onClick:this.logHint,ref:function(e){t.hintButton=e},hints:this.props.hints,onFinished:function(){t.setState({exhaustedHints:!0})},style:{marginRight:"4px"},placement:this.props.hintPlacement}):null,this.props.provideFeedback&&this.props.solution?i:null,this.props.chat?o.createElement("div",{style:{display:"inline-block",marginLeft:"4px"}},o.createElement(Z.Z,{for:this.id})):null,this.renderSubmitButton()),this.props.feedback?o.createElement(P.Z,{id:this.id+"_feedback",style:{marginRight:5,marginTop:-5}}):null,o.createElement(q.Z,{for:this.id,points:this.props.points}))},e}(o.Component);B.defaultProps={question:"",hints:[],hintPlacement:"top",feedback:!0,solution:"",instantSolution:!1,rows:5,chat:!1,placeholder:"",resizable:!1,disableSubmitNotification:!1,submissionMsg:"",resubmissionMsg:"You have successfully re-submitted your answer.",provideFeedback:!0,maxlength:2500,voiceID:null,until:null,points:10,className:"",style:{},onChange:function(){},onSubmit:function(){}},B.propTypes={question:l().oneOfType([l().string,l().node]),hints:l().arrayOf(l().oneOfType([l().string,l().node])),hintPlacement:l().string,feedback:l().bool,solution:l().oneOfType([l().string,l().node]),instantSolution:l().bool,rows:l().number,chat:l().bool,resizable:l().bool,placeholder:l().string,disableSubmitNotification:l().bool,submissionMsg:l().string,resubmissionMsg:l().string,provideFeedback:l().bool,maxlength:l().number,voiceID:l().string,until:l().instanceOf(Date),points:l().number,className:l().string,style:l().object,onChange:l().func,onSubmit:l().func},B.contextType=D.Z;var U=(0,u.Z)("questions/free-text")((0,H.W)(B))},301158:function(t,e,i){var s=(0,i(525263).Z)((function(){return i.e(8905).then(i.bind(i,804154))}));e.Z=s},23228:function(t,e,i){var s=i(588703),n=i.n(s),o=i(830324),r=i.n(o);e.Z=function(t,e,i){if(r()(t)){var s=t[e];if(n()(s)&&(s=s.filter((function(t){return t.type===i}))).length>0)return s[0].value}return null}},770561:function(t,e,i){var s=i(807896),n=i(231461),o=i(72779),r=i.n(o),a=i(202784),l=i(429658),u=i(482695),c=["bsPrefix","variant","size","active","className","block","type","as"],p=a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.variant,p=t.size,d=t.active,h=t.className,m=t.block,b=t.type,f=t.as,v=(0,n.Z)(t,c),g=(0,l.vE)(i,"btn"),y=r()(h,g,d&&"active",o&&g+"-"+o,m&&g+"-block",p&&g+"-"+p);if(v.href)return a.createElement(u.Z,(0,s.Z)({},v,{as:f,ref:e,className:r()(y,v.disabled&&"disabled")}));e&&(v.ref=e),b?v.type=b:f||(v.type="button");var Z=f||"button";return a.createElement(Z,(0,s.Z)({},v,{className:y}))}));p.displayName="Button",p.defaultProps={variant:"primary",active:!1,disabled:!1},e.Z=p},482228:function(t,e,i){var s=i(807896),n=i(231461),o=i(72779),r=i.n(o),a=i(202784),l=i(429658),u=["bsPrefix","className"],c=a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.className,c=(0,n.Z)(t,u),p=(0,l.vE)(i,"btn-toolbar");return a.createElement("div",(0,s.Z)({},c,{ref:e,className:r()(o,p)}))}));c.displayName="ButtonToolbar",c.defaultProps={role:"toolbar"},e.Z=c}}]);
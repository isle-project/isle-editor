"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2414],{134656:function(e,t,n){var a=(0,n(525263).Z)((function(){return n.e(3269).then(n.bind(n,643549))}));t.Z=a},569904:function(e,t,n){var a=n(55196),i=n(202784),l=n(213980),r=n.n(l),o=Object.defineProperty,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=function(e,t,n){return t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m=function(e){var t=e,n=t.children,l=function(e,t){var n={};for(var i in e)u.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&s)for(var l,r=(0,a.Z)(s(e));!(l=r()).done;)i=l.value,t.indexOf(i)<0&&c.call(e,i)&&(n[i]=e[i]);return n}(t,["children"]);return i.createElement("div",function(e,t){for(var n in t||(t={}))u.call(t,n)&&d(e,n,t[n]);if(s)for(var i,l=(0,a.Z)(s(t));!(i=l()).done;)n=i.value,c.call(t,n)&&d(e,n,t[n]);return e}({},l),n)};m.defaultProps={className:"",style:{}},m.propTypes={className:r().string,style:r().object},t.Z=m},615697:function(e,t,n){var a=(0,n(525263).Z)((function(){return n.e(6131).then(n.bind(n,102149))}));t.Z=a},870717:function(e,t,n){var a=(0,n(525263).Z)((function(){return Promise.all([n.e(3312),n.e(4507)]).then(n.bind(n,552767))}));t.Z=a},829102:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(55196),i=n(202784),l=n(213980),r=n.n(l),o=n(690299),s=n.n(o),u=n(376699),c=n(46255),d=n(260952),m=n(770561),f=n(287013),p=n.n(f),b=n(24551),h=n(103824),g=n(891027),v=n(569904),y=n(301158),E=n(864892),Z=n(134656),k=n(615697),w=n(261398),N=n(269891),O=n(870717),C=n(267682),S=n(264797);var P=function(e){e.stopPropagation(),e.preventDefault()},q=n(382617),D=n(338664),j=Object.defineProperty,L=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,x=function(e,t,n){return t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},F=(0,b.Z)("image-question"),A=s()("isle:image-question"),B=/src="([^"]*)"/,z=function(e){var t,n=(0,i.useRef)(e.id||F(e)),l=(0,i.useContext)(C.Z),r=(0,u.$)("questions/image").t,o=(0,i.useRef)(null),s=(0,i.useState)(!1),f=s[0],b=s[1],D=(0,i.useState)(null),j=D[0],z=D[1],H=(0,i.useState)(0===e.hints.length),I=H[0],U=H[1],W=(0,i.useState)(!1),M=W[0],G=W[1],$=(0,i.useState)(!1),_=$[0],J=$[1],K=(0,i.useCallback)((function(e){z(e.target.result)}),[]),Q=(0,i.useCallback)((function(){G(!M)}),[M]),V=e.hints,X=V.length,Y=i.createElement(y.Z,{disabled:!f||!I,onClick:Q,hasHints:V.length>0}),ee=(0,i.useCallback)((function(e){A("Logging hint..."),l.log({id:n.current,type:q.RG,value:e})}),[l]),te=(0,i.useCallback)((function(){l.addNotification({title:r("submitted"),message:r("answer-submitted"),level:"info"})}),[l,r]),ne=(0,i.useCallback)((function(){z(null)}),[]),ae=(0,i.useCallback)((function(){U(!0)}),[]),ie=function(){(e.disableSubmitNotification||te(),e.onSubmit(),b(!0),j)?l.log({id:n.current,type:q.Dm,value:j}):document.getElementById(n.current+"-canvas").toBlob((function(e){(0,S.Z)(e).then((function(e){l.log({id:n.current,type:q.Dm,value:e}),z(e)}))}))};return _||(t=j?i.createElement("div",{className:"center",style:{maxWidth:600}},M?i.createElement(h.Z,{alt:r("model-solution"),src:e.solution,width:"50%",height:"auto",style:{border:"solid 1px gold"}}):i.createElement(h.Z,{alt:r("upload"),src:j,width:"50%",height:"auto"})):i.createElement(i.Fragment,null,i.createElement("div",{className:"image-question-dropzone",onDrop:function(e){e.stopPropagation(),e.preventDefault(),J(!0);var t=e.dataTransfer,n=new FileReader,a=null;if(t.items&&t.items.length>0){var i=t.items[0];"file"===i.kind?a=i.getAsFile():"string"===i.kind&&i.getAsString((function(e){if(p()(e,"<img")){var t=e.match(B);t&&(z(t[1]),J(!1))}else if(p()(e,"<thead")){var n=document.createElement("table");n.innerHTML=e,document.body.appendChild(n),(0,c.hi)(n,{backgroundColor:"white",style:{fontSize:12},width:600}).then((function(e){z(e),J(!1),n.remove()}))}else{var a=document.createElement("pre");a.innerHTML=e,document.body.appendChild(a),(0,c.hi)(a,{backgroundColor:"white",style:{fontSize:14}}).then((function(e){z(e),J(!1),a.remove()}))}}))}else t.files&&t.files.length>0&&(a=t.files[0]);a&&a&&(n.addEventListener("load",K,!1),n.readAsDataURL(a))},onDragOver:P,onDragEnd:P},i.createElement("span",null,r("drop-image"))),i.createElement("p",{className:"center"},r("or")),i.createElement("input",{id:n.current+"-upload",className:"image-question-upload center",type:"file",accept:"image/*",onChange:function(){var e=new FileReader,t=o.current.files[0];e.addEventListener("load",K,!1),e.readAsDataURL(t)},ref:o}),e.sketchpad?i.createElement(i.Fragment,null,i.createElement("p",{className:"center"},r("or")),i.createElement(w.Z,function(e,t){for(var n in t||(t={}))R.call(t,n)&&x(e,n,t[n]);if(L)for(var i,l=(0,a.Z)(L(t));!(i=l()).done;)n=i.value,T.call(t,n)&&x(e,n,t[n]);return e}({id:n.current,hideNavigationButtons:!0,hideSaveButtons:!0,hideTransmitButtons:!0,canvasWidth:900,canvasHeight:600},e.sketchpad))):null)),i.createElement(d.Z,{id:n.current,className:"image-question "+e.className,style:e.style},i.createElement(d.Z.Body,{style:{width:e.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},i.createElement("label",null,e.question),i.createElement(g.Z,{running:_,width:256,height:128}),t,e.feedback?i.createElement(N.Z,{vertical:!0,id:n.current+"_feedback",style:{position:"absolute",right:"4px",top:"4px"}}):null,i.createElement(v.Z,{buttonLabel:"Answers",id:n.current,info:q.Dm,data:{question:e.question,type:"image"},points:e.points}),i.createElement("div",{className:"image-question-toolbar"},X>0?i.createElement(Z.Z,{onClick:ee,hints:e.hints,placement:e.hintPlacement,onFinished:ae}):null,j?i.createElement(m.Z,{size:"sm",variant:"warning",onClick:ne},r("reset")):null,e.until&&l.startTime>e.until?i.createElement("span",{className:"title",style:{marginLeft:4}},r("question-closed")):i.createElement(E.Z,{className:"submit-button",variant:"primary",size:"sm",onClick:ie,disabled:!j||_},r(f?"resubmit":"submit")),e.solution?Y:null,e.chat?i.createElement(k.Z,{for:n.current}):null),i.createElement(O.Z,{for:n.current,points:e.points})))};z.defaultProps={question:"",hints:[],hintPlacement:"bottom",feedback:!0,chat:!1,disableSubmitNotification:!1,className:"",sketchpad:null,solution:null,until:null,points:10,style:{},onSubmit:function(){}},z.propTypes={question:r().oneOfType([r().string,r().node]),hintPlacement:r().string,hints:r().arrayOf(r().oneOfType([r().string,r().node])),feedback:r().bool,chat:r().bool,disableSubmitNotification:r().bool,className:r().string,sketchpad:r().object,solution:r().string,until:r().instanceOf(Date),points:r().number,style:r().object,onSubmit:r().func};var H=(0,D.W)(z)},301158:function(e,t,n){var a=(0,n(525263).Z)((function(){return n.e(8905).then(n.bind(n,804154))}));t.Z=a},264797:function(e,t){t.Z=function(e){var t=new(0,window.FileReader);return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))}}}]);
(self.webpackChunk=self.webpackChunk||[]).push([[1002],{134656:function(e,t,n){"use strict";var r=(0,n(708717).Z)((function(){return n.e(3269).then(n.bind(n,643549))}));t.Z=r},569904:function(e,t,n){"use strict";var r=n(867855),i=n(202784),o=n(213980),l=n.n(o),a=Object.defineProperty,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=function(e,t,n){return t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},d=function(e){var t=e,n=t.children,o=function(e,t){var n={};for(var i in e)u.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&s)for(var o,l=(0,r.Z)(s(e));!(o=l()).done;)i=o.value,t.indexOf(i)<0&&c.call(e,i)&&(n[i]=e[i]);return n}(t,["children"]);return i.createElement("div",function(e,t){for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(s)for(var i,o=(0,r.Z)(s(t));!(i=o()).done;)n=i.value,c.call(t,n)&&p(e,n,t[n]);return e}({},o),n)};d.defaultProps={className:"",style:{}},d.propTypes={className:l().string,style:l().object},t.Z=d},615697:function(e,t,n){"use strict";var r=(0,n(708717).Z)((function(){return n.e(6131).then(n.bind(n,102149))}));t.Z=r},80282:function(e,t,n){"use strict";n.r(t);var r=n(497326),i=n(894578),o=n(867855),l=n(202784),a=n(928316),s=n(213980),u=n.n(s),c=n(198),p=n(103824),d=n(569904),h=n(770561),f=n(482228),m=n(741372),v=n(31071),b=n(735368),y=n.n(b),g=n(6064),E=n(615697),x=n(588703),k=n.n(x),O=n(830324),Z=n.n(O),S=n(213939),w=n.n(S),C=n(294565),H=n(557106),P=n.n(H),I=n(690299),N=n.n(I),U=n(223326),L=n.n(U),j=n(24551),z=n(891027),T=n(134656),_=n(259893),A=n(267682),R=n(382617),W=n(10206),V=n(615558),M=(n(232848),Object.defineProperty),F=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,D=function(e,t,n){return t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},q=function(e,t,n){return D(e,"symbol"!=typeof t?t+"":t,n),n},G=N()("isle:r-shell"),J=(0,j.Z)("r-shell"),K=/(help\([^)]*\)|\?[^\n]*)/,Q=0,X=[],Y=function(e,t){if(Z()(e)){var n=e[t];if(k()(n)&&(n=n.filter((function(e){return e.type===R.cW}))).length>0)return n[0].value}return null},ee=function(e){function t(t){var n;return n=e.call(this,t)||this,q((0,r.Z)(n),"handleResetClick",(function(){n.editor.setValue(n.props.code,1)})),q((0,r.Z)(n),"logHint",(function(e){n.context.log({id:n.id,type:R.OU,value:e})})),q((0,r.Z)(n),"hideHelp",(function(){n.setState({help:""})})),n.state={id:Q,exhaustedHints:0===t.hints.length,result:"",plots:[],running:!1,nEvaluations:0,solutionOpen:!1,help:""},n.id=t.id||J(t),Q+=1,X.push(t.code),n.insertPlot=function(e,n){return l.createElement(p.Z,{key:n,src:e,title:t.t("r-plot")})},n.handleSolutionClick=function(){var e=n.editor.getValue(),t=n.props.solution.replace(/\\n/g,"\n");(!1===n.state.solutionOpen?(n.editor.setOption("theme","paraiso-light"),n.editor.setOption("readOnly",!0)):(n.editor.setOption("theme","elegant"),n.editor.setOption("readOnly",!1)),e!==t)?(n.context.log({id:n.id,type:R.WA,value:e}),n.setState({lastSolution:e,solutionOpen:!n.state.solutionOpen}),n.editor.setValue(t,1)):(n.setState({solutionOpen:!n.state.solutionOpen}),n.editor.setValue(n.state.lastSolution||t,1))},n.handleEvaluationClick=function(){G("Evaluate R code..."),n.setState({result:"",plots:[],running:!0});var e=n.editor.getValue();if(X[n.state.id]=e,""===e)n.setState({result:"Code to be evaluated is empty",running:!1});else{var t=n.context,r=e.match(K);r&&t.getRHelpPage(r[0],(function(e,t,r){e||n.setState({help:r})})),t.log({id:n.id,type:R.cW,value:e});var i=(0,g.Z)(n.props.libraries,n.props.prependCode,t);if(n.props.addPreceding)for(var o=0;o<n.state.id;o++)i+=X[o],i+="\n";if(e=i+e+"\n",n.props.onEvaluate(e),!t)return n.setState({result:"R code can only be run in a production environment",nEvaluations:n.state.nEvaluations+1,running:!1});t.executeRCode({code:e,onResult:function(e,t,r){n.setState({result:r,nEvaluations:n.state.nEvaluations+1}),n.props.onResult(n.state.result)},onPlots:function(e){n.setState({plots:e,running:!1,nEvaluations:n.state.nEvaluations+1})},onError:function(e){n.setState({result:e,running:!1,nEvaluations:n.state.nEvaluations+1})}})}},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.editor=L()(this.editorDiv,{mode:"r",theme:"elegant",lineNumbers:!0,lineWrapping:!0}),this.editor.setValue(this.props.code,-1),this.props.disabled&&this.editor.setOption("readOnly","nocursor"),this.editor.on("change",this.props.onChange),this.props.precompute&&this.handleEvaluationClick();var t=this.context;if(t){this.unsubscribe=t.subscribe((function(t,n){if(t===W.u){var r=Y(n,e.id);(0,C.isPrimitive)(r)&&(e.setState({lastSolution:r,solutionOpen:!1}),e.editor.setValue(r,1))}else e.forceUpdate()}));var n=t.currentUserActions,r=Y(n,this.id);(0,C.isPrimitive)(r)&&(this.setState({lastSolution:r,solutionOpen:!1}),this.editor.setValue(r,1))}},n.componentDidUpdate=function(e){if(this.props.code!==e.code)X[this.state.id]=this.props.code,this.editor.setValue(this.props.code,1),this.props.precompute&&this.handleEvaluationClick();else if(this.props.disabled!==e.disabled)this.props.disabled?this.editor.setOption("readOnly",!0):this.editor.setOption("readOnly",!1);else{var t=a.findDOMNode(this),n=t.closest?t.closest(".spectacle-content"):null;if(n){var r=window.getComputedStyle(n).getPropertyValue("transform"),i=/matrix\(([0-9.]*)/.exec(r);if(k()(i)&&i.length>1){var o=i[1];t.style.transform="scale("+1/o+")"}}}this.editor.refresh()},n.componentWillUnmount=function(){Q=0,X=[],this.unsubscribe&&this.unsubscribe(),w()(this.editor.destroy)&&this.editor.destroy(),this.editor=null},n.renderHelpModal=function(){var e=this.props.t;return l.createElement(m.Z,{backdrop:!1,show:Boolean(this.state.help),title:e("r-help"),onHide:this.hideHelp,style:{left:"auto",padding:"10px",position:"fixed",top:"10px",right:"30px",zIndex:99999,overflow:"hidden"},enforceFocus:!1},l.createElement(m.Z.Header,{closeButton:!0},l.createElement(m.Z.Title,{id:"contained-modal-title-lg"},e("r-help"))),l.createElement(m.Z.Body,{style:{height:"400",overflow:"auto"}},l.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.help}})),l.createElement(m.Z.Footer,null,l.createElement(h.Z,{onClick:this.hideHelp},e("close"))))},n.render=function(){var e=this,t=this.props.hints.length,n=this.props.t,r=function(e,t){for(var n in t||(t={}))B.call(t,n)&&D(e,n,t[n]);if(F)for(var r,i=(0,o.Z)(F(t));!(r=i()).done;)n=r.value,$.call(t,n)&&D(e,n,t[n]);return e}({lineHeight:"1.2em",maxHeight:1.2*P()(5,this.props.lines)+.5+"em",height:1.2*this.props.lines+.5+"em"},this.props.style);return l.createElement("div",{className:"rshell",style:this.props.style},l.createElement("div",{className:"rshell-editor",style:r,ref:function(t){e.editorDiv=t}}),this.props.disabled?l.createElement("span",null):l.createElement(h.Z,{variant:"primary",size:"sm",style:{marginBottom:"8px"},onClick:this.handleEvaluationClick},n("evaluate")),l.createElement(z.Z,{running:this.state.running,width:60,height:30,display:"inline",lines:12,style:{marginBottom:"-12px"}}),this.props.disabled?null:l.createElement(f.Z,{style:{float:"right"}},t>0?l.createElement(T.Z,{disabled:this.props.disabled,hints:this.props.hints,onClick:this.logHint,onFinished:function(){e.setState({exhaustedHints:!0})}}):null,this.props.solution?function(e,t,n,r,i){var o=l.createElement(v.Z,{id:"tooltip"},i("solution-tooltip"));return!e||r<1?l.createElement(_.Z,{placement:"top",positionLeft:100,overlay:o,rootClose:!0},l.createElement("span",{style:{display:"inline-block",marginLeft:"4px"}},l.createElement(h.Z,{variant:"warning",size:"sm",disabled:!0,style:{pointerEvents:"none"}},i(n?"hide-solution":"show-solution")))):l.createElement(h.Z,{variant:"warning",size:"sm",onClick:t},n?"Hide Solution":"Show Solution")}(this.state.exhaustedHints,this.handleSolutionClick,this.state.solutionOpen,this.state.nEvaluations,n):null,this.props.resettable?function(e,t){var n=l.createElement(v.Z,{id:"tooltip"},t("reset-tooltip"));return l.createElement(_.Z,{placement:"top",positionLeft:100,overlay:n,rootClose:!0},l.createElement("span",{style:{display:"inline-block",marginLeft:"4px"}},l.createElement(h.Z,{variant:"warning",size:"sm",onClick:e},t("reset"))))}(this.handleResetClick,n):null,this.props.chat?l.createElement("span",{style:{display:"inline-block",marginLeft:"4px"}},l.createElement(E.Z,{for:this.id})):null),l.createElement("div",{id:"output"},function(e){if(e){var t={__html:y().sanitize(e)};return l.createElement("pre",{id:"output"},l.createElement("span",{dangerouslySetInnerHTML:t}))}return l.createElement("span",null)}(this.state.result),function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=l.createElement(p.Z,{width:"60%",height:"auto",key:r,src:e[r],title:t("r-plot")});return n}(this.state.plots,n)),l.createElement(d.Z,{id:this.id,info:R.cW}),this.renderHelpModal())},t}(l.Component);ee.propTypes={code:u().string,solution:u().string,hints:u().arrayOf(u().oneOfType([u().string,u().node])),addPreceding:u().bool,libraries:u().array,precompute:u().bool,prependCode:u().oneOfType([u().string,u().array]),chat:u().bool,disabled:u().bool,lines:u().number,resettable:u().bool,style:u().object,onChange:u().func,onEvaluate:u().func,onResult:u().func},ee.defaultProps={code:"",solution:"",hints:[],addPreceding:!1,libraries:[],precompute:!1,prependCode:"",chat:!1,disabled:!1,lines:5,resettable:!1,style:{},onChange:function(){},onEvaluate:function(){},onResult:function(){}},ee.contextType=A.Z,t.default=(0,c.Z)("r")((0,V.W)(ee))},6064:function(e,t,n){"use strict";var r=n(588703),i=n.n(r);t.Z=function(e,t,n){var r=n.config.rshell;r&&r.libraries&&(e=e.concat(r.libraries));var o=function(e){return e.map((function(e){return"library("+e+");"})).join(" ")}(e);return r&&r.global&&(o+=r.global+"\n"),t=i()(t)?t.join("\n"):t,o+=t+="\n"}},303428:function(e,t,n){"use strict";n.d(t,{PB:function(){return r},$F:function(){return i}});function r(e){return`data-rr-ui-${e}`}function i(e){return`rrUi${e}`}},232848:function(e,t,n){!function(e){"use strict";e.registerHelper("wordChars","r",/[\w.]/),e.defineMode("r",(function(t){function n(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}var r=["NULL","NA","Inf","NaN","NA_integer_","NA_real_","NA_complex_","NA_character_","TRUE","FALSE"],i=["list","quote","bquote","eval","return","call","parse","deparse"],o=["if","else","repeat","while","function","for","in","next","break"],l=["if","else","repeat","while","function","for"];e.registerHelper("hintWords","r",r.concat(i,o));var a,s=n(r),u=n(i),c=n(o),p=n(l),d=/[+\-*\/^<>=!&|~$:]/;function h(e,t){a=null;var n=e.next();if("#"==n)return e.skipToEnd(),"comment";if("0"==n&&e.eat("x"))return e.eatWhile(/[\da-f]/i),"number";if("."==n&&e.eat(/\d/))return e.match(/\d*(?:e[+\-]?\d+)?/),"number";if(/\d/.test(n))return e.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/),"number";if("'"==n||'"'==n)return t.tokenize=f(n),"string";if("`"==n)return e.match(/[^`]+`/),"variable-3";if("."==n&&e.match(/.(?:[.]|\d+)/))return"keyword";if(/[a-zA-Z\.]/.test(n)){e.eatWhile(/[\w\.]/);var r=e.current();return s.propertyIsEnumerable(r)?"atom":c.propertyIsEnumerable(r)?(p.propertyIsEnumerable(r)&&!e.match(/\s*if(\s+|$)/,!1)&&(a="block"),"keyword"):u.propertyIsEnumerable(r)?"builtin":"variable"}return"%"==n?(e.skipTo("%")&&e.next(),"operator variable-2"):"<"==n&&e.eat("-")||"<"==n&&e.match("<-")||"-"==n&&e.match(/>>?/)?"operator arrow":"="==n&&t.ctx.argList?"arg-is":d.test(n)?"$"==n?"operator dollar":(e.eatWhile(d),"operator"):/[\(\){}\[\];]/.test(n)?(a=n,";"==n?"semi":null):null}function f(e){return function(t,n){if(t.eat("\\")){var r=t.next();return"x"==r?t.match(/^[a-f0-9]{2}/i):("u"==r||"U"==r)&&t.eat("{")&&t.skipTo("}")?t.next():"u"==r?t.match(/^[a-f0-9]{4}/i):"U"==r?t.match(/^[a-f0-9]{8}/i):/[0-7]/.test(r)&&t.match(/^[0-7]{1,2}/),"string-2"}for(var i;null!=(i=t.next());){if(i==e){n.tokenize=h;break}if("\\"==i){t.backUp(1);break}}return"string"}}var m=1,v=2,b=4;function y(e,t,n){e.ctx={type:t,indent:e.indent,flags:0,column:n.column(),prev:e.ctx}}function g(e,t){var n=e.ctx;e.ctx={type:n.type,indent:n.indent,flags:n.flags|t,column:n.column,prev:n.prev}}function E(e){e.indent=e.ctx.indent,e.ctx=e.ctx.prev}return{startState:function(){return{tokenize:h,ctx:{type:"top",indent:-t.indentUnit,flags:v},indent:0,afterIdent:!1}},token:function(e,t){if(e.sol()&&(0==(3&t.ctx.flags)&&(t.ctx.flags|=v),t.ctx.flags&b&&E(t),t.indent=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"!=n&&0==(t.ctx.flags&v)&&g(t,m),";"!=a&&"{"!=a&&"}"!=a||"block"!=t.ctx.type||E(t),"{"==a?y(t,"}",e):"("==a?(y(t,")",e),t.afterIdent&&(t.ctx.argList=!0)):"["==a?y(t,"]",e):"block"==a?y(t,"block",e):a==t.ctx.type?E(t):"block"==t.ctx.type&&"comment"!=n&&g(t,b),t.afterIdent="variable"==n||"keyword"==n,n},indent:function(e,n){if(e.tokenize!=h)return 0;var r=n&&n.charAt(0),i=e.ctx,o=r==i.type;return i.flags&b&&(i=i.prev),"block"==i.type?i.indent+("{"==r?0:t.indentUnit):i.flags&m?i.column+(o?0:1):i.indent+(o?0:t.indentUnit)},lineComment:"#"}})),e.defineMIME("text/x-rsrc","r")}(n(223326))},658092:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=Function.prototype.bind.call(Function.prototype.call,[].slice);function i(e,t){return r(e.querySelectorAll(t))}}}]);
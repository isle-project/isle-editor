(self.webpackChunk=self.webpackChunk||[]).push([[9599],{956780:function(e,t,s){"use strict";var r=(0,s(844601).Z)((function(){return s.e(3269).then(s.bind(s,198164))}));t.Z=r},812383:function(e,t,s){"use strict";var r=s(454530),n=s(202784),i=(s(213980),["children"]),o=function(e){var t=e.children,s=(0,r.Z)(e,i);return n.createElement("div",s,t)};o.defaultProps={className:"",style:{}},t.Z=o},912740:function(e,t,s){"use strict";var r=(0,s(844601).Z)((function(){return s.e(6131).then(s.bind(s,357459))}));t.Z=r},727713:function(e,t,s){"use strict";s.r(t);s(382139),s(627476),s(95767),s(898837),s(694882),s(298351);var r=s(607560),n=s(858255),i=s(264659),o=s(904730),a=s(673989),l=s(175663),c=s(750591),u=s(575630),p=s(151119),d=(s(319371),s(202784)),m=s(911755),h=s.n(m),f=(s(213980),s(198)),v=s(398781),b=s(931776),Z=s(223444),g=s(770561),w=s(312594),y=s(294565),P=s(224008),k=s.n(P),N=s(437069),S=s.n(N),O=s(287013),x=s.n(O),R=s(588703),q=s.n(R),j=s(309765),C=s(623102),F=s.n(C),E=s(42111),A=s(462874),D=s(956780),I=s(812383),T=s(912740),z=s(592864),B=s(228856),L=s(741319),M=s(5140),H=s(432261);function Q(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function W(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(s),!0).forEach((function(t){(0,p.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Q(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,u.Z)(e);if(t){var n=(0,u.Z)(this).constructor;s=Reflect.construct(r,arguments,n)}else s=r.apply(this,arguments);return(0,c.Z)(this,s)}}var _=h()("isle:select-question-matrix"),G=(0,E.Z)("select-question-matrix"),J=function(e){(0,l.Z)(s,e);var t=V(s);function s(e){var r;return(0,i.Z)(this,s),r=t.call(this,e),(0,p.Z)((0,a.Z)(r),"handleChangeFactory",(function(e){return function(t){_("Received a new value for ".concat(e,"..."));var s=k()(r.state.answers,1);s[e]=t.value,r.setState({answers:s})}})),(0,p.Z)((0,a.Z)(r),"handleSubmit",(function(){for(var e=r.context,t=!0,s=S()(r.props.solution),n=0;n<s.length;n++){var i=s[n],o=r.props.solution[i],a=r.state.answers[i];(0,j.isPrimitive)(a)&&(q()(o)?x()(o,a)||(t=!1):o!==a&&(t=!1))}var l=!F()(r.props.solution);"none"!==r.props.provideFeedback&&l?t?e.addNotification({title:r.props.t("correct"),message:r.props.successMsg||r.props.t("success-message"),level:"success"}):e.addNotification({title:r.props.t("incorrect"),message:r.props.failureMsg||r.props.t("failure-message"),level:"error"}):e.addNotification({title:r.state.submitted?r.props.t("answer-resubmitted"):r.props.t("answer-submitted"),message:r.state.submitted?r.props.t("resubmit-message"):r.props.t("submit-message"),level:"info"}),e.log({id:r.id,type:M.QH,value:r.state.answers}),r.props.onSubmit(r.state.answers,t);var c=null;r.props.provideFeedback&&l&&(c=t?"success":"danger");var u=r.state.numbSubmissions+1;r.setState({submitted:!0,answerState:c,submittedAnswers:k()(r.state.answers),numbSubmissions:u,completed:(u>=r.props.nTries||t)&&"none"!==r.props.provideFeedback&&l})})),r.id=e.id||G(e),r.state={answers:{},submitted:!1,answerState:null,completed:!1,numbSubmissions:0,submittedAnswers:null},r}return(0,o.Z)(s,[{key:"renderColumnNames",value:function(){var e,t=this.props.cols.length;return e=t>7?1:t>4?2:3,(0,n.Z)(v.Z.Row,{className:"multiple-choice-matrix-question-header"},void 0,(0,n.Z)(w.Z,{sm:e}),this.props.cols.map((function(e,t){return(0,n.Z)(w.Z,{},t,(0,n.Z)(v.Z.Label,{},void 0,(0,y.isPrimitive)(e)?(0,n.Z)(z.Z,{raw:e}):e))})))}},{key:"renderSelectInput",value:function(e,t){var s,r=e+":"+t,i=this.props.options[r]||[];i=i.map((function(e,t){return{label:e,value:t}}));var o="overall"===this.props.provideFeedback&&this.state.submitted||"individual"===this.props.provideFeedback&&this.state.submitted&&(0,j.isPrimitive)(this.state.submittedAnswers[r]);o&&(0,j.isPrimitive)(this.props.solution[r])&&(s=this.state.submittedAnswers[r]===this.props.solution[r]?"green":"red");var a,l=(0,n.Z)(b.ZP,{name:"form-field-name",className:"select-field",isDisabled:this.state.completed,isSearchable:!1,options:i,onChange:this.handleChangeFactory(r),menuPlacement:"top",menuPortalTarget:document.body,styles:{menuPortal:function(e){return W(W({},e),{},{zIndex:1010})},singleValue:function(e){return W(W({},e),{},{color:s})},menu:function(e){return W(W({},e),{},{width:"max-content",minWidth:"100%"})}}},"select-".concat(e,"-").concat(t)),c=this.props.cellLabels[r];return a=this.state.completed?"green"===s?this.props.t("correct-answer"):this.props.t("should-have-been"):"green"===s?this.props.t("correct"):this.props.t("try-again"),(0,n.Z)(d.Fragment,{},void 0,c?(0,n.Z)("span",{className:"select-question-matrix-cell-label"},void 0,c):null,l,o?(0,n.Z)(Z.Z,{variant:"green"===s?"success":"danger"},void 0,a,this.state.completed?this.props.options[r][this.props.solution[r]]:null):null)}},{key:"renderRowSelects",value:function(e){for(var t=this.props.cols.length,s=new Array(t),r=0;r<t;r++)s[r]=(0,n.Z)(w.Z,{},r,this.renderSelectInput(e,r));return(0,n.Z)(d.Fragment,{},void 0,s)}},{key:"renderRows",value:function(){var e,t=this,s=this.props.rows.length;return e=s>7?1:s>4?2:3,this.props.rows.map((function(s,r){return(0,n.Z)(v.Z.Row,{style:{marginBottom:15,marginTop:15}},r,(0,n.Z)(w.Z,{sm:e},void 0,(0,n.Z)(v.Z.Label,{column:!0,style:{textAlign:"right"}},void 0,(0,y.isPrimitive)(s)?(0,n.Z)(z.Z,{raw:s}):s)),t.renderRowSelects(r))}))}},{key:"render",value:function(){var e=this.props.hints.length,t=S()(this.state.answers).length,s=S()(this.props.options).length,i=0===t||t<s&&!this.props.allowIncomplete||this.state.completed;return d.createElement(A.Z,(0,r.Z)({id:this.id,border:this.state.answerState,className:"select-question-matrix ".concat(this.props.className),style:this.props.style},this.props.panelProps),this.props.question?(0,n.Z)("label",{},void 0,this.props.question):null,this.renderColumnNames(),this.renderRows(),(0,n.Z)("div",{className:"select-question-matrix-toolbar"},void 0,(0,n.Z)(g.Z,{className:"submit-button",variant:"primary",size:"sm",onClick:this.handleSubmit,disabled:i},void 0,this.state.submitted?this.props.t("resubmit"):this.props.t("submit")),e>0?(0,n.Z)(D.Z,{onClick:this.logHint,hints:this.props.hints,placement:this.props.hintPlacement}):null,this.props.chat?(0,n.Z)(T.Z,{for:this.id}):null),(0,n.Z)("div",{},void 0,(0,n.Z)(I.Z,{id:this.id,data:{type:"tensor",rows:this.props.rows,cols:this.props.cols,question:this.props.question,solution:this.props.solution},info:M.QH}),this.props.feedback?(0,n.Z)(B.Z,{id:this.id+"_feedback",style:{float:"left"}}):null))}}]),s}(d.Component);J.defaultProps={question:"",rows:[],cols:[],solution:{},options:{},hints:[],hintPlacement:"bottom",feedback:!0,provideFeedback:"individual",allowIncomplete:!1,nTries:3,failureMsg:null,successMsg:null,cellLabels:{},chat:!1,panelProps:{},className:"",style:{},onSubmit:function(){}},J.contextType=L.Z,t.default=(0,f.Z)("questions/select-matrix")((0,H.W)(J))},770561:function(e,t,s){"use strict";var r=s(607560),n=s(998283),i=s(72779),o=s.n(i),a=s(202784),l=s(429658),c=s(482695),u=["bsPrefix","variant","size","active","className","block","type","as"],p=a.forwardRef((function(e,t){var s=e.bsPrefix,i=e.variant,p=e.size,d=e.active,m=e.className,h=e.block,f=e.type,v=e.as,b=(0,n.Z)(e,u),Z=(0,l.vE)(s,"btn"),g=o()(m,Z,d&&"active",i&&Z+"-"+i,h&&Z+"-block",p&&Z+"-"+p);if(b.href)return a.createElement(c.Z,(0,r.Z)({},b,{as:v,ref:t,className:o()(g,b.disabled&&"disabled")}));t&&(b.ref=t),f?b.type=f:v||(b.type="button");var w=v||"button";return a.createElement(w,(0,r.Z)({},b,{className:g}))}));p.displayName="Button",p.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=p}}]);
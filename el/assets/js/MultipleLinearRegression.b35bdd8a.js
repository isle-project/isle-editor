"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3215],{699292:function(t,e,r){r.r(e),r.d(e,{default:function(){return et}});var s=r(497326),i=r(894578),n=r(867855),a=r(202784),o=r(213980),l=r.n(o),u=r(198),h=r(322208),c=r(49909);class f{constructor(t,e,r={}){const{intercept:s=!0,statistics:i=!0}=r;if(this.statistics=i,!0===t)this.weights=e.weights,this.inputs=e.inputs,this.outputs=e.outputs,this.intercept=e.intercept;else{t=new h.Z(t),e=new h.Z(e),s&&t.addColumn(new Array(t.rows).fill(1));let r=t.transpose();const n=r.mmul(t),a=r.mmul(e),o=new c.Z(n).inverse(),l=a.transpose().mmul(o).transpose();if(this.weights=l.to2DArray(),this.inputs=t.columns,this.outputs=e.columns,s&&this.inputs--,this.intercept=s,i){const r=t.mmul(l),s=e.clone().addM(r.neg()).to2DArray().map((t=>Math.pow(t[0],2))).reduce(((t,e)=>t+e))/(e.rows-t.columns);this.stdError=Math.sqrt(s),this.stdErrorMatrix=function(t,e=Number.EPSILON){if((t=h.Z.checkMatrix(t)).isEmpty())return t.transpose();let r=new c.Z(t,{autoTranspose:!0}),s=r.leftSingularVectors,i=r.rightSingularVectors,n=r.diagonal;for(let a=0;a<n.length;a++)Math.abs(n[a])>e?n[a]=1/n[a]:n[a]=0;return i.mmul(h.Z.diag(n).mmul(s.transpose()))}(n).mul(s),this.stdErrors=this.stdErrorMatrix.diagonal().map((t=>Math.sqrt(t))),this.tStats=this.weights.map(((t,e)=>0===this.stdErrors[e]?0:t[0]/this.stdErrors[e]))}}}predict(t){if(Array.isArray(t)){if("number"==typeof t[0])return this._predict(t);if(Array.isArray(t[0])){const e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=this._predict(t[r]);return e}}else if(h.Z.isMatrix(t)){const e=new h.Z(t.rows,this.outputs);for(let r=0;r<t.rows;r++)e.setRow(r,this._predict(t.getRow(r)));return e}throw new TypeError("x must be a matrix or array of numbers")}_predict(t){const e=new Array(this.outputs);if(this.intercept)for(let r=0;r<this.outputs;r++)e[r]=this.weights[this.inputs][r];else e.fill(0);for(let r=0;r<this.inputs;r++)for(let s=0;s<this.outputs;s++)e[s]+=this.weights[r][s]*t[r];return e}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map(((t,e)=>({label:e===this.weights.length-1?"Intercept":`X Variable ${e+1}`,coefficients:t,standardError:this.stdErrors[e],tStat:this.tStats[e]})))}:void 0}}static load(t){if("multivariateLinearRegression"!==t.name)throw new Error("not a MLR model");return new f(!0,t)}}var d=r(822736),g=r(770561),p=r(733727),m=r.n(p),v=r(686605),y=r.n(v),b=r(694751),w=r.n(b),E=r(287013),M=r.n(E),x=r(588703),Z=r.n(x),S=r(32593),q=r.n(S),N=r(254988),O=r.n(N),P=r(43649),A=r(708579),F=r(584443),k=r(590848),R=r(7962),V=r(211565),D=r(519907),L=r(20905),j=r(615558),T=r(412042),_=r(479724),I=r(641728),C=Object.defineProperty,G=Object.defineProperties,U=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,X=function(t,e,r){return e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},J=function(t,e){for(var r in e||(e={}))$.call(e,r)&&X(t,r,e[r]);if(z)for(var s,i=(0,n.Z)(z(e));!(s=i()).done;){r=s.value;B.call(e,r)&&X(t,r,e[r])}return t},W=function(t,e,r){return X(t,"symbol"!=typeof e?e+"":e,r),r},H=0;function K(t,e,r,s,i){Z()(t)||(t=[t]);for(var n=[],a=[],o={},l=r[t[0]].length,u=0;u<t.length;u++){var h=r[t[u]];if(M()(s,t[u]))a.push(t[u]);else{for(var c=(0,L.Z)(h,t[u]),f=i?1:0;f<c.length;f++)a.push(t[u]+"_"+c[f]);o[t[u]]=c}}for(var d=0;d<l;d++){for(var g=[],p=0;p<t.length;p++){var m=r[t[p]];if(M()(s,t[p]))g.push(m[d]);else for(var v=o[t[p]],y=m[d],b=i?1:0;b<v.length;b++)g.push(y===v[b]?1:0)}n.push(g)}return{matrix:n,predictors:a,yvalues:r[e].map((function(t){return[t]})),nobs:l}}function Q(t,e,r,s,i){Z()(t)||(t=[t]);for(var n=[],a=[],o={},l=[],u=0;u<t.length;u++){var h=r[t[u]];if(M()(s,t[u]))a.push(t[u]);else{for(var c=(0,L.Z)(h,t[u]),f=i?1:0;f<c.length;f++)a.push(t[u]+"_"+c[f]);o[t[u]]=c}}for(var d=0;d<r[t[0]].length;d++){for(var g=[],p=!1,m=0;m<t.length;m++){var v=r[t[m]];if(M()(s,t[m])){if(!(0,_.Z)(v[d])){p=!0;break}g.push(v[d])}else{var y=v[d];if((0,I.Z)(y)){p=!0;break}for(var b=o[t[m]],w=i?1:0;w<b.length;w++)g.push(y===b[w]?1:0)}}var E=r[e][d];!p&&(0,_.Z)(E)&&(n.push(g),l.push([E]))}return{matrix:n,predictors:a,yvalues:l,nobs:l.length}}var Y=function(t){var e=t.x,r=t.y,s=t.intercept,i=t.omitMissing,n=t.data,a=t.quantitative,o={};try{var l=(i?Q:K)(e,r,n,a,s),u=l.matrix,h=l.predictors,c=l.yvalues,d=l.nobs;o.result=new f(u,c,{intercept:s});var g=o.result.predict(u).map((function(t){return t[0]}));o.yhat=g;for(var p=(0,D.Z)(g),v=0,y=0;y<g.length;y++)v+=m()(g[y]-p,2);for(var b=(0,V.Z)(c,g),w=0,E=0;E<b.length;E++)w+=m()(b[E],2);var M=h.length;return o.resid=b,o.rSquared=v/(v+w),o.adjRSquared=1-(1-o.rSquared)*(d-1)/(d-M-1),o.fScore=v/M/(w/(d-M-1)),o.p=M,o.nobs=d,o.predictors=h,o}catch(x){return o}},tt=function(t){function e(e){var r;r=t.call(this,e)||this,W((0,s.Z)(r),"handleDiagnostics",(function(){var t,e=r.props,s=e.x,i=e.y,n=e.intercept,o=e.t,l=a.createElement(F.Z,(t=J({draggable:!0,editable:!0,fit:!0},(0,R._)(r.state.resid,"residuals")),G(t,U({meta:{type:"qqplot of regression residuals",x:s,y:i,intercept:n}})))),u=a.createElement(k.Z,{data:{Residuals:r.state.resid},variable:"Residuals",title:o("plotly:histogram-title",{x:"Residuals"})}),h=a.createElement(F.Z,{draggable:!0,editable:!0,fit:!0,data:[{x:r.state.yhat,y:r.state.resid,mode:"markers",type:r.state.yhat.length>2e3?"scattergl":"scatter"}],layout:{xaxis:{title:o("fitted-values")},yaxis:{title:o("residuals")},title:o("residuals-vs-fitted")},meta:{type:"regression residuals vs. fitted",x:s,y:i,intercept:n}});r.props.onDiagnostics([l,u,h])})),W((0,s.Z)(r),"handlePredict",(function(){var t=r.props,e=t.quantitative,s=t.intercept;r.props.onPredict((function(t){var i=r.props,n=i.x,a=i.y,o=K(n,a,t,e,s).matrix,l=r.state.result.predict(o).map((function(t){return t[0]}));return{fitted:l,residuals:(0,V.Z)(t[a],l)}}),H)})),H+=1;var i=e.x,n=e.y,o=e.intercept,l=e.omitMissing,u=e.data,h=e.quantitative;return r.state=J(J({},Y({x:i,y:n,intercept:o,omitMissing:l,data:u,quantitative:h})),e),r}return(0,i.Z)(e,t),e.getDerivedStateFromProps=function(t,e){if(t.data!==e.data||t.quantitative!==e.quantitative||t.x!==e.x||t.y!==e.y||t.omitMissing!==e.omitMissing||t.intercept!==e.intercept){var r=t.x,s=t.y,i=t.intercept,n=t.omitMissing,a=t.data,o=t.quantitative;return J(J({},Y({x:r,y:s,intercept:i,omitMissing:n,data:a,quantitative:o})),t)}return null},e.prototype.render=function(){var t=this.state,e=t.y,r=t.predictors,s=t.nobs,i=t.result,n=t.adjRSquared,o=t.p,l=t.fScore,u=t.rSquared,h=this.props.t;return i?a.createElement("div",{style:{overflowX:"auto",width:"100%"}},a.createElement("span",{className:"title"},h("multiple-regression-title",{y:e,counter:H})),function(t,e,r,s,i){var n=O().factory(r-e.length-1);return a.createElement(P.Z,{bordered:!0,size:"sm"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,i("predictor")),a.createElement("th",null,i("coefficient")),a.createElement("th",null,i("std-error")),a.createElement("th",null,"t"),a.createElement("th",null,i("p-value")))),a.createElement("tbody",null,s.intercept?a.createElement("tr",null,a.createElement("th",null,i("intercept")),a.createElement("td",null,s.weights[e.length][0].toFixed(6)),a.createElement("td",null,s.stdErrors[e.length].toFixed(4)),a.createElement("td",null,s.tStats[e.length].toFixed(4)),a.createElement("td",null,2*(1-n(q()(s.tStats[e.length]))).toFixed(4))):null,e.map((function(t,e){return a.createElement("tr",{key:e},a.createElement("th",null,t),a.createElement("td",null,s.weights[e][0].toFixed(6)),a.createElement("td",null,s.stdErrors[e].toFixed(4)),a.createElement("td",null,s.tStats[e].toFixed(4)),a.createElement("td",null,2*(1-n(q()(s.tStats[e]))).toFixed(4)))}))))}(0,r,s,i,h),a.createElement("p",null,h("residual-standard-error"),": ",y()(i.stdError)),a.createElement("p",null,"R\xb2:"," ",u.toFixed(6),", ",h("adjusted")," ","R\xb2:"," ",n.toFixed(6)),a.createElement("p",null,h("f-statistic"),": ",l.toFixed(3)," ($","df",": ",s-o-1,", ",o,"), ",h("p-value"),": ",(1-w()(l,o,s-o-1)).toFixed(6)),this.props.onPredict?a.createElement(A.Z,{placement:"top",tooltip:h("use-model-to-predict-tooltip")},a.createElement(g.Z,{variant:"secondary",size:"sm",onClick:this.handlePredict},h("use-model-to-predict"))):null,this.props.onDiagnostics?a.createElement(g.Z,{variant:"secondary",size:"sm",style:{marginLeft:6},onClick:this.handleDiagnostics},h("model-diagnostics")):null):a.createElement(d.Z,{variant:"danger"},this.props.t("missing-attributes"))},e}(a.Component);tt.defaultProps={omitMissing:!1,intercept:!0,onDiagnostics:null,onPredict:null},tt.propTypes={data:l().object.isRequired,y:l().string.isRequired,x:l().oneOfType([l().arrayOf(l().oneOfType([l().string,l().instanceOf(T.E)])),l().string,l().instanceOf(T.E)]).isRequired,quantitative:l().arrayOf(l().string).isRequired,omitMissing:l().bool,intercept:l().bool,onDiagnostics:l().func,onPredict:l().func};var et=(0,u.Z)(["models","plotly"])((0,j.W)(tt))},211565:function(t,e,r){var s=r(89596),i=r.n(s),n=r(309765);e.Z=function(t,e){var r=i()(e);if(!i()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!(0,n.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");var s=t.length,a=new Array(s);if(r){if(s!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(var o=0;o<s;o++)a[o]=t[o]-e[o]}else for(var l=0;l<s;l++)a[l]=t[l]-e;return a}},49909:function(t,e,r){r.d(e,{Z:function(){return a}});var s=r(322208),i=r(70756),n=r(31845);class a{constructor(t,e={}){if((t=i.Z.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let r=t.rows,a=t.columns;const{computeLeftSingularVectors:o=!0,computeRightSingularVectors:l=!0,autoTranspose:u=!1}=e;let h,c=Boolean(o),f=Boolean(l),d=!1;if(r<a)if(u){h=t.transpose(),r=h.rows,a=h.columns,d=!0;let e=c;c=f,f=e}else h=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else h=t.clone();let g=Math.min(r,a),p=Math.min(r+1,a),m=new Float64Array(p),v=new s.Z(r,g),y=new s.Z(a,a),b=new Float64Array(a),w=new Float64Array(r),E=new Float64Array(p);for(let s=0;s<p;s++)E[s]=s;let M=Math.min(r-1,a),x=Math.max(0,Math.min(a-2,r)),Z=Math.max(M,x);for(let s=0;s<Z;s++){if(s<M){m[s]=0;for(let t=s;t<r;t++)m[s]=(0,n.G)(m[s],h.get(t,s));if(0!==m[s]){h.get(s,s)<0&&(m[s]=-m[s]);for(let t=s;t<r;t++)h.set(t,s,h.get(t,s)/m[s]);h.set(s,s,h.get(s,s)+1)}m[s]=-m[s]}for(let t=s+1;t<a;t++){if(s<M&&0!==m[s]){let e=0;for(let i=s;i<r;i++)e+=h.get(i,s)*h.get(i,t);e=-e/h.get(s,s);for(let i=s;i<r;i++)h.set(i,t,h.get(i,t)+e*h.get(i,s))}b[t]=h.get(s,t)}if(c&&s<M)for(let t=s;t<r;t++)v.set(t,s,h.get(t,s));if(s<x){b[s]=0;for(let t=s+1;t<a;t++)b[s]=(0,n.G)(b[s],b[t]);if(0!==b[s]){b[s+1]<0&&(b[s]=0-b[s]);for(let t=s+1;t<a;t++)b[t]/=b[s];b[s+1]+=1}if(b[s]=-b[s],s+1<r&&0!==b[s]){for(let t=s+1;t<r;t++)w[t]=0;for(let t=s+1;t<r;t++)for(let e=s+1;e<a;e++)w[t]+=b[e]*h.get(t,e);for(let t=s+1;t<a;t++){let e=-b[t]/b[s+1];for(let i=s+1;i<r;i++)h.set(i,t,h.get(i,t)+e*w[i])}}if(f)for(let t=s+1;t<a;t++)y.set(t,s,b[t])}}let S=Math.min(a,r+1);if(M<a&&(m[M]=h.get(M,M)),r<S&&(m[S-1]=0),x+1<S&&(b[x]=h.get(x,S-1)),b[S-1]=0,c){for(let t=M;t<g;t++){for(let e=0;e<r;e++)v.set(e,t,0);v.set(t,t,1)}for(let t=M-1;t>=0;t--)if(0!==m[t]){for(let e=t+1;e<g;e++){let s=0;for(let i=t;i<r;i++)s+=v.get(i,t)*v.get(i,e);s=-s/v.get(t,t);for(let i=t;i<r;i++)v.set(i,e,v.get(i,e)+s*v.get(i,t))}for(let e=t;e<r;e++)v.set(e,t,-v.get(e,t));v.set(t,t,1+v.get(t,t));for(let e=0;e<t-1;e++)v.set(e,t,0)}else{for(let e=0;e<r;e++)v.set(e,t,0);v.set(t,t,1)}}if(f)for(let s=a-1;s>=0;s--){if(s<x&&0!==b[s])for(let t=s+1;t<a;t++){let e=0;for(let r=s+1;r<a;r++)e+=y.get(r,s)*y.get(r,t);e=-e/y.get(s+1,s);for(let r=s+1;r<a;r++)y.set(r,t,y.get(r,t)+e*y.get(r,s))}for(let t=0;t<a;t++)y.set(t,s,0);y.set(s,s,1)}let q=S-1,N=0,O=Number.EPSILON;for(;S>0;){let t,e;for(t=S-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+O*Math.abs(m[t]+Math.abs(m[t+1]));if(Math.abs(b[t])<=e||Number.isNaN(b[t])){b[t]=0;break}}if(t===S-2)e=4;else{let r;for(r=S-1;r>=t&&r!==t;r--){let e=(r!==S?Math.abs(b[r]):0)+(r!==t+1?Math.abs(b[r-1]):0);if(Math.abs(m[r])<=O*e){m[r]=0;break}}r===t?e=3:r===S-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=b[S-2];b[S-2]=0;for(let r=S-2;r>=t;r--){let s=(0,n.G)(m[r],e),i=m[r]/s,o=e/s;if(m[r]=s,r!==t&&(e=-o*b[r-1],b[r-1]=i*b[r-1]),f)for(let t=0;t<a;t++)s=i*y.get(t,r)+o*y.get(t,S-1),y.set(t,S-1,-o*y.get(t,r)+i*y.get(t,S-1)),y.set(t,r,s)}break}case 2:{let e=b[t-1];b[t-1]=0;for(let s=t;s<S;s++){let i=(0,n.G)(m[s],e),a=m[s]/i,o=e/i;if(m[s]=i,e=-o*b[s],b[s]=a*b[s],c)for(let e=0;e<r;e++)i=a*v.get(e,s)+o*v.get(e,t-1),v.set(e,t-1,-o*v.get(e,s)+a*v.get(e,t-1)),v.set(e,s,i)}break}case 3:{const e=Math.max(Math.abs(m[S-1]),Math.abs(m[S-2]),Math.abs(b[S-2]),Math.abs(m[t]),Math.abs(b[t])),s=m[S-1]/e,i=m[S-2]/e,o=b[S-2]/e,l=m[t]/e,u=b[t]/e,h=((i+s)*(i-s)+o*o)/2,d=s*o*(s*o);let g=0;0===h&&0===d||(g=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),g=d/(h+g));let p=(l+s)*(l-s)+g,w=l*u;for(let E=t;E<S-1;E++){let e=(0,n.G)(p,w);0===e&&(e=Number.MIN_VALUE);let s=p/e,i=w/e;if(E!==t&&(b[E-1]=e),p=s*m[E]+i*b[E],b[E]=s*b[E]-i*m[E],w=i*m[E+1],m[E+1]=s*m[E+1],f)for(let t=0;t<a;t++)e=s*y.get(t,E)+i*y.get(t,E+1),y.set(t,E+1,-i*y.get(t,E)+s*y.get(t,E+1)),y.set(t,E,e);if(e=(0,n.G)(p,w),0===e&&(e=Number.MIN_VALUE),s=p/e,i=w/e,m[E]=e,p=s*b[E]+i*m[E+1],m[E+1]=-i*b[E]+s*m[E+1],w=i*b[E+1],b[E+1]=s*b[E+1],c&&E<r-1)for(let t=0;t<r;t++)e=s*v.get(t,E)+i*v.get(t,E+1),v.set(t,E+1,-i*v.get(t,E)+s*v.get(t,E+1)),v.set(t,E,e)}b[S-2]=p,N+=1;break}case 4:if(m[t]<=0&&(m[t]=m[t]<0?-m[t]:0,f))for(let e=0;e<=q;e++)y.set(e,t,-y.get(e,t));for(;t<q&&!(m[t]>=m[t+1]);){let e=m[t];if(m[t]=m[t+1],m[t+1]=e,f&&t<a-1)for(let r=0;r<a;r++)e=y.get(r,t+1),y.set(r,t+1,y.get(r,t)),y.set(r,t,e);if(c&&t<r-1)for(let s=0;s<r;s++)e=v.get(s,t+1),v.set(s,t+1,v.get(s,t)),v.set(s,t,e);t++}N=0,S--}}if(d){let t=y;y=v,v=t}this.m=r,this.n=a,this.s=m,this.U=v,this.V=y}solve(t){let e=t,r=this.threshold,i=this.s.length,n=s.Z.zeros(i,i);for(let s=0;s<i;s++)Math.abs(this.s[s])<=r?n.set(s,s,0):n.set(s,s,1/this.s[s]);let a=this.U,o=this.rightSingularVectors,l=o.mmul(n),u=o.rows,h=a.rows,c=s.Z.zeros(u,h);for(let s=0;s<u;s++)for(let t=0;t<h;t++){let e=0;for(let r=0;r<i;r++)e+=l.get(s,r)*a.get(t,r);c.set(s,t,e)}return c.mmul(e)}solveForDiagonal(t){return this.solve(s.Z.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,i=t.columns,n=new s.Z(r,this.s.length);for(let s=0;s<r;s++)for(let r=0;r<i;r++)Math.abs(this.s[r])>e&&n.set(s,r,t.get(s,r)/this.s[r]);let a=this.U,o=a.rows,l=a.columns,u=new s.Z(r,o);for(let s=0;s<r;s++)for(let t=0;t<o;t++){let e=0;for(let r=0;r<l;r++)e+=n.get(s,r)*a.get(t,r);u.set(s,t,e)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let s=0,i=r.length;s<i;s++)r[s]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return s.Z.diag(this.s)}}},31845:function(t,e,r){function s(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}r.d(e,{G:function(){return s}})},70756:function(t,e,r){r.d(e,{Z:function(){return i}});var s=r(322208);class i extends s.X{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}},770561:function(t,e,r){var s=r(72779),i=r.n(s),n=r(202784),a=r(247830),o=r(429658),l=r(552322);const u=n.forwardRef((({as:t,bsPrefix:e,variant:r,size:s,active:n,className:u,...h},c)=>{const f=(0,o.vE)(e,"btn"),[d,{tagName:g}]=(0,a.FT)({tagName:t,...h}),p=g;return(0,l.jsx)(p,{...h,...d,ref:c,className:i()(u,f,n&&"active",r&&`${f}-${r}`,s&&`${f}-${s}`,h.href&&h.disabled&&"disabled")})}));u.displayName="Button",u.defaultProps={variant:"primary",active:!1,disabled:!1},e.Z=u}}]);
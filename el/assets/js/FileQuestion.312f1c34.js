"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2017],{134656:function(e,t,n){var a=(0,n(708717).Z)((function(){return n.e(112).then(n.bind(n,643549))}));t.Z=a},569904:function(e,t,n){var a=n(867855),l=n(202784),r=n(213980),i=n.n(r),o=Object.defineProperty,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p=function(e){var t=e,n=t.children,r=function(e,t){var n={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&c)for(var r,i=(0,a.Z)(c(e));!(r=i()).done;)l=r.value,t.indexOf(l)<0&&u.call(e,l)&&(n[l]=e[l]);return n}(t,["children"]);return l.createElement("div",function(e,t){for(var n in t||(t={}))s.call(t,n)&&f(e,n,t[n]);if(c)for(var l,r=(0,a.Z)(c(t));!(l=r()).done;)n=l.value,u.call(t,n)&&f(e,n,t[n]);return e}({},r),n)};p.defaultProps={className:"",style:{}},p.propTypes={className:i().string,style:i().object},t.Z=p},615697:function(e,t,n){var a=(0,n(708717).Z)((function(){return n.e(6131).then(n.bind(n,102149))}));t.Z=a},870717:function(e,t,n){var a=(0,n(708717).Z)((function(){return Promise.all([n.e(3312),n.e(4507)]).then(n.bind(n,552767))}));t.Z=a},933630:function(e,t,n){n.r(t);var a=n(202784),l=n(213980),r=n.n(l),i=n(690299),o=n.n(i),c=n(376699),s=n(790817),u=n(24551),f=n(267682),p=n(891027),m=n(864892),d=n(134656),b=n(615697),v=n(569904),h=n(269891),g=n(870717),y=n(138250),Z=n(23228),E=n(615558),k=n(382617),N=n(10206),q=(0,u.Z)("file-question"),O=o()("isle:file-upload"),C=function(e){var t=(0,c.$)("questions/file").t,n=e.accept,l=e.until,r=e.onChange,i=(0,a.useRef)(e.id||q(e)),o=(0,a.useContext)(f.Z),u=(0,a.useRef)(null),E=(0,a.useState)(null),C=E[0],P=E[1],w=(0,a.useState)(null),D=w[0],x=w[1],j=(0,a.useState)(!1),S=j[0],T=j[1],R=(0,a.useState)(!1),_=R[0],F=R[1],A=(0,a.useCallback)((function(){O("Set submission to last action for question "+i.current+" if available...");var e=o.currentUserActions,t=(0,Z.Z)(e,i.current,k.R_);t&&t!==D&&(x(t),F(!0))}),[o,D]),L=e.hints.length,z=(0,a.useCallback)((function(e){O("Logging hint..."),o.log({id:i.current,type:k.cN,value:e})}),[o]);(0,a.useEffect)((function(){var e=o.subscribe((function(e){e===N.u&&A()}));return function(){e()}}),[o,A]);var W,B=(0,a.useCallback)((function(){var e=new FormData;e.append("file",C),T(!0),o.uploadFile({formData:e,callback:function(e,t){if(e)return O(e),T(!1),P(null),void(u.current.value="");var n=t.filename,a=o.server+"/"+n;o.log({id:i.current,type:k.R_,value:a}),x(a),T(!1),F(!0)},showNotification:!0})}),[C,o]);return S||(W=a.createElement(a.Fragment,null,D?a.createElement("div",{className:"center",style:{maxWidth:600}},a.createElement("p",null,t("submitted-file-link"),": ",a.createElement("a",{href:D,target:"_blank",rel:"noopener noreferrer"},D))):null,a.createElement("div",{className:"file-question-dropzone",onDrop:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer,n=null;if(t.items&&t.items.length>0){var a=t.items[0];"file"===a.kind&&(n=a.getAsFile())}else t.files&&t.files.length>0&&(n=t.files[0]);n&&(r(n),P(n))},onDragOver:y.Z,onDragEnd:y.Z},a.createElement("span",null,t("drop-file"))),a.createElement("p",{className:"center"},t("or")),a.createElement("input",{id:i+"-upload",className:"file-question-input center",type:"file",accept:n,onChange:function(){var e=u.current.files[0];r(e),P(e)},ref:u}))),a.createElement(s.Z,{id:i.current,className:"file-question "+e.className,style:e.style},a.createElement(s.Z.Body,{className:"d-grid gap-2",style:{width:e.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},a.createElement("label",null,e.question),a.createElement(p.Z,{running:S,width:256,height:128}),W,e.feedback?a.createElement(h.Z,{vertical:!0,id:i.current+"_feedback",style:{position:"absolute",right:"4px",top:"4px"}}):null,a.createElement(v.Z,{buttonLabel:"Answers",id:i.current,info:k.R_,data:{question:e.question,type:"file"},points:e.points}),a.createElement("div",{className:"file-question-toolbar"},L>0?a.createElement(d.Z,{onClick:z,hints:e.hints,placement:e.hintPlacement}):null,l&&o.startTime>l?a.createElement("span",{className:"title",style:{marginLeft:4}},t("question-closed")):a.createElement(m.Z,{className:"submit-button",variant:"primary",size:"sm",onClick:B,disabled:!C||S},t(_?"resubmit":"submit")),e.chat?a.createElement(b.Z,{for:i.current}):null),a.createElement(g.Z,{for:i.current,points:e.points})))};C.defaultProps={question:"",hints:[],hintPlacement:"bottom",feedback:!0,chat:!1,accept:"*/*",until:null,points:10,className:"",style:{},onChange:function(){}},C.propTypes={question:r().oneOfType([r().string,r().node]),hintPlacement:r().string,hints:r().arrayOf(r().oneOfType([r().string,r().node])),feedback:r().bool,chat:r().bool,accept:r().string,until:r().instanceOf(Date),points:r().number,className:r().string,style:r().object,onChange:r().func},t.default=(0,E.W)(C)},23228:function(e,t,n){var a=n(588703),l=n.n(a),r=n(830324),i=n.n(r);t.Z=function(e,t,n){if(i()(e)){var a=e[t];if(l()(a)&&(a=a.filter((function(e){return e.type===n}))).length>0)return a[0].value}return null}},138250:function(e,t){t.Z=function(e){e.stopPropagation(),e.preventDefault()}}}]);
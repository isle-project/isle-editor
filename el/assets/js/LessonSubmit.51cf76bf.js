"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9080],{84207:function(e,t,n){var s=(0,n(708717).Z)((function(){return Promise.all([n.e(3312),n.e(4438)]).then(n.bind(n,282199))}));t.Z=s},938335:function(e,t,n){var s=(0,n(708717).Z)((function(){return n.e(9036).then(n.bind(n,362281))}));t.Z=s},756307:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var s=n(497326),i=n(894578),o=n(867855),a=n(202784),r=n(690299),l=n.n(r),c=n(213980),u=n.n(c),p=n(198),m=n(912895),d=n.n(m),f=n(318967),h=n.n(f),g=n(770561),b=n(431882),v=n(294565),y=n(623102),Z=n.n(y),S=n(588703),x=n.n(S),E=n(686605),w=n.n(E),C=n(434910),L=n(938335),N=n(84207),z=n(296981),k=n(267682),P=n(10206),U=n(382617),j=(n(697927),n(615558));var A=function(e,t,n){return{text:n("lesson-completed-msg",{name:e.user.name,lessonName:e.lessonName,namespaceName:e.namespaceName,msg:t||""}),subject:e.lessonName+" "+n("successfully-completed")+"!"}},M=Object.defineProperty,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,D=function(e,t,n){return t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},R=function(e,t){for(var n in t||(t={}))T.call(t,n)&&D(e,n,t[n]);if(O)for(var s,i=(0,o.Z)(O(t));!(s=i()).done;){n=s.value;q.call(t,n)&&D(e,n,t[n])}return e},B=function(e,t,n){return D(e,"symbol"!=typeof t?t+"":t,n),n},F=l()("isle:lesson-submit"),V=function(e){function t(t){var n;return n=e.call(this,t)||this,B((0,s.Z)(n),"createResponseSummaryDoc",(function(){var e=n.context,t={content:[{text:n.props.t("responses-header")+" "+e.namespaceName+"/"+e.lessonName,style:"header",alignment:"center"}],styles:{header:{fontSize:24,bold:!0,margin:[0,0,0,10]},author:{fontSize:16,italics:!0,margin:[0,0,0,10],alignment:"center"},date:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},elapsed:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},subheader:{fontSize:18,bold:!0,margin:[0,30,0,10]},question:{fontSize:15,margin:[0,0,0,10],italics:!0}}};Z()(e.user)||t.content.push({text:n.props.t("by")+" "+e.user.name+" ("+e.user.email+")",style:"author"});var s=new Date;if(t.content.push({text:s.toLocaleDateString()+" - "+s.toLocaleTimeString(),style:"date"}),t.content.push({text:n.props.t("elapsed")+": "+w()(e.duration/6e4)+"min",style:"elapsed"}),e.currentUserActions)for(var i=e.responseVisualizerIds,o=function(s){var o=e.responseVisualizers[i[s]];if(t.content.push({text:i[s],style:"subheader"}),o){var a=o.type,r=o.ref.props.data.question,l=o.ref.props.data.type;t.content.push({text:(0,v.isPrimitive)(r)?r:h()(r),style:"question"});var c=e.currentUserActions[i[s]];if(c)if(c=(c=c.filter((function(e){return e.type===a}))).sort((function(e,t){return e.absoluteTime-t.absoluteTime})),n.state.onlyLatest){var u=c[c.length-1];n.addAction(u,t,l,o)}else c.forEach((function(e,s){t.content.push({text:n.props.t("submission")+" #"+(s+1)+":"}),n.addAction(e,t,l,o)}))}},a=0;a<i.length;a++)o(a);d().createPdf(t).download("responses.pdf")})),B((0,s.Z)(n),"addAction",(function(e,t,s,i){if("image"===s)t.content.push({image:e.value,width:500});else if("factor"===s){var o,a=i.ref.props.data.levels;a=a.map((function(e,t){var s=(0,v.isPrimitive)(e)?e:h()(e);return s||(s=n.props.t("choice")+" "+(t+1)),s})),o=x()(e.value)?e.value.map((function(e){return a[e]})).join(", "):a[e.value],t.content.push({text:o})}else t.content.push({text:e.value})})),B((0,s.Z)(n),"closeUserModal",(function(){n.setState({showUserModal:!1,visibleLogin:!1,visibleSignup:!1})})),B((0,s.Z)(n),"login",(function(e){e.stopPropagation(),n.setState({visibleLogin:!0,visibleSignup:!1})})),B((0,s.Z)(n),"signup",(function(e){e.stopPropagation(),n.setState({visibleSignup:!0,visibleLogin:!1})})),B((0,s.Z)(n),"closeSignup",(function(){n.setState({visibleSignup:!1,showUserModal:!1})})),B((0,s.Z)(n),"closeLogin",(function(){n.setState({visibleLogin:!1,showUserModal:!1})})),B((0,s.Z)(n),"handleLatestChange",(function(){n.setState({onlyLatest:!n.state.onlyLatest})})),B((0,s.Z)(n),"finalizeSession",(function(){F("Finalizing session...");for(var e=n.context,t=document.getElementsByClassName("submit-button"),s=0;s<t.length;s++)t[s].innerText===n.props.t("submit")&&t[s].click();e.finalize();var i=n.props.t("lesson-successfully-completed");if(!Z()(e.user)&&n.props.sendConfirmationEmail){i+=n.props.t("confirmation-email");var o=A(e,n.props.message,n.props.t);e.sendMail(o,e.user.email)}var r=!1;(e.responseVisualizerIds||[]).forEach((function(t){(e.currentUserActions[t]||[]).length>1&&(r=!0)})),e.addNotification({title:n.props.t("completed"),message:i,level:"success",position:"tr",autoDismiss:0,dismissible:"button",children:a.createElement("div",{style:{marginBottom:"40px"}},r?a.createElement(z.Z,{legend:n.props.t("only-latest"),defaultValue:n.state.onlyLatest,onChange:n.handleLatestChange}):null,a.createElement(g.Z,{variant:"success",size:"sm",style:{float:"right",marginRight:"10px",marginTop:r?"0px":"10px"},onClick:n.createResponseSummaryDoc},n.props.t("download-pdf"))),onRemove:function(){n.setState({disabled:!1})}}),e.log({id:e.lessonName,type:U.kv,value:n.props.t("lesson-submitted")}),n.setState({disabled:!0}),window.removeEventListener("beforeunload",C.Z)})),B((0,s.Z)(n),"handleClick",(function(){n.props.onClick();var e=n.context;if(n.props.requireLogin&&Z()(e.user))return n.setState({showUserModal:!0});n.finalizeSession()})),n.state={showUserModal:!1,visibleLogin:!1,visibleSignup:!1,onlyLatest:!0},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(t){t!==P.YQ&&t!==P.Fw&&t!==P.E7||e.forceUpdate()}))},n.componentWillUnmount=function(){this.unsubscribe()},n.render=function(){var e=!this.context.live||this.state.disabled;return a.createElement("div",{className:"bg-light "+this.props.className,style:R({maxWidth:400,margin:"0 auto 0px",padding:"20px",fontFamily:"Arial"},this.props.style)},a.createElement("div",{className:"d-grid gap-2"},a.createElement(g.Z,{disabled:e,variant:"primary",size:"large",onClick:this.handleClick},this.props.label?this.props.label:this.props.t("finish-lesson"))),a.createElement(b.Z,{show:this.state.showUserModal,onHide:this.closeUserModal},a.createElement(b.Z.Header,{closeButton:!0},a.createElement(b.Z.Title,null,this.props.t("authentication"))),a.createElement(b.Z.Body,null,a.createElement("p",null,this.props.t("authentication-prompt"))),a.createElement(b.Z.Footer,{style:{textAlign:"center"}},a.createElement(g.Z,{variant:"primary",onClick:this.login.bind(this),style:{marginRight:"10px"}},this.props.t("login")),a.createElement(g.Z,{onClick:this.signup.bind(this)},this.props.t("signup")))),a.createElement(N.Z,{show:this.state.visibleLogin,onClose:this.closeLogin}),a.createElement(L.Z,{show:this.state.visibleSignup,onClose:this.closeSignup}))},t}(a.Component);V.defaultProps={label:null,message:"",requireLogin:!0,sendConfirmationEmail:!0,className:"",style:{},onClick:function(){}},V.propTypes={label:u().string,message:u().string,requireLogin:u().bool,sendConfirmationEmail:u().bool,className:u().string,style:u().object,onClick:u().func},V.contextType=k.Z;var $=(0,p.Z)("lesson-submit")((0,j.W)(V))},770561:function(e,t,n){var s=n(72779),i=n.n(s),o=n(202784),a=n(247830),r=n(429658),l=n(552322);const c=o.forwardRef((({as:e,bsPrefix:t,variant:n,size:s,active:o,className:c,...u},p)=>{const m=(0,r.vE)(t,"btn"),[d,{tagName:f}]=(0,a.FT)({tagName:e,...u}),h=f;return(0,l.jsx)(h,{...d,...u,ref:p,className:i()(c,m,o&&"active",n&&`${m}-${n}`,s&&`${m}-${s}`,u.href&&u.disabled&&"disabled")})}));c.displayName="Button",c.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=c},318967:function(e){var t=function(e,t){return e+n(t)},n=function(e){return null===e||"boolean"==typeof e||void 0===e?"":"number"==typeof e?e.toString():"string"==typeof e?e:Array.isArray(e)?e.reduce(t,""):function(e){return Object.prototype.hasOwnProperty.call(e,"props")}(e)&&Object.prototype.hasOwnProperty.call(e.props,"children")?n(e.props.children):""};n.default=n,e.exports=n}}]);
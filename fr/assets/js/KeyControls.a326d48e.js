"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7659],{238152:function(e,t,n){n.r(t);var o=n(497326),r=n(894578),i=n(202784),a=n(928316),c=n(213980),s=n.n(c),p=n(690299),u=n.n(p),d=n(437069),m=n.n(d),f=n(777628),v=n.n(f),l=n(213939),y=n.n(l),g=n(294565),h=n(267682),E=Object.defineProperty,k=function(e,t,n){return function(e,t,n){t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},b=u()("isle:key-controls"),C=/^[a-z]$/i,L=["input","textarea"],w=function(e){function t(t){var n;return n=e.call(this,t)||this,k((0,o.Z)(n),"addListeners",(function(){var e=m()(n.props.actions);if(b("Add keydown event listeners for "+(n.props.container?"container":"document")+": "+e.join(", ")),n.props.container)try{((0,g.isPrimitive)(n.props.container)?document.querySelector(n.props.container):a.findDOMNode(n.props.container)).addEventListener("keydown",n.triggerEvent)}catch(t){b(t.message)}else document.addEventListener("keydown",n.triggerDocEvent)})),k((0,o.Z)(n),"removeListeners",(function(e){var t=m()(n.props.actions);if(b("Remove keydown event listeners for "+(e?"container":"document")+": "+t.join(", ")),e)try{((0,g.isPrimitive)(n.props.container)?document.querySelector(n.props.container):a.findDOMNode(n.props.container)).removeEventListener("keydown",n.triggerEvent)}catch(o){b(o.message)}document.removeEventListener("keydown",n.triggerDocEvent)})),k((0,o.Z)(n),"triggerEvent",(function(e){var t=e.key;b("Received key press for container: "+t);var o="";e.ctrlKey&&(o+="ctrl+"),e.shiftKey&&(t=v()(t),o+="shift+"),e.altKey&&(o+="alt+"),e.metaKey&&(o+="meta+");var r=n.props.actions[o+t];if(document.activeElement===n.props.container&&y()(r)){if(!o&&C.test(t)&&document.activeElement!==document.body){var i=document.activeElement;if(i&&(-1!==L.indexOf(i.tagName.toLowerCase())||i.isContentEditable)||"CANVAS"===i.tagName)return}e.preventDefault(),e.stopPropagation(),r(e)}})),k((0,o.Z)(n),"triggerDocEvent",(function(e){var t=e.key;b("Received key press for document: "+t);var o="";e.ctrlKey&&(o+="ctrl+"),e.shiftKey&&(t=v()(t),o+="shift+"),e.altKey&&(o+="alt+"),e.metaKey&&(o+="meta+");var r=n.props.actions[o+t];if(y()(r)){if(!o&&C.test(t)&&document.activeElement!==document.body){var i=document.activeElement;if(i&&(-1!==L.indexOf(i.tagName.toLowerCase())||i.isContentEditable)||"CANVAS"===i.tagName)return}e.preventDefault(),e.stopPropagation(),r(e)}})),n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){b("Component has mounted..."),this.addListeners()},n.componentDidUpdate=function(e){this.props.container!==e.container&&(b("Container has changed, re-attach event listeners..."),this.removeListeners(e.container),this.addListeners())},n.componentWillUnmount=function(){b("Component has unmounted..."),this.removeListeners()},n.render=function(){return null},t}(i.Component);w.defaultProps={actions:{},container:null},w.propTypes={actions:s().objectOf(s().func),container:s().oneOfType([s().object,s().element,s().string])},w.contextType=h.Z,t.default=w}}]);
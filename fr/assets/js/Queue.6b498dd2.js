"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[82],{370420:function(e,t,n){const a=(0,n(217431).Z)((()=>n.e(6131).then(n.bind(n,66720))));t.Z=a},29596:function(e,t,n){n.r(t);var a=n(202784),l=n(213980),s=n.n(l),r=n(690299),u=n.n(r),o=n(376699),i=n(219637),c=n(770561),m=n(26266),d=n(10863),h=n(830650),b=n(973777),p=n(287013),q=n.n(p),f=n(409961),E=n.n(f),g=n(365601),Z=n(112114),v=n(370420),w=n(377174),C=n(426214),H=n(123103),y=n(691334),z=n(302108);const N=u()("isle:queue"),Q=(0,g.Z)("queue"),k=e=>{if(0===e.questions.length)return a.createElement("p",null,e.t("no-questions"));const t=e.session;return a.createElement(b.Z,{className:"queue-table",showPageSizeOptions:!1,data:e.questions,resizable:!1,sortable:!1,columns:[{Header:"Pic",id:"pic",accessor:e=>{const{userList:n}=t;for(let t=0;t<n.length;t++)if(n[t].name===e.name)return n[t].picture;return""},Cell:e=>a.createElement("img",{className:"queue-table-pic",alt:"User thumbnail",src:`${t.server}/thumbnail/${e.value}`}),maxWidth:46,minWidth:46,style:{color:"darkslategrey"}},{Header:e.t("name"),id:"nameCol",accessor:"name",width:150,Cell:e=>a.createElement(Z.Z,{tooltip:`${e.value} (${e.original.email})`},a.createElement("span",{className:"queue-table-name"},e.value))},{Header:e.t("cohort"),id:"cohortCol",accessor:e=>{const{cohorts:n}=t;for(let t=0;t<n.length;t++)if(q()(n[t].members,e.email))return n[t].title;return""}},{Header:e.t("question"),id:"qCol",accessor:"value",width:350,style:{"white-space":"unset"}},{Header:e.t("chat"),Cell:t=>{const n="Queue_"+t.original.name;return a.createElement(v.Z,{tooltip:e.t("queue-start-chat"),for:n})}},{Header:"",accessor:"remove",Cell:n=>a.createElement(Z.Z,{placement:"left",tooltip:e.t("mark-and-remove")},a.createElement(c.Z,{variant:"secondary",size:"sm",onClick:()=>{t.removeQuestionFromQueue(n.original)}},a.createElement("i",{className:"fas fa-check"}))),filterable:!1,width:45}],pageSize:8})},$=({id:e,draggable:t,show:n,onHide:l,onNewQuestion:s})=>{e=e||Q();const r=(0,a.useContext)(H.Z),u=r.questions,{t:b}=(0,o.$)("internal/toolbar/queue"),[p,q]=(0,a.useState)(""),[f,g]=(0,a.useState)(null),Z=()=>{N("Send the signal to enter the queue..."),r.log({id:e,type:y.bq,value:p},"members");const t={name:r.user.name,email:r.user.email,value:p};r.addQuestionToQueue(t)},$=()=>{const e={name:r.user.name,email:r.user.email,value:p};r.removeQuestionFromQueue(e)},x=e=>{e.target.className&&e.target.className.includes("queue-panel")&&l()};let L;if((0,a.useEffect)((()=>{let t;return r&&(N("We have a session, subscribe the component..."),t=r.subscribe(((t,n)=>{if(t===z.Kd){const e=n;let t=null;for(let n=0;n<e.length;n++)if(e[n].email===r.user.email){t=n;break}g(t)}n&&n.id===e&&n.type===y.bq&&r.isOwner()&&s()}))),()=>{t&&t()}}),[e,s,r]),n){if(r.isOwner())return N("User is an owner..."),L=a.createElement(C.Z,{className:"queue-panel",tabIndex:0,role:"button",header:b("queue"),onHide:l,minimizable:!0,trapFocus:!0},a.createElement(k,{questions:r.questions,t:b,session:r,for:e})),t&&(L=a.createElement(w.Z,{bounds:"#Lesson",cancel:".queue-table",onEscape:x,resizable:!0,minWidth:300,minHeight:150},L)),L;const n=()=>{q(""),l()};if(!E()(f)){const e="Queue_"+r.user.name;return L=a.createElement(C.Z,{className:"queue-panel",tabIndex:0,role:"button",header:b("queue"),onHide:n,minimizable:!0,trapFocus:!0},a.createElement("p",null,a.createElement(i.c,{i18nKey:"queue-status",ns:"Queue"},"Your question: ",a.createElement("i",null,{question:p}),a.createElement("br",null),"You are currently at position ",a.createElement("strong",null,{spot:f})," on the queue.",a.createElement("br",null),"There are ",a.createElement("strong",null,{size:r.questions.length})," individual(s) in the queue.")),a.createElement(v.Z,{for:e,showTooltip:!1}),a.createElement(c.Z,{style:{marginLeft:10},size:"sm",onClick:$},b("remove-myself-from-queue"))),t&&(L=a.createElement(w.Z,{bounds:"#Lesson",onEscape:x,resizable:!0,minWidth:300,minHeight:150},L)),L}return L=a.createElement(C.Z,{className:"queue-panel",tabIndex:0,role:"button",header:b("queue"),onHide:n,minimizable:!0,trapFocus:!0},a.createElement("p",null,b("queue-prompt")),a.createElement(d.Z,null,a.createElement(h.Z,null,b("question")),a.createElement(m.Z,{type:"text",id:"queue_form",value:p,onChange:e=>{q(e.target.value)},onKeyPress:e=>{13===e.charCode&&p.length>0&&Z()},width:500})),a.createElement(c.Z,{disabled:0===p.length,onClick:Z},b("submit-question")),a.createElement("span",{style:{marginLeft:8}},b("queue-size",{n:u.length}))),t&&(L=a.createElement(w.Z,{bounds:"#Lesson",cancel:"#queue_form",onEscape:x,resizable:!0,minWidth:300,minHeight:150},L)),L}return null};$.defaultProps={draggable:!0,show:!0,onHide(){},onNewQuestion(){}},$.propTypes={draggable:s().bool,show:s().bool,onHide:s().func,onNewQuestion:s().func},t.default=$},365601:function(e,t){t.Z=function(e){let t=1;return()=>(t+=1,`${e}-${t}`)}}}]);
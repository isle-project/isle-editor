/*! For license information please see LearnWordVennDiagram.4ff7b373.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[928],{391404:function(t,e,s){var a=s(501874),n=s(384871),i=s(294565),r=n(i);a(r,"primitives",n(i.isPrimitive)),a(r,"objects",n(i.isObject)),t.exports=r},456977:function(t,e,s){s.r(e);var a=s(202784),n=s(213980),i=s.n(n),r=s(198),o=s(770561),l=s(423184),c=s(790817),d=s(379733),u=s(366627),h=s(391404),p=s.n(h),m=s(777628),f=s.n(m),y=s(300198),w=s.n(y),g=s(224008),v=s.n(g),b=s(506078),C=s(369701),k=s(417332),E=s(741082),A=Object.defineProperty,x=(t,e,s)=>(((t,e,s)=>{e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s})(t,"symbol"!=typeof e?e+"":e,s),s);const Z=(0,k.Z)("word-venn-diagram");class B extends a.Component{constructor(t){super(t),x(this,"drawPlot",(()=>{const t=this.state.freqs,e=u.Ys("#"+this.id+"-venn");let s;e.select("svg").remove(),s=this.state.tooltip?this.state.tooltip:u.Ys("body").append("div").attr("class","venntooltip");let a=d.VennDiagram().width(this.props.width).height(this.props.height);e.datum(t).call(a),e.selectAll("g").on("mouseover",(function(t,a){d.sortAreas(e,t),s.transition().duration(400).style("opacity",.9),s.text(t.sets.join(" and ")+" ("+t.size+")");u.Ys(this).transition("tooltip").duration(400).select("path").style("stroke-width",3).style("stroke","black").style("fill-opacity",1===t.sets.length?.4:.1).style("stroke-opacity",1)})).on("mousemove",(function(){s.style("left",u.Ba6.pageX+"px").style("top",u.Ba6.pageY-28+"px")})).on("mouseout",(function(t,e){s.transition().duration(400).style("opacity",0);u.Ys(this).transition("tooltip").duration(400).select("path").style("fill-opacity",1===t.sets.length?.25:0).style("stroke-opacity",0)})),this.setState({tooltip:s})})),x(this,"calculateWordFrequency",(t=>{const{indices:e,minCount:s,tdm:a,words:n}=this.state,i=n[t],r=e[t],o=[];let l=0;if(a[r]){const e=a[r].map((e=>e>=s[t]?1:0));for(let t=0;t<e.length;t++)l+=e[t],1===e[t]&&o.push(t)}return{sets:[i],size:l,docIndices:o}})),x(this,"wordNumberClickFactory",(t=>()=>{this.setState({nWords:t+1,disabled:!0,words:new Array(t+1),minCount:new Array(t+1).fill(1)})})),x(this,"updatePlot",(()=>{const t=[];for(let e=0;e<this.state.nWords;e++){const s=this.calculateWordFrequency(e);t.push(s)}if(2===this.state.nWords){const e=this.calculateJointAB(0,1);t.push(e)}else if(3===this.state.nWords){let e=this.calculateJointAB(0,1);t.push(e),e=this.calculateJointAB(0,2),t.push(e),e=this.calculateJointAB(1,2),t.push(e),e=this.calculateJointABC(0,1,2),t.push(e)}this.setState({freqs:t},(()=>{this.drawPlot(),this.props.onClick(this.state)}))}));const e=t.tdm.map((e=>{const s=new Array(t.nTexts);for(let t=0;t<s.length;t++)s[t]=e[t]?e[t]:0;return s}));this.id=t.id||Z(t),this.state={disabled:!0,words:new Array(1),indices:new Array(1),freqs:[],minCount:[1],nWords:1,tdm:e}}componentDidUpdate(t,e){let s=!1;for(let a=0;a<this.state.nWords;a++)e.words[a]!==this.state.words[a]&&(s=!0);if(s){const t=new Array(this.state.nWords),{vocabulary:e}=this.props;for(let s=0;s<this.state.nWords;s++)for(let a=0;a<e.length;a++)e[a]===this.state.words[s]&&(t[s]=a);this.setState({indices:t})}}wordChangeFactory(t){return e=>{const s=Array.prototype.slice.call(this.state.words);s[t]=f()(w()(e))||null,this.setState({words:s,disabled:!p()(s)})}}calculateJointAB(t,e){const{indices:s,minCount:a,tdm:n,words:i}=this.state,r=s[t],o=s[e];let l=0;if(n[r]&&n[o]){const s=n[r].map((e=>e>=a[t]?1:0)),i=n[o].map((t=>t>=a[e]?1:0));for(let t=0;t<s.length;t++)s[t]&&i[t]&&(l+=1)}return{sets:[i[t],i[e]],size:l}}calculateJointABC(t,e,s){const{indices:a,minCount:n,tdm:i,words:r}=this.state,o=a[t],l=a[e],c=a[s];let d=0;if(i[o]&&i[l]&&i[c]){const a=i[o].map((e=>e>=n[t]?1:0)),r=i[l].map((t=>t>=n[e]?1:0)),u=i[c].map((t=>t>=n[s]?1:0));for(let t=0;t<a.length;t++)a[t]&&r[t]&&u[t]&&(d+=1)}return{sets:[r[t],r[e],r[s]],size:d}}render(){const{t:t}=this.props,e=[];for(let s=0;s<this.state.nWords;s++)e[s]=a.createElement("div",{key:`outer-${s}`,className:"d-grid gap-1"},a.createElement(C.Z,{key:`text-${s}`,legend:`${t("word")} ${s+1}`,defaultValue:this.state.words[s],width:120,onChange:this.wordChangeFactory(s)}),a.createElement(b.Z,{key:`number-${s}`,legend:t("min-of-times"),defaultValue:1,max:50,min:1,step:1,onChange:t=>{const e=v()(this.state.minCount);e[s]=t,this.setState({minCount:e})}}));return a.createElement(a.Fragment,null,a.createElement(c.Z,null,a.createElement(c.Z.Header,{as:"h4"},t("settings")),a.createElement(c.Z.Body,null,a.createElement("p",null,a.createElement("span",{className:"title"},t("number-of-words"))),a.createElement(l.Z,null,[t("one"),t("two"),t("three")].map(((t,e)=>a.createElement(o.Z,{key:e,variant:e===this.state.nWords-1?"success":"default",onClick:this.wordNumberClickFactory(e)},t)))),e,a.createElement(o.Z,{onClick:this.updatePlot,disabled:this.state.disabled},t("draw-venn-diagram")))),a.createElement("br",null),a.createElement(c.Z,null,a.createElement(c.Z.Header,{as:"h4"},t("venn-diagram")),a.createElement(c.Z.Body,{style:{minHeight:200}},a.createElement("span",{style:{position:"absolute",right:40,top:50}},t("total-texts"),": ",this.props.nTexts),a.createElement("div",{id:`${this.id}-venn`}))))}}B.propTypes={height:i().number,nTexts:i().number.isRequired,onClick:i().func,tdm:i().array.isRequired,vocabulary:i().array.isRequired,width:i().number},B.defaultProps={height:350,onClick(){},width:600},e.default=(0,r.Z)("learn/venn-diagram")((0,E.W)(B))},770561:function(t,e,s){var a=s(72779),n=s.n(a),i=s(202784),r=s(247830),o=s(429658),l=s(552322);const c=i.forwardRef((({as:t,bsPrefix:e,variant:s,size:a,active:i,className:c,...d},u)=>{const h=(0,o.vE)(e,"btn"),[p,{tagName:m}]=(0,r.FT)({tagName:t,...d}),f=m;return(0,l.jsx)(f,{...p,...d,ref:u,className:n()(c,h,i&&"active",s&&`${h}-${s}`,a&&`${h}-${a}`,d.href&&d.disabled&&"disabled")})}));c.displayName="Button",c.defaultProps={variant:"primary",active:!1,disabled:!1},e.Z=c},423184:function(t,e,s){var a=s(72779),n=s.n(a),i=s(202784),r=s(429658),o=s(552322);const l=i.forwardRef((({bsPrefix:t,size:e,vertical:s,className:a,as:i="div",...l},c)=>{const d=(0,r.vE)(t,"btn-group");let u=d;return s&&(u=`${d}-vertical`),(0,o.jsx)(i,{...l,ref:c,className:n()(a,u,e&&`${d}-${e}`)})}));l.displayName="ButtonGroup",l.defaultProps={vertical:!1,role:"group"},e.Z=l}}]);
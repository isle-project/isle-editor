"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8922],{386025:function(e,t,n){n.r(t);var a=n(202784),o=n(213980),r=n.n(o),l=n(498614),i=n(993524),c=n(834863),s=n.n(c),d=n(409961),p=n.n(d),m=n(60913),u=n(810370),g=n(321182),b=n(123103),y=n(394362),f=n(741082),h=Object.defineProperty,v=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,O=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function E({id:e,meta:t,plot:n}){let a;return t?(t=s()(t,((e,t)=>p()(t))),a=`<img src="${n}" style="display: block; margin: 0 auto;" data-plot-id="${e}" data-plot-meta="${t=i.ZP.dump(t)}"></img>`):a=`<img src="${n}" alt="R Plot" style="display: block; margin: 0 auto;" />`,a}const T=e=>{var t=e,{code:n,className:o,draggable:r,id:i,libraries:c,prependCode:s,fileType:d,meta:p,onDone:f}=t,h=((e,t)=>{var n={};for(var a in e)w.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&v)for(var a of v(e))t.indexOf(a)<0&&C.call(e,a)&&(n[a]=e[a]);return n})(t,["code","className","draggable","id","libraries","prependCode","fileType","meta","onDone"]);const{t:T}=(0,l.$G)("r"),[Z,j]=(0,a.useState)(!1),[k,N]=(0,a.useState)({img:null,body:null}),P=(0,a.useContext)(b.Z);(0,a.useEffect)((()=>{j(!0);const e=(0,m.Z)(c,s,P)+n;P.getRPlot(e,d,((e,t,n)=>{e?f(e):(N({img:t,body:n}),j(!1),f(null,t,n))}))}),[n,d,c,s,P,f]);let x=null;return r&&(x=a.createElement("button",{className:"rplot-draggable-bar",draggable:!0,onDragStart:e=>{const t=E({id:i,meta:p,plot:k.body});e.dataTransfer.setData("text/html",t)},onClick:()=>{const e=E({id:i,meta:p,plot:k.body});(0,y.Z)(e)}},T("drag-plot"))),a.createElement("div",{className:`rplot ${o}`,style:{minHeight:128,cursor:"pointer"}},a.createElement(u.Z,{running:Z,width:256,height:128}),Z?a.createElement("span",null):a.createElement(a.Fragment,null,x,a.createElement(g.Z,((e,t)=>{for(var n in t||(t={}))w.call(t,n)&&O(e,n,t[n]);if(v)for(var n of v(t))C.call(t,n)&&O(e,n,t[n]);return e})({src:k.img,body:k.body,title:T("r-plot")},h))))};T.propTypes={code:r().string,width:r().oneOfType([r().number,r().string]),height:r().oneOfType([r().number,r().string]),draggable:r().bool,fileType:r().string,libraries:r().array,prependCode:r().oneOfType([r().string,r().array]),meta:r().object,className:r().string,onDone:r().func},T.defaultProps={code:"",width:600,height:"auto",draggable:!1,fileType:"svg",libraries:[],prependCode:"",meta:null,className:"",onDone(){}},t.default=(0,f.W)(T)},60913:function(e,t,n){var a=n(588703),o=n.n(a);t.Z=function(e,t,n){const{rshell:a}=n.config;a&&a.libraries&&(e=e.concat(a.libraries));let r=(e=>e.map((e=>"library("+e+");")).join(" "))(e);return a&&a.global&&(r+=a.global+"\n"),t=o()(t)?t.join("\n"):t,r+=t+="\n",r}},394362:function(e,t){t.Z=function(e){const t=document.createElement("div");t.innerHTML=e,t.style.position="fixed",t.style.opacity=0,t.style.pointerEvents="none",document.body.appendChild(t),window.getSelection().removeAllRanges();const n=document.createRange();n.selectNode(t),window.getSelection().addRange(n),document.execCommand("copy"),document.body.removeChild(t)}}}]);
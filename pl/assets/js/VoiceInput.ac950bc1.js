(self.webpackChunk=self.webpackChunk||[]).push([[4331],{447250:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var o=n(202784),r=n(213980),l=n.n(r),a=n(690299),c=n.n(a),i=n(376699),s=n(31071),u=n(998325),m=n(123103),d=n(922730),p=n(24077),g=n.n(p);class h extends o.Component{render(){return o.createElement("button",{onClick:this.props.onClick})}}h.propTypes={onClick:l().func},h.defaultProps={onClick(){}};var f=g()||h,v=Object.defineProperty,b=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>{for(var n in t||(t={}))w.call(t,n)&&k(e,n,t[n]);if(b)for(var n of b(t))y.call(t,n)&&k(e,n,t[n]);return e};const C=c()("isle:voice-input");const E=e=>{const{autorecord:t,bind:r,defaultValue:l,grammars:a,id:c,maxAlternatives:p,remote:g,startTooltip:h,stopTooltip:v,speechInterface:b,onChange:w,onClick:y,onFinalText:k,onRecordingStart:E,onRecordingStop:x,onSegment:R,onSubmit:N,timeout:T}=e,[P,F]=(0,o.useState)(t),O=(0,o.useContext)(m.Z),{t:j}=(0,i.$)("input"),[A,Z]=(0,o.useState)(r&&O.state?O.state[r]:l),$=(0,o.useRef)(),z=(0,o.useRef)(),I=(0,o.useCallback)((e=>{const t=e.target.value;Z(t),w(t),r&&n.g.lesson.setState({[r]:t})}),[r,w]),V=(0,o.useCallback)((e=>{if(13===e.keyCode)N(A)}),[A,N]),B=(0,o.useCallback)((()=>{C("Set `isRecording` to false..."),F(!1),$.current&&$.current.stop(),x()}),[x]),G=(0,o.useCallback)((()=>{$.current=null;const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){const t=new e;t.lang=d.a.language,t.continuous=!0,t.interimResults=!0,t.maxAlternatives=p,t.grammars=function(e){const t=new(n.g.SpeechGrammarList||n.g.webkitSpeechGrammarList);for(let n=0;n<e.length;n++){const{src:o,weight:r}=e[n];t.addFromString(o,r)}return t}(a),t.onerror=e=>{if(C("Encountered an error..."),"not-allowed"===e.error||"service-not-allowed"===e.error)return F(!1),O.addNotification({title:"Not allowed",message:"No permission to use the speech recognition service",level:"error",position:"tr"});try{t.start()}catch(n){C(n)}},t.onend=()=>{C("onend: %s",c),P&&t.start()},t.onstart=()=>{C("onstart: %s",c),E()},t.onresult=e=>{if(C("Processing result..."),void 0!==e.results)for(let t=e.resultIndex;t<e.results.length;++t){const n=e.results[t];if(e.results[t].isFinal){let e;if(T&&(z.current=setTimeout(B,T)),C("Received final text"),p>1){e=new Array(n.length);for(let t=0;t<n.length;t++)e[t]=n[t].transcript}else e=n[0].transcript;Z(e),k(e),b&&b.check(e,{onStart:()=>{B()},onEnd:()=>{G()}})}else{let e;if(z.current&&clearTimeout(z.current),p>1){e=new Array(n.length);for(let t=0;t<n.length;t++)e[t]=n[t].transcript}else e=n[0].transcript;Z(e),R(e)}}else C("Something went wrong...")},t.start(),$.current=t}C("Set `isRecording` to true..."),F(!0)}),[a,c,P,p,E,O,b,B,T,k,R]),L=(0,o.useCallback)((e=>{let t="";return t=e?!0===P?v||j("click-to-stop-recording"):h||j("click-to-start-recording"):"Your browser does not support voice recognition. You may use the Chrome Browser instead",t}),[P,h,v,j]);(0,o.useEffect)((()=>{g&&(window.onkeydown=e=>{switch(e.keyCode){case g.stop:B();break;case g.start:P||G();break;case g.toggle:P?B():G()}}),t&&(C("Should record voice..."),G())}),[t,g,P,G,B]);const Y=(0,o.useCallback)((e=>{y(e),P?B():G()}),[P,G,B,y]);let D="voice-microphone";!0===P&&(D="voice-microphone voice-recording");const H=L(function(){try{return!(!n.g.SpeechRecognition&&!n.g.webkitSpeechRecognition)}catch(e){return!1}}()),K=o.createElement(s.Z,{id:`${e.id}-voice-input-tooltip`},H);switch(e.mode){case"full":return o.createElement(o.Fragment,null,e.legend?o.createElement("label",null,e.legend):null,o.createElement("div",{className:`input voice-input ${e.className}`,style:S({height:e.height,width:e.width},e.style)},o.createElement("input",{className:"voice-input-text",type:"text",onKeyDown:V,onChange:I,placeholder:null!==e.placeholder?e.placeholder:j("enter-text"),value:A}),o.createElement(u.Z,{placement:e.tooltipPlacement,overlay:K},o.createElement(f,{onClick:Y,className:D}))));case"status":return o.createElement(o.Fragment,null,e.legend?o.createElement("label",null,e.legend):null,o.createElement("div",{className:`voice-input-status-text ${e.className}`,style:S({height:e.height,width:e.width},e.style)},o.createElement("div",{className:"voice-input-status"},A),o.createElement(u.Z,{placement:"bottom",overlay:K},o.createElement(f,{onClick:Y,className:D}))));case"microphone":return o.createElement(o.Fragment,null,e.legend?o.createElement("label",null,e.legend):null,o.createElement("div",{className:`voice-solo-microphone ${e.className}`,style:S({height:e.height,width:e.width},e.style)},o.createElement(u.Z,{placement:"bottom",overlay:K},o.createElement(f,{onClick:Y,className:D}))));case"none":return null}};E.defaultProps={autorecord:!1,defaultValue:"",grammars:[],legend:"",mode:"full",maxAlternatives:1,onChange(){},onClick(){},onFinalText(){},onSegment(){},onRecordingStart(){},onRecordingStop(){},onSubmit(){},placeholder:null,remote:null,className:"",style:{},timeout:null,stopTooltip:null,startTooltip:null,tooltipPlacement:"left",width:500,height:36},E.propTypes={autorecord:l().bool,defaultValue:l().string,grammars:l().array,legend:l().oneOfType([l().string,l().node]),mode:l().string,maxAlternatives:l().number,onChange:l().func,onClick:l().func,onFinalText:l().func,onRecordingStart:l().func,onRecordingStop:l().func,onSegment:l().func,onSubmit:l().func,placeholder:l().string,remote:l().object,className:l().string,style:l().object,timeout:l().number,stopTooltip:l().string,startTooltip:l().string,tooltipPlacement:l().oneOf(["top","right","bottom","left"]),width:l().number,height:l().number};var x=E},24077:function(e,t,n){var o=n(202784);function r(e){return o.createElement("svg",e,[o.createElement("defs",{id:"defs3723",key:0}),o.createElement("path",{d:"m 75.897176,155.35465 h -20.741 c -4.834,0 -4.84,15.963 0,15.963 h 53.854004 c 4.839,0 4.833,-15.963 0,-15.963 H 88.718176 l -0.602,-10.14 c 35.693004,-3.164 48.733004,-32.896 47.931004,-63.961003 -0.198,-7.666 -13.296,-6.779 -12.443,0.979 3.413,71.099003 -86.068004,69.681003 -83.271004,-1.358 0.251,-6.389 -11.982,-6.453 -12.232,0.46 -0.598,28.619003 13.64,60.803003 48.257,63.880003 z M 107.47818,48.083647 c -0.528,-14.312 -6.628,-23.486 -14.452004,-27.655 -6.579,-3.506 -14.45,-3.5 -21.076,-0.113 -8.071,4.127 -14.504,13.346 -15.273,27.676 l 0.005,20.069 h 50.800004 z m -9.674004,-36.613 c 10.769004,5.739 19.146004,17.829 19.826004,36.254 l 0.008,44.158 c 0,12.720003 -7.705,26.975003 -18.903004,33.302003 -9.819,5.547 -21.804,5.594 -31.748,0.326 -10.292,-5.451 -18.583,-16.519 -20.432,-33.071003 l -0.031,-44.705 c 0,-14.39 7.714,-29.763 20.808,-36.458 9.579,-4.8959999 20.965,-4.8729999 30.472,0.194 z",id:"path3713",style:{clipRule:"evenodd",fillRule:"evenodd"},key:1})])}r.defaultProps={x:"0px",y:"0px",viewBox:"0 0 164 180",xmlSpace:"preserve",id:"svg3719",width:"32",height:"35"},e.exports=r,r.default=r}}]);
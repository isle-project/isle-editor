"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[74669],{211060:function(t,e,a){var s=a(202784),i=a(213980),r=a.n(i),n=a(770561),o=a(112114);const l=t=>s.createElement(o.Z,{id:"clear_tooltip",placement:t.tooltipPlacement,tooltip:t.t("data-explorer:delete")},s.createElement(n.Z,{"aria-label":t.t("data-explorer:delete"),variant:"outline-danger",size:"sm",onClick:t.onClick,style:t.style,disabled:t.disabled},s.createElement("div",{className:"fa fa-times"})));l.propTypes={onClick:r().func.isRequired,tooltipPlacement:r().string,style:r().object,disabled:r().bool,t:r().func},l.defaultProps={tooltipPlacement:"bottom",style:{},disabled:!1,t(){}},e.Z=l},587637:function(t,e,a){a.r(e),a.d(e,{default:function(){return es}});var s=a(202784),i=a(213980),r=a.n(i),n=a(690299),o=a.n(n),l=a(498614),c=a(844918),p=a(822736),h=a(770561),u=a(786124),d=a(458264),m=a(312594),g=a(715318),f=a(569862),b=a(790817),v=a(31071),y=a(294565),E=a(838060),S=a.n(E),Z=a(308669),T=a.n(Z),C=a(195906),R=a.n(C),k=a(830324),x=a.n(k),O=a(588703),P=a.n(O),w=a(287013),A=a.n(w),N=a(623102),q=a.n(N),_=a(409961),I=a.n(_),D=a(151300),F=a.n(D),H=a(241481),L=a.n(H),M=a(224008),V=a.n(M),j=a(306830),B=a.n(j),$=a(437069),z=a.n($),U=a(605977),Q=a.n(U),G=a(777628),K=a.n(G),W=a(440835),Y=a(165666),J=a(471275),X=a(730641),tt=a.n(X);class et extends s.Component{render(){const t=tt()(this.props.children,4);for(let e=0;e<t.length;e++){let a=t[e];for(let t=0;t<a.length;t++)a[t]?a[t]=s.createElement(m.Z,{key:`cell${e}${t}`,xs:6,md:3},a[t]):a[t]=null}return s.createElement(J.Z,null,t.map(((t,e)=>s.createElement(d.Z,{key:`row${e}`},t))))}}var at=et,st=a(701647),it=a(884985),rt=a(770149),nt=a(466621),ot=a(46739),lt=a(998325);var ct=(0,a(217431).Z)((()=>Promise.all([a.e(79796),a.e(459)]).then(a.bind(a,44721)))),pt=a(391951),ht=a(113545),ut=a(691333),dt=a(123103),mt=a(30468),gt=a(848285),ft=a(107466);class bt extends s.Component{constructor(t){super(t)}scrollToBottom(){this.outputPanel&&(0,ft.Z)(this.outputPanel,this.outputPanel.scrollHeight,1e3)}render(){const{t:t,header:e,output:a}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{className:"card-header clearfix"},s.createElement("h3",{className:"data-explorer-output-header"},t("output")),e),s.createElement("div",{className:"data-explorer-output-panel",style:{height:.9*window.innerHeight-80},ref:t=>{this.outputPanel=t}},a),s.createElement("div",{className:"d-grid"},s.createElement(h.Z,{size:"sm",variant:"outline-danger",onClick:this.props.clearOutput},t("clear-all"))))}}var vt=bt,yt=a(438802),Et=a.n(yt),St=a(278141),Zt=a.n(St),Tt=a(380408),Ct=a(156562),Rt=a(912860),kt=a(435376),xt=a(992500),Ot=a(862816),Pt=a(461298),wt=a(700601),At=a.n(wt),Nt=a(871199),qt=a.n(Nt),_t=a(180781),It=a.n(_t),Dt=a(402958),Ft=a.n(Dt),Ht=a(691334),Lt=a(302108),Mt=a(42653),Vt=a(233984),jt=a(924704),Bt=a(553261),$t=a(295349),zt=a(595959),Ut=a(818870),Qt=a(255125),Gt=a(789532),Kt=a(669252),Wt=a(788281),Yt=a(65775),Jt=a(845820),Xt=a(695184),te=a(140968),ee=a(64033),ae=a(53092),se=a(939489),ie=a(323875),re=a(290056),ne=a(450651),oe=a(996030),le=a(772941),ce=a(975667),pe=a(794187),he=a(181739),ue=a(536859),de=a(645347),me=a(758668),ge=a(745771),fe=a(497325),be=a(230721),ve=a(810948),ye=a(706854),Ee=a(372852),Se=a(620045),Ze=Object.defineProperty,Te=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,ke=(t,e,a)=>e in t?Ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,xe=(t,e)=>{for(var a in e||(e={}))Ce.call(e,a)&&ke(t,a,e[a]);if(Te)for(var a of Te(e))Re.call(e,a)&&ke(t,a,e[a]);return t};var Oe=function(t,e){const a=xe(xe({},e),t.value);let s;switch(t.type){case"SUMMARY_STATISTICS":s=React.createElement(Se.Z,xe({},a));break;case"BARCHART":s=React.createElement(jt.Z,xe({},a));break;case"BOXPLOT":s=React.createElement(Vt.Z,xe({},a));break;case"CONTOURPLOT":s=React.createElement(Bt.Z,xe({},a));break;case"HISTOGRAM":s=React.createElement(zt.Z,xe({},a));break;case"HEATMAP":s=React.createElement($t.Z,xe({},a));break;case"LINEPLOT":s=React.createElement(Ut.Z,xe({},a));break;case"MAP":s=React.createElement(Qt.Z,xe({},a));break;case"MOSAIC":s=React.createElement(Gt.Z,xe({},a));break;case"PIECHART":s=React.createElement(Kt.Z,xe({},a));break;case"QQPLOT":s=React.createElement(Wt.Z,xe({},a));break;case"SCATTERPLOT":s=React.createElement(Jt.Z,xe({},a));break;case"SPLOM":s=React.createElement(Yt.Z,xe({},a));break;case"VIOLINPLOT":s=React.createElement(Xt.Z,xe({},a));break;case"FREQUENCY_TABLE":s=React.createElement(te.Z,xe({},a));break;case"CONTINGENCY_TABLE":s=React.createElement(ee.Z,xe({},a));break;case"TESTS_ANOVA":s=React.createElement(ae.Z,xe({},a));break;case"TESTS_KRUSKAL":s=React.createElement(re.Z,xe({},a));break;case"TESTS_MEAN":s=React.createElement(ne.Z,xe({},a));break;case"TESTS_TWO_SAMPLE_MEAN":s=React.createElement(oe.Z,xe({},a));break;case"TESTS_CHISQUARE":s=React.createElement(se.Z,xe({},a));break;case"TESTS_CORRTEST":s=React.createElement(ie.Z,xe({},a));break;case"TESTS_PROPTEST":s=React.createElement(le.Z,xe({},a));break;case"TESTS_TWO_SAMPLE_PROPTEST":s=React.createElement(ce.Z,xe({},a));break;case"TESTS_TUKEY_HSD":s=React.createElement(pe.Z,xe({},a));break;case"KMEANS":s=React.createElement(ye.Z,xe({},a));break;case"HIERARCHICAL_CLUSTERING":s=React.createElement(ve.Z,xe({},a));break;case"DECISION_TREE":s=React.createElement(he.Z,xe({},a));break;case"LASSO_REGRESSION":s=React.createElement(ue.Z,xe({},a));break;case"LINEAR_REGRESSION":s=React.createElement(fe.Z,xe({},a));break;case"LOGISTIC_REGRESSION":s=React.createElement(de.Z,xe({},a));break;case"MULTIPLE_REGRESSION":s=React.createElement(me.Z,xe({},a));break;case"NAIVE_BAYES":s=React.createElement(Ee.Z,xe({},a));break;case"PCA":s=React.createElement(be.Z,xe({},a));break;case"RANDOM_FOREST":s=React.createElement(ge.Z,xe({},a))}return s},Pe=a(92815),we=Object.defineProperty,Ae=(t,e,a)=>(((t,e,a)=>{e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a})(t,"symbol"!=typeof e?e+"":e,a),a);const Ne=t=>({label:t,value:t});class qe extends s.Component{constructor(t){super(t),Ae(this,"handleChange",(t=>{this.props.onChange(t),this.setState({value:t})})),Ae(this,"handleSubmission",(()=>{this.props.onSubmit(this.state.value)})),this.state={value:null}}render(){return s.createElement(s.Fragment,null,s.createElement(Pe.Z,{inputId:this.props.id,isClearable:this.props.isClearable,onChange:this.handleChange,options:this.props.options.map(Ne),placeholder:"Leave note..."}),s.createElement(h.Z,{size:"sm",onClick:this.handleSubmission,style:{marginTop:4}},this.props.t("submit")))}}qe.propTypes={options:r().array,isClearable:r().bool,onChange:r().func,onSubmit:r().func},qe.defaultProps={options:[],isClearable:!1,onChange(){},onSubmit(){}};var _e=qe,Ie=a(109203),De=a(26266),Fe=a(10863);const He=({onClick:t})=>{const[e,a]=(0,s.useState)(""),i=(0,s.useCallback)((e=>{a(e.target.value),t(e.target.value)}),[t]);return s.createElement(Fe.Z,null,s.createElement(Ie.Z,{size:"small"},s.createElement(De.Z,{"aria-label":"Search",type:"text",placeholder:"Search actions...",onChange:i,value:e})))};He.propTypes={onClick:r().func},He.defaultProps={onClick(){}};var Le=He,Me=Object.defineProperty,Ve=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,$e=(t,e,a)=>e in t?Me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,ze=(t,e)=>{for(var a in e||(e={}))je.call(e,a)&&$e(t,a,e[a]);if(Ve)for(var a of Ve(e))Be.call(e,a)&&$e(t,a,e[a]);return t};const Ue=/^DATA_EXPLORER_/,Qe=t=>{const[e,a]=(0,s.useState)([]),[i,r]=(0,s.useState)(["own","others"]),[n,o]=(0,s.useState)({}),l=(0,s.useContext)(dt.Z),c=(0,Mt.Z)();(0,s.useEffect)((()=>{let e;return l&&(e=l.subscribe(((e,a)=>{e===Lt.Wh&&a.id===t.explorerID&&c()}))),()=>{e&&e()}}));const u=[],d=new RegExp(e[0],"i");if(0!==i.length)for(let s=0;s<t.actions.length;s++){const e=ze({},t.actions[s]);if(e.type=e.type.replace(Ue,""),e.type===Ht.nQ||e.type===Ht.xW||e.type===Ht.Cg)continue;let a=!1;if(e.type.search(d)>-1)a=!0;else if(e.email.search(d)>-1)a=!0;else for(let t in e.value)if(t.search(d)>-1||String(e.value[t]).search(d)>-1){a=!0;break}2!==i.length&&("own"===i[0]?e.email!==l.user.email&&(a=!1):e.email===l.user.email&&(a=!1)),a&&u.push(e)}const m=e=>{const a=u[e];return a.type===Ht.p9||a.type===Ht.nC||a.type===Ht.O7||a.type===Ht.Cg||a.type===Ht.Fw?()=>{t.onTransformation(a),t.logAction(a.type,a.value)}:()=>{const e=Oe(a,t);t.onCreated(e),t.logAction(a.type,a.value)}};return s.createElement("div",{style:t.style},s.createElement(Le,{onClick:t=>{It()(t,"")?a([]):a([t])}}),s.createElement("div",{style:{marginLeft:0,overflowY:"scroll",height:.75*window.innerHeight,border:"solid 1px rgba(0,0,0,0.125)"}},s.createElement(Et(),{initialIndex:0,itemRenderer:(a,i)=>{const r=u[a],l=new Date(r.absoluteTime);let c="";const d=r.value,g=`${r.type} | Time: ${l.toLocaleTimeString()} - ${l.toLocaleDateString()} | ${r.email}`;for(let t in d)if(At()(d,t)&&"showDecision"!==t){const e=d[t];qt()(e)||"plotId"===t||(c+=`${t}: ${Ft()(e)?e:JSON.stringify(e)}`,c+="\t")}const f=s.createElement(kt.Z,{id:`history-note-popover-${a}`,style:{width:250}},s.createElement(xt.Z,null,t.t("leave-note")),s.createElement(Ot.Z,null,s.createElement(_e,{options:["Did you consider any confounding variables?","You should check model diagnostics"],onSubmit:({value:t})=>{const e=ze({},n);e[a]?e[a]+=`\n${t}`:e[a]=t,o(e)},t:t.t})));return s.createElement(Rt.Z,null,s.createElement("div",{className:"actionNote"},s.createElement("span",{className:"title"},s.createElement(Zt(),{searchWords:e,autoEscape:!0,textToHighlight:g}))),s.createElement("div",{className:"actionNote"},s.createElement(Zt(),{searchWords:e,autoEscape:!0,textToHighlight:c})),n[a]?s.createElement(p.Z,{variant:"warning"},n[a]):null,t.instructorFeedback?s.createElement(Pt.Z,{trigger:"click",placement:"left",rootClose:!0,overlay:f},s.createElement(h.Z,{"aria-label":t.t("leave-feedback"),variant:"info",size:"sm",style:{position:"absolute",top:5,right:45}},s.createElement("i",{className:"fas fa-sticky-note"}))):null,s.createElement(h.Z,{"aria-label":t.t("repeat"),variant:"success",size:"sm",onClick:m(a),style:{position:"absolute",top:5,right:5}},s.createElement("i",{className:"fas fa-redo"})))},length:u.length,type:"simple",pageSize:50,minSize:10})),s.createElement("div",{style:{float:"right",marginRight:20}},"individual"!==t.reportMode?s.createElement(Tt.Z,{name:"options",onChange:r,type:"checkbox",size:"small",value:i,style:{padding:6}},s.createElement(Ct.Z,{id:"data-explorer-action-toggle-own",variant:"outline-secondary",value:"own"},t.t("own-actions")),s.createElement(Ct.Z,{id:"data-explorer-action-toggle-others",variant:"outline-secondary",value:"others"},t.t("others-actions"))):null,s.createElement("span",{className:"title"},u.length," ",t.t("actions"))))};Qe.propTypes={actions:r().array,instructorFeedback:r().bool,onTransformation:r().func},Qe.defaultProps={actions:[],instructorFeedback:!1,onTransformation(){}};var Ge=Qe,Ke=a(922730),We=a(423184),Ye=a(302467),Je=a.n(Ye),Xe=a(849998),ta=a(394362),ea=a(211060),aa=a(112114);const sa=t=>{const[e,a]=(0,s.useState)(!1),i=()=>{a(!e)},{t:r}=t;return s.createElement(s.Fragment,null,s.createElement(aa.Z,{id:"fullscreen_tooltip",placement:"bottom",tooltip:r("toggle-fullscreen")},s.createElement(h.Z,{"aria-label":r("toggle-fullscreen"),variant:"outline-danger",size:"sm",onClick:i},s.createElement("div",{className:"fa fa-window-maximize"}))),s.createElement(g.Z,{show:e,onHide:i,dialogClassName:"modal-100w",backdrop:!0,alt:"fullscreen"},s.createElement(g.Z.Header,{closeButton:!0},s.createElement(g.Z.Title,{as:"h1"},t.header?t.header:r("fullscreen-display"))),s.createElement(g.Z.Body,{className:"data-explorer-fullscreen-output",style:{height:.75*window.innerHeight}},t.body),s.createElement(g.Z.Footer,null,s.createElement(h.Z,{onClick:i},r("close")))))};sa.propTypes={header:r().string,body:r().node.isRequired},sa.defaultProps={header:null};var ia=sa,ra=a(875084),na=a(188304),oa=a(223444),la=a(833022),ca=a.n(la);var pa=t=>{let e=[];for(let a=0;a<t.filters.length;a++){const i=t.filters[a];let r;if(P()(i.value))r=i.value.map(((t,e)=>s.createElement(oa.Z,{bg:"secondary",key:e,style:{marginRight:4}},t)));else if((0,y.isPrimitive)(i.value))r=s.createElement(oa.Z,{bg:"secondary",style:{marginRight:4}},i.value);else if(ca()(i.value)){const t=z()(i.value);r=new Array(t.length);for(let e=0;e<t.length;e++){const a=t[e];r[e]=s.createElement(oa.Z,{key:a,bg:"secondary",style:{marginRight:4}},s.createElement("b",null,a,": "),i.value[a])}}e.push(s.createElement(na.Z.Item,{key:a},s.createElement("span",{className:"title"},i.id,": "),r,t.removeButtons?s.createElement(h.Z,{variant:"danger",size:"sm",style:{float:"right"},onClick:()=>{t.onRemove(a)},"aria-label":"remove"},s.createElement("i",{className:"fas fa-times"})):null))}return s.createElement(na.Z,null,e)},ha=Object.defineProperty,ua=Object.defineProperties,da=Object.getOwnPropertyDescriptors,ma=Object.getOwnPropertySymbols,ga=Object.prototype.hasOwnProperty,fa=Object.prototype.propertyIsEnumerable,ba=(t,e,a)=>e in t?ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,va=(t,e)=>{for(var a in e||(e={}))ga.call(e,a)&&ba(t,a,e[a]);if(ma)for(var a of ma(e))fa.call(e,a)&&ba(t,a,e[a]);return t},ya=(t,e)=>ua(t,da(e));class Ea extends s.Component{constructor(){var t;super(),ba(this,"symbol"!=typeof(t="toggleOverlay")?t+"":t,((t=B())=>{this.setState({show:!this.state.show},t)})),this.state={show:!1}}render(){return s.createElement(s.Fragment,null,s.createElement(aa.Z,{id:"filter_info_tooltip",placement:"bottom",tooltip:this.props.t("show-dataset-info")},s.createElement(h.Z,{"aria-label":this.props.t("show-dataset-info"),variant:"outline-danger",size:"sm",ref:t=>{this.button=t},style:this.props.style,onClick:()=>{this.toggleOverlay((()=>{this.state.show?this.timeout=setTimeout(this.toggleOverlay,5e3):this.timeout&&clearTimeout(this.timeout)}))}},s.createElement("i",{className:"fas fa-info"}))),s.createElement(ra.Z,{target:this.button,show:this.state.show,placement:"left"},(t=>{var e=t,{placement:a,scheduleUpdate:i,arrowProps:r}=e,n=((t,e)=>{var a={};for(var s in t)ga.call(t,s)&&e.indexOf(s)<0&&(a[s]=t[s]);if(null!=t&&ma)for(var s of ma(t))e.indexOf(s)<0&&fa.call(t,s)&&(a[s]=t[s]);return a})(e,["placement","scheduleUpdate","arrowProps"]);const o=va({backgroundColor:"lightcoral",padding:"10px 10px",marginRight:"5px",borderRadius:3,zIndex:1002},n.style);return this.props.filters?s.createElement("pre",ya(va({},n),{style:o}),s.createElement(pa,{filters:this.props.filters}),this.props.restoreButton?s.createElement(aa.Z,{tooltip:this.props.t("restore-dataset-tooltip"),placement:"right"},s.createElement(h.Z,{size:"sm",variant:"danger",onClick:()=>{this.props.onActivateFilters(this.props.filters)},style:{marginTop:12}},this.props.t("restore-dataset"))):null):s.createElement("pre",ya(va({},n),{style:o}),this.props.t("entire-dataset-used"))})))}}Ea.propTypes={filters:r().array,onActivateFilters:r().func,restoreButton:r().bool,style:r().object},Ea.defaultProps={filters:null,onActivateFilters(){},restoreButton:!1,style:{}};var Sa=Ea;const Za=o()("isle:data-explorer"),Ta=/<button[\s\S]*<\/button>/,Ca=(t,e,a,i,r,n,o)=>s.createElement(We.Z,{style:{float:"right",top:"-4px",zIndex:2}},s.createElement(Sa,{filters:r,onActivateFilters:n,t:o}),s.createElement(ia,{header:t,body:e,t:o}),s.createElement(ea.Z,{onClick:()=>{Za(`Clear element with ID ${i}`),a(i)},t:o})),Ra=t=>s.createElement(s.Fragment,null,s.createElement("button",{draggable:!0,className:"data-explorer-draggable-bar",onDragStart:t=>{let e=t.target.nextSibling.outerHTML;e=Je()(e,Ta,""),t.dataTransfer.setData("text/plain",e),t.dataTransfer.setData("text/html",e)},onClick:t=>{let e=t.target.nextSibling.outerHTML;e=Je()(e,Ta,""),(0,ta.Z)(e)}},Ke.a.t("data-explorer:drag-table")),t);var ka=function(t,e,a,i,r,n){if(t.type===Vt.Z||t.type===jt.Z||t.type===Bt.Z||t.type===$t.Z||t.type===zt.Z||t.type===Xe.Z||t.type===Ut.Z||t.type===Qt.Z||t.type===Gt.Z||t.type===Kt.Z||t.type===Wt.Z||t.type===Jt.Z||t.type===Yt.Z||t.type===Xt.Z||t.type===ot.Z){const o=t.props;return o.meta&&!o.meta.filters&&(o.meta.filters=i),s.createElement("div",{key:e},s.createElement(We.Z,{style:{float:"right",padding:"0.1rem 0.3rem",zIndex:2}},s.createElement(Sa,{filters:i,onActivateFilters:r,t:n}),s.createElement(ea.Z,{onClick:()=>{a(e)},t:n})),s.createElement("div",{style:{position:"relative",height:o.layout&&o.layout.height?o.layout.height:300,marginTop:0,marginBottom:40,marginRight:25}},t))}if(t.type===ae.Z||t.type===ie.Z||t.type===se.Z||t.type===re.Z||t.type===ne.Z||t.type===oe.Z||t.type===le.Z||t.type===ce.Z||t.type===pe.Z){return s.createElement("pre",{key:e},Ca(n("output-test"),t,a,e,i,r,n),t)}if(t.type===ee.Z||t.type===te.Z){return s.createElement("pre",{key:e},Ca(n("output-table"),t,a,e,i,r,n),Ra(t))}if(t.type===fe.Z||t.type===me.Z||t.type===ue.Z||t.type===de.Z||t.type===be.Z||t.type===ye.Z||t.type===Ee.Z||t.type===ge.Z){return s.createElement("pre",{key:e},Ca(n("output-model"),t,a,e,i,r,n),Ra(t))}if(t.type===he.Z||t.type===ve.Z){return s.createElement("pre",{key:e},s.createElement(We.Z,{style:{float:"right",padding:"0.1rem 0.3rem",top:"-1px",zIndex:2}},s.createElement(Sa,{filters:i,onActivateFilters:r,style:{right:55,position:"absolute"},t:n}),s.createElement(ea.Z,{onClick:()=>{a(e)},style:{right:-5,position:"absolute"},t:n})),s.createElement("div",{style:{marginTop:25}},t))}if(t.type===Se.Z){return s.createElement("pre",{key:e},Ca(n("summary-statistics"),t,a,e,i,r,n),Ra(t))}return null},xa=a(818674),Oa=a(658392),Pa=a(180109),wa=a(275772),Aa=a(741082),Na=a(487890),qa=Object.defineProperty,_a=Object.defineProperties,Ia=Object.getOwnPropertyDescriptors,Da=Object.getOwnPropertySymbols,Fa=Object.prototype.hasOwnProperty,Ha=Object.prototype.propertyIsEnumerable,La=(t,e,a)=>e in t?qa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Ma=(t,e)=>{for(var a in e||(e={}))Fa.call(e,a)&&La(t,a,e[a]);if(Da)for(var a of Da(e))Ha.call(e,a)&&La(t,a,e[a]);return t},Va=(t,e)=>_a(t,Ia(e)),ja=(t,e,a)=>(La(t,"symbol"!=typeof e?e+"":e,a),a);const Ba=(0,s.lazy)((()=>Promise.all([a.e(79553),a.e(97209),a.e(45771)]).then(a.bind(a,297516)))),$a=o()("isle:data-explorer"),za="(Shift+Alt+Q)",Ua="(Shift+Alt+H)",Qa="(Shift+Alt+D)",Ga="(Shift+Alt+R)",Ka=/(DELETE_VARIABLE|TRANSFORMER)$/,Wa=/^DATA_EXPLORER_/,Ya=t=>t.map((t=>Va(Ma({},t),{type:t.type.replace(Wa,"")})));function Ja(t,e){if(0===e.length)return!0;const a=z()(t);for(let s=0;s<e.length;s++)if(!A()(a,String(e[s])))return!1;return!0}function Xa(t,e){let a=new Set;for(let o=0;o<e.length;o++){const s=e[o],i=t[s.id];if(L()(s.value,"min")&&L()(s.value,"max"))for(let t=0;t<i.length;t++)i[t]>=s.value.min&&i[t]<=s.value.max||a.add(t);else if((0,y.isPrimitive)(s.value))for(let t=0;t<i.length;t++)A()(K()(i[t]),K()(s.value))||a.add(t);else for(let t=0;t<i.length;t++)A()(s.value,String(i[t]))||a.add(t)}const s=z()(t),i={},r=t[s[0]].length;for(let o=0;o<s.length;o++){i[s[o]]=[]}const n=[];for(let o=0;o<r;o++)if(!a.has(o)){for(let e=0;e<s.length;e++){let a=s[e];i[a].push(t[a][o])}t.id?n.push(t.id[o]):n.push(o+1)}return i.id=n,i}class ts extends s.Component{constructor(t){super(t),ja(this,"restoreOutputs",((t,e)=>{$a("Restore elements in output pane...");const a=[],s=[];for(let n=0;n<e.length;n++){const t=e[n];if(t.type===Ht.nQ)break;t.type===Ht.xW?s.push(t.value):t.type!==Ht.Cg&&t.type!==Ht.p9&&a.push(t)}const i=[],r={logAction:this.logAction,session:this.context,data:t.data,quantitative:t.quantitative,categorical:t.categorical};for(let n=a.length-1;n>=0;n--){const e=a.length-1-n;if(A()(s,e)){i.push(null);continue}const o=a[n],l=o.value.filters;l&&(r.data=Xa(t.data,l));const c=Oe(o,r);if(c){const e=ka(c,i.length,this.clearOutput,l||t.subsetFilters,this.onFilters,this.props.t);i.push(e)}}$a(`Restored ${i.length} elements.`),t.output=i,this.setState(t)})),ja(this,"applyTransformation",((t,e)=>{switch(e.type){case Ht.p9:if($a(`Should add transformed variable ${e.value.name}`),!L()(this.props.data,e.value.name)){const a=(0,xa.Z)(e.value.code,t.data);t=this.transformVariable(e.value.name,a,t)}break;case Ht.O7:{const{name:a,variable:s,breaks:i,categories:r}=e.value;if($a(`Should add binned variable ${a}`),!L()(this.props.data,a)){const e=t.data[s],n=(0,Oa.Z)(e,r,i),o=(0,gt.Z)(a,r);t=this.transformVariable(o,n,t)}}break;case Ht.nC:{const{name:a,firstVar:s,secondVar:i,nameMappings:r,castNumeric:n}=e.value;if($a(`Should add recoded variable ${a}`),!L()(this.props.data,a)&&t.data[s]){const e=(0,Pa.Z)(s,i,r,t.data,n);t=this.transformVariable(a,e,t)}}break;case Ht.Cg:t=this.deleteVariable(e.value,t);break;case Ht.Fw:{const{name:a,distribution:s,params:i,asCategorical:r,nObs:n,seed:o}=e.value;$a(`Should add random variable ${a}`);const l=(0,wa.Z)({name:a,distribution:s,params:i,asCategorical:r,nObs:n,seed:o});if(P()(l[0]))for(let e=0;e<l[0].length;e++)L()(this.props.data,l[0][e])||(t=this.transformVariable(l[0][e],l[1][e],t));else L()(this.props.data,a)||(t=this.transformVariable(l[0],l[1],t))}}return t})),ja(this,"restoreTransformations",(t=>{let e=this.state;$a("Restoring transformations...");for(let a=t.length-1;a>=0;a--){const s=t[a];e=this.applyTransformation(e,s)}e.data=V()(e.data,1),setTimeout((()=>{this.restoreOutputs(e,t)}),1500)})),ja(this,"resetStorage",(()=>{this.context.store.removeItem(this.props.id),this.setState({data:null,categorical:[],quantitative:[],ready:!1})})),ja(this,"shareData",(()=>{const t=this.context;if(t.metadata.store[this.props.id])t.updateMetadata("store",this.props.id,null),this.forceUpdate();else{const e={data:this.state.data,quantitative:this.state.quantitative,categorical:this.state.categorical},a=new Blob([JSON.stringify(e)],{type:"application/json"}),s=new File([a],"data.json"),i=new FormData;i.append("file",s),t.uploadFile({formData:i,callback:(e,a)=>{const s=a.filename,i=t.server+"/"+s;t.updateMetadata("store",this.props.id,i),this.forceUpdate()},showNotification:!1})}})),ja(this,"toggleStudentPlots",(()=>{this.setState({showStudentPlots:!this.state.showStudentPlots})})),ja(this,"clearOutput",(t=>{this.props.logAction(Ht.xW,t,{},"owners");const e=this.state.output.slice();e[t]=null,this.setState({output:e})})),ja(this,"clearPlots",(()=>{this.setState({studentPlots:[]})})),ja(this,"onUserAction",(t=>{let e,a=t.value;switch(F()(a)&&(a=JSON.parse(a)),t.type){case"SHARE_BARCHART":e=(0,jt.G)(Ma({data:this.state.data},a));break;case"SHARE_BOXPLOT":e=(0,Vt.I)(Ma({data:this.state.data},a));break;case"SHARE_CONTOURCHART":e=(0,Bt.k)(Ma({data:this.state.data},a));break;case"SHARE_HEATMAP":e=(0,$t.L)(Ma({data:this.state.data},a));break;case"SHARE_HISTOGRAM":e=(0,zt.N)(Ma({data:this.state.data},a));break;case"SHARE_LINEPLOT":e=(0,Ut.i)(Ma({data:this.state.data},a));break;case"SHARE_MAP":e=(0,Qt._)(Ma({data:this.state.data},a));break;case"SHARE_MOSAIC":e=(0,Gt.r)(Ma({data:this.state.data},a));break;case"SHARE_PIECHART":e=(0,Kt.E)(Ma({data:this.state.data},a));break;case"SHARE_QQPLOT":e=(0,Wt._)(Ma({data:this.state.data},a));break;case"SHARE_SCATTERPLOT":e=(0,Jt.s)(Ma({data:this.state.data},a));break;case"SHARE_SPLOM":e=(0,Yt.T)(Ma({data:this.state.data},a));break;case"SHARE_VIOLINPLOT":e=(0,Xt.O)(Ma({data:this.state.data},a))}if(e){const t=this.state.studentPlots.slice(),a=JSON.stringify(e);let s=!1;for(let e=0;e<t.length;e++)if(t[e].config===a){t[e].count+=1,s=!0;break}s||t.push({config:a,count:1}),this.setState({studentPlots:t})}})),ja(this,"onFilters",(t=>{this.setState({filters:t},this.onFilterCreate)})),ja(this,"addToOutputs",(t=>{const e=this.state.output.slice();if(P()(t))for(let a=0;a<t.length;a++){const s=ka(t[a],e.length,this.clearOutput,this.state.subsetFilters,this.onFilters,this.props.t);e.push(s)}else{const a=ka(t,e.length,this.clearOutput,this.state.subsetFilters,this.onFilters,this.props.t);e.push(a)}this.setState({output:e})})),ja(this,"transformVariable",((t,e,a)=>{let s,i,r,n,o;$a(`Attach transformed variable ${t} to data...`),a?(n=V()(a.data,1),s=a.quantitative.slice(),i=a.categorical.slice(),r=a.groupVars.slice()):(n=V()(this.state.data,1),s=this.state.quantitative.slice(),i=this.state.categorical.slice(),r=this.state.groupVars.slice()),n[t]=e,S()(e)?A()(s,t)||(s.push(t),o=i.indexOf(t),o>0&&(i.splice(o,1),r=i.slice())):(A()(i,t)||(i.push(t),o=s.indexOf(t),o>0&&s.splice(o,1)),r=i.slice());return{data:n,categorical:i,quantitative:s,groupVars:r}})),ja(this,"onGenerateTransformedVariable",((t,e)=>{const a=this.context;if(P()(t)){let s;for(let a=0;a<t.length;a++)s=this.transformVariable(t[a],e[a],s);return a.addNotification({title:this.props.t("variables-created"),message:this.props.t("variables-created-msg",{name:t.join(", ")}),level:"success",position:"tr"}),this.setState(s)}if(L()(this.props.data,t))return a.addNotification({title:this.props.t("variable-exists"),message:this.props.t("variable-exists-msg"),level:"error",position:"tr"});a.addNotification({title:this.props.t("variable-created"),message:this.props.t("variable-created-msg",{name:t}),level:"success",position:"tr"}),this.setState(Ma({},this.transformVariable(t,e)))})),ja(this,"onColumnDelete",(t=>{$a("Should remove variable with name "+t);const e=this.context;this.logAction(Ht.Cg,t),e.addNotification({title:this.props.t("variable-removed"),message:this.props.t("variable-removed-msg",{variable:t}),level:"success",position:"tr"});const a=this.deleteVariable(t);a.data=V()(a.data,1),this.setState(a)})),ja(this,"onColumnNameChange",((t,e)=>{const a=this.state,s=z()(this.state.data),i={};for(let l=0;l<s.length;l++){const a=s[l];a===t?i[e]=this.state.data[t]:i[a]=this.state.data[a]}const r=a.quantitative.map((a=>a===t?e:a)),n=a.categorical.map((a=>a===t?e:a)),o=a.groupVars.map((a=>a===t?e:a));this.setState({data:i,quantitative:r,categorical:n,groupVars:o})})),ja(this,"onColumnDrag",(t=>{const e=this.state,a=(e,a)=>(e=t.indexOf(String(e)),a=t.indexOf(String(a)),-1===e||-1===a?0:e<a?-1:e>a?1:0),s=e.quantitative.slice().sort(a),i=e.categorical.slice().sort(a),r=e.groupVars.slice().sort(a);this.setState({quantitative:s,categorical:i,groupVars:r})})),ja(this,"deleteVariable",((t,e)=>{let a,s=e||this.state;a=e?e.data:V()(this.state.data,1),delete a[t];const i=String(t);return{data:a,quantitative:s.quantitative.filter((t=>String(t)!==i)),categorical:s.categorical.filter((t=>String(t)!==i)),groupVars:s.groupVars.filter((t=>String(t)!==i)),filters:(s.filters||[]).filter((t=>t.id!==i))}})),ja(this,"onFileUpload",((t,e)=>{const a=this.context;if(!t){const t={},s=z()(e[0]).filter((t=>""!==t));for(let a=0;a<s.length;a++){let i=s[a];t[i]=new Array(e.length)}for(let a=0;a<e.length;a++)for(let i=0;i<s.length;i++){let r=s[i];t[r][a]=e[a][r]}const i=[],r=[];s.forEach((e=>{S()(t[e])?r.push(e):i.push(e)})),this.setState({quantitative:r,categorical:i,data:t},(()=>{a.store.setItem(this.props.id,{data:this.state.data,quantitative:r,categorical:i})}))}})),ja(this,"onFilterCreate",(()=>{const t={data:Xa(this.state.data,this.state.filters),oldData:this.state.data,subsetFilters:this.state.filters};this.setState(t)})),ja(this,"onFilterAdd",(()=>{const t=this.restoreData(),e={data:Xa(t,this.state.filters),oldData:t,subsetFilters:this.state.filters};this.setState(e)})),ja(this,"restoreData",(()=>{const t=z()(this.state.data),e=z()(this.state.oldData);let a,s;this.props.data?(a=this.props.data,s=V()(this.props.data,1)):(a=this.state.unaltered.data,s=V()(a,1));const i=[];for(let l=0;l<this.props.quantitative.length;l++)i.push(String(this.props.quantitative[l]));for(let l=0;l<this.props.categorical.length;l++)i.push(String(this.props.categorical[l]));const r=this.state.data.id,n=a[e[0]].length,o=this.state.oldData.id||Q()(1,n+1,1);for(let l=0;l<e.length;l++){const t=e[l];if("id"!==t&&!A()(i,t)){s[t]=new Array(n).fill(null);for(let e=0;e<o.length;e++){const a=o[e]-1;s[t][a]=this.state.oldData[t][e]}}}for(let l=0;l<t.length;l++){const e=t[l];if("id"!==e&&!A()(i,e)){$a("Handle inserted variable: "+e),s[e]||(s[e]=new Array(n).fill(null));for(let t=0;t<r.length;t++){const a=r[t]-1;s[e][a]=this.state.data[e][t]}}}return s})),ja(this,"onPredict",{"decision-tree":(t,e)=>{const a=V()(this.state.data,1),s=this.state.categorical.slice(),i=this.state.quantitative.slice();if("classification"===t.type){const i=t.predict(a).map((t=>String(t)));let r="pred_tree"+e;a[r]=i,A()(s,r)||s.push(r),r="correct_tree"+e;const n=a[t.response];a[r]=i.map(((t,e)=>t===String(n[e])?"Yes":"No")),A()(s,r)||s.push(r)}else{const s=t.predict(a);let r="pred_tree"+e;a[r]=s,A()(i,r)||i.push(r),r="resid_tree"+e,a[r]=(0,mt.Z)(s,a[t.response]),A()(i,r)||i.push(r)}this.setState({categorical:s,quantitative:i,data:a})},lasso:(t,e)=>{const a=V()(this.state.data,1),s=this.state.quantitative.slice();let i="pred_lasso"+e;const{fitted:r,residuals:n}=t(a);a[i]=r,A()(s,i)||s.push(i),i="resid_lasso"+e,a[i]=n,A()(s,i)||s.push(i),this.setState({quantitative:s,data:a})},logistic:(t,e)=>{const a=V()(this.state.data,1),s=this.state.quantitative.slice(),i=this.state.categorical.slice(),{yhat:r,probs:n,residuals:o}=t(a);let l="probs_logis"+e;a[l]=n,A()(s,l)||s.push(l),l="pred_logis"+e,a[l]=r,A()(i,l)||i.push(l),l="resid_logis"+e,A()(s,l)||s.push(l),a[l]=o,this.setState({categorical:i,quantitative:s,data:a})},"multiple-linear-regression":(t,e)=>{const a=V()(this.state.data,1),s=this.state.quantitative.slice(),{fitted:i,residuals:r}=t(a);let n="pred_lm"+e;a[n]=i,A()(s,n)||s.push(n),n="resid_lm"+e,A()(s,n)||s.push(n),a[n]=r,this.setState({quantitative:s,data:a})},"random-forest":(t,e)=>{const a=V()(this.state.data,1),s=this.state.categorical.slice();if("classification"===t.type){const i=t.predict(a).map((t=>String(t)));let r="pred_forest"+e;a[r]=i,A()(s,r)||s.push(r),r="correct_forest"+e;const n=this.state.data[t.response];a[r]=i.map(((t,e)=>t===String(n[e])?"Yes":"No")),A()(s,r)||s.push(r)}this.setState({categorical:s,data:a})},"simple-linear-regression":(t,e)=>{const a=V()(this.state.data,1),{fitted:s,residuals:i}=t(a),r=this.state.quantitative.slice();let n="pred_slm"+e;a[n]=s,A()(r,n)||r.push(n),n="resid_slm"+e,A()(r,n)||r.push(n),a[n]=i,this.setState({quantitative:r,data:a})},"naive-bayes":(t,e)=>{const a=V()(this.state.data,1),s=this.state.quantitative.slice(),{fitted:i,classProbs:r}=t(a),n=Object.keys(r);for(let c=0;c<n.length;c++){const t=n[c];a[t]=r[t],A()(s,t)||s.push(t)}const o="pred_bayes"+e;a[o]=i;const l=this.state.categorical.slice();A()(l,o)||l.push(o),this.setState({categorical:l,quantitative:s,data:a})}}),ja(this,"onRestoreData",(()=>{const t=this.restoreData();this.setState({data:t,subsetFilters:null,filters:[]})})),ja(this,"on2dSelection",((t,e)=>{const a=this.state.filters.filter((e=>e.id!==t.x&&e.id!==t.y));a.push({id:t.x,value:{min:e.range.x[0],max:e.range.x[1]}}),a.push({id:t.y,value:{min:e.range.y[0],max:e.range.y[1]}}),this.setState({filters:a})})),ja(this,"onQQPlotSelection",((t,e)=>{if(e.range&&e.range.y){const a=this.state.filters.filter((e=>e.id!==t)),s=e.range.y;a.push({id:t,value:{min:s[0],max:s[1]}}),this.setState({filters:a})}})),ja(this,"onBarchartSelection",((t,e)=>{const a=this.state.filters.filter((e=>e.id!==t));a.push({id:t,value:e.range.x}),this.setState({filters:a})})),ja(this,"onHistogramSelection",((t,e)=>{if(e.points&&e.points[0]){const a=e.points[0],s=a.fullData.xbins.size,i=e.points[e.points.length-1],r=this.state.filters.filter((e=>e.id!==t));r.push({id:t,value:{min:a.x-s/2,max:i.x+s/2}}),this.setState({filters:r})}}));let e,a,s,i=t.data;t.data?(e=t.quantitative,a=t.categorical,s=t.categorical.slice()):(e=[],a=[],s=[]);let r=!1,n=!0;x()(i)&&(e.length>0||a.length>0)&&(r=!0,n=Ja(i,e.concat(a))),this.state={data:i,quantitative:e,categorical:a,validVariables:n,output:[],groupVars:s,ready:r,showStudentPlots:!1,openedNav:t.opened||(I()(t.questions)?"data":"questions"),studentPlots:[],subsetFilters:null,unaltered:{data:t.data,quantitative:t.quantitative,categorical:t.categorical},filters:[]},this.logAction=(t,e)=>{this.state.subsetFilters&&(e=Va(Ma({},e),{filters:this.state.subsetFilters}));const a="individual"!==this.props.reportMode?"members":"owners";this.props.logAction(t,e,{},a)}}static getDerivedStateFromProps(t,e){if(!t.data)return null;const a={};return t.data!==e.unaltered.data&&(a.data=t.data),t.quantitative!==e.unaltered.quantitative&&(a.quantitative=t.quantitative),t.categorical!==e.unaltered.categorical&&(a.categorical=t.categorical),a.validVariables=Ja(t.data,t.quantitative.concat(t.categorical)),q()(a)?null:(a.unaltered={data:t.data,quantitative:t.quantitative,categorical:t.categorical},a)}componentDidMount(){const t=this.context;if(!this.props.data)if(t.metadata.store[this.props.id]){const e=t.metadata.store[this.props.id];(0,c.AVB)(e).then((t=>{const e=(t.categorical||[]).slice();this.setState({data:t.data,quantitative:t.quantitative,categorical:t.categorical,groupVars:e,ready:!0,unaltered:{data:t.data,quantitative:t.quantitative,categorical:t.categorical}})}))}else t.store.getItem(this.props.id).then((({quantitative:t=[],categorical:e=[],data:a=null})=>{let s=!1;q()(a)&&(a=null),I()(a)||(s=!0);const i=(e||[]).slice();this.setState({data:a,quantitative:t,categorical:e,groupVars:i,ready:s,unaltered:{data:a,quantitative:t,categorical:e}})})).catch((t=>{$a(t)}));if(t.currentUserActions){$a("Checking user actions");let e=t.currentUserActions[this.props.id];this.props.data&&R()(e)&&(e=Ya(e),this.restoreTransformations(e))}this.unsubscribe=t.subscribe(((e,a)=>{if(e===Lt.u){let t=a[this.props.id];$a("Retrieved current user actions..."),this.props.data&&R()(t)&&(t=Ya(t),this.restoreTransformations(t))}else if(e===Lt.KI){if(t.metadata.store[this.props.id]){const e=t.metadata.store[this.props.id];(0,c.AVB)(e).then((t=>{const e=(t.categorical||[]).slice();this.setState({data:t.data,quantitative:t.quantitative,categorical:t.categorical,groupVars:e,ready:!0})}))}}else if(e===Lt.Wh){if(a.id!==this.props.id||a.email===t.user.email||"individual"===this.props.reportMode)return;if("group"===this.props.reportMode){if(!t.group)return;const e=t.group.members;let s=!1;for(let t=0;t<e.length;t++)if(e[t].email===a.email){s=!0;break}if(!s)return}Ka.test(a.type)&&this.restoreTransformations([a]),this.context.currentUserActions[this.props.id].unshift(a)}}))}componentDidUpdate(t,e){$a("Component did update..."),this.state.output!==e.output&&this.outputPanel&&this.outputPanel.scrollToBottom()}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){if($a("Render component..."),!this.state.data)return s.createElement(ct,{title:this.props.t("data-explorer"),onUpload:this.onFileUpload});if(!this.state.ready){const t=z()(this.state.data);return s.createElement(b.Z,null,s.createElement(b.Z.Header,{as:"h3"},this.props.t("data-explorer")),s.createElement(b.Z.Body,null,s.createElement("h4",null,this.props.t("select-quantitative-categorical"),":"),s.createElement(W.Z,{legend:this.props.t("quantitative"),options:t,defaultValue:this.state.quantitative,multi:!0,onChange:t=>{this.setState({quantitative:t||[]})}}),s.createElement(W.Z,{legend:this.props.t("categorical"),options:t,defaultValue:this.state.categorical,multi:!0,onChange:t=>{this.setState({categorical:t||[]})}}),s.createElement(h.Z,{disabled:T()(this.state.categorical)&&T()(this.state.quantitative),onClick:()=>{this.setState({groupVars:this.state.categorical.slice(),ready:!0},(()=>{const t=this.context,e={data:this.state.data,quantitative:this.state.quantitative,categorical:this.state.categorical};t.store.setItem(this.props.id,e),this.setState({unaltered:e})}))}},this.props.t("submit")),s.createElement(ut.Z,{data:this.state.data,id:this.props.id+"_table"})))}if(q()(this.state.data))return s.createElement(p.Z,{variant:"danger"},this.props.t("data-empty"));if(!this.state.validVariables)return s.createElement(p.Z,{variant:"danger"},s.createElement(l.cC,{i18nKey:"variables-invalid-alert",ns:"DataExplorer"},"The ",s.createElement("b",null,"quantitative")," or ",s.createElement("b",null,"categorical")," data arrays contain variable names not present in the ",s.createElement("b",null,"data")," object."));const t=this.context,e=!I()(this.props.questions),a=P()(this.props.questions)?{children:this.props.questions}:this.props.questions,i=this.props.style.height||.9*window.innerHeight-165;return s.createElement(d.Z,{className:"no-gutter data-explorer",style:this.props.style},s.createElement(m.Z,{xs:6,md:6},s.createElement(b.Z,{style:{height:this.props.style.height,minHeight:this.props.style.height||.9*window.innerHeight,padding:0}},s.createElement(u.Z,{className:"data-explorer-navbar",value:this.state.openedNav,onSelect:t=>this.setState({openedNav:t})},s.createElement(f.Z,null,e?s.createElement(f.Z.Item,{className:"explorer-data-nav"},s.createElement(f.Z.Link,{title:`${this.props.t("questions")} ${za}`,eventKey:"questions",active:"questions"===this.state.openedNav},this.props.t("questions"))):null,this.props.dataTable?s.createElement(f.Z.Item,{className:"explorer-data-nav"},s.createElement(f.Z.Link,{title:`${this.props.t("data")} ${Qa}`,eventKey:"data",active:"data"===this.state.openedNav},this.props.t("data"))):null,this.props.editor?s.createElement(f.Z.Item,{className:"explorer-editor-nav"},s.createElement(f.Z.Link,{title:`${this.props.editorTitle?this.props.editorTitle:this.props.t("report")} ${Ga}`,active:"editor"===this.state.openedNav,eventKey:"editor"},this.props.editorTitle?this.props.editorTitle:this.props.t("report"))):null,this.props.history?s.createElement(f.Z.Item,{className:"explorer-editor-nav"},s.createElement(f.Z.Link,{title:`${this.props.t("history")} ${Ua}`,active:"history"===this.state.openedNav,eventKey:"history"},this.props.t("history"))):null,this.props.tabs.length>0?this.props.tabs.map(((t,e)=>s.createElement(f.Z.Item,{key:e,className:"explorer-tabs-nav"},s.createElement(f.Z.Link,{active:this.state.openedNav===t.title,eventKey:t.title},t.title)))):null),s.createElement(s.Suspense,{fallback:s.createElement(h.Z,{variant:"secondary",size:"sm",className:"hide-toolbox-button",disabled:!0},"Loading...")},s.createElement(Ba,{id:`${this.props.id}-toolbox`,models:this.props.models,tables:this.props.tables,statistics:this.props.statistics,plots:this.props.plots,tests:this.props.tests,quantitative:this.state.quantitative,originalQuantitative:this.props.quantitative,categorical:this.state.categorical,logAction:this.logAction,onCreated:this.addToOutputs,data:this.state.data,showTestDecisions:this.props.showTestDecisions,onPlotDone:this.outputPanel?this.outputPanel.scrollToBottom:B(),groupingVariables:this.state.groupVars,on2dSelection:this.on2dSelection,onQQPlotSelection:this.onQQPlotSelection,transformer:this.props.transformer,onBarchartSelection:this.onBarchartSelection,showHistogramDensityOption:this.props.histogramDensities,onGenerateTransformedVariable:this.onGenerateTransformedVariable,onHistogramSelection:this.onHistogramSelection,onCategoricalGenerate:(t,e)=>{const a=t.slice();this.setState({categorical:t,groupVars:a,data:e})},onQuantitativeGenerate:(t,e)=>{this.setState({quantitative:t,data:e})},onTutorialStart:this.props.onTutorialStart,onTutorialCompletion:this.props.onTutorialCompletion,onPredict:this.onPredict}))),s.createElement(b.Z.Body,{style:{overflowY:"auto"}},e?s.createElement(it.Z,Ma({id:this.props.id+"_questions",height:i,className:"data-explorer-questions",style:{display:"questions"!==this.state.openedNav?"none":null}},a)):null,s.createElement("div",{style:{display:"data"!==this.state.openedNav?"none":null}},this.props.data||t.metadata.store[this.props.id]?null:s.createElement(h.Z,{size:"small",onClick:this.resetStorage,style:{position:"absolute",top:"80px",zIndex:2}},this.props.t("clear-data")),this.props.data?null:s.createElement(rt.Z,{owner:!0,banner:null},s.createElement(h.Z,{size:"small",onClick:this.shareData,style:{position:"absolute",top:"80px",left:"140px",zIndex:2}},t.metadata.store[this.props.id]?this.props.t("unshare"):this.props.t("share"))),s.createElement(ut.Z,Va(Ma({},this.props.dataTableProps),{data:this.state.data,dataInfo:this.props.dataInfo,undeletableVars:z()(this.props.data),filters:this.state.filters,onFilteredChange:t=>{$a("Filters have changed..."),this.setState({filters:t})},onColumnDelete:this.onColumnDelete,onColumnNameChange:this.onColumnNameChange,onColumnDrag:this.onColumnDrag,deletable:!0,id:this.props.id+"_table",headerButtons:s.createElement(s.Fragment,null,this.state.filters.length>0&&this.state.subsetFilters!==this.state.filters?s.createElement(lt.Z,{placement:"top",overlay:s.createElement(v.Z,null,this.props.t("create-filtered-dataset-tooltip"))},s.createElement(h.Z,{onClick:()=>{this.state.subsetFilters?this.onFilterAdd():this.onFilterCreate()},variant:"secondary",size:"xsmall",className:"mb-1"},this.props.t("create-filtered-dataset"))):null,this.state.subsetFilters?s.createElement("div",{className:"data-explorer-subset-filter-display"},s.createElement(st.Z,{headerClassName:"data-explorer-collapsible-filters",header:s.createElement("div",null,s.createElement(lt.Z,{placement:"top",overlay:s.createElement(v.Z,null,this.props.t("filtered-data-tooltip"))},s.createElement("span",null,s.createElement("i",{className:"fa-solid fa-caret-down mx-2"}),this.props.t("filtered-data"),s.createElement("i",{className:"fa-solid fa-caret-down  mx-2"}))),this.state.subsetFilters?s.createElement(lt.Z,{placement:"top",overlay:s.createElement(v.Z,null,this.props.t("restore-original-dataset-tooltip"))},s.createElement(h.Z,{onClick:this.onRestoreData,variant:"secondary",size:"small",style:{float:"right"}},this.props.t("restore-original-dataset"))):null)},s.createElement(pa,{filters:this.state.subsetFilters,removeButtons:!0,onRemove:t=>{$a("Removing filter at position "+t);const e=this.state.subsetFilters.slice();e.splice(t,1),e.length>0?this.setState({data:this.state.oldData,filters:e},this.onFilterCreate):this.onRestoreData()}}))):null)}))),this.props.history&&"history"===this.state.openedNav?s.createElement(Ge,{explorerID:this.props.id,actions:this.context.currentUserActions[this.props.id],onCreated:this.addToOutputs,onTransformation:e=>{const a=this.applyTransformation(this.state,e);t.addNotification({title:this.props.t("variable-created"),message:this.props.t("variable-created-msg",{name:e.value.name}),level:"success",position:"tr"}),this.setState(a)},logAction:this.logAction,session:this.context,data:this.state.data,quantitative:this.state.quantitative,categorical:this.state.categorical,t:this.props.t,reportMode:this.props.reportMode}):null,this.props.editor?s.createElement(Y.Z,Va(Ma({},this.props.editorProps),{mode:this.props.reportMode,id:this.props.id+"_editor",style:{display:"editor"!==this.state.openedNav?"none":null},submitButton:!0})):null,this.props.tabs.map(((t,e)=>this.state.openedNav===t.title?t.content:null))))),s.createElement(m.Z,{xs:6,md:6},s.createElement("div",{className:"card card-default",style:{height:this.props.style.height,minHeight:this.props.style.height||.9*window.innerHeight,padding:0}},s.createElement(vt,{output:this.state.output,ref:t=>{this.outputPanel=t},session:this.context,header:s.createElement(rt.Z,{owner:!0,banner:null},s.createElement(g.Z,{show:this.state.showStudentPlots,onHide:this.toggleStudentPlots,dialogClassName:"modal-100w"},s.createElement(g.Z.Header,{closeButton:!0},s.createElement(g.Z.Title,null,this.props.t("plots"))),s.createElement(g.Z.Body,{style:{height:.8*window.innerHeight,overflowY:"scroll"}},this.state.studentPlots.length>0?s.createElement(at,null,this.state.studentPlots.map(((t,e)=>{const a=JSON.parse(t.config);return s.createElement("div",{key:e,style:{height:"450px"}},(0,y.isPrimitive)(a)?s.createElement(pt.Z,{code:a,libraries:["MASS"]}):s.createElement(ot.Z,{data:a.data,layout:a.layout,removeButtons:!0}),s.createElement("span",null,s.createElement("b",null,this.props.t("count"),": "),t.count))}))):s.createElement(b.Z,{body:!0,className:"bg-light"},this.props.t("no-plots-yet"))),s.createElement(g.Z.Footer,null,s.createElement(h.Z,{variant:"danger",onClick:this.clearPlots},this.props.t("clear-plots")),s.createElement(h.Z,{onClick:this.toggleStudentPlots},this.props.t("close")))),s.createElement(h.Z,{variant:"secondary",size:"sm",style:{float:"right"},onClick:this.toggleStudentPlots},this.props.t("open-shared-plots")),s.createElement(nt.Z,{returnFullObject:!0,for:[this.props.id],onDatum:this.onUserAction})),clearOutput:()=>{this.props.logAction(Ht.nQ,null,{},"owners"),this.setState({output:[]})},reportMode:this.props.reportMode,t:this.props.t}),s.createElement(ht.Z,{actions:{"shift+alt+r":()=>this.setState({openedNav:"editor"}),"shift+alt+h":()=>this.setState({openedNav:"history"}),"shift+alt+d":()=>this.setState({openedNav:"data"}),"shift+alt+q":()=>this.setState({openedNav:"questions"})}}))))}}ts.defaultProps={data:{},dataInfo:{info:"",name:"",variables:null,showOnStartup:!1},dataTable:!0,dataTableProps:{},history:!0,tabs:[],questions:null,transformer:!0,statistics:["Mean","Median","Min","Max","Range","Interquartile Range","Standard Deviation","Variance","Correlation","Correlation Matrix","Skewness","Excess Kurtosis","First Quartile","Third Quartile","Quantile","Five-Number Summary"],plots:["Bar Chart","Pie Chart","Mosaic Plot","Histogram","Interval Plot","Box Plot","Line Plot","Scatterplot","Scatterplot Matrix","Heat Map","Contour Chart","Violin Plot","QQ Plot"],tables:["Frequency Table","Contingency Table"],tests:["One-Sample Mean Test","Two-Sample Mean Test","One-Way ANOVA","One-Sample Proportion Test","Two-Sample Proportion Test","Correlation Test","Chi-square Independence Test","Kruskal-Wallis Test","Tukey HSD Test"],models:["Simple Linear Regression","Multiple Linear Regression","LASSO","Decision Tree","Random Forest","Logistic Regression","Naive Bayes","PCA","Hierarchical Clustering","kmeans"],opened:null,categorical:[],quantitative:[],editor:!0,editorProps:null,editorTitle:null,reportMode:"individual",histogramDensities:!0,showTestDecisions:!0,onTutorialCompletion(){},onTutorialStart(){},style:{}},ts.propTypes={categorical:r().array,quantitative:r().array,data:r().object,dataInfo:r().object,editor:r().bool,editorProps:r().object,editorTitle:r().string,dataTable:r().bool,dataTableProps:r().object,history:r().bool,reportMode:r().oneOf(["individual","group","collaborative"]),histogramDensities:r().bool,models:r().array,opened:r().oneOf(["data","toolbox","editor"]),plots:r().array,questions:r().oneOfType([r().array,r().object]),showTestDecisions:r().bool,statistics:r().array,style:r().object,tables:r().array,tabs:r().array,tests:r().array,transformer:r().bool,onTutorialCompletion:r().func,onTutorialStart:r().func},ts.contextType=dt.Z;var es=(0,Na.D)("DATA_EXPLORER")((0,l.Zh)("data-explorer")((0,Aa.W)(ts)))},275772:function(t,e,a){var s=a(839956),i=a.n(s);const r=/^([^0-9]+)(\d+):\1(\d+)$/;e.Z=function({name:t,distribution:e,params:a,nObs:s,asCategorical:n,seed:o}){const l=r.exec(t),c=i()[e].factory.apply(null,a.concat({seed:o}));if(l&&4===l.length){const t=l[1],e=parseInt(l[2],10),a=parseInt(l[3],10),i=[],r=[];if(n)for(let n=e;n<=a;n++){const e=new Array(s);for(let t=0;t<s;t++)e[t]=String(c());r.push(e),i.push(`${t}${n}`)}else for(let n=e;n<=a;n++){const e=new Array(s);for(let t=0;t<s;t++)e[t]=c();r.push(e),i.push(`${t}${n}`)}return[i,r]}const p=new Array(s);for(let i=0;i<s;i++)p[i]=c();return[t,p]}},180109:function(t,e,a){var s=a(294565),i=a(409961),r=a.n(i),n=a(302467),o=a.n(n);function l(t){return(0,s.isPrimitive)(t)?o()(t,".","[dot]"):t}e.Z=function(t,e,a,s,i=!1){const n=[],o=s[t];if(!a)return o;if(i){if(r()(e))for(let t=0;t<o.length;t++){const e=o[t],s=Number(a[l(e)]);n.push(s)}else{const t=s[e];for(let e=0;e<o.length;e++){const s=a[l(o[e])+"-"+l(t[e])];n.push(Number(s))}}return n}if(r()(e))for(let r=0;r<o.length;r++){let t=a[l(o[r])];"null"!==t&&"NA"!==t||(t=null),n.push(t)}else{const t=s[e];for(let e=0;e<o.length;e++){const s=a[l(o[e])+"-"+l(t[e])];n.push(s)}}return n}},658392:function(t,e,a){var s=a(676065),i=a.n(s),r=a(309765),n=a(316305),o=a.n(n);e.Z=function(t,e,a){const s=[];for(let n=0;n<t.length;n++){let l;const c=t[n];if((0,r.isPrimitive)(c)&&!o()(c)){let t=0;for(;i()(l);)t>=a.length||c<a[t]?l=e[t]:t+=1}else l=null;s.push(l)}return s}},818674:function(t,e,a){var s=a(733727),i=a.n(s),r=a(686605),n=a.n(r),o=a(695688),l=a.n(o),c=a(190465),p=a.n(c),h=a(557106),u=a.n(h),d=a(783158),m=a.n(d),g=a(798030),f=a.n(g),b=a(830324),v=a.n(b),y=a(700601),E=a.n(y),S=a(409961),Z=a.n(S),T=a(201),C=a(99733),R=a(20185),k=a(714785);const x=t=>(...e)=>t(e),O=[p(),f(),n(),l(),i(),u(),m(),x(C.Z),x(T.Z),x(R.Z)];e.Z=function(t,e){let a=[];for(let r in e)if(E()(e,r))for(let t=0;t<e[r].length;t++){v()(a[t])||(a[t]={});const s=e[r][t];a[t][r]=Z()(s)?NaN:s}const s=new Function("datum",...k,t),i=new Array(a.length);for(let r=0;r<a.length;r++)i[r]=s(a[r],...O);return i}},42653:function(t,e,a){var s=a(202784);e.Z=function(){const[,t]=(0,s.useState)(0);return(0,s.useCallback)((()=>{t((t=>t+1))}),[])}},394362:function(t,e){e.Z=function(t){const e=document.createElement("div");e.innerHTML=t,e.style.position="fixed",e.style.opacity=0,e.style.pointerEvents="none",document.body.appendChild(e),window.getSelection().removeAllRanges();const a=document.createRange();a.selectNode(e),window.getSelection().addRange(a),document.execCommand("copy"),document.body.removeChild(e)}},107466:function(t,e){e.Z=function t(e,a,s){if(s<=0)return;const i=(a-e.scrollTop)/s*10;setTimeout((function(){e.scrollTop=e.scrollTop+i,e.scrollTop!==a&&t(e,a,s-10)}),10)}},30468:function(t,e,a){var s=a(89596),i=a.n(s),r=a(309765);e.Z=function(t,e){const a=i()(e);if(!i()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!a&&!(0,r.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const s=t.length,n=new Array(s);if(a){if(s!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(let a=0;a<s;a++)n[a]=t[a]-e[a]}else for(let i=0;i<s;i++)n[i]=t[i]-e;return n}},714785:function(t){t.exports=JSON.parse('["exp","ln","round","sqrt","power","max","min","mean","stdev","sum"]')}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[459],{44721:function(e,t,l){l.r(t);var a=l(202784),n=l(213980),r=l.n(n),o=l(376699),s=l(790817),i=l(998856),d=l(423134),p=l.n(d),u=l(686605),c=l.n(u),f=l(123103),m=l(351375),g=l(741082);function v(e){e.stopPropagation(),e.preventDefault()}const h=({title:e,onUpload:t})=>{const[l,n]=(0,a.useState)(0),[r,d]=(0,a.useState)(!1),[u,g]=(0,a.useState)(!0),{t:h}=(0,o.$)("spreadsheet-upload"),E=(0,a.useContext)(f.Z),b=(0,a.useRef)(null),C=(0,a.useCallback)((e=>{const l=e.target.result;n(0),d(!1),p()({noheader:!u,checkType:!0,ignoreEmpty:!0}).fromString(l).then((e=>{t(null,e)})).catch((e=>{E.addNotification({title:h("error-title"),message:`${h("error-message")}: ${e.message}`,level:"error",position:"tr"}),t(e)}))}),[u,E,t,h]),k=(0,a.useCallback)((()=>{d(!0);const e=new FileReader,t=b.current.files[0];e.addEventListener("load",C,!1),e.addEventListener("progress",(e=>{if(e.lengthComputable){const t=e.loaded/e.total;n(t)}}),!1),e.readAsText(t,"utf-8")}),[C]),y=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault();const t=e.dataTransfer,l=new FileReader;let a=null;if(t.items?"file"===t.items[0].kind&&(a=t.items[0].getAsFile()):a=t.files[0],a){if("text/csv"!==a.type)return E.addNotification({title:h("no-csv"),message:h("no-csv-message"),level:"error",position:"tr"});l.addEventListener("load",C,!1),l.readAsText(a,"utf-8")}}),[E,C,h]),x=(0,a.useCallback)((e=>{g(e)}),[]),w=c()(100*l);return a.createElement(s.Z,null,a.createElement(s.Z.Header,{as:"h2"},e||h("title")),a.createElement(s.Z.Body,null,a.createElement("label",{htmlFor:"CSVUpload"},h("csv-upload-prompt"),":"),a.createElement("input",{id:"CSVUpload",type:"file",accept:".csv",onChange:k,ref:b,style:{margin:"auto"}}),a.createElement("p",null,h("or")),a.createElement("div",{onDrop:y,onDragOver:v,onDragEnd:v,style:{minHeight:"150px",width:"250px",border:"1px solid blue",padding:"10px"}},a.createElement("span",null,h("drop-file"))),a.createElement(m.Z,{legend:h("first-row-names"),defaultValue:!0,onChange:x}),r?a.createElement(i.Z,{"aria-label":h("csv-upload-progress"),now:w,label:`${w}%`}):null))};h.defaultProps={onUpload(){},title:null},h.propTypes={onUpload:r().func,title:r().oneOfType([r().string,r().node])},t.default=(0,g.W)(h)}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1055],{14042:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});var n=s(202784),i=s(213980),o=s.n(i),r=s(912895),a=s.n(r),l=s(498614),c=s(318967),u=s.n(c),h=s(10863),p=s(423184),d=s(770561),m=s(889969),b=s(790817),f=s(690299),g=s.n(f),w=s(240054),y=s.n(w),k=s(588703),S=s.n(k),v=s(833022),E=s.n(v),C=s(623102),q=s.n(C),Z=s(294565),F=s(605977),N=s.n(F),x=s(525678),z=s(8044),$=s(124624),P=s(448151),Q=s(29769),M=s(57054),O=s(328613),j=s(331647),I=s(770149),B=s(123103),T=s(55328),L=s(691334),R=s(302108),A=s(741082),D=s(487890);var H=function(e){return E()(e)&&e.component},V=s(715318),U=Object.defineProperty,G=(e,t,s)=>(((e,t,s)=>{t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s);class J extends n.Component{constructor(){super(...arguments),G(this,"clickHide",(()=>{this.props.onHide()})),G(this,"handleClick",(()=>{this.props.onSubmit(),this.props.onHide()}))}render(){return n.createElement(V.Z,{onHide:this.clickHide,show:this.props.show,dialogClassName:"modal-w30"},n.createElement(V.Z.Header,{closeButton:!0},n.createElement(V.Z.Title,{as:"h4"},this.props.t("finish"),"?")),n.createElement(V.Z.Body,null,this.props.t("finish-prompt")),n.createElement(V.Z.Footer,null,n.createElement(d.Z,{variant:"secondary",onClick:this.clickHide},this.props.t("cancel")),n.createElement(d.Z,{variant:"warning",onClick:this.handleClick},this.props.t("confirm"))))}}J.propTypes={onHide:o().func,onSubmit:o().func,show:o().bool.isRequired},J.defaultProps={onHide(){},onSubmit(){}};var W=J,X=(s(697927),Object.defineProperty),_=Object.defineProperties,K=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,se=(e,t,s)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ne=(e,t)=>{for(var s in t||(t={}))ee.call(t,s)&&se(e,s,t[s]);if(Y)for(var s of Y(t))te.call(t,s)&&se(e,s,t[s]);return e},ie=(e,t)=>_(e,K(t)),oe=(e,t,s)=>(se(e,"symbol"!=typeof t?t+"":t,s),s);const re=g()("isle:quiz"),ae={header:{fontSize:24,bold:!0,margin:[0,0,0,10]},author:{fontSize:16,italics:!0,margin:[0,0,0,10],alignment:"center"},date:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},subheader:{fontSize:18,bold:!0,margin:[0,30,0,10]},question:{fontSize:15,margin:[0,10,0,0],italics:!0},boldTitle:{fontSize:14,margin:[0,5,0,5],bold:!0}};class le extends n.Component{constructor(e,t){re("Instantiating quiz component..."),super(e),oe(this,"toggleFinishModal",(()=>{this.setState({showFinishModal:!this.state.showFinishModal})})),oe(this,"handleFinishClick",(()=>{this.setState({counter:this.state.count},(()=>{this.handleNextClick()}))})),oe(this,"handleNextClick",(()=>{const e=this.quizBody.getElementsByClassName("submit-button");for(let i=0;i<e.length;i++)e[i].click();re("Display next question...");const t=this.state.questions[this.state.current];this.state.answered||this.props.logAction(L.AM,!0,{id:t.props.id}),t.props&&t.props.id&&this.state.selectedConfidence&&this.props.logAction(L.lz,this.state.selectedConfidence,{id:t.props.id+"_confidence"}),this.props.onSubmit();const s={};let n=this.state.counter;n+=1,n>=this.state.count?(re("No further questions should be shown..."),s.finished=!0,this.props.logAction(L.bz,!0),this.props.onFinished()):(n===this.state.count-1&&(s.last=!0),s.current=this.sample()[0],re("Selected question at index "+s.current)),s.answered=!1,s.selectedConfidence=null,s.answerSelected=!1,s.counter=n,this.setState(s)})),oe(this,"markSelected",(()=>{re("Mark answer as selected..."),this.setState({answerSelected:!0})})),oe(this,"handleSubmission",(e=>{const t=this.state.questions[this.state.current],s=this.state.answers.slice();let n,i;if(t.props){if(S()(t.props.answers)&&void 0!==t.props.solution){const s=t.props.solution;if(S()(s)){i="";for(let e=0;e<s.length;e++)i+=t.props.answers[s[e]].content,i+="; ";n="";for(let s=0;s<e.length;s++)!0===e[s]&&(n+=t.props.answers[s].content,n+="; ")}else n=t.props.answers[e].content,i=t.props.answers[s].content}else if(S()(t.props.elements)){re("Create answer and solution string for <MatchListQuestion />"),n="",i="";for(let s=0;s<t.props.elements.length;s++){const o=t.props.elements[s];for(let t=0;t<e.length;t++){const s=e[t];if(s.a===o.a){n+=`${s.a}:${s.b}; `;break}}i+=`${o.a}:${o.b}; `}}else if(S()(t.props.options)){n="",i="";for(let s=0;s<t.props.options.length;s++){const o=t.props.options[s],r=e[s];i+=`${o.text}; `,n+=`${r.text}; `}}else n=e,i=t.props.solution,S()(i)&&(n=n.join(", "),i=i.join(", "));s[this.state.current]={question:t.props?t.props.question:null,answer:n,solution:i,counter:this.state.counter}}this.setState({answered:!0,answers:s})})),oe(this,"handleConfidenceChange",(e=>{const t=e.target.value;re("Choosing confidence: "+t);const s=this.state.confidences.slice();s[this.state.current]=t,this.setState({selectedConfidence:t,confidences:s})})),oe(this,"toggleInstructorView",(()=>{this.setState({showInstructorView:!this.state.showInstructorView})}));let s=e.questions;e.questions||(s=[]);let n=null;if(s.length>0){const e=N()(0,s.length,1);this.sample=y().factory(e,{size:1,mutate:!0,replace:!1}),n=this.sample()[0]}const i=!0===e.retrieveLastAction(L.bz);this.state={answers:new Array(s.length),answered:!1,confidences:new Array(s.length),current:n,count:e.count||s.length,counter:0,finished:!e.repeatable&&i,answerSelected:!1,last:!1,selectedConfidence:null,showInstructorView:!1,showFinishModal:!1,questions:[],questionIDs:[],id:e.id}}static getDerivedStateFromProps(e,t){if(e.questions&&e.questions.length!==t.questions.length){const s=e.questions.length,n=new Array(s);for(let i=0;i<s;i++){const s=e.questions[i];s.props&&s.props.id?n[i]=s.props.id:n[i]=`${t.id}-${i}`}return{questions:e.questions,questionIDs:n}}return null}componentDidMount(){const e=this.context;e&&(this.unsubscribe=e.subscribe(((e,t)=>{if(e===R.u&&!this.props.repeatable){const e=!0===this.props.retrieveLastAction(L.bz);this.setState({finished:e})}})))}componentDidUpdate(e){if(re("Component did update..."),this.props.count!==e.count||this.props.questions&&this.props.questions.length!==e.questions.length){re("Resetting component...");const e=N()(0,this.props.questions.length,1);this.sample=y().factory(e,{size:1,mutate:!0}),this.setState({count:this.props.count||this.prop.questions.length})}}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}downloadResponsesFactory(e){return()=>{const t={content:[{text:this.props.t("answer-for",{id:this.props.id}),style:"header",alignment:"center"}],styles:ae},s=this.context;q()(s.user)||t.content.push({text:`${this.props.t("by")} ${s.user.name} (${s.user.email})`,style:"author"});const n=new Date;t.content.push({text:`${n.toLocaleDateString()} - ${n.toLocaleTimeString()}`,style:"date"});for(let i=0;i<e.length;i++){let{question:s,answer:n,solution:o,confidence:r}=e[i];s=(0,Z.isPrimitive)(s)?s:u()(s),n=(0,Z.isPrimitive)(n)?n:u()(n),o=(0,Z.isPrimitive)(o)?o:u()(o),t.content.push({text:s,style:"question"}),t.content.push({text:`${this.props.t("answer")}:`,style:"boldTitle"}),t.content.push({text:n,style:{color:n===o?"#3c763d":"#d9534f",margin:[0,0,0,10]}}),r&&(t.content.push({text:`${this.props.t("your-confidence")}:`,style:"boldTitle"}),t.content.push({text:r})),t.content.push({text:`${this.props.t("correct-answer")}:`,style:"boldTitle"}),t.content.push({text:(0,Z.isPrimitive)(o)?o:u()(o)})}a().createPdf(t).download("responses.pdf")}}renderScoreboard(){if(re("Rendering scoreboard..."),!this.props.provideFeedback)return n.createElement("h3",null,this.props.t("quiz-finished"));let e=this.state.answers.slice();for(let t=0;t<e.length;t++)e[t]&&(e[t].confidence=this.state.confidences[t]);return e.sort(((e,t)=>e.counter>t.counter)),e=e.filter((e=>E()(e))),0===e.length?n.createElement("h3",null,this.props.t("quiz-finished")):n.createElement("div",null,n.createElement("p",null,this.props.duration?this.props.t("time-up"):this.props.t("quiz-finished"),this.props.t("summary-label"),":"),n.createElement("table",{className:"table table-bordered"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,this.props.t("question")),n.createElement("th",null,this.props.t("your-answer")),n.createElement("th",null,this.props.t("correct-answer")),this.props.confidence?n.createElement("th",null,this.props.t("your-confidence")):null)),n.createElement("tbody",null,e.map(((e,t)=>{let s;s=e.answer===e.solution?"quiz-right-answer":"quiz-wrong-answer";let i=e.question;H(i)&&(i=(0,T.Z)(i));let o=e.answer;H(o)&&(o=(0,T.Z)(o));let r=e.solution;return H(r)&&(r=(0,T.Z)(r)),n.createElement("tr",{className:s,key:t},n.createElement("td",null,i),n.createElement("td",null,o),n.createElement("td",null,r),this.props.confidence?n.createElement("td",null,e.confidence):null)})))),this.props.downloadButton?n.createElement(d.Z,{onClick:this.downloadResponsesFactory(e)},this.props.t("download-pdf")):null)}renderQuestion(e,t){if(!e)return null;const s=e.props||{};switch(H(s.question)&&(re("Question property is an object, convert to JSX..."),s.question=(0,T.Z)(s.question)),e.component){case"Fragment":case"div":return(0,T.Z)(e);case"FreeTextQuestion":return n.createElement(z.Z,ie(ne({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},s),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"MultipleChoiceQuestion":return n.createElement($.Z,ie(ne({disableSubmitNotification:!0,feedback:!1,provideFeedback:"none"},s),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"MatchListQuestion":return n.createElement(P.Z,ie(ne({disableSubmitNotification:!0,feedback:!1,showSolution:!1},s),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"NumberQuestion":return n.createElement(Q.Z,ie(ne({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},s),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"OrderQuestion":return n.createElement(M.Z,ie(ne({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},s),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"RangeQuestion":return n.createElement(O.Z,ie(ne({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},s),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));case"SelectQuestion":return n.createElement(j.Z,ie(ne({disableSubmitNotification:!0,feedback:!1,provideFeedback:!1},s),{onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}));default:{const i=e.type===$.Z&&"none";return n.createElement(e.type,ie(ne(ne({},e.props),s),{disableSubmitNotification:!0,feedback:!1,provideFeedback:i,onChange:this.markSelected,onSubmit:this.handleSubmission,id:t}))}}}renderConfidenceSurvey(){return this.props.confidence?n.createElement(b.Z,{className:"center",style:{width:"75%"}},n.createElement(h.Z,{className:"center"},n.createElement(m.Z.Label,null,this.props.t("confidence-prompt")),n.createElement("br",null),n.createElement(m.Z.Check,{type:"radio",label:this.props.t("guessed"),checked:"Guessed"===this.state.selectedConfidence,value:"Guessed",inline:!0,onClick:this.handleConfidenceChange})," ",n.createElement(m.Z.Check,{type:"radio",label:this.props.t("somewhat-sure"),checked:"Somewhat sure"===this.state.selectedConfidence,value:"Somewhat sure",inline:!0,onClick:this.handleConfidenceChange})," ",n.createElement(m.Z.Check,{type:"radio",label:this.props.t("confident"),checked:"Confident"===this.state.selectedConfidence,value:"Confident",inline:!0,onClick:this.handleConfidenceChange}))):null}renderFooterNodes(e,t){let s;return e.props&&(s=e.props.id),s||(s=`${this.props.id}-${t}`),n.Children.map(this.props.footerNodes,((e,t)=>n.cloneElement(e,{id:`${e.props.id}-footer-${s}`,key:`${this.state.current}-${t}`})))}render(){re("Rendering component...");const e=this.context,t=this.state.questions[this.state.current],s=this.state.questionIDs[this.state.current];let i;return i=!this.state.finished&&(this.state.answered||this.state.answerSelected||this.props.skippable||e.currentUserActions[s]),this.state.showInstructorView?n.createElement(b.Z,{className:"quiz"},n.createElement(b.Z.Header,null,n.createElement("span",null,n.createElement("h3",{style:{display:"inline-block"}},this.props.t("instructor-view")),n.createElement(d.Z,{variant:"secondary",style:{float:"right"},onClick:this.toggleInstructorView},this.props.t("close-instructor-view")))),n.createElement(b.Z.Body,null,this.state.questions.map(((e,t)=>{const s=this.state.questionIDs[t];return n.createElement("div",{key:t},n.createElement("h3",null,this.props.t("question")," ",t+1,":"),this.renderQuestion(e,s),this.renderFooterNodes(e,t))}))),n.createElement(d.Z,{className:"quiz-button",variant:"secondary",onClick:this.toggleInstructorView},this.props.t("close-instructor-view"))):n.createElement(n.Fragment,null,this.props.duration?n.createElement(x.Z,{invisible:!0,id:`${this.props.id}-timer`,active:this.props.active,duration:60*this.props.duration,onTimeUp:()=>{re("Time is up..."),this.props.logAction(L.bz,!0),this.setState({finished:!0},(()=>{this.props.onFinished()}))}}):null,n.createElement(b.Z,{className:"quiz"},n.createElement(b.Z.Header,null,this.state.finished?n.createElement("h3",null,this.props.t("answer-summary")):n.createElement("h3",null,this.props.t("question")," ",this.state.counter+1,"/",this.state.count)),n.createElement(b.Z.Body,null,n.createElement("div",{ref:e=>{this.quizBody=e}},this.state.finished?this.renderScoreboard():n.createElement("span",{key:this.state.current},this.renderQuestion(t,s)),this.state.finished?null:this.renderConfidenceSurvey(),t?this.renderFooterNodes(t):null,n.createElement(p.Z,{style:{float:"right"}},n.createElement(I.Z,{owner:!0,showOwnerInPresentationMode:!1,banner:null},n.createElement(d.Z,{className:"quiz-button",variant:"secondary",onClick:this.toggleInstructorView,style:{marginRight:10}},this.props.t("open-instructor-view"))),!this.props.showFinishButton&&!this.state.last||this.state.finished?null:n.createElement(d.Z,{style:{marginRight:10},className:"quiz-button",variant:"secondary",onClick:this.state.last?this.handleFinishClick:this.toggleFinishModal},this.props.finishLabel||this.props.t("finish-label")),i&&!this.state.last?n.createElement(d.Z,{className:"quiz-button",variant:"primary",onClick:this.handleNextClick,disabled:this.props.forceConfidence&&!this.state.selectedConfidence&&this.state.answerSelected},this.props.nextLabel||this.props.t("next-question")):null)))),n.createElement(W,{show:this.state.showFinishModal,onSubmit:this.handleFinishClick,onHide:this.toggleFinishModal,t:this.props.t}))}}le.propTypes={confidence:o().bool,forceConfidence:o().bool,count:o().number,questions:o().array.isRequired,active:o().bool,duration:o().number,skippable:o().bool,footerNodes:o().array,nextLabel:o().string,provideFeedback:o().bool,showFinishButton:o().bool,finishLabel:o().string,downloadButton:o().bool,repeatable:o().bool,onFinished:o().func,onSubmit:o().func},le.defaultProps={confidence:!1,forceConfidence:!1,count:null,active:!0,duration:null,skippable:!0,footerNodes:[],nextLabel:null,provideFeedback:!0,showFinishButton:!1,finishLabel:null,downloadButton:!0,repeatable:!1,onFinished(){},onSubmit(){}},le.contextType=B.Z;var ce=(0,D.D)("QUIZ")((0,l.Zh)("questions/quiz")((0,A.W)(le)))},55328:function(e,t,s){var n=s(202784),i=s(690299),o=s.n(i),r=s(588703),a=s.n(r),l=s(833022),c=s.n(l),u=s(224008),h=s.n(u),p=s(194542),d=s(8044),m=s(124624),b=s(908536),f=s(448151),g=s(29769),w=s(57054),y=s(328613),k=s(331647);const S=o()("isle:convert-json");t.Z=function e(t){S(`Convert JSON ${t.component} object to React element...`);let s=h()(t.children);if(a()(s))for(let n=0;n<s.length;n++){const t=s[n];c()(t)&&(s[n]=e(t))}else c()(s)&&(s=e(s));let i=t.component;switch(i){case"Fragment":i=n.Fragment;break;case"TeX":i=p.Z;break;case"FreeTextQuestion":i=d.Z;break;case"MultipleChoiceMatrix":i=b.Z;break;case"MultipleChoiceQuestion":i=m.Z;break;case"MatchListQuestion":i=f.Z;break;case"NumberQuestion":i=g.Z;break;case"OrderQuestion":i=w.Z;break;case"RangeQuestion":i=y.Z;break;case"SelectQuestion":i=k.Z;break;default:i=t.component}const o=t.props||{};return(0,n.createElement)(i,o,s)}},770561:function(e,t,s){var n=s(72779),i=s.n(n),o=s(202784),r=s(247830),a=s(429658),l=s(552322);const c=o.forwardRef((({as:e,bsPrefix:t,variant:s,size:n,active:o,className:c,...u},h)=>{const p=(0,a.vE)(t,"btn"),[d,{tagName:m}]=(0,r.FT)({tagName:e,...u}),b=m;return(0,l.jsx)(b,{...d,...u,ref:h,className:i()(c,p,o&&"active",s&&`${p}-${s}`,n&&`${p}-${n}`,u.href&&u.disabled&&"disabled")})}));c.displayName="Button",c.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=c},423184:function(e,t,s){var n=s(72779),i=s.n(n),o=s(202784),r=s(429658),a=s(552322);const l=o.forwardRef((({bsPrefix:e,size:t,vertical:s,className:n,as:o="div",...l},c)=>{const u=(0,r.vE)(e,"btn-group");let h=u;return s&&(h=`${u}-vertical`),(0,a.jsx)(o,{...l,ref:c,className:i()(n,h,t&&`${u}-${t}`)})}));l.displayName="ButtonGroup",l.defaultProps={vertical:!1,role:"group"},t.Z=l},318967:function(e){var t=function(e,t){return e+s(t)},s=function(e){return null===e||"boolean"==typeof e||void 0===e?"":"number"==typeof e?e.toString():"string"==typeof e?e:Array.isArray(e)?e.reduce(t,""):function(e){return Object.prototype.hasOwnProperty.call(e,"props")}(e)&&Object.prototype.hasOwnProperty.call(e.props,"children")?s(e.props.children):""};s.default=s,e.exports=s}}]);
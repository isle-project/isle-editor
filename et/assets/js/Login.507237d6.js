"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4438],{282199:function(e,t,s){s.r(t);var n=s(497326),o=s(894578),a=s(202784),r=s(928316),l=s(213980),i=s.n(l),p=s(690299),h=s.n(p),u=s(198),d=s(770561),m=s(26266),c=s(10863),f=s(830650),w=s(23836),g=s(948455),y=s(741372),v=s(435376),Z=s(992500),I=s(862816),E=s(267682),C=Object.defineProperty,P=function(e,t,s){return function(e,t,s){t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s}(e,"symbol"!=typeof t?t+"":t,s),s},b=h()("isle:login"),T=function(e){function t(t){var s;return s=e.call(this,t)||this,P((0,n.Z)(s),"handleInputChange",(function(e){var t;e.stopPropagation();var n=e.target,o=n.value,a=n.name;s.setState(((t={})[a]=o,t))})),P((0,n.Z)(s),"handleForgotPassword",(function(e){(e.preventDefault(),""===s.state.email)?s.setState({showInputOverlay:!0,overlayTarget:r.findDOMNode(s.emailInput),invalidInputMessage:s.props.t("enter-email-before-password-reset")}):s.context.forgotPassword(s.state.email)})),P((0,n.Z)(s),"hideAfterDelay",(function(){setTimeout((function(){s.setState({showInputOverlay:!1})}),2e3)})),P((0,n.Z)(s),"handleKeyPress",(function(e){e.stopPropagation(),13===e.charCode&&s.handleSubmit(e)})),P((0,n.Z)(s),"handleSubmit",(function(e){e.preventDefault();var t={password:s.state.password,email:s.state.email};if(s.state.showTFA)return t.token=s.state.token,s.context.login(t,(function(e,t,n){e||"ok"!==n.message||s.props.onClose()}));if(""===t.email)b("Email input field is empty, show message..."),s.setState({showInputOverlay:!0,overlayTarget:r.findDOMNode(s.emailInput),invalidInputMessage:s.props.t("enter-email")},s.hideAfterDelay);else if(""===t.password)b("Password input field is empty, show message..."),s.setState({showInputOverlay:!0,overlayTarget:r.findDOMNode(s.passwordInput),invalidInputMessage:s.props.t("enter-password")},s.hideAfterDelay);else{s.context.login(t,(function(e,t,n){if(!e){var o=n.message,a=n.type;"ok"===o?s.props.onClose():"finish-login-via-tfa"===o?s.setState({showTFA:!0}):s.setState({showInputOverlay:!0,overlayTarget:"no_user"===a?s.emailInput:s.passwordInput,invalidInputMessage:o},s.hideAfterDelay)}}))}})),s.state={email:"",password:"",show:t.show,showTFA:!1,token:""},s}return(0,o.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.show!==t.show?{email:"",password:"",show:e.show,showTFA:!1}:null},t.prototype.render=function(){var e=this;return a.createElement(y.Z,{show:this.props.show,className:"login-modal",onHide:this.props.onClose},a.createElement(y.Z.Header,{closeButton:!0},a.createElement(y.Z.Title,{as:"h3"},this.props.t("login"))),a.createElement(y.Z.Body,null,a.createElement(w.Z,{horizontal:!0},a.createElement(c.Z,{controlId:"form-email"},a.createElement(f.Z,null,this.props.t("email")),a.createElement(m.Z,{name:"email",type:"email",placeholder:"Email",autoComplete:"username",onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,ref:function(t){e.emailInput=t},disabled:this.state.showTFA})),a.createElement(c.Z,{controlId:"form-password"},a.createElement(f.Z,null,this.props.t("password")),a.createElement(m.Z,{name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,ref:function(t){e.passwordInput=t},disabled:this.state.showTFA})),this.state.showTFA?a.createElement(c.Z,{controlId:"form-tfa"},a.createElement(f.Z,null,this.props.t("enter-tfa-token")),a.createElement(m.Z,{name:"token",type:"text",placeholder:this.props.t("enter-token"),onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoFocus:!0})):null)),a.createElement(y.Z.Footer,null,a.createElement("button",{className:"forgot-password-button",onClick:this.handleForgotPassword},this.props.t("forgot-password")),a.createElement(d.Z,{variant:"primary",type:"submit",onClick:this.handleSubmit},this.props.t("signin")),a.createElement(d.Z,{onClick:this.props.onClose},this.props.t("close"))),a.createElement(g.Z,{show:this.state.showInputOverlay,target:this.state.overlayTarget,placement:"right",containerPadding:20},a.createElement(v.Z,{id:"popover-contained"},a.createElement(Z.Z,null,this.props.t("invalid")),a.createElement(I.Z,null,this.state.invalidInputMessage))))},t}(a.Component);T.defaultProps={onClose:function(){},show:!1},T.propTypes={onClose:i().func,show:i().bool},T.contextType=E.Z,t.default=(0,u.Z)("internal/login")(T)}}]);
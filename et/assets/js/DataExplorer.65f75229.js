"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4669],{211060:function(t,e,a){var s=a(202784),i=a(213980),r=a.n(i),n=a(770561),o=a(112114);const l=t=>s.createElement(o.Z,{id:"clear_tooltip",placement:t.tooltipPlacement,tooltip:t.t("data-explorer:delete")},s.createElement(n.Z,{"aria-label":t.t("data-explorer:delete"),variant:"outline-danger",size:"sm",onClick:t.onClick,style:t.style,disabled:t.disabled},s.createElement("div",{className:"fa fa-times"})));l.propTypes={onClick:r().func.isRequired,tooltipPlacement:r().string,style:r().object,disabled:r().bool,t:r().func},l.defaultProps={tooltipPlacement:"bottom",style:{},disabled:!1,t(){}},e.Z=l},587637:function(t,e,a){a.r(e),a.d(e,{default:function(){return Wa}});var s=a(202784),i=a(213980),r=a.n(i),n=a(690299),o=a.n(n),l=a(219637),c=a(198),p=a(366627),h=a(822736),d=a(770561),u=a(786124),m=a(458264),g=a(312594),f=a(715318),E=a(569862),b=a(790817),v=a(31071),y=a(294565),S=a(838060),R=a.n(S),T=a(308669),Z=a.n(T),A=a(195906),P=a.n(A),O=a(830324),_=a.n(O),C=a(588703),k=a.n(C),x=a(287013),w=a.n(x),D=a(623102),N=a.n(D),L=a(409961),q=a.n(L),I=a(151300),F=a.n(I),H=a(241481),M=a.n(H),V=a(224008),X=a.n(V),j=a(306830),B=a.n(j),z=a(437069),$=a.n(z),U=a(605977),Q=a.n(U),G=a(777628),K=a.n(G),J=a(417332),W=a(440835),Y=a(165666),tt=a(471275),et=a(730641),at=a.n(et);class st extends s.Component{render(){const t=at()(this.props.children,4);for(let e=0;e<t.length;e++){let a=t[e];for(let t=0;t<a.length;t++)a[t]?a[t]=s.createElement(g.Z,{key:`cell${e}${t}`,xs:6,md:3},a[t]):a[t]=null}return s.createElement(tt.Z,null,t.map(((t,e)=>s.createElement(m.Z,{key:`row${e}`},t))))}}var it=st,rt=a(884985),nt=a(770149),ot=a(466621),lt=a(46739),ct=a(998325);var pt=(0,a(217431).Z)((()=>Promise.all([a.e(9796),a.e(459)]).then(a.bind(a,44721)))),ht=a(391951),dt=a(113545),ut=a(691333),mt=a(123103),gt=a(30468),ft=a(848285),Et=a(107466);class bt extends s.Component{constructor(t){super(t)}scrollToBottom(){this.outputPanel&&(0,Et.Z)(this.outputPanel,this.outputPanel.scrollHeight,1e3)}render(){const{t:t,header:e,output:a}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{className:"card-header clearfix"},s.createElement("h3",{className:"data-explorer-output-header"},t("output")),e),s.createElement("div",{className:"data-explorer-output-panel",style:{height:.9*window.innerHeight-80},ref:t=>{this.outputPanel=t}},a),s.createElement("div",{className:"d-grid"},s.createElement(d.Z,{size:"sm",variant:"outline-danger",onClick:this.props.clearOutput},t("clear-all"))))}}var vt=bt,yt=a(438802),St=a.n(yt),Rt=a(278141),Tt=a.n(Rt),Zt=a(380408),At=a(156562),Pt=a(912860),Ot=a(435376),_t=a(992500),Ct=a(862816),kt=a(461298),xt=a(700601),wt=a.n(xt),Dt=a(871199),Nt=a.n(Dt),Lt=a(180781),qt=a.n(Lt),It=a(402958),Ft=a.n(It),Ht=a(691334),Mt=a(302108),Vt=a(42653),Xt=a(233984),jt=a(924704),Bt=a(553261),zt=a(295349),$t=a(595959),Ut=a(818870),Qt=a(255125),Gt=a(789532),Kt=a(669252),Jt=a(788281),Wt=a(65775),Yt=a(845820),te=a(695184),ee=a(140968),ae=a(64033),se=a(53092),ie=a(939489),re=a(323875),ne=a(290056),oe=a(450651),le=a(996030),ce=a(772941),pe=a(975667),he=a(181739),de=a(536859),ue=a(645347),me=a(758668),ge=a(745771),fe=a(497325),Ee=a(230721),be=a(810948),ve=a(706854),ye=a(372852),Se=a(620045),Re=Object.defineProperty,Te=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Pe=(t,e,a)=>e in t?Re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Oe=(t,e)=>{for(var a in e||(e={}))Ze.call(e,a)&&Pe(t,a,e[a]);if(Te)for(var a of Te(e))Ae.call(e,a)&&Pe(t,a,e[a]);return t};var _e=function(t,e){const a=Oe(Oe({},e),t.value);let s;switch(t.type){case"DATA_EXPLORER_SUMMARY_STATISTICS":s=React.createElement(Se.Z,Oe({},a));break;case"DATA_EXPLORER_BARCHART":s=React.createElement(jt.Z,Oe({},a));break;case"DATA_EXPLORER_BOXPLOT":s=React.createElement(Xt.Z,Oe({},a));break;case"DATA_EXPLORER_CONTOURPLOT":s=React.createElement(Bt.Z,Oe({},a));break;case"DATA_EXPLORER_HISTOGRAM":s=React.createElement($t.Z,Oe({},a));break;case"DATA_EXPLORER_HEATMAP":s=React.createElement(zt.Z,Oe({},a));break;case"DATA_EXPLORER_LINEPLOT":s=React.createElement(Ut.Z,Oe({},a));break;case"DATA_EXPLORER_MAP":s=React.createElement(Qt.Z,Oe({},a));break;case"DATA_EXPLORER_MOSAIC":s=React.createElement(Gt.Z,Oe({},a));break;case"DATA_EXPLORER_PIECHART":s=React.createElement(Kt.Z,Oe({},a));break;case"DATA_EXPLORER_QQPLOT":s=React.createElement(Jt.Z,Oe({},a));break;case"DATA_EXPLORER_SCATTERPLOT":s=React.createElement(Yt.Z,Oe({},a));break;case"DATA_EXPLORER_SPLOM":s=React.createElement(Wt.Z,Oe({},a));break;case"DATA_EXPLORER_VIOLINPLOT":s=React.createElement(te.Z,Oe({},a));break;case"DATA_EXPLORER_FREQUENCY_TABLE":s=React.createElement(ee.Z,Oe({},a));break;case"DATA_EXPLORER_CONTINGENCY_TABLE":s=React.createElement(ae.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_ANOVA":s=React.createElement(se.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_KRUSKAL":s=React.createElement(ne.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_MEAN":s=React.createElement(oe.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_TWO_SAMPLE_MEAN":s=React.createElement(le.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_CHISQUARE":s=React.createElement(ie.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_CORRTEST":s=React.createElement(re.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_PROPTEST":s=React.createElement(ce.Z,Oe({},a));break;case"DATA_EXPLORER_TESTS_TWO_SAMPLE_PROPTEST":s=React.createElement(pe.Z,Oe({},a));break;case"DATA_EXPLORER_KMEANS":s=React.createElement(ve.Z,Oe({},a));break;case"DATA_EXPLORER_HIERARCHICAL_CLUSTERING":s=React.createElement(be.Z,Oe({},a));break;case"DATA_EXPLORER_DECISION_TREE":s=React.createElement(he.Z,Oe({},a));break;case"DATA_EXPLORER_LASSO_REGRESSION":s=React.createElement(de.Z,Oe({},a));break;case"DATA_EXPLORER_LINEAR_REGRESSION":s=React.createElement(fe.Z,Oe({},a));break;case"DATA_EXPLORER_LOGISTIC_REGRESSION":s=React.createElement(ue.Z,Oe({},a));break;case"DATA_EXPLORER_MULTIPLE_REGRESSION":s=React.createElement(me.Z,Oe({},a));break;case"DATA_EXPLORER_NAIVE_BAYES":s=React.createElement(ye.Z,Oe({},a));break;case"DATA_EXPLORER_PCA":s=React.createElement(Ee.Z,Oe({},a));break;case"DATA_EXPLORER_RANDOM_FOREST":s=React.createElement(ge.Z,Oe({},a))}return s},Ce=a(457189),ke=Object.defineProperty,xe=(t,e,a)=>(((t,e,a)=>{e in t?ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a})(t,"symbol"!=typeof e?e+"":e,a),a);const we=t=>({label:t,value:t});class De extends s.Component{constructor(t){super(t),xe(this,"handleChange",(t=>{this.props.onChange(t),this.setState({value:t})})),xe(this,"handleSubmission",(()=>{this.props.onSubmit(this.state.value)})),this.state={value:null}}render(){return s.createElement(s.Fragment,null,s.createElement(Ce.Z,{inputId:this.props.id,isClearable:this.props.isClearable,onChange:this.handleChange,options:this.props.options.map(we),placeholder:"Leave note..."}),s.createElement(d.Z,{size:"sm",onClick:this.handleSubmission,style:{marginTop:4}},this.props.t("submit")))}}De.propTypes={options:r().array,isClearable:r().bool,onChange:r().func,onSubmit:r().func},De.defaultProps={options:[],isClearable:!1,onChange(){},onSubmit(){}};var Ne=De,Le=a(109203),qe=a(26266),Ie=a(10863),Fe=Object.defineProperty,He=(t,e,a)=>(((t,e,a)=>{e in t?Fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a})(t,"symbol"!=typeof e?e+"":e,a),a);class Me extends s.Component{constructor(){super(),He(this,"handleSearch",(t=>{this.setState({search:t.target.value}),this.props.onClick(t.target.value)})),this.state={search:""}}render(){return s.createElement(Ie.Z,null,s.createElement(Le.Z,{size:"small"},s.createElement(qe.Z,{"aria-label":"Search",type:"text",placeholder:"Search actions...",onChange:this.handleSearch,onKeyPress:this.handleKeyPress,value:this.state.search})))}}Me.propTypes={onClick:r().func},Me.defaultProps={onClick(){}};var Ve=Me,Xe=Object.defineProperty,je=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,$e=(t,e,a)=>e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;const Ue=t=>{const[e,a]=(0,s.useState)([]),[i,r]=(0,s.useState)(["own","others"]),[n,o]=(0,s.useState)({}),l=(0,s.useContext)(mt.Z),c=(0,Vt.Z)();(0,s.useEffect)((()=>{let e;return l&&(e=l.subscribe(((e,a)=>{e===Mt.Wh&&a.id===t.explorerID&&c()}))),()=>{e&&e()}}));const p=[],u=new RegExp(e[0],"i");if(0!==i.length)for(let s=0;s<t.actions.length;s++){const e=t.actions[s];if(e.type===Ht.i_||e.type===Ht.cp||e.type===Ht.Jz)continue;let a=!1;if(e.type.search(u)>-1)a=!0;else if(e.email.search(u)>-1)a=!0;else for(let t in e.value)if(t.search(u)>-1||String(e.value[t]).search(u)>-1){a=!0;break}2!==i.length&&("own"===i[0]?e.email!==l.user.email&&(a=!1):e.email===l.user.email&&(a=!1)),a&&p.push(e)}const m=e=>{const a=p[e];return a.type===Ht.gx||a.type===Ht.CS||a.type===Ht.dU||a.type===Ht.Jz||a.type===Ht.gy?()=>{t.onTransformation(a),t.logAction(a.type,a.value)}:()=>{const e=_e(a,t);t.onCreated(e),t.logAction(a.type,a.value)}};return s.createElement("div",{style:t.style},s.createElement(Ve,{onClick:t=>{qt()(t,"")?a([]):a([t])}}),s.createElement("div",{style:{marginLeft:0,overflowY:"scroll",height:.75*window.innerHeight,border:"solid 1px rgba(0,0,0,0.125)"}},s.createElement(St(),{initialIndex:0,itemRenderer:(a,i)=>{const r=p[a],l=new Date(r.absoluteTime);let c="";const u=r.value,g=`${r.type} | Time: ${l.toLocaleTimeString()} - ${l.toLocaleDateString()} | ${r.email}`;for(let t in u)if(wt()(u,t)&&"showDecision"!==t){const e=u[t];Nt()(e)||"plotId"===t||(c+=`${t}: ${Ft()(e)?e:JSON.stringify(e)}`,c+="\t")}const f=s.createElement(Ot.Z,{id:`history-note-popover-${a}`,style:{width:250}},s.createElement(_t.Z,null,t.t("leave-note")),s.createElement(Ct.Z,null,s.createElement(Ne,{options:["Did you consider any confounding variables?","You should check model diagnostics"],onSubmit:({value:t})=>{const e=((t,e)=>{for(var a in e||(e={}))Be.call(e,a)&&$e(t,a,e[a]);if(je)for(var a of je(e))ze.call(e,a)&&$e(t,a,e[a]);return t})({},n);e[a]?e[a]+=`\n${t}`:e[a]=t,o(e)},t:t.t})));return s.createElement(Pt.Z,null,s.createElement("div",{className:"actionNote"},s.createElement("span",{className:"title"},s.createElement(Tt(),{searchWords:e,autoEscape:!0,textToHighlight:g}))),s.createElement("div",{className:"actionNote"},s.createElement(Tt(),{searchWords:e,autoEscape:!0,textToHighlight:c})),n[a]?s.createElement(h.Z,{variant:"warning"},n[a]):null,t.instructorFeedback?s.createElement(kt.Z,{trigger:"click",placement:"left",rootClose:!0,overlay:f},s.createElement(d.Z,{"aria-label":t.t("leave-feedback"),variant:"info",size:"sm",style:{position:"absolute",top:5,right:45}},s.createElement("i",{className:"fas fa-sticky-note"}))):null,s.createElement(d.Z,{"aria-label":t.t("repeat"),variant:"success",size:"sm",onClick:m(a),style:{position:"absolute",top:5,right:5}},s.createElement("i",{className:"fas fa-redo"})))},length:p.length,type:"simple",pageSize:50,minSize:10})),s.createElement("div",{style:{float:"right",marginRight:20}},"individual"!==t.reportMode?s.createElement(Zt.Z,{name:"options",onChange:r,type:"checkbox",size:"small",value:i,style:{padding:6}},s.createElement(At.Z,{id:"data-explorer-action-toggle-own",variant:"outline-secondary",value:"own"},t.t("own-actions")),s.createElement(At.Z,{id:"data-explorer-action-toggle-others",variant:"outline-secondary",value:"others"},t.t("others-actions"))):null,s.createElement("span",{className:"title"},p.length," ",t.t("actions"))))};Ue.propTypes={actions:r().array,instructorFeedback:r().bool,onTransformation:r().func},Ue.defaultProps={actions:[],instructorFeedback:!1,onTransformation(){}};var Qe=Ue,Ge=a(922730),Ke=a(423184),Je=a(302467),We=a.n(Je),Ye=a(849998),ta=a(394362),ea=a(211060),aa=a(112114);const sa=t=>{const[e,a]=(0,s.useState)(!1),i=()=>{a(!e)},{t:r}=t;return s.createElement(s.Fragment,null,s.createElement(aa.Z,{id:"fullscreen_tooltip",placement:"bottom",tooltip:r("toggle-fullscreen")},s.createElement(d.Z,{"aria-label":r("toggle-fullscreen"),variant:"outline-danger",size:"sm",onClick:i},s.createElement("div",{className:"fa fa-window-maximize"}))),s.createElement(f.Z,{show:e,onHide:i,dialogClassName:"modal-100w",backdrop:!0,alt:"fullscreen"},s.createElement(f.Z.Header,{closeButton:!0},s.createElement(f.Z.Title,{as:"h1"},t.header?t.header:r("fullscreen-display"))),s.createElement(f.Z.Body,{className:"data-explorer-fullscreen-output",style:{height:.75*window.innerHeight}},t.body),s.createElement(f.Z.Footer,null,s.createElement(d.Z,{onClick:i},r("close")))))};sa.propTypes={header:r().string,body:r().node.isRequired},sa.defaultProps={header:null};var ia=sa,ra=a(875084),na=a(188304),oa=a(223444),la=a(833022),ca=a.n(la);var pa=t=>{let e=[];for(let a=0;a<t.filters.length;a++){const i=t.filters[a];let r;if(k()(i.value))r=i.value.map(((t,e)=>s.createElement(oa.Z,{bg:"secondary",key:e,style:{marginRight:4}},t)));else if((0,y.isPrimitive)(i.value))r=s.createElement(oa.Z,{bg:"secondary",style:{marginRight:4}},i.value);else if(ca()(i.value)){const t=$()(i.value);r=new Array(t.length);for(let e=0;e<t.length;e++){const a=t[e];r[e]=s.createElement(oa.Z,{key:a,bg:"secondary",style:{marginRight:4}},s.createElement("b",null,a,": "),i.value[a])}}e.push(s.createElement(na.Z.Item,{key:a},s.createElement("span",{className:"title"},i.id,": "),r,t.removeButtons?s.createElement(d.Z,{variant:"danger",size:"sm",style:{float:"right"},onClick:()=>{t.onRemove(a)},"aria-label":"remove"},s.createElement("i",{className:"fas fa-times"})):null))}return s.createElement(na.Z,null,e)},ha=Object.defineProperty,da=Object.defineProperties,ua=Object.getOwnPropertyDescriptors,ma=Object.getOwnPropertySymbols,ga=Object.prototype.hasOwnProperty,fa=Object.prototype.propertyIsEnumerable,Ea=(t,e,a)=>e in t?ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,ba=(t,e)=>{for(var a in e||(e={}))ga.call(e,a)&&Ea(t,a,e[a]);if(ma)for(var a of ma(e))fa.call(e,a)&&Ea(t,a,e[a]);return t},va=(t,e)=>da(t,ua(e));class ya extends s.Component{constructor(){var t;super(),Ea(this,"symbol"!=typeof(t="toggleOverlay")?t+"":t,((t=B())=>{this.setState({show:!this.state.show},t)})),this.state={show:!1}}render(){return s.createElement(s.Fragment,null,s.createElement(aa.Z,{id:"filter_info_tooltip",placement:"bottom",tooltip:this.props.t("show-dataset-info")},s.createElement(d.Z,{"aria-label":this.props.t("show-dataset-info"),variant:"outline-danger",size:"sm",ref:t=>{this.button=t},style:this.props.style,onClick:()=>{this.toggleOverlay((()=>{this.state.show?this.timeout=setTimeout(this.toggleOverlay,5e3):this.timeout&&clearTimeout(this.timeout)}))}},s.createElement("i",{className:"fas fa-info"}))),s.createElement(ra.Z,{target:this.button,show:this.state.show,placement:"left"},(t=>{var e=t,{placement:a,scheduleUpdate:i,arrowProps:r}=e,n=((t,e)=>{var a={};for(var s in t)ga.call(t,s)&&e.indexOf(s)<0&&(a[s]=t[s]);if(null!=t&&ma)for(var s of ma(t))e.indexOf(s)<0&&fa.call(t,s)&&(a[s]=t[s]);return a})(e,["placement","scheduleUpdate","arrowProps"]);const o=ba({backgroundColor:"lightcoral",padding:"10px 10px",marginRight:"5px",borderRadius:3,zIndex:1002},n.style);return this.props.filters?s.createElement("pre",va(ba({},n),{style:o}),s.createElement(pa,{filters:this.props.filters}),this.props.restoreButton?s.createElement(aa.Z,{tooltip:this.props.t("restore-dataset-tooltip"),placement:"right"},s.createElement(d.Z,{size:"sm",variant:"danger",onClick:()=>{this.props.onActivateFilters(this.props.filters)},style:{marginTop:12}},this.props.t("restore-dataset"))):null):s.createElement("pre",va(ba({},n),{style:o}),this.props.t("entire-dataset-used"))})))}}ya.propTypes={filters:r().array,onActivateFilters:r().func,restoreButton:r().bool,style:r().object},ya.defaultProps={filters:null,onActivateFilters(){},restoreButton:!1,style:{}};var Sa=ya;const Ra=o()("isle:data-explorer"),Ta=/<button[\s\S]*<\/button>/,Za=(t,e,a,i,r,n,o)=>s.createElement(Ke.Z,{style:{float:"right",top:"-4px",zIndex:2}},s.createElement(Sa,{filters:r,onActivateFilters:n,t:o}),s.createElement(ia,{header:t,body:e,t:o}),s.createElement(ea.Z,{onClick:()=>{Ra(`Clear element with ID ${i}`),a(i)},t:o})),Aa=t=>s.createElement(s.Fragment,null,s.createElement("button",{draggable:!0,className:"data-explorer-draggable-bar",onDragStart:t=>{let e=t.target.nextSibling.outerHTML;e=We()(e,Ta,""),t.dataTransfer.setData("text/plain",e),t.dataTransfer.setData("text/html",e)},onClick:t=>{let e=t.target.nextSibling.outerHTML;e=We()(e,Ta,""),(0,ta.Z)(e)}},Ge.a.t("data-explorer:drag-table")),t);var Pa=function(t,e,a,i,r,n){if(t.type===Xt.Z||t.type===jt.Z||t.type===Bt.Z||t.type===zt.Z||t.type===$t.Z||t.type===Ye.Z||t.type===Ut.Z||t.type===Qt.Z||t.type===Gt.Z||t.type===Kt.Z||t.type===Jt.Z||t.type===Yt.Z||t.type===Wt.Z||t.type===te.Z||t.type===lt.Z){const o=t.props;return o.meta&&!o.meta.filters&&(o.meta.filters=i),s.createElement("div",{key:e},s.createElement(Ke.Z,{style:{float:"right",padding:"0.1rem 0.3rem",zIndex:2}},s.createElement(Sa,{filters:i,onActivateFilters:r,t:n}),s.createElement(ea.Z,{onClick:()=>{a(e)},t:n})),s.createElement("div",{style:{position:"relative",height:o.layout&&o.layout.height?o.layout.height:300,marginTop:0,marginBottom:40,marginRight:25}},t))}if(t.type===se.Z||t.type===re.Z||t.type===ie.Z||t.type===ne.Z||t.type===oe.Z||t.type===le.Z||t.type===ce.Z||t.type===pe.Z){return s.createElement("pre",{key:e},Za(n("output-test"),t,a,e,i,r,n),t)}if(t.type===ae.Z||t.type===ee.Z){return s.createElement("pre",{key:e},Za(n("output-table"),t,a,e,i,r,n),Aa(t))}if(t.type===fe.Z||t.type===me.Z||t.type===de.Z||t.type===ue.Z||t.type===Ee.Z||t.type===ve.Z||t.type===ye.Z||t.type===ge.Z){return s.createElement("pre",{key:e},Za(n("output-model"),t,a,e,i,r,n),Aa(t))}if(t.type===he.Z||t.type===be.Z){return s.createElement("pre",{key:e},s.createElement(Ke.Z,{style:{float:"right",padding:"0.1rem 0.3rem",top:"-1px",zIndex:2}},s.createElement(Sa,{filters:i,onActivateFilters:r,style:{right:55,position:"absolute"},t:n}),s.createElement(ea.Z,{onClick:()=>{a(e)},style:{right:-5,position:"absolute"},t:n})),s.createElement("div",{style:{marginTop:25}},t))}if(t.type===Se.Z){return s.createElement("pre",{key:e},Za(n("summary-statistics"),t,a,e,i,r,n),Aa(t))}return null},Oa=a(818674),_a=a(658392),Ca=a(180109),ka=a(275772),xa=a(741082),wa=Object.defineProperty,Da=Object.defineProperties,Na=Object.getOwnPropertyDescriptors,La=Object.getOwnPropertySymbols,qa=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable,Fa=(t,e,a)=>e in t?wa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Ha=(t,e)=>{for(var a in e||(e={}))qa.call(e,a)&&Fa(t,a,e[a]);if(La)for(var a of La(e))Ia.call(e,a)&&Fa(t,a,e[a]);return t},Ma=(t,e)=>Da(t,Na(e)),Va=(t,e,a)=>(Fa(t,"symbol"!=typeof e?e+"":e,a),a);const Xa=(0,s.lazy)((()=>Promise.all([a.e(9553),a.e(7209),a.e(5771)]).then(a.bind(a,297516)))),ja=o()("isle:data-explorer"),Ba=(0,J.Z)("data-explorer"),za="(Shift+Alt+Q)",$a="(Shift+Alt+H)",Ua="(Shift+Alt+D)",Qa="(Shift+Alt+R)";function Ga(t,e){if(0===e.length)return!0;const a=$()(t);for(let s=0;s<e.length;s++)if(!w()(a,String(e[s])))return!1;return!0}function Ka(t,e){let a=new Set;for(let o=0;o<e.length;o++){const s=e[o],i=t[s.id];if(M()(s.value,"min")&&M()(s.value,"max"))for(let t=0;t<i.length;t++)i[t]>=s.value.min&&i[t]<=s.value.max||a.add(t);else if((0,y.isPrimitive)(s.value))for(let t=0;t<i.length;t++)w()(K()(i[t]),K()(s.value))||a.add(t);else for(let t=0;t<i.length;t++)w()(s.value,String(i[t]))||a.add(t)}const s=$()(t),i={},r=t[s[0]].length;for(let o=0;o<s.length;o++){i[s[o]]=[]}const n=[];for(let o=0;o<r;o++)if(!a.has(o)){for(let e=0;e<s.length;e++){let a=s[e];i[a].push(t[a][o])}t.id?n.push(t.id[o]):n.push(o+1)}return i.id=n,i}class Ja extends s.Component{constructor(t){super(t),Va(this,"restoreOutputs",((t,e)=>{ja("Restore elements in output pane...");const a=[],s=[];for(let n=0;n<e.length;n++){const t=e[n];if(t.type===Ht.i_)break;t.type===Ht.cp&&s.push(t.value),a.push(t)}const i=[],r={logAction:this.logAction,session:this.context,data:t.data,quantitative:t.quantitative,categorical:t.categorical};for(let n=a.length-1;n>=0;n--){const e=a.length-1-n;if(w()(s,e))continue;const o=a[n],l=o.value.filters;l&&(r.data=Ka(t.data,l));const c=_e(o,r);if(c){const e=Pa(c,i.length,this.clearOutput,l||t.subsetFilters,this.onFilters,this.props.t);i.push(e)}}ja(`Restored ${i.length} elements.`),t.output=i,this.setState(t)})),Va(this,"applyTransformation",((t,e)=>{switch(e.type){case Ht.gx:if(ja(`Should add transformed variable ${e.value.name}`),!M()(this.props.data,e.value.name)){const a=(0,Oa.Z)(e.value.code,t.data);t=this.transformVariable(e.value.name,a,t)}break;case Ht.dU:{const{name:a,variable:s,breaks:i,categories:r}=e.value;if(ja(`Should add binned variable ${a}`),!M()(this.props.data,a)){const e=t.data[s],n=(0,_a.Z)(e,r,i),o=(0,ft.Z)(a,r);t=this.transformVariable(o,n,t)}}break;case Ht.CS:{const{name:a,firstVar:s,secondVar:i,nameMappings:r,castNumeric:n}=e.value;if(ja(`Should add recoded variable ${a}`),!M()(this.props.data,a)&&t.data[s]){const e=(0,Ca.Z)(s,i,r,t.data,n);t=this.transformVariable(a,e,t)}}break;case Ht.Jz:t=this.deleteVariable(e.value,t);break;case Ht.gy:{const{name:a,distribution:s,params:i,asCategorical:r,nObs:n,seed:o}=e.value;ja(`Should add random variable ${a}`);const l=(0,ka.Z)({name:a,distribution:s,params:i,asCategorical:r,nObs:n,seed:o});if(k()(l[0]))for(let e=0;e<l[0].length;e++)M()(this.props.data,l[0][e])||(t=this.transformVariable(l[0][e],l[1][e],t));else M()(this.props.data,a)||(t=this.transformVariable(l[0],l[1],t))}}return t})),Va(this,"restoreTransformations",(t=>{let e=this.state;ja("Restoring transformations...");for(let a=t.length-1;a>=0;a--){const s=t[a];e=this.applyTransformation(e,s)}e.data=X()(e.data,1),setTimeout((()=>{this.restoreOutputs(e,t)}),1500)})),Va(this,"resetStorage",(()=>{this.context.store.removeItem(this.id),this.setState({data:null,categorical:[],quantitative:[],ready:!1})})),Va(this,"shareData",(()=>{const t=this.context;if(t.metadata.store[this.id])t.updateMetadata("store",this.id,null),this.forceUpdate();else{const e={data:this.state.data,quantitative:this.state.quantitative,categorical:this.state.categorical},a=new Blob([JSON.stringify(e)],{type:"application/json"}),s=new File([a],"data.json"),i=new FormData;i.append("file",s),t.uploadFile({formData:i,callback:(e,a)=>{const s=a.filename,i=t.server+"/"+s;t.updateMetadata("store",this.id,i),this.forceUpdate()},showNotification:!1})}})),Va(this,"toggleStudentPlots",(()=>{this.setState({showStudentPlots:!this.state.showStudentPlots})})),Va(this,"clearOutput",(t=>{this.context.log({id:this.id,type:Ht.cp,value:t},"owners");const e=this.state.output.slice();e[t]=null,this.setState({output:e})})),Va(this,"clearPlots",(()=>{this.setState({studentPlots:[]})})),Va(this,"onUserAction",(t=>{let e,a=t.value;switch(F()(a)&&(a=JSON.parse(a)),t.type){case"DATA_EXPLORER_SHARE_BARCHART":e=(0,jt.G)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_BOXPLOT":e=(0,Xt.I)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_CONTOURCHART":e=(0,Bt.k)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_HEATMAP":e=(0,zt.L)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_HISTOGRAM":e=(0,$t.N)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_LINEPLOT":e=(0,Ut.i)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_MAP":e=(0,Qt._)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_MOSAIC":e=(0,Gt.r)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_PIECHART":e=(0,Kt.E)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_QQPLOT":e=(0,Jt._)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_SCATTERPLOT":e=(0,Yt.s)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_SPLOM":e=(0,Wt.T)(Ha({data:this.state.data},a));break;case"DATA_EXPLORER_SHARE_VIOLINPLOT":e=(0,te.O)(Ha({data:this.state.data},a))}if(e){const t=this.state.studentPlots.slice(),a=JSON.stringify(e);let s=!1;for(let e=0;e<t.length;e++)if(t[e].config===a){t[e].count+=1,s=!0;break}s||t.push({config:a,count:1}),this.setState({studentPlots:t})}})),Va(this,"onFilters",(t=>{this.setState({filters:t},this.onFilterCreate)})),Va(this,"addToOutputs",(t=>{const e=this.state.output.slice();if(k()(t))for(let a=0;a<t.length;a++){const s=Pa(t[a],e.length,this.clearOutput,this.state.subsetFilters,this.onFilters,this.props.t);e.push(s)}else{const a=Pa(t,e.length,this.clearOutput,this.state.subsetFilters,this.onFilters,this.props.t);e.push(a)}this.setState({output:e})})),Va(this,"transformVariable",((t,e,a)=>{let s,i,r,n,o;ja(`Attach transformed variable ${t} to data...`),a?(n=X()(a.data,1),s=a.quantitative.slice(),i=a.categorical.slice(),r=a.groupVars.slice()):(n=X()(this.state.data,1),s=this.state.quantitative.slice(),i=this.state.categorical.slice(),r=this.state.groupVars.slice()),n[t]=e,R()(e)?w()(s,t)||(s.push(t),o=i.indexOf(t),o>0&&(i.splice(o,1),r=i.slice())):(w()(i,t)||(i.push(t),o=s.indexOf(t),o>0&&s.splice(o,1)),r=i.slice());return{data:n,categorical:i,quantitative:s,groupVars:r}})),Va(this,"onGenerateTransformedVariable",((t,e)=>{const a=this.context;if(k()(t)){let s;for(let a=0;a<t.length;a++)s=this.transformVariable(t[a],e[a],s);return a.addNotification({title:this.props.t("variables-created"),message:this.props.t("variables-created-msg",{name:t.join(", ")}),level:"success",position:"tr"}),this.setState(s)}if(M()(this.props.data,t))return a.addNotification({title:this.props.t("variable-exists"),message:this.props.t("variable-exists-msg"),level:"error",position:"tr"});a.addNotification({title:this.props.t("variable-created"),message:this.props.t("variable-created-msg",{name:t}),level:"success",position:"tr"}),this.setState(Ha({},this.transformVariable(t,e)))})),Va(this,"onColumnDelete",(t=>{ja("Should remove variable with name "+t);const e=this.context;this.logAction(Ht.Jz,t),e.addNotification({title:this.props.t("variable-removed"),message:this.props.t("variable-removed-msg",{variable:t}),level:"success",position:"tr"});const a=this.deleteVariable(t);a.data=X()(a.data,1),this.setState(a)})),Va(this,"onColumnNameChange",((t,e)=>{const a=this.state,s=$()(this.state.data),i={};for(let l=0;l<s.length;l++){const a=s[l];a===t?i[e]=this.state.data[t]:i[a]=this.state.data[a]}const r=a.quantitative.map((a=>a===t?e:a)),n=a.categorical.map((a=>a===t?e:a)),o=a.groupVars.map((a=>a===t?e:a));this.setState({data:i,quantitative:r,categorical:n,groupVars:o})})),Va(this,"onColumnDrag",(t=>{const e=this.state,a=(e,a)=>(e=t.indexOf(String(e)),a=t.indexOf(String(a)),-1===e||-1===a?0:e<a?-1:e>a?1:0),s=e.quantitative.slice().sort(a),i=e.categorical.slice().sort(a),r=e.groupVars.slice().sort(a);this.setState({quantitative:s,categorical:i,groupVars:r})})),Va(this,"deleteVariable",((t,e)=>{let a,s=e||this.state;return a=e?e.data:X()(this.state.data,1),delete a[t],{data:a,quantitative:s.quantitative.filter((e=>e!==t)),categorical:s.categorical.filter((e=>e!==t)),groupVars:s.groupVars.filter((e=>e!==t)),filters:(s.filters||[]).filter((e=>e.id!==t))}})),Va(this,"onFileUpload",((t,e)=>{const a=this.context;if(!t){const t={},s=$()(e[0]).filter((t=>""!==t));for(let a=0;a<s.length;a++){let i=s[a];t[i]=new Array(e.length)}for(let a=0;a<e.length;a++)for(let i=0;i<s.length;i++){let r=s[i];t[r][a]=e[a][r]}const i=[],r=[];s.forEach((e=>{R()(t[e])?r.push(e):i.push(e)})),this.setState({quantitative:r,categorical:i,data:t},(()=>{a.store.setItem(this.id,{data:this.state.data,quantitative:r,categorical:i})}))}})),Va(this,"onFilterCreate",(()=>{const t={data:Ka(this.state.data,this.state.filters),oldData:this.state.data,subsetFilters:this.state.filters};this.setState(t)})),Va(this,"onFilterAdd",(()=>{const t=this.restoreData(),e={data:Ka(t,this.state.filters),oldData:t,subsetFilters:this.state.filters};this.setState(e)})),Va(this,"restoreData",(()=>{const t=$()(this.state.data),e=$()(this.state.oldData);let a,s;this.props.data?(a=this.props.data,s=X()(this.props.data,1)):(a=this.state.unaltered.data,s=X()(a,1));const i=[];for(let l=0;l<this.props.quantitative.length;l++)i.push(String(this.props.quantitative[l]));for(let l=0;l<this.props.categorical.length;l++)i.push(String(this.props.categorical[l]));const r=this.state.data.id,n=a[e[0]].length,o=this.state.oldData.id||Q()(1,n+1,1);for(let l=0;l<e.length;l++){const t=e[l];if("id"!==t&&!w()(i,t)){s[t]=new Array(n).fill(null);for(let e=0;e<o.length;e++){const a=o[e]-1;s[t][a]=this.state.oldData[t][e]}}}for(let l=0;l<t.length;l++){const e=t[l];if("id"!==e&&!w()(i,e)){ja("Handle inserted variable: "+e),s[e]||(s[e]=new Array(n).fill(null));for(let t=0;t<r.length;t++){const a=r[t]-1;s[e][a]=this.state.data[e][t]}}}return s})),Va(this,"onPredict",{"decision-tree":(t,e)=>{const a=X()(this.state.data,1),s=this.state.categorical.slice(),i=this.state.quantitative.slice();if("classification"===t.type){const i=t.predict(a).map((t=>String(t)));let r="pred_tree"+e;a[r]=i,w()(s,r)||s.push(r),r="correct_tree"+e;const n=a[t.response];a[r]=i.map(((t,e)=>t===String(n[e])?"Yes":"No")),w()(s,r)||s.push(r)}else{const s=t.predict(a);let r="pred_tree"+e;a[r]=s,w()(i,r)||i.push(r),r="resid_tree"+e,a[r]=(0,gt.Z)(s,a[t.response]),w()(i,r)||i.push(r)}this.setState({categorical:s,quantitative:i,data:a})},lasso:(t,e)=>{const a=X()(this.state.data,1),s=this.state.quantitative.slice();let i="pred_lasso"+e;const{fitted:r,residuals:n}=t(a);a[i]=r,w()(s,i)||s.push(i),i="resid_lasso"+e,a[i]=n,w()(s,i)||s.push(i),this.setState({quantitative:s,data:a})},logistic:(t,e)=>{const a=X()(this.state.data,1),s=this.state.quantitative.slice(),i=this.state.categorical.slice(),{yhat:r,probs:n,residuals:o}=t(a);let l="probs_logis"+e;a[l]=n,w()(s,l)||s.push(l),l="pred_logis"+e,a[l]=r,w()(i,l)||i.push(l),l="resid_logis"+e,w()(s,l)||s.push(l),a[l]=o,this.setState({categorical:i,quantitative:s,data:a})},"multiple-linear-regression":(t,e)=>{const a=X()(this.state.data,1),s=this.state.quantitative.slice(),{fitted:i,residuals:r}=t(a);let n="pred_lm"+e;a[n]=i,w()(s,n)||s.push(n),n="resid_lm"+e,w()(s,n)||s.push(n),a[n]=r,this.setState({quantitative:s,data:a})},"random-forest":(t,e)=>{const a=X()(this.state.data,1),s=this.state.categorical.slice();if("classification"===t.type){const i=t.predict(a).map((t=>String(t)));let r="pred_forest"+e;a[r]=i,w()(s,r)||s.push(r),r="correct_forest"+e;const n=this.state.data[t.response];a[r]=i.map(((t,e)=>t===String(n[e])?"Yes":"No")),w()(s,r)||s.push(r)}this.setState({categorical:s,data:a})},"simple-linear-regression":(t,e)=>{const a=X()(this.state.data,1),{fitted:s,residuals:i}=t(a),r=this.state.quantitative.slice();let n="pred_slm"+e;a[n]=s,w()(r,n)||r.push(n),n="resid_slm"+e,w()(r,n)||r.push(n),a[n]=i,this.setState({quantitative:r,data:a})},"naive-bayes":(t,e)=>{const a=X()(this.state.data,1),s=this.state.quantitative.slice(),{fitted:i,classProbs:r}=t(a),n=Object.keys(r);for(let c=0;c<n.length;c++){const t=n[c];a[t]=r[t],w()(s,t)||s.push(t)}const o="pred_bayes"+e;a[o]=i;const l=this.state.categorical.slice();w()(l,o)||l.push(o),this.setState({categorical:l,quantitative:s,data:a})}}),Va(this,"onRestoreData",(()=>{const t=this.restoreData();this.setState({data:t,subsetFilters:null,filters:[]})})),Va(this,"on2dSelection",((t,e)=>{const a=this.state.filters.filter((e=>e.id!==t.x&&e.id!==t.y));a.push({id:t.x,value:{min:e.range.x[0],max:e.range.x[1]}}),a.push({id:t.y,value:{min:e.range.y[0],max:e.range.y[1]}}),this.setState({filters:a})})),Va(this,"onQQPlotSelection",((t,e)=>{if(e.range&&e.range.y){const a=this.state.filters.filter((e=>e.id!==t)),s=e.range.y;a.push({id:t,value:{min:s[0],max:s[1]}}),this.setState({filters:a})}})),Va(this,"onBarchartSelection",((t,e)=>{const a=this.state.filters.filter((e=>e.id!==t));a.push({id:t,value:e.range.x}),this.setState({filters:a})})),Va(this,"onHistogramSelection",((t,e)=>{if(e.points&&e.points[0]){const a=e.points[0],s=a.fullData.xbins.size,i=e.points[e.points.length-1],r=this.state.filters.filter((e=>e.id!==t));r.push({id:t,value:{min:a.x-s/2,max:i.x+s/2}}),this.setState({filters:r})}}));let e,a,s,i=t.data;t.data?(e=t.quantitative,a=t.categorical,s=t.categorical.slice()):(e=[],a=[],s=[]);let r=!1,n=!0;_()(i)&&(e.length>0||a.length>0)&&(r=!0,n=Ga(i,e.concat(a))),this.id=t.id||Ba(t),this.state={data:i,quantitative:e,categorical:a,validVariables:n,output:[],groupVars:s,ready:r,showStudentPlots:!1,openedNav:t.opened||(q()(t.questions)?"data":"questions"),studentPlots:[],subsetFilters:null,unaltered:{data:t.data,quantitative:t.quantitative,categorical:t.categorical},filters:[]},this.logAction=(t,e)=>{this.state.subsetFilters&&(e=Ma(Ha({},e),{filters:this.state.subsetFilters}));const a=this.context,s="individual"!==this.props.reportMode?"members":"owners";a.log({id:this.id,type:t,value:e},s)}}static getDerivedStateFromProps(t,e){if(!t.data)return null;const a={};return t.data!==e.unaltered.data&&(a.data=t.data),t.quantitative!==e.unaltered.quantitative&&(a.quantitative=t.quantitative),t.categorical!==e.unaltered.categorical&&(a.categorical=t.categorical),a.validVariables=Ga(t.data,t.quantitative.concat(t.categorical)),N()(a)?null:(a.unaltered={data:t.data,quantitative:t.quantitative,categorical:t.categorical},a)}componentDidMount(){const t=this.context;if(!this.props.data)if(t.metadata.store[this.id]){const e=t.metadata.store[this.id];(0,p.AVB)(e).then((t=>{const e=(t.categorical||[]).slice();this.setState({data:t.data,quantitative:t.quantitative,categorical:t.categorical,groupVars:e,ready:!0,unaltered:{data:t.data,quantitative:t.quantitative,categorical:t.categorical}})}))}else t.store.getItem(this.id).then((({quantitative:t=[],categorical:e=[],data:a=null})=>{let s=!1;N()(a)&&(a=null),q()(a)||(s=!0);const i=(e||[]).slice();this.setState({data:a,quantitative:t,categorical:e,groupVars:i,ready:s,unaltered:{data:a,quantitative:t,categorical:e}})})).catch((t=>{ja(t)}));if(t.currentUserActions){const e=t.currentUserActions[this.id];this.props.data&&P()(e)&&this.restoreTransformations(e)}this.unsubscribe=t.subscribe(((e,a)=>{if(e===Mt.u){const t=a[this.id];this.props.data&&P()(t)&&this.restoreTransformations(t)}else if(e===Mt.KI){if(t.metadata.store[this.id]){const e=t.metadata.store[this.id];(0,p.AVB)(e).then((t=>{const e=(t.categorical||[]).slice();this.setState({data:t.data,quantitative:t.quantitative,categorical:t.categorical,groupVars:e,ready:!0})}))}}else if(e===Mt.Wh){if(a.id!==this.id||a.email===t.user.email||"individual"===this.props.reportMode)return;if("group"===this.props.reportMode){if(!t.group)return;const e=t.group.members;let s=!1;for(let t=0;t<e.length;t++)if(e[t].email===a.email){s=!0;break}if(!s)return}a.type!==Ht.gx&&a.type!==Ht.dU&&a.type!==Ht.CS&&a.type!==Ht.Jz||this.restoreTransformations([a]),this.context.currentUserActions[this.id].unshift(a)}}))}componentDidUpdate(t,e){ja("Component did update..."),this.state.output!==e.output&&this.outputPanel&&this.outputPanel.scrollToBottom()}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){if(ja("Render component..."),!this.state.data)return s.createElement(pt,{title:this.props.t("data-explorer"),onUpload:this.onFileUpload});if(!this.state.ready){const t=$()(this.state.data);return s.createElement(b.Z,null,s.createElement(b.Z.Header,{as:"h3"},this.props.t("data-explorer")),s.createElement(b.Z.Body,null,s.createElement("h4",null,this.props.t("select-quantitative-categorical"),":"),s.createElement(W.Z,{legend:this.props.t("quantitative"),options:t,defaultValue:this.state.quantitative,multi:!0,onChange:t=>{this.setState({quantitative:t||[]})}}),s.createElement(W.Z,{legend:this.props.t("categorical"),options:t,defaultValue:this.state.categorical,multi:!0,onChange:t=>{this.setState({categorical:t||[]})}}),s.createElement(d.Z,{disabled:Z()(this.state.categorical)&&Z()(this.state.quantitative),onClick:()=>{this.setState({groupVars:this.state.categorical.slice(),ready:!0},(()=>{const t=this.context,e={data:this.state.data,quantitative:this.state.quantitative,categorical:this.state.categorical};t.store.setItem(this.id,e),this.setState({unaltered:e})}))}},this.props.t("submit")),s.createElement(ut.Z,{data:this.state.data,id:this.id+"_table"})))}if(N()(this.state.data))return s.createElement(h.Z,{variant:"danger"},this.props.t("data-empty"));if(!this.state.validVariables)return s.createElement(h.Z,{variant:"danger"},s.createElement(l.c,{i18nKey:"variables-invalid-alert",ns:"DataExplorer"},"The ",s.createElement("b",null,"quantitative")," or ",s.createElement("b",null,"categorical")," data arrays contain variable names not present in the ",s.createElement("b",null,"data")," object."));const t=this.context,e=!q()(this.props.questions),a=k()(this.props.questions)?{children:this.props.questions}:this.props.questions,i=this.props.style.height||.9*window.innerHeight-165;return s.createElement(m.Z,{className:"no-gutter data-explorer",style:this.props.style},s.createElement(g.Z,{xs:6,md:6},s.createElement(b.Z,{style:{height:this.props.style.height,minHeight:this.props.style.height||.9*window.innerHeight,padding:0}},s.createElement(u.Z,{className:"data-explorer-navbar",value:this.state.openedNav,onSelect:t=>this.setState({openedNav:t})},s.createElement(E.Z,null,e?s.createElement(E.Z.Item,{className:"explorer-data-nav"},s.createElement(E.Z.Link,{title:`${this.props.t("questions")} ${za}`,eventKey:"questions",active:"questions"===this.state.openedNav},this.props.t("questions"))):null,this.props.dataTable?s.createElement(E.Z.Item,{className:"explorer-data-nav"},s.createElement(E.Z.Link,{title:`${this.props.t("data")} ${Ua}`,eventKey:"data",active:"data"===this.state.openedNav},this.props.t("data"))):null,this.props.editor?s.createElement(E.Z.Item,{className:"explorer-editor-nav"},s.createElement(E.Z.Link,{title:`${this.props.editorTitle?this.props.editorTitle:this.props.t("report")} ${Qa}`,active:"editor"===this.state.openedNav,eventKey:"editor"},this.props.editorTitle?this.props.editorTitle:this.props.t("report"))):null,this.props.history?s.createElement(E.Z.Item,{className:"explorer-editor-nav"},s.createElement(E.Z.Link,{title:`${this.props.t("history")} ${$a}`,active:"history"===this.state.openedNav,eventKey:"history"},this.props.t("history"))):null,this.props.tabs.length>0?this.props.tabs.map(((t,e)=>s.createElement(E.Z.Item,{key:e,className:"explorer-tabs-nav"},s.createElement(E.Z.Link,{active:this.state.openedNav===t.title,eventKey:t.title},t.title)))):null),s.createElement(s.Suspense,{fallback:s.createElement(d.Z,{variant:"secondary",size:"sm",className:"hide-toolbox-button",disabled:!0},"Loading...")},s.createElement(Xa,{id:`${this.id}-toolbox`,models:this.props.models,tables:this.props.tables,statistics:this.props.statistics,plots:this.props.plots,tests:this.props.tests,quantitative:this.state.quantitative,originalQuantitative:this.props.quantitative,categorical:this.state.categorical,logAction:this.logAction,onCreated:this.addToOutputs,data:this.state.data,showTestDecisions:this.props.showTestDecisions,onPlotDone:this.outputPanel?this.outputPanel.scrollToBottom:B(),groupingVariables:this.state.groupVars,on2dSelection:this.on2dSelection,onQQPlotSelection:this.onQQPlotSelection,transformer:this.props.transformer,onBarchartSelection:this.onBarchartSelection,showHistogramDensityOption:this.props.histogramDensities,onGenerateTransformedVariable:this.onGenerateTransformedVariable,onHistogramSelection:this.onHistogramSelection,onCategoricalGenerate:(t,e)=>{const a=t.slice();this.setState({categorical:t,groupVars:a,data:e})},onQuantitativeGenerate:(t,e)=>{this.setState({quantitative:t,data:e})},onTutorialStart:this.props.onTutorialStart,onTutorialCompletion:this.props.onTutorialCompletion,onPredict:this.onPredict}))),s.createElement(b.Z.Body,{style:{overflowY:"auto"}},e?s.createElement(rt.Z,Ha({id:this.id+"_questions",height:i,className:"data-explorer-questions",style:{display:"questions"!==this.state.openedNav?"none":null}},a)):null,s.createElement("div",{style:{display:"data"!==this.state.openedNav?"none":null}},this.props.data||t.metadata.store[this.id]?null:s.createElement(d.Z,{size:"small",onClick:this.resetStorage,style:{position:"absolute",top:"80px",zIndex:2}},this.props.t("clear-data")),this.props.data?null:s.createElement(nt.Z,{owner:!0,banner:null},s.createElement(d.Z,{size:"small",onClick:this.shareData,style:{position:"absolute",top:"80px",left:"140px",zIndex:2}},t.metadata.store[this.id]?this.props.t("unshare"):this.props.t("share"))),s.createElement(ut.Z,Ma(Ha({},this.props.dataTableProps),{data:this.state.data,dataInfo:this.props.dataInfo,undeletableVars:$()(this.props.data),filters:this.state.filters,onFilteredChange:t=>{ja("Filters have changed..."),this.setState({filters:t})},onColumnDelete:this.onColumnDelete,onColumnNameChange:this.onColumnNameChange,onColumnDrag:this.onColumnDrag,deletable:!0,id:this.id+"_table",headerButtons:this.state.filters.length>0&&this.state.subsetFilters!==this.state.filters?s.createElement(ct.Z,{placement:"top",overlay:s.createElement(v.Z,null,this.props.t("create-filtered-dataset-tooltip"))},s.createElement(d.Z,{onClick:()=>{this.state.subsetFilters?this.onFilterAdd():this.onFilterCreate()},variant:"secondary",size:"xsmall"},this.props.t("create-filtered-dataset"))):null})),this.state.subsetFilters?s.createElement("div",{className:"data-explorer-subset-filter-display"},s.createElement("p",null,s.createElement("span",{style:{color:"white",paddingLeft:2}},this.props.t("filtered"),":"),this.state.subsetFilters?s.createElement(ct.Z,{placement:"top",overlay:s.createElement(v.Z,null,this.props.t("restore-original-dataset-tooltip"))},s.createElement(d.Z,{onClick:this.onRestoreData,variant:"secondary",size:"small",style:{float:"right"}},this.props.t("restore-original-dataset"))):null),s.createElement(pa,{filters:this.state.subsetFilters,removeButtons:!0,onRemove:t=>{ja("Removing filter at position "+t);const e=this.state.subsetFilters.slice();e.splice(t,1),e.length>0?this.setState({data:this.state.oldData,filters:e},this.onFilterCreate):this.onRestoreData()}})):null),this.props.history&&"history"===this.state.openedNav?s.createElement(Qe,{explorerID:this.id,actions:this.context.currentUserActions[this.id],onCreated:this.addToOutputs,onTransformation:e=>{const a=this.applyTransformation(this.state,e);t.addNotification({title:this.props.t("variable-created"),message:this.props.t("variable-created-msg",{name:e.value.name}),level:"success",position:"tr"}),this.setState(a)},logAction:this.logAction,session:this.context,data:this.state.data,quantitative:this.state.quantitative,categorical:this.state.categorical,t:this.props.t,reportMode:this.props.reportMode}):null,this.props.editor?s.createElement(Y.Z,Ma(Ha({},this.props.editorProps),{mode:this.props.reportMode,id:this.id+"_editor",style:{display:"editor"!==this.state.openedNav?"none":null},submitButton:!0})):null,this.props.tabs.map(((t,e)=>this.state.openedNav===t.title?t.content:null))))),s.createElement(g.Z,{xs:6,md:6},s.createElement("div",{className:"card card-default",style:{height:this.props.style.height,minHeight:this.props.style.height||.9*window.innerHeight,padding:0}},s.createElement(vt,{output:this.state.output,ref:t=>{this.outputPanel=t},session:this.context,header:s.createElement(nt.Z,{owner:!0,banner:null},s.createElement(f.Z,{show:this.state.showStudentPlots,onHide:this.toggleStudentPlots,dialogClassName:"modal-100w"},s.createElement(f.Z.Header,{closeButton:!0},s.createElement(f.Z.Title,null,this.props.t("plots"))),s.createElement(f.Z.Body,{style:{height:.8*window.innerHeight,overflowY:"scroll"}},this.state.studentPlots.length>0?s.createElement(it,null,this.state.studentPlots.map(((t,e)=>{const a=JSON.parse(t.config);return s.createElement("div",{key:e,style:{height:"450px"}},(0,y.isPrimitive)(a)?s.createElement(ht.Z,{code:a,libraries:["MASS"]}):s.createElement(lt.Z,{data:a.data,layout:a.layout,removeButtons:!0}),s.createElement("span",null,s.createElement("b",null,this.props.t("count"),": "),t.count))}))):s.createElement(b.Z,{body:!0,className:"bg-light"},this.props.t("no-plots-yet"))),s.createElement(f.Z.Footer,null,s.createElement(d.Z,{variant:"danger",onClick:this.clearPlots},this.props.t("clear-plots")),s.createElement(d.Z,{onClick:this.toggleStudentPlots},this.props.t("close")))),s.createElement(d.Z,{variant:"secondary",size:"sm",style:{float:"right"},onClick:this.toggleStudentPlots},this.props.t("open-shared-plots")),s.createElement(ot.Z,{returnFullObject:!0,for:[this.id],onDatum:this.onUserAction})),clearOutput:()=>{t.log({id:this.id,type:Ht.i_,value:null},"owners"),this.setState({output:[]})},reportMode:this.props.reportMode,t:this.props.t}),s.createElement(dt.Z,{actions:{"shift+alt+r":()=>this.setState({openedNav:"editor"}),"shift+alt+h":()=>this.setState({openedNav:"history"}),"shift+alt+d":()=>this.setState({openedNav:"data"}),"shift+alt+q":()=>this.setState({openedNav:"questions"})}}))))}}Ja.defaultProps={data:{},dataInfo:{info:"",name:"",variables:null,showOnStartup:!1},dataTable:!0,dataTableProps:{},history:!0,tabs:[],questions:null,transformer:!0,statistics:["Mean","Median","Min","Max","Range","Interquartile Range","Standard Deviation","Variance","Correlation","Correlation Matrix","Skewness","Excess Kurtosis","First Quartile","Third Quartile","Quantile","Five-Number Summary"],plots:["Bar Chart","Pie Chart","Mosaic Plot","Histogram","Interval Plot","Box Plot","Line Plot","Scatterplot","Scatterplot Matrix","Heat Map","Contour Chart","Violin Plot","QQ Plot"],tables:["Frequency Table","Contingency Table"],tests:["One-Sample Mean Test","Two-Sample Mean Test","One-Way ANOVA","One-Sample Proportion Test","Two-Sample Proportion Test","Correlation Test","Chi-square Independence Test","Kruskal-Wallis Test"],models:["Simple Linear Regression","Multiple Linear Regression","LASSO","Decision Tree","Random Forest","Logistic Regression","Naive Bayes","PCA","Hierarchical Clustering","kmeans"],opened:null,categorical:[],quantitative:[],editor:!0,editorProps:null,editorTitle:null,reportMode:"individual",histogramDensities:!0,showTestDecisions:!0,onTutorialCompletion(){},onTutorialStart(){},style:{}},Ja.propTypes={categorical:r().array,quantitative:r().array,data:r().object,dataInfo:r().object,editor:r().bool,editorProps:r().object,editorTitle:r().string,dataTable:r().bool,dataTableProps:r().object,history:r().bool,reportMode:r().oneOf(["individual","group","collaborative"]),histogramDensities:r().bool,models:r().array,opened:r().oneOf(["data","toolbox","editor"]),plots:r().array,questions:r().oneOfType([r().array,r().object]),showTestDecisions:r().bool,statistics:r().array,style:r().object,tables:r().array,tabs:r().array,tests:r().array,transformer:r().bool,onTutorialCompletion:r().func,onTutorialStart:r().func},Ja.contextType=mt.Z;var Wa=(0,c.Z)("data-explorer")((0,xa.W)(Ja))},275772:function(t,e,a){var s=a(839956),i=a.n(s);const r=/^([^0-9]+)(\d+):\1(\d+)$/;e.Z=function({name:t,distribution:e,params:a,nObs:s,asCategorical:n,seed:o}){const l=r.exec(t),c=i()[e].factory.apply(null,a.concat({seed:o}));if(l&&4===l.length){const t=l[1],e=parseInt(l[2],10),a=parseInt(l[3],10),i=[],r=[];if(n)for(let n=e;n<=a;n++){const e=new Array(s);for(let t=0;t<s;t++)e[t]=String(c());r.push(e),i.push(`${t}${n}`)}else for(let n=e;n<=a;n++){const e=new Array(s);for(let t=0;t<s;t++)e[t]=c();r.push(e),i.push(`${t}${n}`)}return[i,r]}const p=new Array(s);for(let i=0;i<s;i++)p[i]=c();return[t,p]}},180109:function(t,e,a){var s=a(294565),i=a(409961),r=a.n(i),n=a(302467),o=a.n(n);function l(t){return(0,s.isPrimitive)(t)?o()(t,".","[dot]"):t}e.Z=function(t,e,a,s,i=!1){const n=[],o=s[t];if(!a)return o;if(i){if(r()(e))for(let t=0;t<o.length;t++){const e=o[t],s=Number(a[l(e)]);n.push(s)}else{const t=s[e];for(let e=0;e<o.length;e++){const s=a[l(o[e])+"-"+l(t[e])];n.push(Number(s))}}return n}if(r()(e))for(let r=0;r<o.length;r++){let t=a[l(o[r])];"null"!==t&&"NA"!==t||(t=null),n.push(t)}else{const t=s[e];for(let e=0;e<o.length;e++){const s=a[l(o[e])+"-"+l(t[e])];n.push(s)}}return n}},658392:function(t,e,a){var s=a(676065),i=a.n(s),r=a(309765),n=a(316305),o=a.n(n);e.Z=function(t,e,a){const s=[];for(let n=0;n<t.length;n++){let l;const c=t[n];if((0,r.isPrimitive)(c)&&!o()(c)){let t=0;for(;i()(l);)t>=a.length||c<a[t]?l=e[t]:t+=1}else l=null;s.push(l)}return s}},818674:function(t,e,a){var s=a(733727),i=a.n(s),r=a(686605),n=a.n(r),o=a(695688),l=a.n(o),c=a(190465),p=a.n(c),h=a(557106),d=a.n(h),u=a(783158),m=a.n(u),g=a(798030),f=a.n(g),E=a(830324),b=a.n(E),v=a(700601),y=a.n(v),S=a(409961),R=a.n(S),T=a(201),Z=a(99733),A=a(20185),P=a(714785);const O=t=>(...e)=>t(e),_=[p(),f(),n(),l(),i(),d(),m(),O(Z.Z),O(T.Z),O(A.Z)];e.Z=function(t,e){let a=[];for(let r in e)if(y()(e,r))for(let t=0;t<e[r].length;t++){b()(a[t])||(a[t]={});const s=e[r][t];a[t][r]=R()(s)?NaN:s}const s=new Function("datum",...P,t),i=new Array(a.length);for(let r=0;r<a.length;r++)i[r]=s(a[r],..._);return i}},42653:function(t,e,a){var s=a(202784);e.Z=function(){const[,t]=(0,s.useState)(0);return(0,s.useCallback)((()=>{t((t=>t+1))}),[])}},394362:function(t,e){e.Z=function(t){const e=document.createElement("div");e.innerHTML=t,e.style.position="fixed",e.style.opacity=0,e.style.pointerEvents="none",document.body.appendChild(e),window.getSelection().removeAllRanges();const a=document.createRange();a.selectNode(e),window.getSelection().addRange(a),document.execCommand("copy"),document.body.removeChild(e)}},107466:function(t,e){e.Z=function t(e,a,s){if(s<=0)return;const i=(a-e.scrollTop)/s*10;setTimeout((function(){e.scrollTop=e.scrollTop+i,e.scrollTop!==a&&t(e,a,s-10)}),10)}},30468:function(t,e,a){var s=a(89596),i=a.n(s),r=a(309765);e.Z=function(t,e){const a=i()(e);if(!i()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!a&&!(0,r.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const s=t.length,n=new Array(s);if(a){if(s!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(let a=0;a<s;a++)n[a]=t[a]-e[a]}else for(let i=0;i<s;i++)n[i]=t[i]-e;return n}},714785:function(t){t.exports=JSON.parse('["exp","ln","round","sqrt","power","max","min","mean","stdev","sum"]')}}]);
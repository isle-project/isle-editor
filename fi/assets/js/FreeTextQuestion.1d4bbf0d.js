"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2792],{667045:function(t,e,s){const i=(0,s(217431).Z)((()=>s.e(112).then(s.bind(s,497925))));e.Z=i},956260:function(t,e,s){var i=s(202784),n=s(213980),o=s.n(n),a=Object.defineProperty,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(t,e,s)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;const h=t=>{const e=t,{children:s}=e,n=((t,e)=>{var s={};for(var i in t)r.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&l)for(var i of l(t))e.indexOf(i)<0&&u.call(t,i)&&(s[i]=t[i]);return s})(e,["children"]);return i.createElement("div",((t,e)=>{for(var s in e||(e={}))r.call(e,s)&&p(t,s,e[s]);if(l)for(var s of l(e))u.call(e,s)&&p(t,s,e[s]);return t})({},n),s)};h.defaultProps={className:"",style:{}},h.propTypes={className:o().string,style:o().object},e.Z=h},370420:function(t,e,s){const i=(0,s(217431).Z)((()=>s.e(6131).then(s.bind(s,66720))));e.Z=i},800712:function(t,e,s){const i=(0,s(217431).Z)((()=>Promise.all([s.e(532),s.e(4507)]).then(s.bind(s,307125))));e.Z=i},366239:function(t,e,s){s.r(e);var i=s(202784),n=s(928316),o=s(213980),a=s.n(o),l=s(198),r=s(770561),u=s(482228),p=s(26266),h=s(10863),c=s(31071),d=s(690299),m=s.n(d),b=s(294565),f=s(417332),v=s(426214),g=s(370420),y=s(514921),x=s(956260),Z=s(380827),N=s(667045),w=s(998325),E=s(172888),S=s(800712),k=s(123103),q=s(879052),P=s(180024),C=s(691334),O=s(302108),T=s(741082),D=Object.defineProperty,L=(t,e,s)=>(((t,e,s)=>{e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s})(t,"symbol"!=typeof e?e+"":e,s),s);const F=(0,f.Z)("free-text-question"),j=m()("isle:free-text-question");class H extends i.Component{constructor(t,e){super(t),L(this,"handleChange",(t=>{const e=t.target.value;this.setState({value:e}),this.beforeUnload||(window.addEventListener("beforeunload",P.Z),this.beforeUnload=!0),this.props.onChange(e)})),L(this,"appendText",(t=>{this.setState({value:this.state.value+" "+t})})),L(this,"sendSubmitNotification",(()=>{const t=this.context;if(this.state.submitted)t.addNotification({title:this.props.t("answer-resubmitted"),message:this.props.resubmissionMsg,level:"success"});else{let e=this.props.submissionMsg;""===e&&(e=this.props.solution&&this.props.provideFeedback?this.props.t("submission-message-solution"):this.props.t("submission-message-no-solution")),t.addNotification({title:this.props.t("answer-submitted"),message:e,level:"success"})}})),L(this,"submitHandler",(t=>{const e=this.context;this.props.disableSubmitNotification||this.sendSubmitNotification(),this.props.onSubmit(this.state.value),this.setState({submitted:!0}),window.removeEventListener("beforeunload",P.Z),this.beforeUnload=!1,e.log({id:this.id,type:C.Ql,value:this.state.value})})),L(this,"handleSolutionClick",(()=>{const t=this.context;this.state.solutionDisplayed?this.setState({solutionDisplayed:!1,value:this.state.studentAnswer}):(t.log({id:this.id,type:C.Lu,value:null}),this.setState({solutionDisplayed:!0,studentAnswer:this.state.value,value:this.props.solution}))})),L(this,"logHint",(t=>{j("Logging hint...");this.context.log({id:this.id,type:C.sF,value:t})})),j("Invoking constructor of FreeTextQuestion...");const s=e.currentUserActions;this.id=t.id||F(t);const i=(0,q.Z)(s,this.id,C.Ql);this.state={exhaustedHints:0===t.hints.length,value:(0,b.isPrimitive)(i)?i:"",solutionDisplayed:!1,submitted:(0,b.isPrimitive)(i),placeholder:t.placeholder,solution:t.solution,question:t.question}}static getDerivedStateFromProps(t,e){return t.placeholder!==e.placeholder||t.solution!==e.solution||t.question!==e.question?{value:"",solutionDisplayed:!1,submitted:!1,placeholder:t.placeholder,solution:t.solution,question:t.question}:null}componentDidMount(){const t=this.context;this.unsubscribe=t.subscribe((t=>{t===O.u&&this.setToLastAction()}))}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}setToLastAction(){const t=this.context.currentUserActions,e=(0,q.Z)(t,this.id,C.Ql);(0,b.isPrimitive)(e)&&e!==this.state.value&&this.setState({value:e,submitted:!0})}triggerHint(){n.findDOMNode(this.hintButton).click()}renderSubmitButton(){const t=this.context;return this.props.until&&t.startTime>this.props.until?i.createElement("span",{className:"title",style:{marginLeft:4}},this.props.t("question-closed")):this.state.value.length>=1&&!this.state.solutionDisplayed?i.createElement(y.Z,{className:"submit-button",variant:"primary",size:"sm",onClick:this.submitHandler,duration:5,style:{marginLeft:"4px"}},this.state.submitted?this.props.t("resubmit"):this.props.t("submit")):i.createElement(w.Z,{placement:"top",positionLeft:100,overlay:i.createElement(c.Z,{id:"submitTooltip"},this.props.t("submit-tooltip")),rootClose:!0},i.createElement("div",{style:{display:"inline-block"}},i.createElement(r.Z,{className:"submit-button",variant:"primary",size:"sm",style:{pointerEvents:"none",marginLeft:"4px"},disabled:!0},this.props.t("submit"))))}render(){const t=this.props.hints.length,e=i.createElement(Z.Z,{disabled:!(this.props.instantSolution||this.state.submitted&&this.state.exhaustedHints),onClick:this.handleSolutionClick,hasHints:this.props.hints.length>0});return i.createElement(v.Z,{id:this.id,className:`free-text-question ${this.props.className}`,style:this.props.style,fullscreen:!0,bodyStyle:{width:this.props.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},this.props.question?i.createElement("div",{className:"title"},this.props.question):null,i.createElement(h.Z,{style:{paddingBottom:12}},i.createElement("label",{htmlFor:`${this.id}-textarea`},this.state.solutionDisplayed?this.props.t("solution"):this.props.t("your-answer")),this.state.solutionDisplayed?i.createElement("div",{className:"free-text-question-solution-wrapper",style:{height:`calc(${1.5*this.props.rows}rem + 14px)`}},this.state.value):i.createElement(p.Z,{id:`${this.id}-textarea`,as:"textarea",placeholder:this.props.placeholder||this.props.t("enter-your-answer-here"),onChange:this.handleChange,style:{resize:this.props.resizable?"both":"none"},maxLength:this.props.maxlength,rows:this.props.rows,value:this.state.value,disabled:this.state.solutionDisplayed})),i.createElement(x.Z,{buttonLabel:this.props.t("answers"),id:this.id,info:C.Ql,data:{question:this.props.question,solution:this.props.solution},style:{float:"left"},points:this.props.points}),i.createElement(u.Z,{className:"free-text-question-toolbar"},t>0?i.createElement(N.Z,{id:`${this.id}-hints`,onClick:this.logHint,ref:t=>{this.hintButton=t},hints:this.props.hints,onFinished:()=>{this.setState({exhaustedHints:!0})},style:{marginRight:"4px"},placement:this.props.hintPlacement}):null,this.props.provideFeedback&&this.props.solution?e:null,this.props.chat?i.createElement("div",{style:{display:"inline-block",marginLeft:"4px"}},i.createElement(g.Z,{for:this.id})):null,this.renderSubmitButton()),this.props.feedback?i.createElement(E.Z,{id:this.id+"_feedback",style:{marginRight:5,marginTop:-5}}):null,i.createElement(S.Z,{for:this.id,points:this.props.points}))}}H.defaultProps={question:"",hints:[],hintPlacement:"top",feedback:!0,solution:"",instantSolution:!1,rows:5,chat:!1,placeholder:"",resizable:!1,disableSubmitNotification:!1,submissionMsg:"",resubmissionMsg:"You have successfully re-submitted your answer.",provideFeedback:!0,maxlength:2500,until:null,points:10,className:"",style:{},onChange(){},onSubmit(){}},H.propTypes={question:a().oneOfType([a().string,a().node]),hints:a().arrayOf(a().oneOfType([a().string,a().node])),hintPlacement:a().string,feedback:a().bool,solution:a().oneOfType([a().string,a().node]),instantSolution:a().bool,rows:a().number,chat:a().bool,resizable:a().bool,placeholder:a().string,disableSubmitNotification:a().bool,submissionMsg:a().string,resubmissionMsg:a().string,provideFeedback:a().bool,maxlength:a().number,until:a().instanceOf(Date),points:a().number,className:a().string,style:a().object,onChange:a().func,onSubmit:a().func},H.contextType=k.Z,e.default=(0,l.Z)("questions/free-text")((0,T.W)(H))},380827:function(t,e,s){const i=(0,s(217431).Z)((()=>s.e(8905).then(s.bind(s,960226))));e.Z=i},879052:function(t,e,s){var i=s(588703),n=s.n(i),o=s(830324),a=s.n(o);e.Z=(t,e,s)=>{if(a()(t)){let i=t[e];if(n()(i)&&(i=i.filter((t=>t.type===s)),i.length>0))return i[0].value}return null}},770561:function(t,e,s){var i=s(72779),n=s.n(i),o=s(202784),a=s(247830),l=s(429658),r=s(552322);const u=o.forwardRef((({as:t,bsPrefix:e,variant:s,size:i,active:o,className:u,...p},h)=>{const c=(0,l.vE)(e,"btn"),[d,{tagName:m}]=(0,a.FT)({tagName:t,...p}),b=m;return(0,r.jsx)(b,{...d,...p,ref:h,className:n()(u,c,o&&"active",s&&`${c}-${s}`,i&&`${c}-${i}`,p.href&&p.disabled&&"disabled")})}));u.displayName="Button",u.defaultProps={variant:"primary",active:!1,disabled:!1},e.Z=u},482228:function(t,e,s){var i=s(72779),n=s.n(i),o=s(202784),a=s(429658),l=s(552322);const r=o.forwardRef((({bsPrefix:t,className:e,...s},i)=>{const o=(0,a.vE)(t,"btn-toolbar");return(0,l.jsx)("div",{...s,ref:i,className:n()(e,o)})}));r.displayName="ButtonToolbar",r.defaultProps={role:"toolbar"},e.Z=r}}]);
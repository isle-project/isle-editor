"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[20082],{370420:function(e,t,n){const a=(0,n(217431).Z)((()=>n.e(96131).then(n.bind(n,66720))));t.Z=a},29596:function(e,t,n){n.r(t);var a=n(202784),l=n(213980),s=n.n(l),r=n(690299),u=n.n(r),o=n(376699),i=n(38505),c=n(770561),m=n(26266),d=n(10863),h=n(830650),b=n(973777),p=n(287013),E=n.n(p),q=n(409961),f=n.n(q),g=n(112114),Z=n(370420),v=n(377174),w=n(426214),C=n(123103),H=n(691334),y=n(302108),z=n(487890);const Q=u()("isle:queue"),N=e=>{if(0===e.questions.length)return a.createElement("p",null,e.t("no-questions"));const t=e.session;return a.createElement(b.Z,{className:"queue-table",showPageSizeOptions:!1,data:e.questions,resizable:!1,sortable:!1,columns:[{Header:"Pic",id:"pic",accessor:e=>{const{userList:n}=t;for(let t=0;t<n.length;t++)if(n[t].name===e.name)return n[t].picture;return""},Cell:e=>a.createElement("img",{className:"queue-table-pic",alt:"User thumbnail",src:`${t.server}/thumbnail/${e.value}`}),maxWidth:46,minWidth:46,style:{color:"darkslategrey"}},{Header:e.t("name"),id:"nameCol",accessor:"name",width:150,Cell:e=>a.createElement(g.Z,{tooltip:`${e.value} (${e.original.email})`},a.createElement("span",{className:"queue-table-name"},e.value))},{Header:e.t("cohort"),id:"cohortCol",accessor:e=>{const{cohorts:n}=t;for(let t=0;t<n.length;t++)if(E()(n[t].members,e.email))return n[t].title;return""}},{Header:e.t("question"),id:"qCol",accessor:"value",width:350,style:{"white-space":"unset"}},{Header:e.t("chat"),Cell:t=>{const n="Queue_"+t.original.name;return a.createElement(Z.Z,{tooltip:e.t("queue-start-chat"),for:n})}},{Header:"",accessor:"remove",Cell:n=>a.createElement(g.Z,{placement:"left",tooltip:e.t("mark-and-remove")},a.createElement(c.Z,{variant:"secondary",size:"sm",onClick:()=>{t.removeQuestionFromQueue(n.original)}},a.createElement("i",{className:"fas fa-check"}))),filterable:!1,width:45}],pageSize:8})},k=e=>{const{id:t,logAction:n}=(0,z.G)("QUEUE",e),{draggable:l,show:s,onHide:r,onNewQuestion:u}=e,b=(0,a.useContext)(C.Z),p=b.questions,{t:E}=(0,o.$)("internal/toolbar/queue"),[q,g]=(0,a.useState)(""),[k,x]=(0,a.useState)(null),L=()=>{Q("Send the signal to enter the queue..."),n(H.K5,q,{},"members");const e={name:b.user.name,email:b.user.email,value:q};b.addQuestionToQueue(e)},W=()=>{const e={name:b.user.name,email:b.user.email,value:q};b.removeQuestionFromQueue(e)},F=e=>{e.target.className&&e.target.className.includes("queue-panel")&&r()};let K;if((0,a.useEffect)((()=>{let e;return b&&(Q("We have a session, subscribe the component..."),e=b.subscribe(((e,n)=>{if(e===y.Kd){const e=n;let t=null;for(let n=0;n<e.length;n++)if(e[n].email===b.user.email){t=n;break}x(t)}n&&n.id===t&&n.type===H.K5&&b.isOwner()&&u()}))),()=>{e&&e()}}),[t,u,b]),s){if(b.isOwner())return Q("User is an owner..."),K=a.createElement(w.Z,{className:"queue-panel",tabIndex:0,role:"button",header:E("queue"),onHide:r,minimizable:!0,trapFocus:!0},a.createElement(N,{questions:b.questions,t:E,session:b,for:t})),l&&(K=a.createElement(v.Z,{bounds:"#Lesson",cancel:".queue-table",onEscape:F,resizable:!0,minWidth:300,minHeight:150},K)),K;const e=()=>{g(""),r()};if(!f()(k)){const t="Queue_"+b.user.name;return K=a.createElement(w.Z,{className:"queue-panel",tabIndex:0,role:"button",header:E("queue"),onHide:e,minimizable:!0,trapFocus:!0},a.createElement("p",null,a.createElement(i.c,{i18nKey:"queue-status",ns:"Queue"},"Your question: ",a.createElement("i",null,{question:q}),a.createElement("br",null),"You are currently at position ",a.createElement("strong",null,{spot:k})," on the queue.",a.createElement("br",null),"There are ",a.createElement("strong",null,{size:b.questions.length})," individual(s) in the queue.")),a.createElement(Z.Z,{for:t,showTooltip:!1}),a.createElement(c.Z,{style:{marginLeft:10},size:"sm",onClick:W},E("remove-myself-from-queue"))),l&&(K=a.createElement(v.Z,{bounds:"#Lesson",onEscape:F,resizable:!0,minWidth:300,minHeight:150},K)),K}return K=a.createElement(w.Z,{className:"queue-panel",tabIndex:0,role:"button",header:E("queue"),onHide:e,minimizable:!0,trapFocus:!0},a.createElement("p",null,E("queue-prompt")),a.createElement(d.Z,null,a.createElement(h.Z,null,E("question")),a.createElement(m.Z,{type:"text",id:"queue_form",value:q,onChange:e=>{g(e.target.value)},onKeyPress:e=>{13===e.charCode&&q.length>0&&L()},width:500})),a.createElement(c.Z,{disabled:0===q.length,onClick:L},E("submit-question")),a.createElement("span",{style:{marginLeft:8}},E("queue-size",{n:p.length}))),l&&(K=a.createElement(v.Z,{bounds:"#Lesson",cancel:"#queue_form",onEscape:F,resizable:!0,minWidth:300,minHeight:150},K)),K}return null};k.defaultProps={draggable:!0,show:!0,onHide(){},onNewQuestion(){}},k.propTypes={draggable:s().bool,show:s().bool,onHide:s().func,onNewQuestion:s().func},t.default=k}}]);
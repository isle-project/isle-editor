/*! For license information please see StatusBar.9ab3c342.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3886,9254],{473861:function(e,t,n){var r=(0,n(708717).Z)((function(){return Promise.all([n.e(3312),n.e(7139),n.e(9254)]).then(n.bind(n,283447))}));t.Z=r},283447:function(e,t,n){n.r(t);var r=n(497326),o=n(894578),i=n(867855),a=n(202784),s=n(213980),l=n.n(s),c=n(312341),u=n(955096),d=n(635314),p=n.n(d),m=n(884968),f=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,w=function(e,t,n){return t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},E=function(e,t){for(var n in t||(t={}))b.call(t,n)&&w(e,n,t[n]);if(v)for(var r,o=(0,i.Z)(v(t));!(r=o()).done;){n=r.value;y.call(t,n)&&w(e,n,t[n])}return e},Z=function(e,t,n){return w(e,"symbol"!=typeof t?t+"":t,n),n},_={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0};function k(e){var t=document.getElementsByClassName("react-draggable-last");if(e.path){for(var n=e.path[1],r=0;r<e.path.length;r++){var o=e.path[r];if(o.classList&&o.classList.contains("react-draggable-dragged")){n=o;break}}setTimeout((function(){if(t)for(var e=0;e<t.length;e++)t[e].classList.remove("react-draggable-last");n.classList.add("react-draggable-last")}),0)}}var S=function(e){function t(){var t;return t=e.apply(this,arguments)||this,Z((0,r.Z)(t),"handleStop",(function(e,n){k(e),t.props.onStop(e,n)})),Z((0,r.Z)(t),"handleEscape",(function(e){t.props.onEscape(e)})),Z((0,r.Z)(t),"updateSize",(function(e){var n=e.width,r=e.height;t.container.updateSize({width:n,height:r})})),t}return(0,o.Z)(t,e),t.prototype.render=function(){var e,t,n=this,r=p()(this.props,["onStop","onEscape"]),o="button, .btn, .nav";return r.cancel&&(o+=", "+r.cancel),a.createElement(u.Z,{node:document.body},a.createElement(c.s,(e=E({},r),t={cancel:o,onDragStop:this.handleStop,ref:function(e){n.container=e},default:E({x:window.pageXOffset+30,y:window.pageYOffset+30},this.props.default),position:this.props.position,enableResizing:!!this.props.resizable&&_,enableUserSelectHack:!1,style:E({position:"fixed"},this.props.style),disableDragging:this.props.disabled},h(e,g(t))),this.props.children),a.createElement(m.Z,{container:this.container,actions:{Escape:this.handleEscape}}))},t}(a.Component);S.propTypes={disabled:l().bool,resizable:l().bool,position:l().shape({x:l().number,y:l().number}),style:l().object,onEscape:l().func,onStop:l().func},S.defaultProps={disabled:!1,resizable:!1,position:null,style:{},onEscape:function(){},onStop:function(){}},t.default=S},615697:function(e,t,n){var r=(0,n(708717).Z)((function(){return n.e(6131).then(n.bind(n,102149))}));t.Z=r},84207:function(e,t,n){var r=(0,n(708717).Z)((function(){return Promise.all([n.e(3312),n.e(4438)]).then(n.bind(n,282199))}));t.Z=r},938335:function(e,t,n){var r=(0,n(708717).Z)((function(){return n.e(9036).then(n.bind(n,362281))}));t.Z=r},378456:function(e,t,n){var r=n(202784),o=n(588703),i=n.n(o);t.Z=function(e){var t=e.session,n=t.cohorts,o=(0,r.useCallback)((function(e){t.selectCohort(e.target.value)}),[t]);if(!i()(n))return null;var a=r.createElement("select",{id:e.id,className:"cohort-select",onChange:o,onBlur:o,value:t.selectedCohort?t.selectedCohort.title:"all"},r.createElement("option",{value:"all"},e.t("all-cohorts")),n.map((function(e,t){return r.createElement("option",{key:t,value:e.title},e.title)})));return r.createElement("div",{style:{padding:"5px"}},r.createElement("label",{htmlFor:e.id,style:{marginRight:5}},e.label),a)}},390631:function(e,t,n){n.r(t),n.d(t,{default:function(){return It}});var r=n(497326),o=n(894578),i=n(202784),a=n(690299),s=n.n(a),l=n(198),c=n(770561),u=n(998856),d=n(686605),p=n.n(d),m=n(588703),f=n.n(m),h=n(623102),g=n.n(h),v=n(938335),b=n(84207),y=n(476709),w=n(708579),E=n(884968),Z=n(269844),_=n(289973),k=n(454245),S=n(615697),x=n(218696),C=n(267682),O=n(10206),M=n(557106),P=n.n(M),N=n(283447),T=n(262600),D=Object.defineProperty,I=function(e,t,n){return function(e,t,n){t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},A={DEFAULT_BACKGROUND:"#fffff8",DISABLE_VIDEO_BACKGROUND:!0,SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,INVITATION_POWERED_BY:!1,DEFAULT_REMOTE_DISPLAY_NAME:"Anonymous",DISPLAY_WELCOME_PAGE_CONTENT:!1,TOOLBAR_BUTTONS:["microphone","camera","closedcaptions","desktop","fullscreen","fodeviceselection","info","profile","settings","videoquality","filmstrip","shortcuts","tileview","download","help"],SETTINGS_SECTIONS:["devices","language"],MOBILE_APP_PROMO:!0,HIDE_KICK_BUTTON_FOR_GUESTS:!0,SHOW_CHROME_EXTENSION_BANNER:!1},R=function(e){function t(t){var n;return n=e.call(this,t)||this,I((0,r.Z)(n),"handleClose",(function(e){var t=n.context;t.isOwner()&&n.api.executeCommand("hangup"),t.leaveVideoChat(n.props.roomName)})),I((0,r.Z)(n),"handleCompress",(function(e){n.setState({minimized:!n.state.minimized},(function(){n.state.minimized?n.rnd.updateSize({width:160,height:100}):n.rnd.updateSize({width:P()(.3*window.innerWidth,400),height:P()(.3*window.innerHeight,400)})}))})),I((0,r.Z)(n),"stopScreenSharing",(function(e){n.api.executeCommand("toggleShareScreen")})),n.state={minimized:!1,screensharing:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.context.isOwner()?(A.TOOLBAR_BUTTONS.includes("mute-everyone")||A.TOOLBAR_BUTTONS.push("mute-everyone"),A.TOOLBAR_BUTTONS.includes("recording")||A.TOOLBAR_BUTTONS.push("recording"),A.TOOLBAR_BUTTONS.includes("livestreaming")||A.TOOLBAR_BUTTONS.push("livestreaming"),A.TOOLBAR_BUTTONS.includes("invite")||A.TOOLBAR_BUTTONS.push("invite"),A.SETTINGS_SECTIONS.includes("moderator")||A.SETTINGS_SECTIONS.push("moderator"),A.TOOLBAR_BUTTONS.includes("sharedvideo")||A.TOOLBAR_BUTTONS.push("sharedvideo")):A.TOOLBAR_BUTTONS.includes("raisehand")||A.TOOLBAR_BUTTONS.push("raisehand")},n.initialize=function(){var e=this,t=this.context,n={roomName:this.props.roomName,width:"100%",height:"100%",parentNode:this.videoChatContainer,userInfo:{email:t.user.email},interfaceConfigOverwrite:A,noSSL:!1,jwt:t.jitsi.token};this.api=new window.JitsiMeetExternalAPI(t.jitsi.server,n),this.api.executeCommand("displayName",t.user.name),this.api.executeCommand("subject",this.props.roomSubject),this.api.executeCommand("avatarUrl",t.user.picture),this.api.addEventListener("screenSharingStatusChanged",(function(t){e.setState({screensharing:t.on,minimized:t.on},(function(){e.state.minimized?e.rnd.updateSize({width:160,height:100}):e.rnd.updateSize({width:P()(.3*window.innerWidth,400),height:P()(.3*window.innerHeight,400)})}))}))},n.render=function(){var e,t,n=this;this.state.minimized?t={display:"none"}:(e={height:"100%",width:"100%"},t={height:"100%",width:"100%"});var r=i.createElement(T.Z,{className:"video-chat-panel",style:e},i.createElement("div",{className:"video-chat-iframe",ref:function(e){n.videoChatContainer||(n.videoChatContainer=e,n.initialize())},style:t}),this.state.minimized?i.createElement("h3",{style:{marginTop:22}},this.state.screensharing?i.createElement("span",null,this.props.t("sharing-screen")," ",i.createElement(c.Z,{onClick:this.stopScreenSharing,variant:"secondary",size:"sm"},this.props.t("stop-sharing"))):this.props.t("video-active")):null,i.createElement(w.Z,{tooltip:this.state.minimized?this.props.t("maximize"):this.props.t("minimize")},i.createElement(c.Z,{size:"sm",onClick:this.handleCompress,className:"video-chat-minimized-button"},i.createElement("i",{className:this.state.minimized?"far fa-window-maximize":"fas fa-window-minimize"}))),i.createElement(w.Z,{tooltip:this.props.t("leave-video")},i.createElement(c.Z,{size:"sm",onClick:this.handleClose,className:"video-chat-button"},i.createElement("i",{className:"fas fa-video-slash"}))));return i.createElement(N.default,{default:{width:P()(.3*window.innerWidth,400),height:P()(.3*window.innerHeight,400)},ref:function(e){n.rnd=e},minWidth:160,minHeight:100,resizable:!this.state.minimized,lockAspectRatio:!0,cancel:".video-chat-iframe"},r)},t}(i.Component);R.contextType=C.Z;var j=(0,l.Z)("internal/statusbar")(R),L=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(t){t!==O.q&&t!==O.lK||e.forceUpdate()}))},n.componentWillUnmount=function(){this.unsubscribe()},n.render=function(){return this.context.videoChats.map((function(e){return i.createElement(j,{key:e.name,roomName:e.name,roomSubject:e.subject||e.name})}))},t}(i.Component);L.contextType=C.Z;var z=L,B=n(521536),U=n.n(B),V=n(783158),F=n.n(V),H=n(213980),W=n.n(H),G=n(313054),K=n.n(G),q=n(302467),J=n.n(q),$=n(188304),Y=n(912860),X=n(435376),Q=n(992500),ee=n(862816),te=n(306830),ne=n.n(te),re=n(473861),oe=n(259893),ie=n(705193),ae=n(467174),se=n(339925),le=n(432257),ce=Object.defineProperty,ue=function(e,t,n){return function(e,t,n){t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},de=s()("isle:statusbar:chat"),pe=K()({html:!1,xhtmlOut:!0,breaks:!1,typographer:!1}),me=function(e){function t(t){var n;return n=e.call(this,t)||this,ue((0,r.Z)(n),"onScroll",(function(){n.chatbody.scrollTop+n.chatbody.clientHeight>=n.chatbody.scrollHeight&&n.context.markChatMessagesAsRead(n.props.chat.name)})),ue((0,r.Z)(n),"sendMessage",(function(e,t){void 0===t&&(t=!1);var r=n.editorView.markdown;0!==r.length&&(r=J()(r,"\\\n","\n"),n.context.sendChatMessage(n.props.chat.name,r,t),(0,ie.Z)(n.chatbody,n.chatbody.scrollHeight,1e3),n.setState({defaultValue:"",docId:n.state.docId+1}))})),ue((0,r.Z)(n),"sendAnonymousChatMessage",(function(e){n.sendMessage(e,!0)})),ue((0,r.Z)(n),"handleEditorStateChange",(function(){n.state.hasNews&&n.setState({hasNews:!1})})),ue((0,r.Z)(n),"insertText",(function(e){e=n.editorView.markdown+" "+e,n.setState({defaultValue:e})})),ue((0,r.Z)(n),"closeChat",(function(){n.context.leaveChat(n.props.chat.name)})),ue((0,r.Z)(n),"onMouseOver",(function(){n.state.opened||(n.chat.style.opacity=n.state.opened?.7:1)})),ue((0,r.Z)(n),"onMouseOut",(function(){n.state.opened||(n.chat.style.opacity=n.state.opened?1:.7)})),ue((0,r.Z)(n),"toggleMaximize",(function(){var e={maximized:!n.state.maximized};e.maximized&&!n.state.opened&&(e.opened=!0),n.setState(e)})),ue((0,r.Z)(n),"toggleChat",(function(){n.setState({opened:!n.state.opened,hasNews:!1})})),n.state={opened:!0,hasNews:!1,maximized:!1,defaultValue:"",docId:0},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;de("Component has mounted. Subscribe to session: ");var t=this.context;this.unsubscribe=t.subscribe((function(t){t===O.LL||t===O.xG||t===O.Jz?e.setState({hasNews:!0}):t===O.NH&&e.setState({hasNews:!1})}))},n.componentWillUnmount=function(){this.unsubscribe()},n.renderMembers=function(){var e=this.props.chat,t=i.createElement(X.Z,{id:"userlistPopover"},i.createElement(Q.Z,null,this.props.t("chat-members",{name:e.name})),i.createElement(ee.Z,null,i.createElement($.Z,null,e.members.map((function(e,t){return i.createElement(Y.Z,{style:{padding:"3px 3px"},key:t},e.name)})))));return i.createElement(oe.Z,{trigger:["hover","focus"],placement:"bottom",overlay:t},i.createElement("div",{className:"chat-members",style:{display:this.state.opened?"block":"none"}},e.members.map((function(t,n){return i.createElement("span",{key:n},t.name,n!==e.members.length-1?", ":null)}))))},n.renderChatBody=function(){var e=this,t=this.props.chat,n=this.context;return i.createElement("div",{className:"chat-body-outer",style:{display:this.state.opened?"block":"none"}},i.createElement("div",{className:"chat-body cancel",ref:function(t){e.chatbody=t},onScroll:this.onScroll,style:{height:this.state.maximized?"calc(85vh - 150px)":"150px"}},t.messages.map((function(t,r){var o={__html:pe.renderInline(t.content)};return i.createElement("div",{className:t.unread?"chat-message unread":"chat-message",key:r},i.createElement("img",{className:"chat-picture unselectable",src:n.server+"/thumbnail/"+(t.picture&&!t.anonymous?t.picture:"anonymous.jpg"),alt:e.props.t("profile-pic")}),i.createElement("div",{className:"chat-message-right"},i.createElement("span",{className:"chat-user"},t.anonymous?i.createElement(i.Fragment,null,i.createElement("span",{style:{marginRight:4}},e.props.t("anonymous")),i.createElement(y.Z,{owner:!0,banner:null},i.createElement(w.Z,{tooltip:t.user,placement:"right"},i.createElement("i",{className:"fas fa-user-secret"})))):t.user)," - ",i.createElement("span",{className:"chat-time"},(0,le.Z)(t.time)),i.createElement("br",null),i.createElement("span",{className:"chat-message-content",dangerouslySetInnerHTML:o})))}))),i.createElement(ae.Z,{className:"chat-textarea cancel",onEditorState:this.handleEditorStateChange,showStatusBar:!1,showColorPicker:!1,defaultValue:this.state.defaultValue,docId:this.state.docId,menu:{marks:se.EI,wraps:se.Uy,insert:[se.$T[0],se.$T[1],se.$T[5]]},ref:function(t){e.editorView=t},onKeyDown:function(t,n){n.stopPropagation(),"Enter"!==n.key||n.shiftKey||(n.preventDefault(),e.sendMessage())},t:this.props.t}),i.createElement(c.Z,{size:"sm",variant:"light",onClick:this.sendMessage,style:{float:"left"}},this.props.t("send-message")),this.props.chat.anonymousSubmissions?i.createElement(c.Z,{size:"sm",variant:"light",onClick:this.sendAnonymousChatMessage,style:{float:"left",marginLeft:"4px"}},this.props.t("send-anonymously")):null)},n.render=function(){var e=this,t=this.props,n=t.chat,r=t.left,o=t.width,a={position:_.Z?"absolute":"fixed",left:r};this.state.maximized&&this.state.opened?a.width="40vw":a.width=o,a.minWidth="275px";var s="chat_"+n.name;return i.createElement(re.Z,{cancel:".cancel",onEscape:this.props.chat.canLeave?this.closeChat:ne()},i.createElement("div",{id:s,className:"chat-outer-div",style:a,ref:function(t){e.chat=t}},i.createElement("div",{className:"chat-div",style:{opacity:this.state.opened?1:.7},onMouseOver:this.onMouseOver,onFocus:this.onMouseOver,onMouseOut:this.onMouseOut,onBlur:this.onMouseOut,tabIndex:0,role:"button"},i.createElement("span",{className:"chat-name"},n.name),i.createElement("span",{className:"chat-presence",style:{display:this.state.hasNews?"inline":"none"}}),n.canLeave?i.createElement(w.Z,{tooltip:this.props.t("close")+" (Esc)",placement:"bottom"},i.createElement("button",{className:"chat-header-button",onClick:this.closeChat,"aria-label":this.props.t("close")+" (Esc)"},i.createElement("i",{className:"fas fa-times"}))):null,i.createElement(w.Z,{tooltip:this.state.maximized?this.props.t("shrink"):this.props.t("enlarge"),placement:"bottom"},i.createElement("button",{className:"chat-header-button",onClick:this.toggleMaximize,"aria-label":this.state.maximized?this.props.t("shrink"):this.props.t("enlarge")},i.createElement("i",{className:"far fa-window-maximize"}))),i.createElement(w.Z,{tooltip:this.state.opened?this.props.t("minimize"):this.props.t("maximize"),placement:"left"},i.createElement("button",{className:"chat-header-button",onClick:this.toggleChat,"aria-label":this.state.opened?this.props.t("minimize"):this.props.t("maximize")},i.createElement("i",{className:"far fa-window-minimize"})))),this.renderMembers(),this.renderChatBody()))},t}(i.Component);me.defaultProps={left:400,width:600},me.propTypes={chat:W().object.isRequired,left:W().number,width:W().number},me.contextType=C.Z;var fe=(0,l.Z)("internal/statusbar")(me),he=Object.defineProperty,ge=function(e,t,n){return function(e,t,n){t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},ve=function(e){function t(t){var n;n=e.call(this,t)||this,ge((0,r.Z)(n),"getStatusbarInfo",(function(){var e=P()(.34*window.innerWidth,300),t=(window.innerWidth-e)/2;n.setState({statusbarWidth:e,side:t})}));var o=P()(.34*window.innerWidth,300),i=(window.innerWidth-o)/2;return n.state={statusbarWidth:o,side:i},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(t){t!==O._Z&&t!==O.PY||e.forceUpdate()})),window.addEventListener("resize",this.getStatusbarInfo)},n.componentWillUnmount=function(){this.unsubscribe(),window.removeEventListener("resize",this.getStatusbarInfo)},n.getChatPosition=function(e){var t=this.context,n=U()(t.chats.length/2),r=.6*this.state.side,o=F()((this.state.side-10-10*n)/n,r),i=10+e*(o+10);return e>n-1&&(i+=this.state.statusbarWidth,1===n&&1===e&&(i+=o+10)),{left:i,width:o}},n.render=function(){var e=this;return this.context.chats.map((function(t,n){var r=e.getChatPosition(n);return i.createElement(fe,{chat:t,idx:n,key:n,left:r.left,width:r.width})}))},t}(i.Component);ve.contextType=C.Z;var be=ve,ye=n(715318),we=function(e){return i.createElement(ye.Z,{show:e.show,onHide:e.close},i.createElement(ye.Z.Header,null,i.createElement(ye.Z.Title,null,e.title)),i.createElement(ye.Z.Body,null,e.message),i.createElement(ye.Z.Footer,null,i.createElement(c.Z,{onClick:e.close},e.t("cancel")),i.createElement(c.Z,{variant:"danger",onClick:e.onConfirm},e.t("confirm"))))};we.propTypes={close:W().func.isRequired,message:W().string.isRequired,onConfirm:W().func.isRequired,show:W().bool.isRequired,title:W().string.isRequired};var Ee=we,Ze=n(489572),_e=n(382617),ke=n(994865),Se=n(220809),xe=Object.defineProperty,Ce=function(e,t,n){return function(e,t,n){t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Oe=s()("isle:statusbar:voice-control");function Me(e){e.stopPropagation()}var Pe=function(e){function t(t){var n;return n=e.call(this,t)||this,Ce((0,r.Z)(n),"handleFinalVoiceInput",(function(e){var t=e[0],r=n.state.transcript;r.push(t),n.setState({transcript:r,recordedText:t,isSegment:!1},n.renderRecordedText),setTimeout((function(){n.setState({recordedText:null},n.renderRecordedText)}),3e3),n.props.session.log({id:O.Ac,type:O.Ac,value:t,noSave:!0},"members")})),Ce((0,r.Z)(n),"handleVoiceInput",(function(e){Oe("Received voice input: "+e);var t=e[0];n.setState({recordedText:t,isSegment:!0},n.renderRecordedText),n.props.session.log({id:O.Be,type:O.Be,value:t,noSave:!0},"members")})),Ce((0,r.Z)(n),"handleStartRecording",(function(){n.props.session.setVoiceRecordingStatus(!0)})),Ce((0,r.Z)(n),"handleStopRecording",(function(){n.setState({recordedText:null},n.renderRecordedText),n.props.session.setVoiceRecordingStatus(!1)})),Ce((0,r.Z)(n),"toggleTranscriptEditor",(function(e){e&&e.stopPropagation(),n.setState({showTranscriptEditor:!n.state.showTranscriptEditor})})),Ce((0,r.Z)(n),"renderRecordedText",(function(){n.state.recordedText?n.displayedText.innerHTML=n.state.recordedText:n.displayedText.innerHTML=""})),n.state={recordedText:null,transcript:[],showTranscriptEditor:!1,isSegment:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props.session;this.unsubscribe=t.subscribe((function(t,n){t===O.Wh&&(n.type===O.Ac?(e.setState({recordedText:n.value,isSegment:!1},e.renderRecordedText),setTimeout((function(){e.setState({recordedText:null},e.renderRecordedText)}),3e3)):n.type===O.Be&&e.setState({recordedText:n.value,isSegment:!0},e.renderRecordedText))}))},n.componentWillUnmount=function(){this.unsubscribe()},n.render=function(){var e=this,t=this.props.session,n="";if(this.state.showTranscriptEditor){var r=new Date;n+="# "+this.props.t("transcript-header")+" "+t.namespaceName+"/"+t.lessonName,g()(t.user)||(n+="\n## "+this.props.t("by")+" "+t.user.name+" ("+t.user.email+")"),n+="\n### "+r.toLocaleDateString()+" - "+r.toLocaleTimeString(),n+="\n\n\n",n+=this.state.transcript.join("\n")}return i.createElement(i.Fragment,null,i.createElement("div",{className:"statusbar-voice",style:{display:t.config.hideVoiceControl?"none":"inherit"}},i.createElement(Se.Z,{id:"statusbar-voice",onClick:Me,mode:"microphone",width:18,height:18,stopTooltip:this.props.t("disable-voice")+" (F9)",startTooltip:this.props.t("enable-voice")+" (F9)",onSegment:this.handleVoiceInput,onFinalText:this.handleFinalVoiceInput,onRecordingStart:this.handleStartRecording,onRecordingStop:this.handleStopRecording,maxAlternatives:5,speechInterface:t.speechInterface,remote:{toggle:120}})),this.state.transcript.length>0?i.createElement(w.Z,{placement:"bottom",tooltip:this.props.t("open-transcript")},i.createElement("span",{role:"button",tabIndex:0,onClick:this.toggleTranscriptEditor,onKeyPress:this.toggleTranscriptEditor,className:"statusbar-transcript-editor statusbar-icon"},i.createElement("span",{className:"fa fa-xs fa-closed-captioning"}))):null,i.createElement("span",{ref:function(t){e.displayedText=t},style:{color:this.state.isSegment?"darkslategray":"black"},className:"statusbar-voice-text"}),this.state.showTranscriptEditor?i.createElement(ye.Z,{show:this.state.showTranscriptEditor,onHide:this.toggleTranscriptEditor,dialogClassName:"modal-100w"},i.createElement(ye.Z.Header,{closeButton:!0},i.createElement(ye.Z.Title,{as:"h3"},this.props.t("transcript"))),i.createElement(ye.Z.Body,{style:{height:.8*window.innerHeight}},i.createElement(ke.Z,{id:t.namespaceName+"-"+t.lessonName+"-transcript",defaultValue:n,allowSubmissions:!1,resetModal:{title:this.props.t("load-latest-transcript"),body:this.props.t("transcript-click-discard"),buttonLabel:this.props.t("confirm"),tooltip:this.props.t("load-latest-transcript"),notificationTitle:this.props.t("transcript-loaded"),notification:this.props.t("transcript-discard-notification"),icon:i.createElement("i",{className:"prosemirror-icon fa fa-closed-captioning"})},canLoadHTML:!1})),i.createElement(ye.Z.Footer,null,i.createElement(c.Z,{onClick:this.toggleTranscriptEditor},this.props.t("close")))):null)},t}(i.Component);Pe.propTypes={session:W().object.isRequired};var Ne=Pe,Te=n(867855),De=n(318967),Ie=n.n(De),Ae=n(210789),Re=n(392218),je=n(287013),Le=n.n(je),ze=n(294565),Be=n(295943),Ue=n.n(Be),Ve=n(240054),Fe=n.n(Ve),He=n(418823),We=n.n(He),Ge=n(996920),Ke=n(195065),qe=n(941695),Je=n(324711),$e=function(e,t){this.name=e,this.members=t},Ye=n(378456),Xe=JSON.parse('["daffodil","dahlia","daisy","dandelion","forget-me-not","foxglove","geranium","lily","orchid","pansy","poppy","primrose","rose","snowdrop","sunflower","tulip","waterlily","bluebell","buttercup","carnation","chrysanthemum","crocus","alder","ash","beech","birch","cedar","elm","fir","hazel","hawthorn","holly","lime","maple","oak","plane","pine","poplar","sycamore","weeping-willow","willow","yew","apple-tree","cherry-tree","chestnut-tree","coconut-tree","fig-tree","horse-chestnut-tree","olive-tree","pear-tree","plum-tree"]'),Qe=n(916035),et=Object.defineProperty,tt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,at=function(e,t,n){return t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},st=function(e,t){for(var n in t||(t={}))ot.call(t,n)&&at(e,n,t[n]);if(rt)for(var r,o=(0,Te.Z)(rt(t));!(r=o()).done;){n=r.value;it.call(t,n)&&at(e,n,t[n])}return e},lt=function(e,t){return tt(e,nt(t))},ct=function(e,t,n){return at(e,"symbol"!=typeof t?t+"":t,n),n},ut=s()("isle:group-manager"),dt={multiValue:function(e){return lt(st({},e),{boxShadow:"0 0 2px black",marginRight:"4px"})},control:function(e){return lt(st({},e),{borderRadius:"0 0 4px 4px"})}},pt={MultiValueLabel:function(e){return i.createElement(w.Z,{tooltip:e.data.value.email,placement:"bottom"},i.createElement("span",null,i.createElement("img",{className:"group-manager-profile-pic",alt:"User Profile",src:e.data.value.picture}),i.createElement(Re.c.MultiValueLabel,st({},e))))}};function mt(e,t){var n=e;if(!t)return n.filter((function(e){return!e.owner&&!e.exitTime&&Le()(e.email,"@")}));for(var r=[],o=0;o<n.length;o++){var i=n[o];!i.owner&&(0,Qe.Z)(t,i.email)&&r.push(i)}return r}function ft(e,t){var n=0;if(t)for(var r=0;r<e.length;r++){var o=e[r];o.owner||o.exitTime||!(0,Qe.Z)(t,o.email)||(n+=1)}else for(var i=0;i<e.length;i++){var a=e[i];a.owner||a.exitTime||!Le()(a.email,"@")||(n+=1)}return n}function ht(e){for(var t=[],n=e.responseVisualizerIds,r=0;r<n.length;r++){var o=n[r],i=e.responseVisualizers[o].ref.props.data.question;i=(0,ze.isPrimitive)(i)?i:Ie()(i),t.push(i+" ("+o+")")}return t}function gt(e,t){t=We()(t);for(var n={},r=Ue()(t.length/e),o=0;o<e;o++)n[o]=t.slice(r*o,r*(o+1));for(var i=r*e;i<t.length;i++){n[i%e].push(t[i])}return n}function vt(e){var t,n=e.nGroups,r=e.users,o=e.mode,i=e.progress,a=e.matching,s=Fe()(Xe,{size:n,replace:!1});switch(o){case"random":case"answers":t=gt(n,r);break;case"progress":t=function(e,t,n,r){var o={},i=Ue()(t.length/e);if(t=t.sort((function(e,t){return n[e.email]-n[t.email]})),"similar"===r)for(var a=t.length%e,s=0,l=0;s<e;s++){var c=i*s+l;s<a&&(l+=1);var u=i*(s+1)+l;o[s]=t.slice(c,u)}else{for(var d=0;d<e;d++)o[d]=[];for(var p=0,m=!1;t.length>0;)o[p].push(m?t.shift():t.pop()),p<e-1?p+=1:(p=0,m=!m)}return o}(n,r,i,a)}for(var l=[],c=0;c<s.length;c++)l[c]=new $e(s[c],t[c]);return l}var bt=function(e){function t(t){var n;return n=e.call(this,t)||this,ct((0,r.Z)(n),"handleGroupCreation",(function(){var e=n.context,t=vt({nGroups:n.state.nGroups,users:mt(e.userList,e.selectedCohort),mode:n.state.activeMode,progress:e.userProgress,matching:n.state.matching});e.createGroups(t)})),ct((0,r.Z)(n),"reuseLastGroups",(function(){n.context.createGroups(n.state.lastGroups)})),ct((0,r.Z)(n),"updateGroups",(function(){for(var e=n.context,t=e.allGroups,r=function(e){for(var r=n.state.toRemove[e].value,o=r.email,i=r.group,a=0;a<t.length;a++)if(t[a].name===i){t[a].members=t[a].members.filter((function(e){return e.email!==o}));break}},o=0;o<n.state.toRemove.length;o++)r(o);for(var i=function(r){for(var o=n.state.toAdd[r].value,i=0;i<t.length;i++){var a=t[i];if(a.name===o.group&&0===a.members.filter((function(e){return e.email===o.email})).length){var s=e.userList.filter((function(e){return e.email===o.email}));a.members.push(s[0]);break}}},a=0;a<n.state.toAdd.length;a++)i(a);e.deleteGroups(),e.createGroups(t),n.setState({toAdd:[],toRemove:[]})})),ct((0,r.Z)(n),"handleGroupDeletion",(function(){var e=n.context;e.log({id:"group-manager",type:_e.kK,value:!0},"members"),setTimeout(e.deleteGroups,6e4),n.setState({showCloseModal:!1})})),ct((0,r.Z)(n),"sendMessageToAll",(function(){var e=n.editorView.markdown;if(0!==e.length){e=J()(e,"\\\n","\n");for(var t=n.context,r=0;r<t.allGroups.length;r++){var o=t.allGroups[r].name;t.sendChatMessage(o,e)}n.setState({message:"",docId:n.state.docId+1})}})),ct((0,r.Z)(n),"toggleCloseConfirm",(function(){n.setState({showCloseModal:!n.state.showCloseModal})})),n.state={activeMode:"random",matching:"similar",nGroups:1,isClosing:!1,showCloseModal:!1,notAssigned:[],toRemove:[],toAdd:[],lastGroups:null,message:"",docId:0},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;ut("Component did mount...");var t=this.context;t&&(this.unsubscribe=t.subscribe((function(n,r){if(n===O.At&&t.allGroups.length>0&&!r.owner){if(!(0,Je.Z)(t.allGroups,r)){var o=e.state.notAssigned.slice(),a=t.server+"/thumbnail/"+r.picture,s={value:{email:r.email,picture:a},label:r.name};o.push(s),e.setState({notAssigned:o})}}else if(n===O.vB)t.removeNotification(e.closeNotification),e.setState({isClosing:!1,lastGroups:r});else if(n===O.Wh&&r.type===_e.kK)e.closeNotification=t.addNotification({title:e.props.t("groups-close-soon"),message:e.props.t("groups-close-soon-instructor-message"),level:"info",position:"tr",dismissible:"none",autoDismiss:0,children:i.createElement(Ge.Z,{style:{position:"relative"},duration:60,active:!0})}),e.setState({isClosing:!0});else if(n===O.WF){var l=e.state.notAssigned.filter((function(e){for(var n=0;n<t.allGroups.length;n++)for(var r=t.allGroups[n].members,o=0;o<r.length;o++)if(r[o].email===e.value.email)return!1;return!0}));e.setState({notAssigned:l})}else if(n===O.At||n===O.c_)e.forceUpdate();else if(n===O.vu){var c=e.state.notAssigned.filter((function(e){return e.value.email!==r}));e.setState({notAssigned:c})}})))},n.componentWillUnmount=function(){ut("Component will unmount..."),this.unsubscribe()},n.renderModeOptions=function(){var e=this,t=i.createElement(qe.Z,{options:["similar","dissimilar"],value:this.state.matching,inline:!0,onChange:function(t){e.setState({matching:t})},style:{width:150}}),n=i.createElement(qe.Z,{options:ht(this.context),inline:!0,style:{width:412}}),r=this.props.t;switch(this.state.activeMode){case"progress":return i.createElement("div",null,i.createElement("p",null,r("create-groups-pairing-students"),t,"."));case"answers":return i.createElement("div",null,i.createElement("p",null,r("create-groups-with-answers"),t,i.createElement("br",null),r("to-the-question"),": ",n));default:return i.createElement("div",null,i.createElement("p",null,this.props.t("random-groups-description")))}},n.renderGroups=function(){for(var e=this,t=this.context,n=[],r=function(r){var o=t.allGroups[r],a=o.name,s=o.members.map((function(e){var n=t.server+"/thumbnail/"+e.picture;return{value:{email:e.email,picture:n,group:a},label:e.name}}));n[r]=i.createElement("div",{key:r},i.createElement("h3",{className:"group-manager-header"},i.createElement("span",{className:"group-manager-header-name"},e.props.t("group")," ",a),e.props.video?i.createElement(k.Z,{showTooltip:!1,for:a,subject:a,style:{float:"right",marginTop:-2,marginLeft:5}}):null,i.createElement(S.Z,{showTooltip:!1,for:a,style:{float:"right",marginTop:-2}})),i.createElement(Ae.Z,{components:pt,isMulti:!0,isClearable:!1,defaultValue:s,options:e.state.notAssigned,styles:dt,menuPlacement:"bottom",menuShouldScrollIntoView:!1,onChange:function(t,n){if("remove-value"===n.action){var r=e.state.notAssigned.slice();r.push(n.removedValue);var o=e.state.toRemove.slice();o.push(n.removedValue),e.setState({notAssigned:r,toRemove:o})}else if("select-option"===n.action){var i=e.state.toAdd.slice();n.option.value.group=a,i.push(n.option);var s=e.state.notAssigned.filter((function(e){return e.value.email!==n.option.value.email}));e.setState({notAssigned:s,toAdd:i})}}}))},o=0;o<t.allGroups.length;o++)r(o);return this.state.notAssigned.length>0&&n.push(i.createElement("span",{className:"group-manager-not-assigned-warning"},this.props.t("nonassigned-students",{n:this.state.notAssigned.length}))),n},n.renderBody=function(){var e=this,t=this.context,n=ft(t.userList,t.selectedCohort),r=Ue()(n/this.state.nGroups),o="("+this.props.t("group-sizes")+": "+r;return n%this.state.nGroups!=0?o+="-"+(r+1)+")":o+=")",t.allGroups.length>0?i.createElement(i.Fragment,null,this.renderGroups(),i.createElement("div",{className:"group-manager-editor-wrapper"},i.createElement(ae.Z,{className:"group-manager-textarea cancel",showStatusBar:!1,defaultValue:this.state.message,showColorPicker:!1,menu:{marks:se.EI,wraps:se.Uy,insert:[se.$T[0],se.$T[1],se.$T[5]]},ref:function(t){e.editorView=t},onKeyDown:function(t,n){n.stopPropagation(),"Enter"!==n.key||n.shiftKey||(n.preventDefault(),e.sendMessageToAll())}}))):i.createElement(i.Fragment,null,i.createElement(Ye.Z,{id:"group-manager-cohort-select",label:this.props.t("pair-users-from"),session:this.context,t:this.props.t}),i.createElement(Ke.Z,{legend:this.props.t("number-of-groups"),value:this.state.nGroups,min:1,max:Ue()(U()(n/2+1e-9),99),onChange:function(t){e.setState({nGroups:t})},inline:!0,inputStyle:{width:50}}),i.createElement("span",{className:"title"},o),i.createElement("hr",null),i.createElement("div",null,i.createElement(w.Z,{tooltip:this.props.t("random-assignment"),placement:"bottom"},i.createElement(c.Z,{active:"random"===this.state.activeMode,size:"lg",variant:"outline-secondary",onClick:function(){"random"!==e.state.activeMode&&e.setState({activeMode:"random"})},"aria-label":this.props.t("random-assignment")},i.createElement("span",{className:"fa fa-dice"}))),i.createElement(w.Z,{tooltip:this.props.t("match-by-progress"),placement:"bottom"},i.createElement(c.Z,{active:"progress"===this.state.activeMode,size:"lg",variant:"outline-secondary",style:{marginLeft:6},onClick:function(){"progress"!==e.state.activeMode&&e.setState({activeMode:"progress"})},"aria-label":this.props.t("match-by-progress")},i.createElement("span",{className:"fa fa-trophy"}))),i.createElement(w.Z,{tooltip:this.props.t("match-by-answers"),placement:"bottom"},i.createElement(c.Z,{active:"answers"===this.state.activeMode,disabled:g()(t.responseVisualizers),size:"lg",variant:"outline-secondary",style:{marginLeft:6},onClick:function(){"answers"!==e.state.activeMode&&e.setState({activeMode:"answers"})},"aria-label":this.props.t("match-by-answers")},i.createElement("span",{className:"fa fa-poll"})))),i.createElement("br",null),this.renderModeOptions())},n.renderFooter=function(){var e=this.context,t=ft(e.userList);return e.allGroups.length>0?i.createElement(i.Fragment,null,i.createElement(w.Z,{tooltip:this.props.t("broadcast-message-tooltip"),placement:"bottom"},i.createElement(c.Z,{onClick:this.sendMessageToAll},this.props.t("broadcast-message"))),i.createElement(w.Z,{tooltip:this.props.t("close-groups-tooltip"),placement:"bottom"},i.createElement(c.Z,{variant:"danger",disabled:this.state.isClosing,onClick:this.toggleCloseConfirm,style:{float:"right"}},this.props.t("close-groups"))),this.state.toAdd.length>0||this.state.toRemove.length>0?i.createElement(w.Z,{tooltip:this.props.t("update-groups-tooltip"),placement:"bottom"},i.createElement(c.Z,{onClick:this.updateGroups,style:{float:"right",marginRight:6}},this.props.t("update-groups"))):null):i.createElement(i.Fragment,null,i.createElement(w.Z,{tooltip:this.props.t("reopen-last-groups-tooltip"),placement:"bottom",show:this.state.lastGroups},i.createElement(c.Z,{variant:"secondary",disabled:!this.state.lastGroups,onClick:this.reuseLastGroups},this.props.t("reopen-last-groups"))),i.createElement(w.Z,{tooltip:this.props.t("create-groups-tooltip"),placement:"bottom",show:t>0},i.createElement(c.Z,{disabled:0===t,onClick:this.handleGroupCreation,style:{float:"right"}},this.props.t("create-groups"))))},n.render=function(){return this.props.active?i.createElement(i.Fragment,null,i.createElement(re.Z,{cancel:".card-body",default:{x:.4*window.innerWidth}},i.createElement(T.Z,{minimizable:!0,trapFocus:!0,header:i.createElement("span",null,i.createElement("span",{className:"fa fa-xs fa-user-friends",style:{marginRight:5}}),this.props.t("group-manager")),onHide:this.props.onHide,style:{width:600},bodyStyle:{maxHeight:"75vh"},footer:this.renderFooter()},this.renderBody())),i.createElement(Ee,{show:this.state.showCloseModal,close:this.toggleCloseConfirm,title:this.props.t("close-groups"),message:this.props.t("close-groups-confirm"),onConfirm:this.handleGroupDeletion,t:this.props.t})):null},t}(i.Component);bt.contextType=C.Z,bt.propTypes={video:W().bool},bt.defaultProps={video:!0};var yt=(0,l.Z)("internal/statusbar")(bt),wt=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(n,r){n===O.WF?e.forceUpdate():n===O.vB?(t.removeNotification(e.closeNotification),e.forceUpdate()):n===O.Wh&&r.type===_e.kK&&(e.closeNotification=t.addNotification({title:e.props.t("groups-close-soon"),message:e.props.t("groups-close-soon-message"),level:"info",position:"tr",dismissible:"none",autoDismiss:0,children:i.createElement(Ge.Z,{style:{position:"relative"},duration:60,active:!0})}))}))},n.componentWillUnmount=function(){this.unsubscribe()},n.renderMembers=function(){var e=this.context,t=e.group.members;return i.createElement($.Z,null,t.map((function(t,n){var r=e.server+"/thumbnail/"+t.picture;return i.createElement(Y.Z,{className:"group-client-list-item",key:n},i.createElement("img",{className:"group-client-user-picture",alt:"User Profile",src:r,height:"40px",width:"40px"}),i.createElement("span",null,t.name))})))},n.render=function(){var e=this.context;return e.group?i.createElement(re.Z,{default:{x:window.innerWidth-280}},i.createElement(T.Z,{minimizable:!0,header:i.createElement("span",null,i.createElement("span",{className:"fa fa-xs fa-user-friends",style:{marginRight:5}}),i.createElement("span",{className:"group-name"},this.props.t("group")," ",e.group.name)),className:"group-client-panel"},this.renderMembers(),this.props.video?i.createElement(k.Z,{for:e.group.name}):null)):null},t}(i.Component);wt.contextType=C.Z,wt.propTypes={video:W().bool},wt.defaultProps={video:!0};var Et=(0,l.Z)("internal/statusbar")(wt),Zt=s()("isle:statusbar-score");function _t(e){e.stopPropagation()}var kt=function(e){function t(t,n){var r;return(r=e.call(this,t)||this).state={score:n.get("score"),isReceiving:!1,addition:4},r}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;Zt("Component did mount...");var t=this.context;t&&(this.unsubscribe=t.subscribe((function(t,n){t===O.Zh&&e.addScore(n)})))},n.componentWillUnmount=function(){Zt("Component will unmount..."),this.unsubscribe()},n.addScore=function(e){var t=this;this.setState({addition:e,isReceiving:!0}),setTimeout((function(){var n=t.state.score+e;t.setState({score:n,isReceiving:!1})}),2e3)},n.getAnimation=function(){return this.state.isReceiving&&this.rect?i.createElement("div",{className:"receiving-score",style:{left:this.rect.x,top:this.rect.y,transformOrigin:this.rect.width/2+"px "+this.rect.height/2+"px"}},"+",this.state.addition,i.createElement("div",{className:"receiving-score-outer-circle2"}),i.createElement("div",{className:"receiving-score-outer-circle"})):null},n.render=function(){var e=this;return i.createElement(i.Fragment,null,i.createElement(w.Z,{placement:"bottom",tooltip:this.props.t("achievement-points")},i.createElement("div",{className:"statusbar-score",role:"button",ref:function(t){if(t){var n=t.getBoundingClientRect();n&&n.x>0&&n.y>0&&(e.rect=n)}},onClick:_t,onKeyPress:_t,tabIndex:0},this.state.score)),this.getAnimation())},t}(i.Component);kt.contextType=C.Z;var St=kt,xt=Object.defineProperty,Ct=function(e,t,n){return function(e,t,n){t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Ot=(0,i.lazy)((function(){return Promise.all([n.e(3312),n.e(9553),n.e(4851),n.e(9415),n.e(6823),n.e(722),n.e(111)]).then(n.bind(n,691121))})),Mt=s()("isle:statusbar");function Pt(e){var t=(new Date).getTime()-e.startTime;return t=p()(t/6e4)}function Nt(e){e.stopPropagation()}function Tt(e){var t=document.createElement("div");t.setAttribute("id","blackscreen"),document.getElementById("Lesson").appendChild(t);var n=document.createElement("div");n.setAttribute("id","blackscreen-notice"),n.innerText=e,t.append(n)}var Dt=function(e){function t(t,n){var o;return o=e.call(this,t)||this,Ct((0,r.Z)(o),"closeSignup",(function(){o.setState({visibleSignup:!1})})),Ct((0,r.Z)(o),"closeLogin",(function(){o.setState({visibleLogin:!1})})),Ct((0,r.Z)(o),"closeLogout",(function(){o.setState({visibleLogout:!1})})),Ct((0,r.Z)(o),"toggleBarVisibility",(function(e){e&&e.stopPropagation();var t=o.context;t.togglePresentationView(),Mt("Toggle visibility of statusbar..."),t.config.hideStatusBar||o.setState({showStatusBar:!o.state.showStatusBar})})),Ct((0,r.Z)(o),"toggleGroupManager",(function(e){e&&e.stopPropagation(),o.setState({showGroupManager:!o.state.showGroupManager})})),Ct((0,r.Z)(o),"toggleBlackScreen",(function(e){e&&e.stopPropagation(),Mt("Toggling blackout mode...");var t=document.getElementById("blackscreen"),n=o.context;t?(t.parentElement.removeChild(t),n.log({id:"statusbar",type:_e.TN,value:!1},"members")):(Tt(n.isOwner()?o.props.t("blackout-intro-owner",{hotkey:"F8"}):o.props.t("blackout-intro-user")),n.log({id:"statusbar",type:_e.TN,value:!0},"members"))})),Ct((0,r.Z)(o),"toggleBar",(function(){o.state.hidden?((0,x.Z)(o.statusbar,"top",0,300),o.statusbar.style.opacity=1,o.setState({hidden:!1})):((0,x.Z)(o.statusbar,"top",-32,300),o.statusbar.style.opacity=.95,o.setState({hidden:!0}))})),Ct((0,r.Z)(o),"onMouseOver",(function(){o.state.hidden&&(o.statusbar.style.opacity=1)})),Ct((0,r.Z)(o),"onMouseOut",(function(){o.state.hidden&&(o.statusbar.style.opacity=.95)})),Ct((0,r.Z)(o),"login",(function(e){e.stopPropagation(),o.setState({visibleLogin:!0})})),Ct((0,r.Z)(o),"signup",(function(e){e.stopPropagation(),o.setState({visibleSignup:!0})})),Ct((0,r.Z)(o),"logout",(function(e){e.stopPropagation(),o.setState({visibleLogout:!0})})),Ct((0,r.Z)(o),"handleLogout",(function(){o.context.logout(),o.closeLogout()})),Ct((0,r.Z)(o),"handleBarClick",(function(e){o.toggleBar()})),Ct((0,r.Z)(o),"handleBarKeyPress",(function(){o.toggleBar()})),Ct((0,r.Z)(o),"toggleProgress",(function(){var e=o.context;e.setProgress(),o.state.isProgressLeaving||e.isOwner()||(o.state.showProgressBar?o.progressTimeout=setTimeout((function(){o.setState({showProgressBar:!1,isProgressLeaving:!1,duration:Pt(o.context)}),o.progressTimeout=null}),12e3):o.setState({showProgressBar:!0,duration:Pt(o.context)}))})),Ct((0,r.Z)(o),"jumpToUnfinished",(function(e){Mt("Jump to next unfinished question..."),e.stopPropagation();var t=o.context.unfinished;if(f()(t)){var n=t[0];if(n){var r=document.getElementById(n);if(!r)return;if((0,Ze.Z)(r)){var i=r.cloneNode(!0),a=document.createElement("div");a.id="unfinished-container",i.id="unfinished-elem",i.classList.add("focus-glow"),a.append(i),document.body.appendChild(a),setTimeout((function(){var e=document.getElementById("unfinished-container");e&&e.parentNode.removeChild(e)}),4e3)}else r.classList.add("focus-glow"),r.scrollIntoView(),setTimeout((function(){r.classList.remove("focus-glow")}),4e3)}}})),Ct((0,r.Z)(o),"preventPropagationForUsers",(function(e){o.context.anonymous||e.stopPropagation()})),o.state={visibleSignup:!1,visibleLogin:!1,visibleLogout:!1,showGroupManager:!1,showStatusBar:!n.config.hideStatusBar,showProgressBar:!1,isProgressLeaving:!1,progress:0,duration:"0",hidden:!0},o}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=!1,n=this.props.t,r=this.context;this.unsubscribe=r.subscribe((function(o,a){if(setTimeout((function(){var o;!t&&r.anonymous&&r.live&&(o=e.context,!_.Z&&e.state.showStatusBar&&o.addNotification({title:n("login"),message:n("please-connect-message"),level:"success",autoDismiss:o.config.noLoginDismiss?0:15,position:"tl",children:i.createElement("div",{style:{marginBottom:"30px"}},!1!==o.settings.allowUserRegistrations?i.createElement(c.Z,{id:"statusbar-signup-button",size:"sm",style:{float:"right",marginRight:"10px"},onClick:e.signup},n("signup")):null,i.createElement(c.Z,{id:"statusbar-login-button",size:"sm",variant:"primary",style:{float:"right",marginRight:"10px"},onClick:e.login},n("login"))),onAdd:function(){},onRemove:function(){}}),t=!0)}),3e3),o===O.Gq)e.setState({progress:p()(100*Number(a))});else if(o===O.tf||o===O.Zh){var s={showProgressBar:!0,isProgressLeaving:!0};o===O.tf&&(s.progress=p()(100*Number(a))),e.setState(s),e.progressTimeout&&(clearTimeout(e.progressTimeout),e.progressTimeout=null),e.progressTimeout=setTimeout((function(){e.setState({showProgressBar:!1,isProgressLeaving:!1,duration:Pt(r)}),e.progressTimeout=null}),4e3)}else if(o===O.SC||o===O.Fw||o===O.E7||o===O.OG||o===O.YQ)e.forceUpdate();else if(o===O.Wh&&a.type===_e.TN&&a.email!==r.user.email)if(a.value)Tt(r.isOwner()?e.props.t("blackout-intro-owner",{hotkey:"F8"}):e.props.t("blackout-intro-user"));else{var l=document.getElementById("blackscreen");l&&l.parentElement.removeChild(l)}else o!==O.WF||e.state.showGroupManager||e.toggleGroupManager()})),this.renderTextInterval=setInterval(this.renderRecordedText,1e3)},n.componentWillUnmount=function(){this.unsubscribe(),this.renderTextInterval&&clearInterval(this.renderTextInterval),this.progressTimeout&&clearTimeout(this.progressTimeout)},n.renderUpperBar=function(){if(this.state.hidden)return null;var e=this.props.t,t=this.context;return t.anonymous?i.createElement("div",null,i.createElement(c.Z,{size:"sm",className:"statusbar-button",variant:"outline-secondary",style:{position:"absolute",right:"-20px"},onClick:this.login,disabled:!t.live},e("login"))):i.createElement(i.Fragment,null,i.createElement("a",{href:t.server,target:"_blank",rel:"noopener noreferrer",id:"statusbar-dashboard-button",size:"sm",className:"statusbar-button",variant:"outline-secondary",style:{float:"right",marginRight:"60px"}},e("goto-dashboard")),i.createElement(c.Z,{size:"sm",className:"statusbar-button",variant:"outline-secondary",style:{position:"absolute",right:"-20px"},onClick:this.logout},e("logout")))},n.render=function(){var e=this,t=this.context,n=this.props.t,r=100===this.state.progress,o=t.isOwner()||_.Z,a=t.user.picture,s=i.createElement(i.Fragment,null,a?i.createElement("img",{className:"statusbar-profile",alt:"User Profile Pic",src:a,onClick:Nt}):null,i.createElement(w.Z,{placement:"bottom",tooltip:n("time-spent-tooltip")},i.createElement("div",{className:"progress-time",onClick:Nt},i.createElement("i",{className:"fas fa-clock"})," ",this.state.duration," MIN"))),l=t.namespaceName+"-"+t.lessonName;return i.createElement(i.Fragment,null,i.createElement(be,null),i.createElement(z,null),o?i.createElement(yt,{active:this.state.showGroupManager,onHide:this.toggleGroupManager}):i.createElement(Et,null),i.createElement("div",null,i.createElement("div",{className:"statusbar unselectable",role:"button",tabIndex:0,ref:function(t){e.statusbar=t},onClick:this.handleBarClick,onKeyPress:this.handleBarKeyPress,onMouseOver:this.onMouseOver,onFocus:this.onMouseOver,onMouseOut:this.onMouseOut,onBlur:this.onMouseOut,style:{top:"-32px",display:this.state.showStatusBar?null:"none"}},i.createElement(w.Z,{tooltip:this.state.hidden?n("click-to-expand"):n("click-to-collapse"),placement:"left"},i.createElement("div",{className:"statusbar-left"})),i.createElement("div",{className:"statusbar-middle"},i.createElement(Ne,{session:this.context,t:n}),o?i.createElement(w.Z,{placement:"bottom",tooltip:n("presentation-mode-tooltip")+" (F7)"},i.createElement("span",{role:"button",tabIndex:0,onClick:this.toggleBarVisibility,onKeyPress:this.toggleBarVisibility,className:"statusbar-presentation-mode statusbar-icon","aria-label":n("presentation-mode-label")},i.createElement("span",{className:"fa fa-xs fa-eye-slash"}))):null,o?i.createElement(w.Z,{placement:"bottom",tooltip:n("blackout-tooltip")+" (F8)"},i.createElement("span",{role:"button",tabIndex:0,"aria-label":n("blackout-label"),onClick:this.toggleBlackScreen,onKeyPress:this.toggleBlackScreen,className:"statusbar-blackscreen-mode statusbar-icon"},i.createElement("span",{className:"fa fa-xs fa-stop"}))):null,o?i.createElement(w.Z,{placement:"bottom",tooltip:n("group-manager")+" (G)"},i.createElement("span",{role:"button",tabIndex:0,"aria-label":n("group-manager"),onClick:this.toggleGroupManager,onKeyPress:this.toggleGroupManager,className:"statusbar-group-manager statusbar-icon"},i.createElement("span",{className:"fa fa-xs fa-user-friends"}))):null,t.cohort?i.createElement("div",{className:"statusbar-cohort"},t.cohort):null,i.createElement(w.Z,{placement:"bottom",tooltip:t.live?n("connection-active"):n("connection-broken")},i.createElement("div",{className:"statusbar-presence",style:{backgroundColor:t.live?"rgb(130, 224, 160)":"rgb(209, 107, 71)"}},i.createElement("div",{className:"statusbar-inner-presence"}))),i.createElement("div",{role:"button",tabIndex:0,style:{cursor:this.context.anonymous?"pointer":"help"},className:"statusbar-username",onClick:this.preventPropagationForUsers,onKeyPress:this.preventPropagationForUsers,onMouseEnter:this.toggleProgress,onFocus:this.toggleProgress,onMouseOut:this.toggleProgress,onBlur:this.toggleProgress,"aria-label":n("user-progress")},t.anonymous?n("anonymous")+" "+t.anonymousIdentifier:t.user.name),t.config.hideVideoChat?null:i.createElement(k.Z,{for:l,buttonVariant:"link",buttonLabel:i.createElement("i",{className:"fa fa-xs fa-video"}),tooltipPlacement:"bottom",tooltip:n("video-chat"),className:"statusbar-icon statusbar-video-chat",onClick:Nt}),t.config.hideTextChat?null:i.createElement(S.Z,{for:l,buttonVariant:"link",anonymousSubmissions:!0,buttonLabel:i.createElement("i",{className:"fas fa-comments"}),tooltipPlacement:"bottom",tooltip:n("text-chat"),className:"statusbar-icon statusbar-text-chat",onClick:Nt}),this.renderUpperBar(),i.createElement("div",{className:"statusbar-text"},"ISLE")),i.createElement(w.Z,{tooltip:this.state.hidden?n("click-to-expand"):n("click-to-collapse"),placement:"right"},i.createElement("div",{className:"statusbar-right"})),i.createElement("div",{className:"statusbar-progress "+(this.state.isProgressLeaving?"progress-fade-out":"")+" ",style:{display:!t.config.hideProgressBar&&this.state.showProgressBar?"inherit":"none"}},i.createElement(y.Z,{user:!0,banner:null},s,g()(t.responseVisualizers)?i.createElement("div",{className:"outer-statusbar-progress-bar"}):i.createElement(w.Z,{placement:"bottom",tooltip:n(r?"completed":"preview-unfinished"),show:f()(t.unfinished)},i.createElement("div",{className:"outer-statusbar-progress-bar"},i.createElement(u.Z,{label:n("completion-rate")+": "+this.state.progress+"%",variant:"success",now:this.state.progress,style:{animation:"anim-fade-in 0.7s",border:"solid 1px darkgrey"},onClick:this.jumpToUnfinished}))),i.createElement(St,{t:n})))),this.state.showStatusBar||!o&&!_.Z?null:i.createElement(w.Z,{placement:"bottom",tooltip:n("presentation-mode-exit")+" (F7)"},i.createElement("span",{className:"statusbar-presentation-mode-lone-icon",role:"button",tabIndex:0,onClick:this.toggleBarVisibility,onKeyPress:this.toggleBarVisibility},i.createElement("span",{className:"fa fa-xs fa-eye-slash"})))),i.createElement(i.Suspense,{fallback:null},i.createElement(y.Z,{owner:!0,banner:null},i.createElement(Ot,null))),this.state.visibleLogin?i.createElement(b.Z,{show:this.state.visibleLogin,onClose:this.closeLogin,onShowSignup:this.signup}):null,this.state.visibleSignup?i.createElement(v.Z,{show:this.state.visibleSignup,onClose:this.closeSignup}):null,this.state.visibleLogout?i.createElement(Ee,{show:this.state.visibleLogout,close:this.closeLogout,title:n("logout"),message:n("confirm-logout"),onConfirm:this.handleLogout,t:n}):null,i.createElement(E.Z,{actions:{F7:this.toggleBarVisibility,F8:this.toggleBlackScreen,g:this.toggleGroupManager}}),r&&!t.config.hideProgressBar?i.createElement(Z.Z,{title:"100%",upper:n("congratulations"),lower:n("lesson-completed"),upperArc:120,lowerArc:120,noOrnaments:!0,removable:!0,style:{position:"fixed",right:"0px",bottom:"5%",transform:"rotate(-17deg) scale("+window.innerWidth/1920+")",transformOrigin:"100% 100%",animation:"anim-fade-in 1s forwards",background:"linear-gradient(to right, white, silver, white)",fontFamily:"Courier",zIndex:1002},innerStyle:{background:"linear-gradient(to right, ghostwhite, #ffc107, ghostwhite, #ffc107, silver)"}}):null)},t}(i.Component);Dt.contextType=C.Z;var It=(0,l.Z)("internal/statusbar")(Dt)},454245:function(e,t,n){var r=(0,n(708717).Z)((function(){return n.e(2273).then(n.bind(n,926501))}));t.Z=r},371538:function(e,t){t.Z=function(e,t,n,r){if(!e.selection||!e.doc||!n)return e;var o=e.selection,i=o.empty,a=o.$cursor,s=o.ranges;if(i&&!a||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,a=o.$to,s=0===i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,a.pos,(function(e){return!s&&(s=e.inlineContent&&e.type.allowsMarkType(n),!0)})),s)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if("object"==typeof i)return i.v}return!1}(e.doc,s,n))return e;if(a)return e=e.removeStoredMark(n),r?e.addStoredMark(n.create(r)):e;for(var l=!1,c=0;!l&&c<s.length;c++){var u=s[c],d=u.$from,p=u.$to;l=e.doc.rangeHasMark(d.pos,p.pos,n)}for(var m=0;m<s.length;m++){var f=s[m],h=f.$from,g=f.$to;l&&(e=e.removeMark(h.pos,g.pos,n)),r&&(e=e.addMark(h.pos,g.pos,n.create(r)))}return e}},286618:function(e,t,n){n.d(t,{yz:function(){return s},wM:function(){return l}});var r=n(887757),o=n.n(r),i=n(516037),a=new i.PluginKey("cursor-parking");t.ZP=function(){return new i.Plugin({key:a,state:{init:function(){return{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null,pos:null}},apply:function(e,t){var n=e.getMeta(this);return n?n.inCursorParking?{inCursorParking:!0,pos:n.pos,storedMarks:e.storedMarks,bookmarkToRestore:e.selection.getBookmark()}:{inCursorParking:!1,pos:n.pos,storedMarks:null,bookmarkToRestore:null}:e.docChanged&&t.inCursorParking&&t.bookmarkToRestore?{inCursorParking:!0,pos:null,storedMarks:t.storedMarks,bookmarkToRestore:t.bookmarkToRestore.map(e.mapping)}:t}},view:function(){var e=document.createElement("cursor-parking");e.setAttribute("style","width:0px;height:0px;position:fixed;top:50%,left:50%;"),e.setAttribute("tabIndex","-1"),e.setAttribute("contenteditable","true");var t=function(){e.innerHTML="<div><br/></div>"};return t(),document.body.appendChild(e),{update:function(n,r){var o=a.getState(r),s=a.getState(n.state);if(!o.inCursorParking&&s.inCursorParking&&function(){var t=document.createRange();t.selectNodeContents(e.firstChild);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}(),o.inCursorParking&&!s.inCursorParking){var l=n.dispatch,c=n.state.tr;if(o.bookmarkToRestore&&c.setSelection(o.bookmarkToRestore.resolve(c.doc)),o.storedMarks&&c.setStoredMarks(o.storedMarks),n.focus(),s.pos){var u=s.pos;c=c.setSelection(i.TextSelection.create(c.doc,u,u))}else l(c);t()}},destroy:function(){e.parentNode.removeChild(e)}}}})};var s=function(e,t){return n=void 0,r=null,i=o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.dispatch(e.state.tr.setMeta(a,{inCursorParking:!0,pos:t})),n.next=3,new Promise((function(e){return setTimeout(e,0)}));case 3:e.dispatch(e.state.tr.setMeta(a,{inCursorParking:!1,pos:t}));case 4:case"end":return n.stop()}}),n)})),new Promise((function(e,t){var o=function(e){try{s(i.next(e))}catch(n){t(n)}},a=function(e){try{s(i.throw(e))}catch(n){t(n)}},s=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(o,a)};s((i=i.apply(n,r)).next())}));var n,r,i},l=function(e){e.dispatch(e.state.tr.setMeta(a,{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null,pos:null}))}},685261:function(e,t,n){n.d(t,{NV:function(){return m},ud:function(){return f}});var r=n(497326),o=n(894578),i=n(516037),a=n(506565),s={name:"CursorPlaceholderPlugin"},l=null,c={state:{init:function(){return a.EH.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(!n)return t;if(n.add){var r=document.createElement("editor-cursor-placeholder");r.className="editor-cursor-placeholder";var o=a.p.widget(n.add.pos,r,{id:s});t=t.add(e.doc,[o])}else if(n.remove){var i=t.find(null,null,d);t=t.remove(i)}return t}},props:{decorations:function(e){return l?l.getState(e):null}}},u=function(e){function t(){var t;return t=e.call(this,c)||this,l?l||(0,r.Z)(t):(l=(0,r.Z)(t),t)}return(0,o.Z)(t,e),t}(i.Plugin);function d(e){return e.id===s}function p(e){if(!l)return null;var t=l.getState(e).find(null,null,d);return(t.length?t[0].from:null)||null}function m(e){var t=l,n=e.tr;return t&&n.selection?(null===p(e)&&(n.selection.empty||(n=n.deleteSelection()),n=n.setMeta(t,{add:{pos:n.selection.from}})),n):n}function f(e){var t=l,n=e.tr;return t?(null!==p(e)&&(n=n.setMeta(t,{remove:{}})),n):n}t.ZP=u},654603:function(e,t,n){function r(e,t,n,r){for(var o=t,i=function(e){return e.type===r},a=null,s=null,l=null;o<=n;){var c=e.nodeAt(o);if(!c||!c.marks)return null;var u=c.marks.find(i);if(!u)return null;if(a&&u!==a)return null;s=s||c,a=a||u,l=c,o++}var d=t,p=n,m=0;for(o=t-1;o>m;){var f=e.nodeAt(o),h=f&&f.marks.find(i);if(!h||h!==a)break;d=o,s=f,o--}for(o=n+1,m=e.nodeSize-2;o<m;){var g=e.nodeAt(o),v=g&&g.marks.find(i);if(!v||v!==a)break;p=o,l=g,o++}return{mark:a,from:{node:s,pos:d},to:{node:l,pos:p}}}n.d(t,{Z:function(){return r}})},970693:function(e,t,n){var r=n(202784),o={alignLeft:r.createElement("i",{className:"prosemirror-icon fas fa-align-left"}),alignCenter:r.createElement("i",{className:"prosemirror-icon fas fa-align-center"}),alignRight:r.createElement("i",{className:"prosemirror-icon fas fa-align-right"}),alignJustify:r.createElement("i",{className:"prosemirror-icon fas fa-align-justify"}),annotation:r.createElement("i",{className:"prosemirror-icon fas fa-comment"}),blockquote:r.createElement("i",{className:"prosemirror-icon fas fa-quote-left"}),bold:r.createElement("i",{className:"prosemirror-icon fas fa-bold"}),bullet_list:r.createElement("i",{className:"prosemirror-icon fas fa-list-ul"}),code_block:r.createElement("i",{className:"prosemirror-icon fas fa-file-code"}),code:r.createElement("i",{className:"prosemirror-icon fas fa-code"}),color:r.createElement("i",{className:"prosemirror-icon fas fa-palette"}),editTable:r.createElement("i",{className:"prosemirror-icon fas fa-table"}),em:r.createElement("i",{className:"prosemirror-icon fas fa-italic"}),error:r.createElement("i",{className:"prosemirror-icon fas fa-bug"}),fullscreen:r.createElement("i",{className:"prosemirror-icon fas fa-expand"}),guides:r.createElement("i",{className:"prosemirror-icon fa fa-question-circle"}),history:r.createElement("i",{className:"prosemirror-icon fas fa-history"}),insert:r.createElement("i",{className:"prosemirror-icon fa fa-plus-square"}),link:r.createElement("i",{className:"prosemirror-icon fa fa-link"}),open:r.createElement("i",{className:"prosemirror-icon fa fa-folder-open"}),ordered_list:r.createElement("i",{className:"prosemirror-icon fas fa-list-ol"}),paragraph:r.createElement("i",{className:"prosemirror-icon fas fa-paragraph"}),pdf:r.createElement("i",{className:"prosemirror-icon fas fa-file-pdf"}),redo:r.createElement("i",{className:"prosemirror-icon fas fa-redo"}),reset:r.createElement("i",{className:"prosemirror-icon fa fa-eraser"}),save:r.createElement("i",{className:"prosemirror-icon fa fa-save"}),selectParent:r.createElement("i",{className:"prosemirror-icon far fa-object-group"}),strikethrough:r.createElement("i",{className:"prosemirror-icon fas fa-strikethrough"}),strong:r.createElement("i",{className:"prosemirror-icon fas fa-bold"}),submit:r.createElement("i",{className:"prosemirror-icon fa fa-share-square"}),subscript:r.createElement("i",{className:"prosemirror-icon fas fa-subscript"}),table:r.createElement("i",{className:"prosemirror-icon fas fa-table"}),superscript:r.createElement("i",{className:"prosemirror-icon fas fa-superscript"}),underline:r.createElement("i",{className:"prosemirror-icon fas fa-underline"}),undo:r.createElement("i",{className:"prosemirror-icon fas fa-undo"})};t.Z=o},743766:function(e,t,n){n.d(t,{q:function(){return h}});var r=n(894578),o=n(516037),i=n(506565),a=n(409961),s=n.n(a),l=n(77461),c=n(188777),u=(0,l.Z)("image_upload"),d=new Set(["image/jpeg","image/gif","image/png","image/jpg"]),p=new Array(4).join('<div class="editor-image-upload-placeholder-child"></div>');function m(e){return e instanceof g}function f(e){return e&&d.has(e.type)}function h(e,t,r){var i=e.state,a=e.readOnly,l=e.disabled,d=i.schema,p=i.plugins;if(a||l)return!1;var h=d.nodes.image;if(!h)return!1;var g=Array.from(t).filter(f);if(!g.length)return!1;var v=p.find(m);if(!v)return!1;var b,y={debugId:u()},w=(b=function(){var t=function(t){var n=function(e,t,n){var r=e.getState(t).find(null,null,(function(e){return e.id===n}));return r.length?r[0].from:null}(v,e.state,y),r=e.state.tr;if(!n||e.readOnly||e.disabled)g.length=0;else{var o=h.create(t);r=r.replaceWith(n,n,o)}g.length?w():r=r.setMeta(v,{remove:{id:y}}),e.dispatch(r)},r=g.shift();if(s()(r))throw new Error("unexpected null value");var o=n.g.session;if(o.server&&o.uploadFile){var i=new FormData;i.append("file",r),o.uploadFile({formData:i,callback:function(e,n){return e?t({src:null}):n&&n.filename?t({src:o.server+"/"+n.filename}):t({src:null})},showNotification:!1})}else(0,c.Z)(r).then(t).catch(t.bind(null,{src:null}))},function(){setTimeout(b,0)});w();var E=i.tr,Z=0;if(r){var _=e.posAtCoords({left:r.x,top:r.y});if(!_)return!1;Z=_.pos,E=E.setSelection(o.TextSelection.create(E.doc,Z,Z))}else Z=E.selection.to,E=E.setSelection(o.TextSelection.create(E.doc,Z,Z));var k={add:{id:y,pos:Z}};return E=E.setMeta(v,k),e.dispatch(E),!0}var g=function(e){function t(){return e.call(this,{state:{init:function(){return i.EH.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(n&&n.add){var r=document.createElement("div");r.title="Uploading...",r.className="editor-image-upload-placeholder",r.innerHTML=p;var o=i.p.widget(n.add.pos,r,{id:n.add.id});t=t.add(e.doc,[o])}else if(n&&n.remove){t=t.remove(t.find(null,null,(function(e){return e.id===n.remove.id})))}return t}},props:{decorations:function(e){return this.getState(e)}}})||this}return(0,r.Z)(t,e),t}(o.Plugin);t.Z=g},508838:function(e,t,n){var r=n(516037);t.Z=function(e,t){var n=e.selection,o=e.schema,i=e.tr;if(!o.marks[t])return!1;if(!(n instanceof r.TextSelection||n instanceof r.AllSelection))return!1;var a=e.selection,s=a.from;if(a.to===s+1){var l=i.doc.nodeAt(s);if(l.isAtom&&!l.isText&&l.isLeaf)return!1}return!0}},339925:function(e,t,n){n.d(t,{ZP:function(){return ot},$T:function(){return tt},EI:function(){return Je},Uy:function(){return Qe}});var r=n(919353),o=n(141396),i=n(516037),a=n(135428),s=n(414256),l=n(603423),c=n(970693),u=n(381629),d=function(e){return function(t){for(var n=t.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,e))return!0}return!1}},p=n(37900),m=n(371538),f=n(78708),h=n(508838),g=n(497326),v=n(894578),b=n(676065),y=n.n(b),w=n(838322),E=n(654603),Z=n(674577),_=n(96899),k=n(120914),S=Object.defineProperty,x=function(e,t,n){return function(e,t,n){t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},C=function(e){function t(){var t;return t=e.apply(this,arguments)||this,x((0,g.Z)(t),"_popUp",null),x((0,g.Z)(t),"title","apply-link"),x((0,g.Z)(t),"content",c.Z.link),x((0,g.Z)(t),"enable",(function(e){if(!(e.selection instanceof i.TextSelection))return!1;if(!e.schema.marks.link)return!1;var t=e.selection;return t.from<t.to})),x((0,g.Z)(t),"waitForUserInput",(function(e,n,r,o){if(t._popUp)return Promise.resolve(void 0);n&&n((0,w.tk)(e));var i=e.doc,a=e.schema,s=e.selection,l=a.marks.link;if(!l)return Promise.resolve(void 0);var c=s.from,u=s.to,d=(0,E.Z)(i,c,u,l),p=d?d.mark.attrs.href:null;return new Promise((function(e){t._popUp=(0,k.Z)(Z.Z,{href:p},{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})}))})),x((0,g.Z)(t),"executeWithUserInput",(function(e,t,n,r){if(t){var o=e.selection,i=e.schema,a=e.tr;if(a=(a=n?(0,w.be)(n.state):a).setSelection(o),!y()(r)){var s=i.marks.link,l=r?{href:r}:null;a=(0,m.Z)(a.setSelection(e.selection),i,s,l)}t(a)}return n&&n.focus(),!0})),t}return(0,v.Z)(t,e),t}(_.Z),O=C,M=n(202784),P=n(109025),N=n(685261),T=Object.defineProperty,D=function(e,t,n){return function(e,t,n){t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n};function I(e,t,n){var r=e.selection;if(!r)return e;var o=r.from;if(o!==r.to)return e;var i=t.nodes.image;if(!i)return e;var a={src:n||"",alt:"",title:""},s=i.create(a,null,null),l=P.Fragment.from(s);return e=e.insert(o,l)}var A=function(e){function t(){var t;return t=e.apply(this,arguments)||this,D((0,g.Z)(t),"_popUp",null),D((0,g.Z)(t),"enable",(function(e,n){return t.__isEnabled(e,n)})),D((0,g.Z)(t),"waitForUserInput",(function(e,n,r,o){return t._popUp?Promise.resolve(void 0):(n&&n((0,N.NV)(e)),new Promise((function(e){var n={runtime:r?r.runtime:null};t._popUp=(0,k.Z)(t.getEditor(),n,{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})})))})),D((0,g.Z)(t),"executeWithUserInput",(function(e,t,n,r){if(t){var o=e.selection,i=e.schema,a=e.tr;if(a=(a=n?(0,N.ud)(n.state):a).setSelection(o),r)a=I(a,i,r.src);t(a),n&&n.focus()}return!1})),D((0,g.Z)(t),"__isEnabled",(function(e,t){var n=e.selection;return n instanceof i.TextSelection&&n.from===n.to})),t}return(0,v.Z)(t,e),t}(_.Z),R=A,j=n(867855),L=n(585208),z=n(409856),B=n(213955),U=n(761540),V=Object.defineProperty,F=Object.defineProperties,H=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,q=function(e,t,n){return t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},J=function(e,t,n){return q(e,"symbol"!=typeof t?t+"":t,n),n},$=function(e){function t(t){var n,r;return n=e.call(this,t)||this,J((0,g.Z)(n),"_onSrcChange",(function(e){var t=e.target.value;n.setState({src:t,validValue:null},n._didSrcChange)})),J((0,g.Z)(n),"_didSrcChange",(function(){(0,U.Z)(n.state.src).then((function(e){if(n.state.src===e.src&&!n._unmounted){var t=e.complete?e:null;n.setState({validValue:t})}}))})),J((0,g.Z)(n),"_cancel",(function(){n.props.close()})),J((0,g.Z)(n),"_insert",(function(){var e=n.state.validValue;n.props.close(e)})),n._img=null,n._unmounted=!1,n.state=(r=function(e,t){for(var n in t||(t={}))G.call(t,n)&&q(e,n,t[n]);if(W)for(var r,o=(0,j.Z)(W(t));!(r=o()).done;)n=r.value,K.call(t,n)&&q(e,n,t[n]);return e}({},n.props.initialValue||{}),F(r,H({validValue:null}))),n}(0,v.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._unmounted=!0},n.render=function(){var e=this.state,t=e.src,n=e.validValue,r=n?M.createElement("div",{className:"editor-image-url-editor-input-preview",style:{backgroundImage:"url("+String(n.src)}}):null;return M.createElement("div",{className:"editor-image-url-editor"},M.createElement("form",{className:"editor-form",onSubmit:B.Z},M.createElement("fieldset",null,M.createElement("legend",null,L.a.t("text-editor:insert-image")),M.createElement("div",{className:"editor-image-url-editor-src-input-row"},M.createElement("input",{autoFocus:!0,className:"editor-image-url-editor-src-input",onChange:this._onSrcChange,placeholder:"Paste URL of Image...",type:"text",value:t||""}),r),M.createElement("em",null,L.a.t("text-editor:require-license"))),M.createElement("div",{className:"editor-form-buttons"},M.createElement(z.Z,{label:L.a.t("text-editor:cancel"),onClick:this._cancel}),M.createElement(z.Z,{active:!!n,disabled:!n,label:L.a.t("text-editor:insert"),onClick:this._insert}))))},t}(M.PureComponent),Y=Object.defineProperty,X=function(e,t,n){return function(e,t,n){t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Q=function(e){function t(){var t;return t=e.apply(this,arguments)||this,X((0,g.Z)(t),"title","insert-image-url"),X((0,g.Z)(t),"content","insert-image-url"),t}return(0,v.Z)(t,e),t.prototype.getEditor=function(){return $},t}(R),ee=Q,te=n(72779),ne=n.n(te),re=n(294325),oe=n(77461),ie=n(188777),ae=Object.defineProperty,se=function(e,t,n){return function(e,t,n){t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},le=(0,oe.Z)("image-upload-editor"),ce=function(e){function t(t){var r;return r=e.call(this,t)||this,se((0,g.Z)(r),"_onSelectFile",(function(e){var t=e.target.files&&e.target.files[0];t&&"object"==typeof t&&r._upload(t)})),se((0,g.Z)(r),"_onSuccess",(function(e){r._unmounted||r.props.close(e)})),se((0,g.Z)(r),"_onError",(function(e){r._unmounted||r.setState({error:e,id:le(),pending:!1})})),se((0,g.Z)(r),"_upload",(function(e){r.setState({pending:!0,error:null});var t=n.g.session;if(t.server&&t.uploadFile){var o=new FormData;o.append("file",e),t.uploadFile({formData:o,callback:function(e,n){return e?r._onError(e):n&&n.filename?r._onSuccess({src:t.server+"/"+n.filename}):r._onSuccess({src:null})},showNotification:!1})}else(0,ie.Z)(e).then((function(e){r._onSuccess(e)})).catch((function(e){r._onError(e)}))})),se((0,g.Z)(r),"_cancel",(function(){r.props.close()})),r._img=null,r._unmounted=!1,r.state={error:null,id:le(),pending:!1},r}(0,v.Z)(t,e);var r=t.prototype;return r.componentWillUnmount=function(){this._unmounted=!0},r.render=function(){var e=this.state,t=e.id,n=e.error,r=e.pending,o=ne()("editor-image-upload-editor",{pending:r,error:n}),i=L.a.t("text-editor:choose-an-image-file");return r?i=M.createElement(re.Z,{animation:"border",role:"status"}):n&&(i=L.a.t("text-editor:error-while-uploading")),M.createElement("div",{className:o},M.createElement("form",{className:"editor-form"},M.createElement("fieldset",null,M.createElement("legend",null,L.a.t("text-editor:upload-image")),M.createElement("div",{className:"editor-image-upload-editor-body"},M.createElement("div",{className:"editor-image-upload-editor-label"},i),M.createElement("input",{accept:"image/png,image/gif,image/jpeg,image/jpg",className:"editor-image-upload-editor-input",disabled:r,id:t,key:t,onChange:this._onSelectFile,type:"file"}))),M.createElement("div",{className:"editor-form-buttons"},M.createElement(z.Z,{label:L.a.t("text-editor:cancel"),onClick:this._cancel}))))},t}(M.PureComponent),ue=Object.defineProperty,de=function(e,t,n){return function(e,t,n){t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},pe=function(e){function t(){var t;return t=e.apply(this,arguments)||this,de((0,g.Z)(t),"title","upload-image"),de((0,g.Z)(t),"content","upload-image"),t}return(0,v.Z)(t,e),t.prototype.getEditor=function(){return ce},t}(R),me=pe,fe=n(575175),he=n(928316),ge=n(306830),ve=n.n(ge),be=n(877119),ye=n.n(be),we=n(686605),Ee=n.n(we),Ze=n(521536),_e=n.n(Ze),ke=n(557106),Se=n.n(ke),xe=n(783158),Ce=n.n(xe),Oe=n(111994),Me=Object.defineProperty,Pe=function(e,t,n){return function(e,t,n){t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Ne=16;var Te=function(e){function t(){return e.apply(this,arguments)||this}return(0,v.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.x,n=e.y,r=e.selected,o={left:t+"px",top:n+"px",width:"16px",height:"16px"},i=ne()("editor-table-grid-size-editor-cell",{selected:r});return M.createElement("div",{className:i,style:o})},t}(M.PureComponent),De=function(e){function t(t){var n;return n=e.call(this,t)||this,Pe((0,g.Z)(n),"_onRef",(function(e){n._ref=e})),Pe((0,g.Z)(n),"_onMouseEnter",(function(e){var t=e.currentTarget;if(t instanceof HTMLElement){var r=(0,Oe.hs)(t),o=Ee()(e.clientX),i=Ee()(e.clientY);n._ex=r.x,n._ey=r.y,n._mx=o,n._my=i,n._entered||(n._entered=!0,document.addEventListener("mousemove",n._onMouseMove,!0))}})),Pe((0,g.Z)(n),"_onMouseMove",(function(e){var t=n._ref&&he.findDOMNode(n._ref),r=t?function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}}(t):null,o=(0,Oe.mv)(e.screenX,e.screenY,10);r&&o&&(0,Oe.vY)(r,o,50)&&(e.preventDefault(),e.stopImmediatePropagation());var i=Ee()(e.clientX),a=Ee()(e.clientY);i===n._mx&&a===n._my||(n._mx=i,n._my=a,n._rafID&&cancelAnimationFrame(n._rafID),n._rafID=requestAnimationFrame(n._updateGridSize))})),Pe((0,g.Z)(n),"_updateGridSize",(function(){n._rafID=0;var e=n._mx,t=n._my,r=e-n._ex,o=t-n._ey,i=ye()(_e()(o/21),1,20),a=ye()(_e()(r/21),1,20),s=n.state,l=s.rows,c=s.cols;l===i&&c===a||n.setState({rows:i,cols:a})})),Pe((0,g.Z)(n),"_onMouseDown",(function(e){e.preventDefault(),n.props.close(n.state)})),n._ex=0,n._ey=0,n._mx=0,n._my=0,n._rafID=0,n._ref=null,n._entered=!1,n.state={rows:1,cols:1},n}(0,v.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._entered&&document.removeEventListener("mousemove",this._onMouseMove,!0),this._rafID&&cancelAnimationFrame(this._rafID)},n.render=function(){var e=this.state,t=e.rows,n=e.cols,r=Se()(5,t),o=Se()(5,n);r===t&&(r=Ce()(20,r+1)),o===n&&(o=Ce()(20,o+1));for(var i=[],a=0,s=0,l=0,c=0;a<r;){s+=5;for(var u=0,d=0;u<o;){d+=5;var p=a<t&&u<n;i.push(M.createElement(Te,{key:String(a)+"-"+String(u),selected:p,x:d,y:s})),l=(d+=Ne)+5,u++}c=(s+=Ne)+5,a++}var m={width:l+"px",height:c+"px"};return M.createElement("div",{className:"editor-table-grid-size-editor",ref:this._onRef},M.createElement("div",{className:"editor-table-grid-size-editor-body",onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter,style:m,role:"button",tabIndex:0},i),M.createElement("div",{className:"editor-table-grid-size-editor-footer"},M.createElement("b",null,t)," ",M.createElement("i",{className:"fa fa-times"})," ",M.createElement("b",null,n)))},t}(M.PureComponent);De.defaultProps={close:ve()};var Ie=De,Ae=n(871199),Re=n.n(Ae),je=Object.defineProperty,Le=function(e,t,n){return function(e,t,n){t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n};function ze(e){if(!Re()(e))return e;var t=new Error("Received unexpected "+e);throw t.framesToPop=1,t}var Be=function(e){function t(){var t;return t=e.apply(this,arguments)||this,Le((0,g.Z)(t),"_popUp",null),Le((0,g.Z)(t),"title","insert-table"),Le((0,g.Z)(t),"content","insert-table"),Le((0,g.Z)(t),"enable",(function(e){var t=e.selection;return t instanceof i.TextSelection&&t.from===t.to})),Le((0,g.Z)(t),"waitForUserInput",(function(e,n,r,o){if(t._popUp)return Promise.resolve(void 0);if(!(ze(o).target instanceof HTMLElement))return Promise.resolve(void 0);var i=o?o.target.parentElement.parentElement:null;return new Promise((function(e){t._popUp=(0,k.Z)(Ie,null,{anchor:i,position:fe.SC,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})}))})),Le((0,g.Z)(t),"executeWithUserInput",(function(e,t,n,r){if(t){var o=e.schema;if(r){for(var i=r.rows,a=r.cols,s=[];a--;)s.push(o.nodes.table_cell.createAndFill());for(var l=[];i--;)l.push(o.nodes.table_row.createAndFill(void 0,s));var c=o.nodes.table.createAndFill(void 0,l);t(e.tr.replaceSelectionWith(c))}}return!1})),t}return(0,v.Z)(t,e),t}(_.Z),Ue=Be,Ve=function(e){var t=e.selection;return t instanceof i.TextSelection||t instanceof i.AllSelection},Fe=function(e){var t=e.selection;return t instanceof i.TextSelection&&t.from===t.to},He=function(e){return function(t){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?!!e.isInSet(t.storedMarks||o.marks()):!!t.doc.rangeHasMark(r,i,e)}},We=function(e,t){return void 0===t&&(t={}),function(n){var r=n.selection,o=r.$from,i=r.to,a=r.node;return a?a.hasMarkup(e,t):i<=o.end()&&o.parent.hasMarkup(e,t)}},Ge=function(e){return function(t,n){var r=t.schema,o=t.selection,i=function(e,t,n){var r=t.marks.fontSize;if(!r)return e;var o=n?{pt:n}:null;return(0,m.Z)(e,t,r,o)}(t.tr.setSelection(o),r,e);return!(!i.docChanged&&!i.storedMarksSet)&&(!n||n(i))}},Ke=function(e){return(0,h.Z)(e,"fontSize")},qe=function(e){return function(t){var n,r=t.schema.nodes.heading;return(n=r?(0,o.Tr)(r)(t.selection):t.selection)&&n.node&&n.node.attrs&&n.node.attrs.level===e}},Je=[{title:"strong",content:c.Z.strong,enable:Ve,active:He(u.Z.marks.strong),run:(0,r.w9)(u.Z.marks.strong),hotkey:"Ctrl+B"},{title:"emphasis",content:c.Z.em,enable:Ve,active:He(u.Z.marks.em),run:(0,r.w9)(u.Z.marks.em),hotkey:"Ctrl+I"},new O],$e=[{title:"underline",content:c.Z.underline,enable:Ve,active:He(u.Z.marks.underline),run:(0,r.w9)(u.Z.marks.underline),hotkey:"Ctrl+U"},{title:"strikethrough",content:c.Z.strikethrough,enable:Ve,active:He(u.Z.marks.strikethrough),run:(0,r.w9)(u.Z.marks.strikethrough),hotkey:"Ctrl+S"},{title:"code",content:c.Z.code,enable:Ve,active:He(u.Z.marks.code),run:(0,r.w9)(u.Z.marks.code),hotkey:"Ctrl+M"},{title:"subscript",content:c.Z.subscript,enable:Ve,active:He(u.Z.marks.subscript),run:(0,r.w9)(u.Z.marks.subscript),hotkey:"Ctrl+L"},{title:"superscript",content:c.Z.superscript,enable:Ve,active:He(u.Z.marks.superscript),run:(0,r.w9)(u.Z.marks.superscript),hotkey:"Ctrl+P"}],Ye=[{title:"change-paragraph",content:c.Z.paragraph,active:We(u.Z.nodes.paragraph),enable:(0,r.uJ)(u.Z.nodes.paragraph),run:(0,r.uJ)(u.Z.nodes.paragraph)},{title:"change-heading-1",content:"H1",active:qe(1),enable:(0,r.uJ)(u.Z.nodes.heading,{level:1}),run:(0,r.uJ)(u.Z.nodes.heading,{level:1}),hotkey:"Shift+Ctrl+1"},{title:"change-heading-2",content:"H2",active:qe(2),enable:(0,r.uJ)(u.Z.nodes.heading,{level:2}),run:(0,r.uJ)(u.Z.nodes.heading,{level:2}),hotkey:"Shift+Ctrl+2"}],Xe=[{title:"change-heading-3",content:"Heading 3",enable:(0,r.uJ)(u.Z.nodes.heading,{level:3}),run:(0,r.uJ)(u.Z.nodes.heading,{level:3}),hotkey:"Shift+Ctrl+3"},{title:"change-heading-4",content:"Heading 4",enable:(0,r.uJ)(u.Z.nodes.heading,{level:4}),run:(0,r.uJ)(u.Z.nodes.heading,{level:4}),hotkey:"Shift+Ctrl+4"},{title:"change-heading-5",content:"Heading 5",enable:(0,r.uJ)(u.Z.nodes.heading,{level:5}),run:(0,r.uJ)(u.Z.nodes.heading,{level:5}),hotkey:"Shift+Ctrl+5"}],Qe=[{title:"wrap-block-quote",content:c.Z.blockquote,active:We(u.Z.nodes.blockquote),enable:(0,r.ym)(u.Z.nodes.blockquote),run:(0,r.ym)(u.Z.nodes.blockquote),hotkey:"Ctrl+>"},{title:"wrap-bullet-list",content:c.Z.bullet_list,active:We(u.Z.nodes.bullet_list),enable:(0,s.KI)(u.Z.nodes.bullet_list),run:(0,s.KI)(u.Z.nodes.bullet_list),hotkey:"Shift+Ctrl+8"},{title:"wrap-ordered-list",content:c.Z.ordered_list,active:We(u.Z.nodes.ordered_list),enable:(0,s.KI)(u.Z.nodes.ordered_list),run:(0,s.KI)(u.Z.nodes.ordered_list),hotkey:"Shift+Ctrl+9"}],et=[{title:"lift-out-enclosing",content:"lift-out-enclosing",enable:r.xb,run:r.xb},{title:"join-with-above",content:"join-with-above",enable:r.MI,run:r.MI},{title:"join-with-below",content:"join-with-below",enable:r.Ig,run:r.Ig}],tt=[new ee,new me,{title:"insert-footnote",content:"insert-footnote",enable:d(u.Z.nodes.footnote),run:function(e,t){var n=u.Z.nodes.footnote.create();t(e.tr.replaceSelectionWith(n))}},{title:"insert-figure-caption",content:"insert-figure-caption",enable:Fe,run:function(e,t){var n=u.Z.nodes.figureCaption.create();t(e.tr.replaceSelectionWith(n))}},{title:"insert-table-caption",content:"insert-table-caption",enable:Fe,run:function(e,t){var n=u.Z.nodes.tableCaption.create();t(e.tr.replaceSelectionWith(n))}},{title:"insert-code-block",content:"insert-code-block",enable:d(u.Z.nodes.code_block),run:function(e,t){var n=u.Z.nodes.code_block.create();t(e.tr.replaceSelectionWith(n))}}],nt=[{title:"undo-last-change",content:c.Z.undo,enable:a.Yw,run:a.Yw,hotkey:"Ctrl+Z"},{title:"redo-last-undone-change",content:c.Z.redo,enable:a.KX,run:a.KX,hotkey:"Ctrl+Y"},{title:"select-parent-node",content:c.Z.selectParent,run:r.N0,select:function(e){return(0,r.N0)(e)},hotkey:"Escape"}],rt=[new Ue,{title:"insert-column-before",content:"insert-column-before",run:l.addColumnBefore},{title:"insert-column-after",content:"insert-column-after",run:l.addColumnAfter},{title:"insert-row-before",content:"insert-row-before",run:l.addRowBefore},{title:"insert-row-after",content:"insert-row-after",run:l.addRowAfter},{title:"delete-column",content:"delete-column",run:l.deleteColumn},{title:"delete-row",content:"delete-row",run:l.deleteRow},{title:"merge-cells",content:"merge-cells",run:l.mergeCells},{title:"split-cells",content:"split-cells",run:l.splitCell},{title:"toggle-header-column",content:"toggle-header-column",run:l.toggleHeaderColumn},{title:"toggle-header-row",content:"toggle-header-row",run:l.toggleHeaderRow},{title:"delete-table",content:"delete-table",run:l.deleteTable}],ot={marks:Je,extraMarks:$e,blocks:Ye,headers:Xe,alignment:p.ZP,wraps:Qe,fontSizes:f.map((function(e){return{title:String(e),content:String(e),run:Ge(e),enable:Ke}})),actions:et,insert:tt,history:nt,tableEdits:rt}},473103:function(e,t,n){n.d(t,{Z:function(){return ge}});var r=n(305250),o=n(960703),i=n(135428),a=n(603423),s=n(894578),l=n(516037),c=n(676065),u=n.n(c),d=n(838322),p=n(371538),m=n(654603);var f=function(e,t){for(;e&&e.nodeName;){if(t(e))return e;e=e.parentElement}return null},h=n(497326),g=n(887757),v=n.n(g),b=n(202784),y=n(175676),w=n(37615),E=n(409856),Z=Object.defineProperty,_=function(e,t,n){return function(e,t,n){t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},k=function(e,t,n){return new Promise((function(r,o){var i=function(e){try{s(n.next(e))}catch(t){o(t)}},a=function(e){try{s(n.throw(e))}catch(t){o(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,a)};s((n=n.apply(e,t)).next())}))},S=function(e){function t(){var t;return t=e.apply(this,arguments)||this,_((0,h.Z)(t),"_openLink",(function(e){if(e&&0===e.indexOf("#")){var n=e.substr(1),r=document.getElementById(n);if(r){var o=t.props;(0,o.onCancel)(o.editorView),k((0,h.Z)(t),null,v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)(r,{scrollMode:"if-needed",behavior:"smooth"});case 2:case"end":return e.stop()}}),e)})))}}else e&&window.open((0,w.Z)(e))})),t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.href,n=e.editorView,r=e.onEdit,o=e.onRemove;return b.createElement("div",{className:"editor-link-tooltip"},b.createElement("div",{className:"editor-link-tooltip-body"},b.createElement("div",{className:"editor-link-tooltip-row"},b.createElement(E.Z,{className:"editor-link-tooltip-href",label:t,onClick:this._openLink,target:"new",title:t,value:t}),b.createElement(E.Z,{label:"Change",onClick:r,value:n}),b.createElement(E.Z,{label:"Remove",onClick:o,value:n}))))},t}(b.PureComponent),x=S,C=n(674577),O=n(575175),M=n(120914),P=Object.defineProperty,N=function(e,t,n){return function(e,t,n){t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},T={view:function(e){return new I(e)}},D=function(e){function t(){return e.call(this,T)||this}return(0,s.Z)(t,e),t}(l.Plugin),I=function(){function e(e){var t=this;N(this,"_anchorEl",null),N(this,"_popup",null),N(this,"_editor",null),N(this,"_onCancel",(function(e){t.destroy(),e.focus()})),N(this,"_onClose",(function(){t._anchorEl=null,t._editor=null,t._popup=null})),N(this,"_onEdit",(function(e){if(!t._editor){var n=e.state,r=n.schema,o=n.doc,i=n.selection,a=i.from,s=i.to,c=r.marks.link,u=(0,m.Z)(o,a,s,c);if(u){var p=n.tr,f=l.TextSelection.create(p.doc,u.from.pos,u.to.pos+1);p=p.setSelection(f),p=(0,d.tk)(n,p),e.dispatch(p);var h=u?u.mark.attrs.href:null;t._editor=(0,M.Z)(C.Z,{href:h},{onClose:function(n){t._editor=null,t._onEditEnd(e,i,n)}})}}})),N(this,"_onRemove",(function(e){t._onEditEnd(e,e.state.selection,null)})),N(this,"_onEditEnd",(function(e,t,n){var r=e.state,o=e.dispatch,i=(0,d.be)(r);if(!u()(n)){var a=r.schema,s=a.marks.link;if(s){var c=(0,m.Z)(i.doc,t.from,t.to,s);if(c){var f=l.TextSelection.create(i.doc,c.from.pos,c.to.pos+1);i=i.setSelection(f);var h=n?{href:n}:null;i=(0,p.Z)(i,a,s,h)}}}i.setSelection(t.map(i.doc,i.mapping)),o(i),e.focus()})),this.update(e,null)}var t=e.prototype;return t.update=function(e,t){if(e.readOnly)this.destroy();else{var n=e.state,r=n.doc,o=n.selection,i=n.schema.marks.link;if(i){var a=o.from,s=o.to,l=(0,m.Z)(r,a,s,i);if(l){var c=e.domAtPos(a);if(c){var u=f(c.node,(function(e){return"A"===e.nodeName}));if(u){var d=this._popup,p={editorState:n,editorView:e,href:l.mark.attrs.href,onCancel:this._onCancel,onEdit:this._onEdit,onRemove:this._onRemove};d&&u===this._anchorEl?d.update(p):(d&&d.close(),this._anchorEl=u,this._popup=(0,M.Z)(x,p,{anchor:u,autoDismiss:!1,onClose:this._onClose,position:O.DL}))}else this.destroy()}else this.destroy()}else this.destroy()}}},t.destroy=function(){this._popup&&this._popup.close(),this._editor&&this._editor.close()},e}(),A=D,R=n(685261),j=n(743766),L=n(141396);function z(e){var t=e.doc,n=e.selection,r=e.schema,o=r.nodes.table_cell,i=r.nodes.table_header;if(!o&&!i)return null;var s=n;if(s instanceof l.TextSelection){var c=o&&(0,L.Tr)(o)(n)||i&&(0,L.Tr)(i)(n);if(!c)return null;s=a.CellSelection.create(t,c.pos)}return s instanceof a.CellSelection?function(e){var t,n=e.$anchorCell,r=n.start(-1),o=n.node(-1),i=a.TableMap.get(o),s=null,l=null;return e.forEachCell((function(e,n){var o=i.findCell(n-r);(!t||o.top>=t.top&&o.left>t.left)&&(t=o,s=n,l=e)})),null===s?null:{node:l,pos:s}}(s):null}var B=n(185610),U=n(155061),V=n(585208),F=n(970693),H=n(339925),W=Object.defineProperty,G=function(e,t,n){return function(e,t,n){t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},K=function(e){function t(){var t;return t=e.apply(this,arguments)||this,G((0,h.Z)(t),"onMenuMouseDown",(function(e){return function(n){n.preventDefault(),e.run&&e.run(t.props.editorState,t.props.editorView.dispatch,t.props.editorView,n.nativeEvent)}})),G((0,h.Z)(t),"createDropdownButtons",(function(e,n){return b.createElement(U.Z,{key:"dropdown-item-"+n,onMouseDown:t.onMenuMouseDown(e)},V.a.t("text-editor:"+e.content))})),t}return(0,s.Z)(t,e),t.prototype.render=function(){return b.createElement(B.Z,{title:F.Z.table,variant:"outline-secondary",size:"sm",style:{display:"inline-block"}},H.ZP.tableEdits.map(this.createDropdownButtons))},t}(b.PureComponent),q=K;var J=n(111994);function $(e){var t=(0,J.hs)(e),n=t.x,r=t.y,o=t.w,i=t.h,a=o&&i&&e?e.ownerDocument.elementFromPoint(n+1,r+1):null;return!!a&&(a===e||!!e.contains(a))}var Y=Object.defineProperty,X=function(e,t,n){return function(e,t,n){t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Q=function(){function e(e){var t=this;X(this,"destroy",(function(){t._popUp&&t._popUp.close(),t._popUp=null})),X(this,"_onOpen",(function(){var e=t._cellElement;e&&(t._scrollHandle=function(e,t){if(e){for(var n=e.ownerDocument.defaultView,r=[],o=0,i=function(){o&&cancelAnimationFrame(o),o=requestAnimationFrame(t)},a=e;a;){var s=n.getComputedStyle(a).overflow;(i&&"auto"===s||"scroll"===s)&&(a.addEventListener("scroll",i,!1),r.push(a)),a=a.parentElement}return{dispose:function(){for(;i&&r.length;)(a=r.pop())&&a.removeEventListener("scroll",i,!1);i=null,o&&window.cancelAnimationFrame(o),o=0}}}}(e,t._onScroll))})),X(this,"_onClose",(function(){t._popUp=null,t._scrollHandle&&t._scrollHandle.dispose(),t._scrollHandle=null})),X(this,"_onScroll",(function(){var e=t._popUp,n=t._cellElement;e&&n&&($(n)||e.close())})),this._cellElement=null,this._popUp=null,this._scrollHandle=null,this.update(e,null)}return e.prototype.update=function(e,t){var n=e.state,r=e.readOnly,o=z(n);if(o&&!r){var i=e.domAtPos(o.pos+1);if(i){var a=i.node,s=this._popUp,l={editorState:n,editorView:e};a&&!$(a)&&(a=null),a?s&&a===this._cellElement?s.update(l):(s&&s.close(),this._cellElement=a,this._popUp=(0,M.Z)(q,l,{anchor:a,autoDismiss:!1,onClose:this._onClose,position:O.ID}),this._onOpen()):(s&&s.close(),this._cellElement=null)}else this.destroy()}else this.destroy()},e}(),ee={view:function(e){return new Q(e)}},te=function(e){function t(){return e.call(this,ee)||this}return(0,s.Z)(t,e),t}(l.Plugin),ne=n(286618),re=n(919353),oe=n(642777),ie=n(182996),ae=n(414256),se=n(437069),le=n.n(se),ce=n(37900),ue=n(381629),de=function(e,t){var n=ue.Z.nodes.hard_break.create();return t(e.tr.replaceSelectionWith(n).scrollIntoView()),!0},pe={"Alt-ArrowDown":re.Ig,"Alt-ArrowUp":re.MI,"Ctrl-Enter":(0,re.QF)(re.uo,de),"Mod->":(0,re.ym)(ue.Z.nodes.blockquote),"Mod-_":function(e,t){var n=ue.Z.nodes.horizontal_rule.create();return t(e.tr.replaceSelectionWith(n).scrollIntoView()),!0},"Mod-[":(0,ae.IB)(ue.Z.nodes.list_item),"Mod-]":(0,ae.bw)(ue.Z.nodes.list_item),"Mod-b":(0,re.w9)(ue.Z.marks.strong),"Mod-BracketLeft":re.xb,"Mod-Enter":(0,re.QF)(re.uo,de),"Mod-i":(0,re.w9)(ue.Z.marks.em),"Mod-u":(0,re.w9)(ue.Z.marks.underline),"Mod-m":(0,re.w9)(ue.Z.marks.code),"Mod-l":(0,re.w9)(ue.Z.marks.subscript),"Mod-s":(0,re.w9)(ue.Z.marks.strikethrough),"Mod-p":(0,re.w9)(ue.Z.marks.superscript),"Mod-y":i.KX,"Mod-z":i.Yw,"Shift-Ctrl-\\":(0,re.uJ)(ue.Z.nodes.code_block),"Shift-Ctrl-0":(0,re.uJ)(ue.Z.nodes.paragraph),"Shift-Ctrl-1":(0,re.uJ)(ue.Z.nodes.heading,{level:1}),"Shift-Ctrl-2":(0,re.uJ)(ue.Z.nodes.heading,{level:2}),"Shift-Ctrl-3":(0,re.uJ)(ue.Z.nodes.heading,{level:3}),"Shift-Ctrl-4":(0,re.uJ)(ue.Z.nodes.heading,{level:4}),"Shift-Ctrl-5":(0,re.uJ)(ue.Z.nodes.heading,{level:5}),"Shift-Ctrl-6":(0,re.uJ)(ue.Z.nodes.heading,{level:6}),"Shift-Ctrl-8":(0,ae.KI)(ue.Z.nodes.bullet_list),"Shift-Ctrl-9":(0,ae.KI)(ue.Z.nodes.ordered_list),"Shift-Enter":(0,re.QF)(re.uo,de),"Alt-Ctrl-l":ce.H_,"Alt-Ctrl-r":ce.cP,"Alt-Ctrl-c":ce.A8,"Alt-Ctrl-j":ce.nx,"Shift-Mod-z":i.KX,"Shift-Tab":(0,a.goToNextCell)(-1),Backspace:oe.dU,Enter:(0,ae.s6)(ue.Z.nodes.list_item),Escape:re.N0,Tab:(0,a.goToNextCell)(1)};le()(re.YR).forEach((function(e){pe[e]?pe[e]=(0,re.QF)(pe[e],re.YR[e]):pe[e]=re.YR[e]}));var me=(0,ie.h)(pe);function fe(e,t,n){return new oe.VK(e,(function(e,r,o,i){var a=n instanceof Function?n(r):n,s=e.tr;if(r[1]){var l=o+r[0].indexOf(r[1]),c=l+r[1].length;c<i&&s.delete(c,i),l>o&&s.delete(o,l),i=o+r[1].length}return s.addMark(o,i,t.create(a)),s.removeStoredMark(t),s}))}var he=(0,oe.Hw)({rules:[].concat(oe.yR,[oe.LH,oe.pR,(0,oe.S0)(/^\s*>\s$/,ue.Z.nodes.blockquote),(0,oe.S0)(/^(\d+)\.\s$/,ue.Z.nodes.ordered_list,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]})),(0,oe.S0)(/^\s*([-+*])\s$/,ue.Z.nodes.bullet_list),(0,oe.zK)(/^```$/,ue.Z.nodes.code_block),fe(/(?:^|[^`])`([^`]+)`$/,ue.Z.marks.code),fe(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,ue.Z.marks.strong),fe(/(?:^|[^*_])(?:\*|_)([^*_]+)(?:\*|_)$/,ue.Z.marks.em),fe(/(?:\+\+)([^+]+)(?:\+\+)$/,ue.Z.marks.underline),fe(/(?:~~)([^~]+)(?:~~)$/,ue.Z.marks.strikethrough),(0,oe.zK)(new RegExp("^(#{1,6})\\s$"),ue.Z.nodes.heading,(function(e){return{level:e[1].length}}))])}),ge=[new j.Z,new A,new d.ZP,new R.ZP,he,me,(0,r.q)(),(0,o.d)(),(0,i.m8)(),(0,a.columnResizing)({}),new te,(0,a.tableEditing)(),(0,ne.ZP)()];document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)},37615:function(e,t,n){n.d(t,{Z:function(){return o}});var r=/^http(s?):*\/\//i;function o(e){return e?r.test(e)?e:"http://"+e:"http://"}},381629:function(e,t,n){n.d(t,{Z:function(){return vt}});var r=n(109025),o={attrs:{href:{},target:{default:"blank"},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=e.getAttribute("href"),n=t&&0===t.indexOf("#")?"":"blank";return{href:e.getAttribute("href"),title:e.getAttribute("title"),target:n}}}],toDOM:function(e){var t=e.attrs;return["a",{href:t.href,title:t.title,target:t.target},0]}},i={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},a={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}},s={parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}},l={excludes:"superscript",parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM:function(){return["sub"]}},c={attrs:{color:""},inline:!0,group:"inline",parseDOM:[{style:"color",getAttrs:function(e){return{color:e}}}],toDOM:function(e){var t=e.attrs.color,n="";return t&&(n+="color: "+t+";"),["span",{style:n},0]}},u=n(32593),d=n.n(u),p=n(395465),m=n.n(p),f=n(78708),h=/([\d.]+)(px|pt)/i;function g(e){var t=function(e){var t=e.match(h);if(!t)return 0;var n=parseFloat(t[1]),r=t[2];return n&&r?("px"===r&&(n*=.7518796992481203),n):0}(e);return f.includes(t)?t:f.reduce((function(e,n){return d()(n-t)<d()(e-t)?n:e}),m())}var v={link:o,code:s,em:i,fontSize:{attrs:{pt:{default:null}},inline:!0,group:"inline",parseDOM:[{style:"font-size",getAttrs:function(e){var t={};if(!e)return t;var n=g(e);if(!n)return t;return{pt:n}}}],toDOM:function(e){var t=e.attrs.pt;return["span",t?{style:"font-size: "+t+"pt;",class:"pm-font-size-mark"}:null,0]}},strikethrough:{parseDOM:[{tag:"strike"},{style:"text-decoration:line-through"},{style:"text-decoration-line:line-through"}],toDOM:function(){return["strike"]}},strong:a,subscript:l,superscript:{excludes:"subscript",parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM:function(){return["sup"]}},textColor:c,underline:{parseDOM:[{tag:"u"},{style:"text-decoration:underline",getAttrs:function(e){return"underline"===e&&null}}],toDOM:function(){return["u",0]}}},b=n(867855),y=n(603423),w=/(left|right|center|justify)/,E="data-indent",Z=new Set(["","0%","0pt","0px"]);function _(e){var t=e.style,n=t.textAlign,r=t.paddingTop,o=t.paddingBottom,i=e.getAttribute("align")||n||"";return{align:i=w.test(i)?i:null,indent:parseInt(e.getAttribute(E),10),paddingTop:r,paddingBottom:o,id:e.getAttribute("id")||""}}function k(e){var t=e.attrs,n=t.align,r=t.indent,o=t.paddingTop,i=t.paddingBottom,a=t.id,s={},l="";return n&&"left"!==n&&(l+="text-align: "+n+";"),o&&!Z.has(o)&&(l+="padding-top: "+o+";"),i&&!Z.has(i)&&(l+="padding-bottom: "+i+";"),l&&(s.style=l),r&&(s["data-indent"]=String(r)),a&&(s.id=a),["p",s,0]}var S=k,x=_,C={attrs:{align:{default:null},color:{default:null},id:{default:null},indent:{default:null},lineSpacing:{default:null},paddingBottom:{default:null},paddingTop:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p",getAttrs:_}],toDOM:k},O=Object.defineProperty,M=Object.defineProperties,P=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,I=function(e,t,n){return t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},A=function(e,t){for(var n in t||(t={}))T.call(t,n)&&I(e,n,t[n]);if(N)for(var r,o=(0,b.Z)(N(t));!(r=o()).done;){n=r.value;D.call(t,n)&&I(e,n,t[n])}return e},R=function(e,t){return M(e,P(t))},j={H1:1,H2:2,H3:3,H4:4,H5:5,H6:6};function L(e){var t=x(e),n=j[e.nodeName.toUpperCase()]||1;return t.level=n,t}var z=R(A({},C),{attrs:R(A({},C.attrs),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:L},{tag:"h2",getAttrs:L},{tag:"h3",getAttrs:L},{tag:"h4",getAttrs:L},{tag:"h5",getAttrs:L},{tag:"h6",getAttrs:L}],toDOM:function(e){var t=S(e),n=e.attrs.level||1;return t[0]="h"+n,t}}),B={group:"inline",content:"inline*",inline:!0,atom:!0,toDOM:function(){return["footnote",0]},parseDOM:[{tag:"footnote"}]},U=Object.defineProperty,V=Object.defineProperties,F=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,K=function(e,t,n){return t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},q=function(e,t){for(var n in t||(t={}))W.call(t,n)&&K(e,n,t[n]);if(H)for(var r,o=(0,b.Z)(H(t));!(r=o()).done;){n=r.value;G.call(t,n)&&K(e,n,t[n])}return e};var J,$,Y=(J=q({},C),$={attrs:q({},C.attrs),content:"inline*",group:"block",defining:!0,toDOM:function(e){var t=S(e);return t[0]="legend",t[1].class="figure-caption",t},parseDOM:[{tag:"legend",getAttrs:function(e){return x(e)}}]},V(J,F($))),X=Object.defineProperty,Q=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,oe=function(e,t,n){return t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ie=function(e,t){for(var n in t||(t={}))ne.call(t,n)&&oe(e,n,t[n]);if(te)for(var r,o=(0,b.Z)(te(t));!(r=o()).done;){n=r.value;re.call(t,n)&&oe(e,n,t[n])}return e};var ae=function(e,t){return Q(e,ee(t))}(ie({},C),{attrs:ie({},C.attrs),content:"inline*",group:"block",defining:!0,toDOM:function(e){var t=S(e);return t[0]="legend",t[1].class="table-caption",t},parseDOM:[{tag:"legend",getAttrs:function(e){return x(e)}}]}),se=ae,le=/rotate\(([0-9.]+)rad\)/i,ce=new Set(["0%","0pt","0px"]);function ue(e){var t=e.style,n=t.cssFloat,r=t.display,o=t.marginTop,i=t.marginLeft,a=e.style,s=a.width,l=a.height,c=e.getAttribute("data-align")||e.getAttribute("align");c?c=/(left|right|center)/.test(c)?c:null:"left"!==n||r?"right"!==n||r?n||"block"!==r||(c="block"):c="right":c="left",s=s||e.getAttribute("width"),l=l||e.getAttribute("height");var u=null,d=null,p=e.parentElement;if(p instanceof HTMLElement){var m=p.style;if("inline-block"===m.display&&"hidden"===m.overflow&&m.width&&m.height&&i&&!ce.has(i)&&o&&!ce.has(o)&&(u={width:parseInt(m.width,10)||0,height:parseInt(m.height,10)||0,left:parseInt(i,10)||0,top:parseInt(o,10)||0}),m.transform){var f=m.transform.match(le);f&&f[1]&&(d=parseFloat(f[1])||null)}}return{align:c,alt:e.getAttribute("alt")||null,crop:u,height:parseInt(l,10)||null,rotate:d,src:e.getAttribute("src")||null,title:e.getAttribute("title")||null,width:parseInt(s,10)||null}}var de=ue,pe={inline:!0,attrs:{align:{default:null},alt:{default:"An inserted image"},crop:{default:null},height:{default:null},rotate:{default:null},src:{default:null},title:{default:"None"},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:ue}],toDOM:function(e){return["img",e.attrs]}},me=Object.defineProperty,fe=Object.defineProperties,he=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,ye=function(e,t,n){return t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},we={attrs:{src:{},plotID:{default:null},align:{default:null},alt:{default:""},crop:{default:null},title:{default:""},meta:{default:null},width:{default:null},height:{default:null},rotate:{default:null}},inline:!0,group:"inline",draggable:!0,toDOM:function(e){return["div",{class:"img-container","data-plot-id":e.attrs.plotID,align:e.attrs.align},["img",{src:e.attrs.src,align:e.attrs.align,alt:e.attrs.alt,crop:e.attrs.crop,title:e.attrs.title,width:e.attrs.width,height:e.attrs.height,rotate:e.attrs.rotate}],["pre",{class:"img-tooltip"},e.attrs.meta]]},parseDOM:[{priority:51,tag:"div[data-plot-id]",getAttrs:function(e){var t=e.getAttribute("data-plot-id"),n=e.firstChild,r=de(n),o=e.lastChild.innerText;return function(e,t){return fe(e,he(t))}(function(e,t){for(var n in t||(t={}))ve.call(t,n)&&ye(e,n,t[n]);if(ge)for(var r,o=(0,b.Z)(ge(t));!(r=o()).done;)n=r.value,be.call(t,n)&&ye(e,n,t[n]);return e}({},r),{meta:o,plotID:t})}}]},Ee=we,Ze=Object.defineProperty,_e=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,Se=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Oe=function(e,t,n){return t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Me={attrs:{src:{},plotID:{default:null},align:{default:null},alt:{default:""},crop:{default:null},title:{default:""},meta:{default:null},width:{default:null},height:{default:null},rotate:{default:null}},inline:!0,group:"inline",draggable:!0,toDOM:function(e){return["div",{class:"img-container","data-plot-id":e.attrs.plotID,align:e.attrs.align},["img",{src:e.attrs.src,align:e.attrs.align,alt:e.attrs.alt,crop:e.attrs.crop,title:e.attrs.title,width:e.attrs.width,height:e.attrs.height,rotate:e.attrs.rotate}],["pre",{class:"img-tooltip"},e.attrs.meta]]},parseDOM:[{priority:51,tag:"img[data-plot-id]",getAttrs:function(e){var t=e.getAttribute("align"),n=e.getAttribute("width"),r=de(e);t||(r.align="center"),n||(r.width=550);var o=e.getAttribute("data-plot-id"),i=e.getAttribute("data-plot-meta");return function(e,t){return _e(e,ke(t))}(function(e,t){for(var n in t||(t={}))xe.call(t,n)&&Oe(e,n,t[n]);if(Se)for(var r,o=(0,b.Z)(Se(t));!(r=o()).done;)n=r.value,Ce.call(t,n)&&Oe(e,n,t[n]);return e}({},r),{meta:i,plotID:o})}}]},Pe=Me,Ne={content:"block+"},Te={content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},De={group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},Ie={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},Ae={group:"inline"},Re={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},je=n(414256),Le=Object.defineProperty,ze=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,Ue=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,He=function(e,t,n){return t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},We=function(e,t){return ze(e,Be(t))}(function(e,t){for(var n in t||(t={}))Ve.call(t,n)&&He(e,n,t[n]);if(Ue)for(var r,o=(0,b.Z)(Ue(t));!(r=o()).done;){n=r.value;Fe.call(t,n)&&He(e,n,t[n])}return e}({},je.dq),{content:"list_item+",group:"block"}),Ge=We,Ke=Object.defineProperty,qe=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Qe=function(e,t,n){return t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},et=function(e,t){return qe(e,Je(t))}(function(e,t){for(var n in t||(t={}))Ye.call(t,n)&&Qe(e,n,t[n]);if($e)for(var r,o=(0,b.Z)($e(t));!(r=o()).done;){n=r.value;Xe.call(t,n)&&Qe(e,n,t[n])}return e}({},je.iI),{content:"list_item+",group:"block"}),tt=et,nt=Object.defineProperty,rt=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,lt=function(e,t,n){return t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ct=function(e,t){return rt(e,ot(t))}(function(e,t){for(var n in t||(t={}))at.call(t,n)&&lt(e,n,t[n]);if(it)for(var r,o=(0,b.Z)(it(t));!(r=o()).done;){n=r.value;st.call(t,n)&&lt(e,n,t[n])}return e}({},je.qb),{content:"paragraph block*",group:"block"}),ut=ct,dt=Object.defineProperty,pt=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,ht=function(e,t,n){return t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},gt=function(e,t){for(var n in t||(t={}))mt.call(t,n)&&ht(e,n,t[n]);if(pt)for(var r,o=(0,b.Z)(pt(t));!(r=o()).done;){n=r.value;ft.call(t,n)&&ht(e,n,t[n])}return e}({doc:Ne,plot:Pe,plotContainer:Ee,footnote:B,paragraph:C,ordered_list:Ge,bullet_list:tt,list_item:ut,blockquote:Te,horizontal_rule:De,heading:z,code_block:Ie,text:Ae,image:pe,hard_break:Re,figureCaption:Y,tableCaption:se},(0,y.tableNodes)({tableGroup:"block",cellContent:"block+"})),vt=new r.Schema({nodes:gt,marks:v})},838322:function(e,t,n){n.d(t,{tk:function(){return m},be:function(){return f}});var r=n(497326),o=n(894578),i=n(516037),a=n(506565),s={name:"SelectionPlaceholderPlugin"},l=null,c={state:{init:function(){return a.EH.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(!n)return t;if(n.add){var r=a.p.inline(n.add.from,n.add.to,{class:"selection-placeholder"},{id:s});t=t.add(e.doc,[r])}else if(n.remove){var o=t.find(null,null,d);t=t.remove(o)}return t}},props:{decorations:function(e){return l?l.getState(e):null}}},u=function(e){function t(){var t;return t=e.call(this,c)||this,l?l||(0,r.Z)(t):(l=(0,r.Z)(t),t)}return(0,o.Z)(t,e),t}(i.Plugin);function d(e){return e.id===s}function p(e){if(!l)return null;if(!e.plugins.includes(l))return null;var t=l.getState(e).find(null,null,d);return(t.length?t[0]:null)||null}function m(e,t){t=t||e.tr;var n=l;return n&&t.selection&&!t.selection.empty?(null===p(e)&&(t=t.setMeta(n,{add:{from:t.selection.from,to:t.selection.to}})),t):t}function f(e,t){t=t||e.tr;var n=l;return n?(p(e)&&(t=t.setMeta(n,{remove:{}})),t):t}t.ZP=u},37900:function(e,t,n){n.d(t,{H_:function(){return b},A8:function(){return y},cP:function(){return w},nx:function(){return E}});var r=n(867855),o=n(516037),i=n(970693),a=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=function(e,t,n){return t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m=function(e,t){for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(c)for(var o,i=(0,r.Z)(c(t));!(o=i()).done;){n=o.value;d.call(t,n)&&p(e,n,t[n])}return e},f=function(e,t){return s(e,l(t))},h=function(e){var t=e.selection;return t instanceof o.TextSelection||t instanceof o.AllSelection},g=function(e,t,n){var r=e,o=r.selection,i=r.doc;if(!o||!i)return e;var a=o.from,s=o.to,l=t.nodes,c=l.blockquote,u=l.list_item,d=l.heading,p=l.paragraph,h=[];n=n||null;var g=new Set([c,d,u,p]);return i.nodesBetween(a,s,(function(e,t,r){var o=e.type;return(e.attrs.align||null)!==n&&g.has(o)&&h.push({node:e,pos:t,nodeType:o}),!0})),h.length?(h.forEach((function(t){var r=t.node,o=t.pos,i=t.nodeType,a=r.attrs;a=f(m({},a),n?{align:n}:{align:null}),e=e.setNodeMarkup(o,i,a,r.marks)})),e):e},v=function(e){return function(t){var n=t.selection,r=t.doc,o=n.from,i=n.to,a=!0,s=!1;return r.nodesBetween(o,i,(function(t,n){return a&&t.attrs.align===e&&(a=!1,s=!0),a})),s}};function b(e,t){var n=e.schema,r=e.selection,o=g(e.tr.setSelection(r),n,"left");return!!o.docChanged&&(t&&t(o))}function y(e,t){var n=e.schema,r=e.selection,o=g(e.tr.setSelection(r),n,"center");return!!o.docChanged&&(t&&t(o))}function w(e,t){var n=e.schema,r=e.selection,o=g(e.tr.setSelection(r),n,"right");return!!o.docChanged&&(t&&t(o))}function E(e,t){var n=e.schema,r=e.selection,o=g(e.tr.setSelection(r),n,"justify");return!!o.docChanged&&(t&&t(o))}var Z=[{title:"align-left",content:i.Z.alignLeft,enable:h,active:v("left"),run:b,hotkey:"Ctrl+Alt+L"},{title:"align-center",content:i.Z.alignCenter,enable:h,active:v("center"),run:y,hotkey:"Ctrl+Alt+C"},{title:"align-right",content:i.Z.alignRight,enable:h,active:v("right"),run:w,hotkey:"Ctrl+Alt+R"},{title:"justified",content:i.Z.alignJustify,enable:h,active:v("justify"),run:E,hotkey:"Ctrl+Alt+J"}];t.ZP=Z},120914:function(e,t,n){n.d(t,{Z:function(){return D}});var r=n(202784),o=n(928316),i=n(497326),a=n(894578),s=n(867855),l=n(111994),c=n(877119),u=n.n(c),d=Object.defineProperty,p=function(e,t,n){return function(e,t,n){t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},m={x:-1e4,y:-1e4,w:0,h:0},f=new(function(){function e(){var e=this;p(this,"_bridges",new Map),p(this,"_positions",new Map),p(this,"_mx",0),p(this,"_my",0),p(this,"_rafID",0),p(this,"_onScroll",(function(){e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),p(this,"_onResize",(function(t){e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),p(this,"_onMouseChange",(function(t){e._mx=Math.round(t.clientX),e._my=Math.round(t.clientY),e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),p(this,"_onClick",(function(t){for(var n,r,o=Date.now(),i=(0,s.Z)(e._bridges);!(r=i()).done;){var a=r.value,c=a[0];if(o-a[1]>350){var u=c.getDetails();u.modal&&u.autoDismiss&&(n=u)}}if(n){var d=n,p=d.body,m=d.close,f=(0,l.mv)(t.clientX,t.clientY,1),h=p?(0,l.hs)(p):null;h&&(0,l.vY)(f,h)||m()}})),p(this,"_syncPosition",(function(){e._rafID=0;for(var t,n=new Map,r=(0,s.Z)(e._bridges);!(t=r()).done;){var o=t.value,i=o[0],a=(o[1],i.getDetails());n.set(i,a);var c=a.anchor,d=a.body;d instanceof HTMLElement&&(a.bodyRect=(0,l.hs)(d)),c instanceof HTMLElement&&(a.anchorRect=(0,l.hs)(c))}for(var p,f=(0,l.mv)(e._mx,e._my,2),h=new Set,g=(0,s.Z)(n);!(p=g()).done;){var v=p.value,b=v[0],y=v[1],w=y.anchor,E=y.bodyRect,Z=y.anchorRect,_=y.position,k=y.body;if(E||Z){var S=_(Z,E),x=S.x,C=S.y,O=x+"-"+C;if(k&&E&&e._positions.get(b)!==O){var M=Z?u()(0,Z.x-x+Z.w/2,E.w-Z.w/2):0;e._positions.set(b,O);var P=k.style;P.position="absolute",P.left=x+"px",P.top=C+"px",P.setProperty("--editor-pop-up-anchor-offset-left",M+"px"),E.x=x,E.y=C}((0,l.vY)(f,E||m,0)||(0,l.vY)(f,Z||m,0))&&w&&h.add(w)}}for(;;){for(var N,T=h.size,D=(0,s.Z)(n);!(N=D()).done;)for(var I,A=N.value,R=(A[0],A[1]),j=R.anchor,L=R.body,z=(0,s.Z)(h);!(I=z()).done;){var B=I.value;j&&L&&!h.has(j)&&L.contains(B)&&h.add(j)}if(h.size===T)break}for(var U,V=Date.now(),F=(0,s.Z)(e._bridges);!(U=F()).done;){var H=U.value,W=H[0],G=H[1],K=n.get(W);if(K){var q=K.autoDismiss,J=K.anchor,$=K.close,Y=K.modal;q&&!Y&&V-G>350&&!h.has(J)&&$()}}}))}var t=e.prototype;return t.register=function(e){this._bridges.set(e,Date.now()),this._positions.set(e,null),1===this._bridges.size&&this._observe(),this._rafID=requestAnimationFrame(this._syncPosition)},t.unregister=function(e){this._bridges.delete(e),this._positions.delete(e),0===this._bridges.size&&this._unobserve(),this._rafID&&cancelAnimationFrame(this._rafID)},t._observe=function(){document.addEventListener("mousemove",this._onMouseChange,!1),document.addEventListener("mouseup",this._onMouseChange,!1),document.addEventListener("click",this._onClick,!1),window.addEventListener("scroll",this._onScroll,!0),window.addEventListener("resize",this._onResize,!0)},t._unobserve=function(){document.removeEventListener("mousemove",this._onMouseChange,!1),document.removeEventListener("mouseup",this._onMouseChange,!1),document.removeEventListener("click",this._onClick,!1),window.removeEventListener("scroll",this._onScroll,!0),window.removeEventListener("resize",this._onResize,!0),this._rafID&&cancelAnimationFrame(this._rafID)},e}()),h=n(575175),g=n(77461),v=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,_=function(e,t,n){return t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},k=(0,g.Z)("popup"),S=function(e){function t(t){var n,r,o;return n=e.call(this,t)||this,r=(0,i.Z)(n),_(r,"symbol"!=typeof(o="_getDetails")?o+"":o,(function(){var e=n.props,t=e.close,r=e.popUpParams,o=r.anchor,i=r.autoDismiss,a=r.position,s=r.modal;return{anchor:o,autoDismiss:!1!==i,body:document.getElementById(n._id),close:t,modal:!0===s,position:a||(s?h.Oi:h.SC)}})),n._bridge=null,n._id=k(),n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._bridge={getDetails:this._getDetails},f.register(this._bridge)},n.componentWillUnmount=function(){this._bridge&&f.unregister(this._bridge)},n.render=function(){var e,t=this.props,n=t.View,o=t.viewProps,i=t.close;return r.createElement("div",{"data-pop-up-id":this._id,id:this._id},r.createElement(n,(e=function(e,t){for(var n in t||(t={}))E.call(t,n)&&_(e,n,t[n]);if(w)for(var r,o=(0,s.Z)(w(t));!(r=o()).done;)n=r.value,Z.call(t,n)&&_(e,n,t[n]);return e}({},o||{}),b(e,y({close:i})))))},t}(r.PureComponent),x=(0,g.Z)("create-popup"),C=0,O=0,M="pop-up-modal-mask-"+x();function P(){var e=document.getElementById(M);e&&e.parentElement&&e.parentElement.removeChild(e)}function N(e,t,n,r){var o=n&&n.container||document.body||document.documentElement,i=document.getElementById(e);if(!i&&t&&(i=document.createElement("div")),!i)return null;n&&n.modal&&i.setAttribute("data-pop-up-modal","y"),i.className="pop-up-element vars",i.id=e;var a=i.style,s=n&&n.modal?1:0;return n&&n.container||(a.zIndex=1005+3*O+s),r&&(a.zIndex+=r),i.setAttribute("role","dialog"),i.setAttribute("aria-modal","true"),o&&!i.parentElement&&o.appendChild(i),i}function T(e,t,i,a,s){var l=0,c=document.getElementsByClassName("editorview-wrapper fullscreen");n.g.DOM=c,c[0]&&(l+=1e3);var u=N(e,!0,s,l);if(u){var d=r.createElement(S,{View:i,close:t,popUpParams:s,viewProps:a});o.render(d,u)}C>0?function(){var e=document.body||document.documentElement,t=document.getElementById(M);t||((t=document.createElement("div")).id=M,t.className="pop-up-modal-mask",t.setAttribute("data-mask-type","pop-up-modal-mask"),t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true")),e&&!t.parentElement&&e.appendChild(t);var n=t.style,r=Array.from(document.querySelectorAll(".pop-up-element[data-pop-up-modal]")).reduce((function(e,t){return Math.max(e,Number(t.style.zIndex))}),0);n.zIndex=r-1}():P()}function D(e,t,n){var r=x(),i=null,a=t;t=t||{};var s=(n=n||{}).modal||!n.anchor;n.modal=s,O++,s&&C++;var l=function(e){if(i){s&&C--,O--,i=null,function(e){var t=N(e,!1);t&&(o.unmountComponentAtNode(t),t.parentElement&&t.parentElement.removeChild(t)),0===C&&P()}(r);var t=n&&n.onClose;t&&t(e)}},c=T.bind(null,r,l,e),u={};return i={close:l,update:function(e){c((a=e)||u,n||u)}},c(a||u,n||u),i}},409856:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(894578),o=n(867855),i=n(497326),a=n(72779),s=n.n(a),l=n(202784),c=n(213955),u=Object.defineProperty,d=function(e,t,n){return function(e,t,n){t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},p=function(e){function t(t){var n;return n=e.call(this,t)||this,d((0,i.Z)(n),"_onMouseEnter",(function(e){n._pressedTarget=null,e.preventDefault();var t=n.props,r=t.onMouseEnter,o=t.value;r&&r(o,e)})),d((0,i.Z)(n),"_onMouseLeave",(function(e){n._pressedTarget=null;var t=e;n._onMouseUpCapture(t)})),d((0,i.Z)(n),"_onMouseDown",(function(e){e.preventDefault(),n._pressedTarget=null,n._clicked=!1,3!==e.which&&2!==e.button&&(n.setState({pressed:!0}),n._pressedTarget=e.currentTarget,n._clicked=!1,n._mul||(document.addEventListener("mouseup",n._onMouseUpCapture,!0),n._mul=!0))})),d((0,i.Z)(n),"_onMouseUp",(function(e){if(e.preventDefault(),n._clicked||"keypress"===e.type){var t=n.props,r=t.onClick,o=t.value;!t.disabled&&r&&r(o,e)}n._pressedTarget=null,n._clicked=!1})),d((0,i.Z)(n),"_onMouseUpCapture",(function(e){n._mul&&(n._mul=!1,document.removeEventListener("mouseup",n._onMouseUpCapture,!0));var t=e.target;n._clicked=n._pressedTarget instanceof HTMLElement&&t instanceof HTMLElement&&(t===n._pressedTarget||t.contains(n._pressedTarget)||n._pressedTarget.contains(t)),n.setState({pressed:!1})})),n._clicked=!1,n._mul=!1,n._pressedTarget=null,n._unmounted=!1,n.state={pressed:!1},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._unmounted=!0,this._mul&&(this._mul=!1,document.removeEventListener("mouseup",this._onMouseUpCapture,!0))},n.render=function(){var e=this.props,t=e.className,n=e.disabled,r=e.active,o=e.id,i=e.style,a=e.title,u=e.children,d=this.state.pressed,p=s()(t,{active:r,disabled:n,pressed:d});return l.createElement("span",{"aria-disabled":n,"aria-pressed":d,className:p,disabled:n,id:o,onKeyPress:n?c.Z:this._onMouseUp,onMouseDown:n?c.Z:this._onMouseDown,onMouseEnter:n?c.Z:this._onMouseEnter,onMouseLeave:n?null:this._onMouseLeave,onMouseUp:n?c.Z:this._onMouseUp,role:"button",style:i,tabIndex:n?null:0,title:a},u)},t}(l.PureComponent),m=n(77461),f=n(120914),h=n(575175),g=Object.defineProperty,v=function(e,t,n){return function(e,t,n){t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},b=(0,m.Z)("tooltip-surface"),y=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props.tooltip;return l.createElement("div",{className:"editor-tooltip-view editor-animation-fade-in"},e)},t}(l.PureComponent),w=function(e){function t(t){var n;return n=e.call(this,t)||this,v((0,i.Z)(n),"_onMouseEnter",(function(){if(!n._popUp){var e=n.props.tooltip;n._popUp=(0,f.Z)(y,{tooltip:e},{anchor:document.getElementById(n._id),onClose:n._onClose,position:h.lS})}})),v((0,i.Z)(n),"_onMouseLeave",(function(){n._popUp&&n._popUp.close(),n._popUp=null})),v((0,i.Z)(n),"_onClose",(function(){n._popUp=null})),n._id=b(),n._popUp=null,n}(0,r.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._popUp&&this._popUp.close()},n.render=function(){var e=this.props,t=e.tooltip,n=e.children;return l.createElement("span",{"aria-label":t,className:"editor-tooltip-surface","data-tooltip":t,id:this._id,onMouseDown:t&&this._onMouseLeave,onMouseEnter:t&&this._onMouseEnter,onMouseLeave:t&&this._onMouseLeave,role:"tooltip"},n)},t}(l.PureComponent),E=Object.defineProperty,Z=Object.defineProperties,_=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=function(e,t,n){return t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},O=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.icon,r=t.label,i=t.className,a=t.title,c=function(e,t){var n={};for(var r in e)S.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&k)for(var i,a=(0,o.Z)(k(e));!(i=a()).done;)r=i.value,t.indexOf(r)<0&&x.call(e,r)&&(n[r]=e[r]);return n}(t,["icon","label","className","title"]),u=s()(i,"editor-custom-button",{"use-icon":!!n});return l.createElement(w,{tooltip:a},l.createElement(p,(e=function(e,t){for(var n in t||(t={}))S.call(t,n)&&C(e,n,t[n]);if(k)for(var r,i=(0,o.Z)(k(t));!(r=i()).done;)n=r.value,x.call(t,n)&&C(e,n,t[n]);return e}({},c),Z(e,_({className:u}))),n,r))},t}(l.PureComponent),M=O},100636:function(e,t,n){n.d(t,{Z:function(){return Me}});var r=n(497326),o=n(894578),i=n(867855),a=n(887757),s=n.n(a),l=n(72779),c=n.n(l),u=n(202784),d=n(928316),p=n(77461),m=n(585208),f=Object.defineProperty,h=function(e,t,n){return function(e,t,n){t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},g=Object.freeze({from:0,to:0});function v(e){if(!window.getSelection)return console.warn("window.getSelection() is not supported"),g;var t=window.getSelection();if(!t.containsNode)return console.warn("selection.containsNode() is not supported"),g;if(!t.rangeCount)return g;var n=t.getRangeAt(0);if(!n)return g;var r=n.startContainer,o=n.endContainer,i=n.startOffset,a=n.endOffset;return r===e||o===e||r&&e.contains(r)||o&&e.contains(o)?{from:i,to:a}:g}var b=function(){function e(e){var t=this;h(this,"_observables",[]),h(this,"_callback",null),h(this,"_onClick",(function(){var e=t._callback;if(t._observables=t._observables.map((function(e){var t=e.target;return{target:t,selection:v(t)}})),e)return e(t.takeRecords(),t)})),h(this,"_check",(function(){var e=!1,n=t._callback;if(t._observables=t._observables.map((function(t){var n=t.target,r=t.selection,o=v(n);return r===o||r.from===o.from&&r.to===o.to?t:(e=!0,{target:n,selection:o})})),e&&n)return n(t.takeRecords(),t)})),this._callback=e}var t=e.prototype;return t.disconnect=function(){var e=this;this._observables.forEach((function(t){var n=t.target;n.removeEventListener("click",e._check,!1),n.removeEventListener("selectionchange",e._check,!1)})),this._observables=[]},t.observe=function(e){if(window.getSelection){if(!this._observables.some((function(t){return t.target===e}))){var t={target:e,selection:v(e)};e.addEventListener("click",this._check,!1),e.addEventListener("selectionchange",this._check,!1),this._observables.push(t)}}else console.warn("window.getSelection() is not supported")},t.takeRecords=function(){return this._observables.slice(0)},e}(),y=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,S=function(e,t,n){return t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x="ProseMirror-selectednode",C=new Set,O=new Set;var M=new b((function(e,t){if(!window.getSelection)return console.warn("window.getSelection() is not supported"),void t.disconnect();var n=window.getSelection();if(!n.containsNode)return console.warn("selection.containsNode() is not supported"),void t.disconnect();for(var r,o=(0,i.Z)(C);!(r=o()).done;){var a=r.value,s=a.dom;n.containsNode(s)?a.selectNode():a.deselectNode()}0===C.size&&t.disconnect()})),P=new MutationObserver((function(e,t){var n=document.body;if(n){for(var r,o=[],a=(0,i.Z)(O);!(r=a()).done;){var s=r.value,l=s.dom;n.contains(l)&&(O.delete(s),o.push(s),s.__renderReactComponent())}for(var c,u=(0,i.Z)(C);!(c=u()).done;){var p=c.value.dom;n.contains(p)||(C.delete(p),d.unmountComponentAtNode(p))}o.forEach((function(e){return C.add(e)})),0===C.size&&t.disconnect()}})),N=function(){function e(e,t,n,r){this.props={decorations:r,editorView:t,getPos:n,node:e,selected:!1,focused:!1},O.add(this);var o=this.createDOMElement();this.dom=o,this._selected=null,o.onClick=this._onClick,1===O.size&&(P.observe(document,{childList:!0,subtree:!0}),M.observe(document))}var t=e.prototype;return t.update=function(e,t){var n;return this.props=(n=function(e,t){for(var n in t||(t={}))_.call(t,n)&&S(e,n,t[n]);if(Z)for(var r,o=(0,i.Z)(Z(t));!(r=o()).done;)n=r.value,k.call(t,n)&&S(e,n,t[n]);return e}({},this.props),w(n,E({node:e}))),this.__renderReactComponent(),!0},t.stopEvent=function(){return!1},t.selectNode=function(){this._selected=!0,this.dom.classList.add(x),this.__renderReactComponent()},t.deselectNode=function(){this._selected=!1,this.dom.classList.remove(x),this.__renderReactComponent()},t.createDOMElement=function(){throw new Error("not implemented")},t.renderReactComponent=function(){throw new Error("not implemented")},t.destroy=function(){},t.__renderReactComponent=function(){var e=this.props,t=e.editorView,n=e.getPos;if(t.state&&t.state.selection){var r=t.state.selection.from,o=n();this.props.selected=this._selected,this.props.focused=t.focused&&o===r}else this.props.selected=!1,this.props.focused=!1;d.render(this.renderReactComponent(),this.dom)},e}(),T=n(871199),D=n.n(T),I=n(676065),A=n.n(I),R="text-editor-frame-body";function j(e){return"number"==typeof e?e+"px":D()(e)?"auto":String(e)}u.PureComponent;var L=n(970693),z=n(409856),B=Object.defineProperty,U=function(e,t,n){return function(e,t,n){t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},V={NONE:{value:null,text:"Inline"},LEFT:{value:"left",text:"Float left"},CENTER:{value:"center",text:"Center"},RIGHT:{value:"right",text:"Float right"}},F=function(e){function t(){var t;return t=e.apply(this,arguments)||this,U((0,r.Z)(t),"_onClick",(function(e){t.props.onSelect({align:e})})),t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props.value?this.props.value.align:null,t=this._onClick,n=Object.keys(V).map((function(n){var r=V[n],o=r.value,i=r.text;return u.createElement(z.Z,{active:e===o,key:n,label:i,onClick:t,value:o})}));return u.createElement("div",{className:"editor-inline-editor"},n)},t}(u.PureComponent),H=F,W=n(877119),G=n.n(W),K=n(409961),q=n.n(K),J=Object.defineProperty,$=function(e,t,n){return function(e,t,n){t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Y=(0,p.Z)("image-resize-box"),X=20,Q={top:te,top_right:ne,right:ee,bottom_right:ne,bottom:te,bottom_left:ne,left:ee,top_left:ne};function ee(e,t,n){e.style.width=t+"px"}function te(e,t,n){e.style.height=n+"px"}function ne(e,t,n){e.style.width=Math.round(t)+"px",e.style.height=Math.round(n)+"px"}var re=function(e){function t(t){var n;return n=e.call(this,t)||this,$((0,r.Z)(n),"_syncSize",(function(){if(n._active){var e=n.props,t=e.direction,r=e.width,o=e.height,i=(n._x2-n._x1)*(/left/.test(t)?-1:1),a=(n._y2-n._y1)*(/top/.test(t)?-1:1),s=n._el;if(q()(s))throw new Error("Encountered an error: `el` should not be null.");var l=Q[t];if(q()(l))throw new Error("Encountered an error: `fn` should not be null.");var c=r/o,u=G()(X,r+Math.round(i),1e4),d=G()(X,o+Math.round(a),1e4);l===ne&&(u=(d=Math.max(u/c,X))*c),l(s,Math.round(u),Math.round(d)),n._ww=u,n._hh=d}})),$((0,r.Z)(n),"_onMouseDown",(function(e){e.preventDefault(),e.stopPropagation(),n._end(),n._start(e)})),$((0,r.Z)(n),"_onMouseMove",(function(e){e.preventDefault(),e.stopPropagation(),n._x2=e.clientX,n._y2=e.clientY,n._rafID=requestAnimationFrame(n._syncSize)})),$((0,r.Z)(n),"_onMouseUp",(function(e){e.preventDefault(),e.stopPropagation(),n._x2=e.clientX,n._y2=e.clientY;var t=n.props.direction,r=n._el;if(q()(r))throw new Error("Encountered an error: `el` should not be null.");r.classList.remove(t),n._end(),n.props.onResizeEnd(n._ww,n._hh)})),n._active=!1,n._el=null,n._h="",n._rafID=0,n._w="",n._x1=0,n._x2=0,n._y1=0,n._y2=0,n._ww=0,n._hh=0,n}(0,o.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._end()},n._start=function(e){this._active&&this._end(),this._active=!0;var t=this.props,n=t.boxID,r=t.direction,o=t.width,i=t.height,a=document.getElementById(n);if(q()(a))throw new Error("Encountered an error: `el` should not be null.");a.className+=" "+r,this._el=a,this._x1=e.clientX,this._y1=e.clientY,this._x2=this._x1,this._y2=this._y1,this._w=this._el.style.width,this._h=this._el.style.height,this._ww=o,this._hh=i,document.addEventListener("mousemove",this._onMouseMove,!0),document.addEventListener("mouseup",this._onMouseUp,!0)},n._end=function(){if(this._active){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!0),document.removeEventListener("mouseup",this._onMouseUp,!0);var e=this._el;if(q()(e))throw new Error("Encountered an error: `el` should not be null.");e.style.width=this._w,e.style.height=this._h,e.className="editor-image-resize-box",this._el=null,this._rafID&&cancelAnimationFrame(this._rafID),this._rafID=null}},n.render=function(){var e,t=this.props.direction,n=c()(((e={"editor-image-resize-box-control":!0})[t]=!0,e));return u.createElement("span",{role:"button",tabIndex:-1,className:n,onMouseDown:this._onMouseDown})},t}(u.PureComponent),oe=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=Y(),n}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.onResizeEnd,n=e.width,r=e.height,o=e.src,i={height:r+"px",width:n+"px"},a=this._id,s=Object.keys(Q).map((function(e){return u.createElement(re,{boxID:a,config:Q[e],direction:e,height:r,key:e,onResizeEnd:t,width:n})}));return u.createElement("span",{className:"editor-image-resize-box",id:a,style:i},s,u.createElement("img",{className:"editor-image-resize-box-image",alt:"Resize Box",src:o}))},t}(u.PureComponent),ie=n(575175),ae=n(297209),se=null,le=new Map;function ce(e){e.forEach(ue)}function ue(e){var t=e.target,n=le.get(t);n&&n.forEach((function(t){return t(e)}))}var de={observe:function(e,t){var n=e,r=se||(se=new ae.default(ce));if(le.has(n)){var o=le.get(n);if(q()(o))throw new Error("Encountered an error: callbacks are missing.");o.push(t)}else{var i=[t];le.set(n,i),r.observe(n)}},unobserve:function(e,t){var n=se;if(n){var r=e;if(n.unobserve(r),t){var o=null;if(le.has(r)){if(o=le.get(r),q()(o))throw new Error("Encountered an error: callbacks are missing.");o=o.filter((function(e){return e!==t}))}o&&o.length?le.set(r,o):le.delete(r)}else le.delete(r);le.size||(n.disconnect(),se=null)}}},pe=n(120914),me=n(761540),fe=Object.defineProperty,he=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,we=function(e,t,n){return t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ee=function(e,t){for(var n in t||(t={}))be.call(t,n)&&we(e,n,t[n]);if(ve)for(var r,o=(0,i.Z)(ve(t));!(r=o()).done;){n=r.value;ye.call(t,n)&&we(e,n,t[n])}return e},Ze=function(e,t){return he(e,ge(t))},_e=function(e,t,n){return we(e,"symbol"!=typeof t?t+"":t,n),n},ke=(0,p.Z)("image-node-view"),Se=1e5,xe={src:"",complete:!1,height:0,width:0};var Ce=function(e){function t(t){var n;return n=e.call(this,t)||this,_e((0,r.Z)(n),"_resolveOriginalSize",(function(){return e=(0,r.Z)(n),t=null,o=s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mounted){e.next=2;break}return e.abrupt("return");case 2:return this.setState({originalSize:xe}),t=this.props.node.attrs.src,n=t,e.next=7,(0,me.Z)(n);case 7:if(r=e.sent,this._mounted){e.next=10;break}return e.abrupt("return");case 10:if(this.props.node.attrs.src===t){e.next=12;break}return e.abrupt("return");case 12:r.complete||(r.width=X,r.height=X),this.setState({originalSize:r});case 14:case"end":return e.stop()}}),e,this)})),new Promise((function(n,r){var i=function(e){try{s(o.next(e))}catch(t){r(t)}},a=function(e){try{s(o.throw(e))}catch(t){r(t)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,a)};s((o=o.apply(e,t)).next())}));var e,t,o})),_e((0,r.Z)(n),"_onResizeEnd",(function(e,t){var r=n.props,o=r.getPos,i=r.node,a=r.editorView,s=o(),l=Ze(Ee({},i.attrs),{crop:null,width:e,height:t}),c=a.state.tr,u=a.state.selection;c=(c=c.setNodeMarkup(s,null,l)).setSelection(u.map(c.doc,c.mapping)),a.dispatch(c)})),_e((0,r.Z)(n),"_onChange",(function(e){if(n._mounted){var t=e?e.align:null,r=n.props,o=r.getPos,i=r.node,a=r.editorView,s=o(),l=Ze(Ee({},i.attrs),{align:t}),c=a.state.tr,u=a.state.selection;c=(c=c.setNodeMarkup(s,null,l)).setSelection(u.map(c.doc,c.mapping)),a.dispatch(c)}})),_e((0,r.Z)(n),"_onBodyRef",(function(e){if(e){n._body=e;var t=d.findDOMNode(e);t instanceof HTMLElement&&de.observe(t,n._onBodyResize)}else{var r=n._body&&d.findDOMNode(n._body);r instanceof HTMLElement&&de.unobserve(r),n._body=null}})),_e((0,r.Z)(n),"_onBodyResize",(function(e){var t=n._body?function(e){for(var t=e.parentElement;t&&!t.offsetParent;)t=t.parentElement;if(t&&t.offsetParent&&t.offsetParent.offsetWidth&&t.offsetParent.offsetWidth>0){var n=t.offsetParent,r=e.ownerDocument.defaultView.getComputedStyle(n),o=n.clientWidth-4;return"border-box"===r.boxSizing&&(o-=parseInt(r.paddingLeft,10)+parseInt(r.paddingRight,10)),Math.max(o,X)}return Se}(d.findDOMNode(n._body)):Se;n.setState({maxSize:{width:t,height:Se,complete:!!n._body}})})),n._body=null,n._id=ke(),n._inlineEditor=null,n._mounted=!1,n.state={maxSize:{width:Se,height:Se,complete:!1},originalSize:xe},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._mounted=!0,this._resolveOriginalSize(),this._renderInlineEditor()},n.componentDidUpdate=function(e){e.node.attrs.src!==this.props.node.attrs.src&&this._resolveOriginalSize(),this._renderInlineEditor()},n.componentWillUnmount=function(){this._mounted=!1,this._inlineEditor&&this._inlineEditor.close(),this._inlineEditor=null},n._renderInlineEditor=function(){var e=this,t=document.getElementById(this._id);if(t&&"true"===t.getAttribute("data-active")){var n={value:this.props.node.attrs,onSelect:this._onChange};this._inlineEditor?this._inlineEditor.update(n):this._inlineEditor=(0,pe.Z)(H,n,{anchor:t,autoDismiss:!1,container:t.closest?t.closest(".text-editor-frame-body"):null,position:ie.lS,onClose:function(){e._inlineEditor=null}})}else this._inlineEditor&&this._inlineEditor.close()},n.render=function(){var e=this.state,t=e.originalSize,n=e.maxSize,r=this.props,o=r.editorView,i=r.node,a=r.selected,s=r.focused,l=o.readOnly,d=i.attrs,p=d.align,f=d.crop,h=d.rotate,g=t===xe,v=!g&&s&&!l&&t.complete,b=t.complete?t.src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",y=g?1:t.width/t.height,w=!g&&!t.complete,E=d.width,Z=d.height;g&&(E=E||24,Z=Z||24),E&&!Z?Z=E/y:Z&&!E?E=Z*y:E||Z||(E=t.width,Z=t.height);var _=1;E>n.width&&(!f||f.width>n.width)&&(Z=(E=n.width)/y,_=n.width/E);var k=c()("editor-image-view-body",{active:v,error:w,focused:s,loading:g,selected:a}),S=!v||f||h?null:u.createElement(oe,{height:Z,onResizeEnd:this._onResizeEnd,src:b,width:E}),x={display:"inline-block",height:Z+"px",left:"0",top:"0",width:E+"px",position:"relative"},C={};if(f){var O=Ee({},f);1!==_&&(_=n.width/O.width,O.width*=_,O.height*=_,O.left*=_,O.top*=_),C.width=O.width+"px",C.height=O.height+"px",x.left=O.left+"px",x.top=O.top+"px"}h&&(C.transform="rotate("+h+"rad)");var M=null;d.meta&&(M=u.createElement("pre",{className:"img-tooltip"},d.meta));var P=w?u.createElement("span",{className:"editor-image-view-error"},L.Z.error," "):null,N=w?m.a.t("text-editor:unable-to-load-image")+" "+(d.src||""):void 0,T=u.createElement("img",{alt:"",className:"editor-image-view-body-img","data-align":p,height:Z,id:this._id+"-img",src:b,width:E});return u.createElement(u.Fragment,null,M,u.createElement("span",{className:k,"data-active":v?"true":void 0,"data-original-src":String(d.src),id:this._id,ref:this._onBodyRef,title:N},u.createElement("span",{className:"editor-image-view-body-img-clip",style:C},u.createElement("span",{style:x},P,T)),S))},t}(u.PureComponent),Oe=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createDOMElement=function(){var e=this,t=document.createElement("span");return t.className="editor-image-view",t.addEventListener("dragstart",(function(t){var n=document.createElement("img");n.src=e.props.node.attrs.src,t.dataTransfer.setDragImage(n,0,0)}),!1),this._updateDOM(t),t},n.update=function(t,n){return e.prototype.update.call(this,t,n),this._updateDOM(this.dom),!0},n.renderReactComponent=function(){return u.createElement(Ce,Ee({},this.props))},n._updateDOM=function(e){var t=this.props.node.attrs.align,n="editor-image-view";t&&(n+=" align-"+t),e.className=n},t}(N),Me=Oe},674577:function(e,t,n){var r=n(497326),o=n(894578),i=n(202784),a=n(585208),s=n(37615),l=n(409856),c=n(213955),u=Object.defineProperty,d=function(e,t,n){return function(e,t,n){t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},p=/\s/,m=function(e){function t(){var t;return t=e.apply(this,arguments)||this,d((0,r.Z)(t),"state",{url:t.props.href}),d((0,r.Z)(t),"_onKeyDown",(function(e){13===e.keyCode&&(e.preventDefault(),t._apply())})),d((0,r.Z)(t),"_onURLChange",(function(e){var n=e.target.value;t.setState({url:n})})),d((0,r.Z)(t),"_cancel",(function(){t.props.close()})),d((0,r.Z)(t),"_apply",(function(){var e=t.state.url;e&&!p.test(e)&&t.props.close((0,s.Z)(e))})),t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props.href,t=this.state.url,n=!!t&&p.test(t),r=a.a.t("text-editor:apply"),o=!!n;return e?(r=t?a.a.t("text-editor:apply"):a.a.t("text-editor:remove"),o=n):o=n||!t,i.createElement("div",{className:"image-url-editor"},i.createElement("form",{className:"editor-form",onSubmit:c.Z},i.createElement("fieldset",null,i.createElement("legend",null,a.a.t("text-editor:add-link")),i.createElement("input",{autoFocus:!0,onChange:this._onURLChange,onKeyDown:this._onKeyDown,placeholder:a.a.t("text-editor:paste-url"),spellCheck:!1,type:"text",value:t||""})),i.createElement("div",{className:"editor-form-buttons"},i.createElement(l.Z,{label:a.a.t("text-editor:cancel"),onClick:this._cancel}),i.createElement(l.Z,{active:!0,disabled:o,label:r,onClick:this._apply}))))},t}(i.PureComponent);t.Z=m},575175:function(e,t,n){n.d(t,{SC:function(){return o},lS:function(){return i},Oi:function(){return a},ID:function(){return s},DL:function(){return l}});var r=n(111994);function o(e,t){var n={x:0,y:0,w:0,h:0};if(e&&t){n.x=e.x,n.y=e.y+e.h;var o=window.innerWidth,i=window.innerHeight;n.x+t.w>o&&(n.x=e.x-t.w+e.w),n.y+t.h>i&&(n.y=Math.max(e.y-t.h,2))}return e&&!(0,r.zb)(e)||(n.x=-1e4),n}function i(e,t){var n={x:0,y:0,w:0,h:0};return e&&t&&(n.x=Math.max(e.x-(t.w-e.w)/2,10),n.y=e.y+e.h),e&&!(0,r.zb)(e)||(n.x=-1e4),n}function a(e,t){var n={x:0,y:0,w:0,h:0};return t&&(n.x=(window.innerWidth-t.w)/2,n.y=(window.innerHeight-t.h)/2),t&&!(0,r.zb)(t)||(n.x=-1e4),n}function s(e,t){var n={x:0,y:0,w:0,h:0};return e&&t&&(n.x=e.x+e.w+1-t.w,n.y=e.y),e&&!(0,r.zb)(e)||(n.x=-1e4),n}function l(e,t){var n={x:0,y:0,w:0,h:0};return e&&t&&(n.x=e.x+(e.w-t.w)/2,n.y=e.y),e&&!(0,r.zb)(e)||(n.x=-1e4),n}},213955:function(e,t,n){function r(e){e.preventDefault()}n.d(t,{Z:function(){return r}})},111994:function(e,t,n){function r(e){return 0===e.w||0===e.h}function o(e,t,n){var r=n||0;return!(t.x-r>e.x+e.w+r||t.x+t.w+r<e.x-r||t.y-r>e.y+e.h+r||t.y+t.h+r<e.y-r)}function i(e,t,n){return{x:e-(n=n||0),y:t-n,w:2*n,h:2*n}}function a(e){if("contents"===document.defaultView.getComputedStyle(e).display&&1===e.children.length)return a(e.children[0]);var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}}n.d(t,{zb:function(){return r},vY:function(){return o},mv:function(){return i},hs:function(){return a}})},761540:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(867855),o=n(900883),i=n(700601),a=n.n(i);var s=function(){return!!a()(window.navigator,"onLine")&&!window.navigator.onLine},l=Object.defineProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m={},f=[];function h(){var e=f.shift();e&&function(e,t,n){var i={complete:!1,height:0,naturalHeight:0,naturalWidth:0,src:e||"",width:0};if(s())return void t(i);var a=e||"";if(!a)return void t(i);if(m[a]){var l=Object.assign({},m[a]);return void t(l)}var f,g=o.parse(a),v=g.protocol,b=g.port;if(!/(http:|https:|data:)/.test(v||window.location.protocol)||b)return void t(i);var y=function(){f&&(i.width=f.width,i.height=f.height,i.naturalWidth=f.width,i.naturalHeight=f.height,i.complete=!0),t(i),E(),m[a]=function(e,t){for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(c)for(var o,i=(0,r.Z)(c(t));!(o=i()).done;)n=o.value,d.call(t,n)&&p(e,n,t[n]);return e}({},i)},w=function(){t(i),E()};function E(){if(f){if(f instanceof HTMLElement){var e=f.parentNode;e&&e.removeChild(f)}f.onload=null,f.onerror=null,f=null}h()}var Z=document.body;Z?((f=document.createElement("img")).style.cssText="position:fixed;left:-10000000000px;width:auto;height:auto;",f.onload=y,f.onerror=w,f.src=a,Z.appendChild(f)):((f=new Image).onload=y,f.onerror=w,f.src=a)}(e.src,e.resolve,e.reject)}var g=function(e){return new Promise((function(t,n){var r={src:e,resolve:t,reject:n};f.push(r),h()}))}},96899:function(e,t,n){var r=n(630709),o=Object.defineProperty,i=function(e,t,n){return function(e,t,n){t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n};function a(e,t){var n=e[t];return"tr"===t&&n instanceof r.wx?n.setMeta("dryrun",!0):n}function s(e,t,n){return e[t]=n,!0}var l=function(){function e(){var t=this;i(this,"shouldRespondToUIEvent",(function(t){return t.type===e.EventType.CLICK})),i(this,"active",(function(e){return!1})),i(this,"enable",(function(e,n){return t.dryRun(e,n)})),i(this,"dryRun",(function(e,n){var r=window.Proxy,o=r?new r(e,{get:a,set:s}):e;return t.run(o,null,n)})),i(this,"run",(function(e,n,r,o){return t.waitForUserInput(e,n,r,o).then((function(o){t.executeWithUserInput(e,n,r,o)})).catch((function(e){console.error(e)})),!1})),i(this,"waitForUserInput",(function(e,t,n,r){return Promise.resolve(void 0)})),i(this,"executeWithUserInput",(function(e,t,n,r){return!1}))}return e.prototype.cancel=function(){},e}();i(l,"EventType",{CLICK:"mouseup",MOUSEENTER:"mouseenter"}),t.Z=l},974556:function(e,t){t.Z=function(e){var t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),n=0;if(null===t)return n;for(var r=0;r<t.length;r++)t[r].charCodeAt(0)>=19968?n+=t[r].length:n+=1;return n}},73811:function(e,t,n){var r=n(690299),o=n.n(r),i=n(286618),a=n(743766),s=o()("isle:text-editor");t.Z=function(e,t){s("Handle drop event...");var n={x:t.clientX,y:t.clientY},r=e.posAtCoords({left:n.x,top:n.y}),o=r?r.pos:null,l=t.dataTransfer;if(l&&l.files&&l.files.length>0){t.preventDefault();var c=l.files,u=Array.from(c);(0,a.q)(e,u,n)&&(0,i.wM)(e)}else(0,i.yz)(e,o)}},611713:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(202784),o=n(690299),i=n.n(o),a=n(198),s=n(581440),l=n(185610),c=n(153446),u=n(836663),d=n(296781),p=n(155061),m=n(294565),f=n(708579),h=n(970693),g=n(141396),v=n(557106),b=n.n(v),y=n(783158),w=n.n(y);var E=function(e,t,n,r){var o=t;if(e.nodeSize<=2)return null;var i=function(e){return e.type===r};for(t=b()(2,t),n=w()(n,e.nodeSize-2);o<=n;){var a=e.nodeAt(o);if(a&&a.marks){var s=a.marks.find(i);if(s)return s;o+=1}else o++}return null},Z={1:26,2:20,3:18,4:15,5:12};var _=function(e){var t=e.schema,n=e.doc,r=e.selection,o=e.tr,i=t.marks.fontSize,a=t.nodes.heading,s=String(12);if(!i)return s;var l=r.from,c=r.to;if(r.empty){var u=(o.storedMarks||e.storedMarks||r.$cursor&&r.$cursor.marks&&r.$cursor.marks()||[]).find((function(e){return e.type===i}));return u?String(u.attrs.pt||s):s}var d=i?E(n,l,c,i):null;if(d)return String(d.attrs.pt);if(!a)return s;var p=(0,g.Tr)(a)(e.selection);if(!p)return s;var m=String(p.node.attrs.level);return Z[m]||s},k=n(508838),S=JSON.parse('["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b","#000000"]'),x=i()("isle:text-editor"),C="#6e6e6e",O=function(e){if(e.disabled)return r.createElement("button",{onClick:e.onClick,style:{active:e.active,color:e.active?"black":C,opacity:.2},disabled:!0,className:"menu-item","aria-label":e.t(e.title)},e.children);var t=e.t(e.title);return e.hotkey&&(t+=" ("+e.hotkey+")"),r.createElement(f.Z,{key:e.itemKey+"-tooltip",tooltip:t,placement:"bottom"},r.createElement("button",{onClick:e.onClick,style:{active:e.active,color:e.active?"black":C},className:"menu-item","aria-label":e.t(e.title)},e.children))},M=(0,a.Z)("text-editor")((function(e){var t=e.menu,n=e.children,o=e.state,i=e.dispatch,a=e.view,f=e.fullscreen,g=e.showColorPicker,v=e.onColorChoice,b=(e.container,e.t),y=function(e){return function(t){t.preventDefault(),e.run&&(x("Run command",e,t),e.run(o,i,a,t.nativeEvent))}},w=function(e,t){return r.createElement(O,{key:t,itemKey:t,type:"button",active:!(!e.active||!o)&&e.active(o),disabled:!(!e.enable||!o)&&!e.enable(o),title:"string"==typeof e.title?b(e.title):"",hotkey:e.hotkey,onClick:y(e),t:b},(0,m.isPrimitive)(e.content)?b(e.content):e.content)},E=function(e,t){return e.enable&&o&&!e.enable(o)?r.createElement(p.Z,{key:"dropdown-item-"+t,disabled:!0},(0,m.isPrimitive)(e.content)?b(e.content):e.content):r.createElement(p.Z,{key:"dropdown-item-"+t,onClick:y(e)},(0,m.isPrimitive)(e.content)?b(e.content):e.content)},Z=function(e){return e?e.map(w):null};return r.createElement("div",{className:"prose-menu-bar cancel"},n,Z(t.blocks),t.headers?r.createElement(r.Fragment,null,r.createElement(l.Z,{title:r.createElement("span",{className:"screenreader"},b("headers")),variant:"outline-secondary",size:"sm",style:{display:"inline-block",marginRight:4}},t.headers.map(E)),r.createElement("i",{className:"prose-separator"},"|")):null,Z(t.marks),f?Z(t.extraMarks):null,r.createElement("div",{style:{display:g?"initial":"none",position:"absolute",top:"50px",left:"100px",zIndex:2}},r.createElement(s.Z,{width:"600px",colors:S,circleSize:16,onChangeComplete:v})),r.createElement("i",{className:"prose-separator"},"|"),t.fontSizes?r.createElement(c.Z,{style:{display:"inline-block",marginLeft:4}},r.createElement(d.Z,{size:"sm",variant:"outline-secondary",disabled:!o||!(0,k.Z)(o,"fontSize")},o?_(o):"12"),r.createElement(u.Z,{style:{minWidth:"24px"}},t.fontSizes.map((function(e,t){return r.createElement(p.Z,{key:"font-buttons-"+t,style:{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3},onClick:y(e)},e.content)})))):null,Z(t.wraps),f&&t.alignment?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),Z(t.alignment)):null,t.insert?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),r.createElement(l.Z,{title:r.createElement(r.Fragment,null,h.Z.insert,r.createElement("span",{className:"screenreader"},b("insert"))),variant:"outline-secondary",size:"sm",style:{display:"inline-block"},name:"Insert"},t.insert.map(E))):null,t.tableEdits?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),r.createElement(l.Z,{title:r.createElement(r.Fragment,null,h.Z.table,r.createElement("span",{className:"screenreader"},b("table"))),variant:"outline-secondary",size:"sm",style:{display:"inline-block"},name:"Table"},t.tableEdits.map(E))):null,f&&t.history?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),t.history.map(w)):null,t.addons?r.createElement("i",{className:"prose-separator"},"|"):null,Z(t.addons))}))},416515:function(e,t,n){var r=n(109025),o=n(381629);t.Z=function(e){var t=document.createElement("div");return t.innerHTML=e,r.DOMParser.fromSchema(o.Z).parse(t)}},537133:function(e,t,n){var r=n(202784);t.Z=function(e){return r.createElement("div",{className:"prose-statusbar"},r.createElement("span",null,e.t("words"),": ",e.nWords),r.createElement("span",{style:{marginLeft:5}},e.t("characters"),": ",e.nChars))}},467174:function(e,t,n){var r=n(143144),o=n(497326),i=n(894578),a=n(202784),s=n(213980),l=n.n(s),c=n(690299),u=n.n(c),d=n(109025),p=n(506565),m=n(516037),f=n(603423),h=n(956842),g=n(151300),v=n.n(g),b=n(473103),y=n(611713),w=n(381629),E=n(893121),Z=n(100636),_=n(286618),k=n(537133),S=n(974556),x=n(73811),C=n(416515),O=Object.defineProperty,M=function(e,t,n){return function(e,t,n){t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},P=u()("isle:text-editor"),N=function(e){function t(t){var n,r;n=e.call(this,t)||this,M((0,o.Z)(n),"_createEditorView",(function(e){n.editorDiv=e,null!==e&&(n.editorView=new p.tk(e,{state:n.state.editorState,dispatchTransaction:n.dispatchTransaction,nodeViews:{footnote:function(e,t,n,r){return new E.Z(e,t,n,r)},image:function(e,t,n,r){return new Z.Z(e,t,n,r)},plot:function(e,t,n,r){return new Z.Z(e,t,n,r)},plotContainer:function(e,t,n,r){return new Z.Z(e,t,n,r)}},handleDOMEvents:{dragenter:function(e){P("Handle drag enter event..."),(0,_.yz)(e)},drop:x.Z,keydown:n.props.onKeyDown}})),n.props.onMount(n.editorDiv)})),M((0,o.Z)(n),"onEditorState",(function(e){var t=0,r=0;n.props.showStatusBar&&e.doc.forEach((function(e){e.forEach((function(e){e.text&&(t+=e.text.length,r+=(0,S.Z)(e.text))}))})),n.props.onEditorState(e),n.setState({editorState:e,nWords:r,nChars:t})})),M((0,o.Z)(n),"dispatchTransaction",(function(e){var t=n.state.editorState.apply(e);null!==n.editorView&&n.editorView.updateState(t);var r=(0,f.fixTables)(n.state.editorState);r&&(t=t.apply(r.setMeta("addToHistory",!1))),n.onEditorState(t)})),M((0,o.Z)(n),"saveInBrowser",(function(){P("Saving document state to local storage..."),n.state.editorState&&localStorage.setItem(n.props.id,JSON.stringify(n.state.editorState.doc.toJSON()))})),t.id&&(r=localStorage.getItem(t.id)),r||(r=t.defaultValue);var i=v()(r)?d.Node.fromJSON(w.Z,JSON.parse(r)):(0,C.Z)(r);return n.state={editorState:m.EditorState.create({doc:i,schema:w.Z,plugins:b.Z})},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.autoSave&&this.props.id&&(this.saveInterval=setInterval(this.saveInBrowser,this.props.intervalTime)),window.addEventListener("unload",this.saveInBrowser)},n.componentDidUpdate=function(e){var t=this;if(this.props.defaultValue!==e.defaultValue||this.props.docId!==e.docId){P("Re-creating editor state...");var n=v()(this.props.defaultValue)?d.Node.fromJSON(w.Z,JSON.parse(this.props.defaultValue)):(0,C.Z)(this.props.defaultValue);this.setState({editorState:m.EditorState.create({doc:n,schema:w.Z,plugins:b.Z})},(function(){t.editorView.destroy(),t._createEditorView(t.editorDiv)}))}},n.componentWillUnmount=function(){this.editorView&&this.editorView.destroy(),this.saveInterval&&clearInterval(this.saveInterval),window.removeEventListener("unload",this.saveInBrowser)},n.focus=function(){this.editorView&&this.editorView.focus()},n.render=function(){return a.createElement(a.Fragment,null,a.createElement(y.Z,{menu:this.props.menu,state:this.state.editorState,dispatch:this.dispatchTransaction,view:this.editorView,fullscreen:this.props.fullscreen,showColorPicker:this.props.showColorPicker,onColorChoice:this.props.onColorChoice}),a.createElement("div",{className:this.props.className,ref:this._createEditorView}),this.props.showStatusBar?a.createElement(k.Z,{nWords:this.state.nWords,nChars:this.state.nChars,t:this.props.t}):null)},(0,r.Z)(t,[{key:"markdown",get:function(){return h.Dm.serialize(this.state.editorState.doc)}}]),t}(a.Component);N.propTypes={autoSave:l().bool,intervalTime:l().number,defaultValue:l().string.isRequired,docId:l().number.isRequired,fullscreen:l().bool.isRequired,showColorPicker:l().bool.isRequired,menu:l().object.isRequired,showStatusBar:l().bool,t:l().func,onColorChoice:l().func,onEditorState:l().func,onKeyDown:l().func,onMount:l().func},N.defaultProps={autoSave:!0,intervalTime:1e4,showStatusBar:!0,t:function(){},onColorChoice:function(){},onEditorState:function(){},onKeyDown:function(){},onMount:function(){}},t.Z=N},893121:function(e,t,n){var r=n(506565),o=n(516037),i=n(135428),a=n(182996),s=n(630709),l=n(409961),c=n.n(l),u=n(783158),d=n.n(u),p=Object.defineProperty,m=function(e,t,n){return function(e,t,n){t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},f=function(){function e(e,t,n){var r=this;m(this,"dispatchInner",(function(e){var t=r.innerView.state.applyTransaction(e),n=t.state,o=t.transactions;if(r.innerView.updateState(n),!e.getMeta("fromOutside")){for(var i=r.outerView.state.tr,a=s.KS.offset(r.getPos()+1),l=0;l<o.length;l++)for(var c=o[l].steps,u=0;u<c.length;u++)i.step(c[u].map(a));i.docChanged&&r.outerView.dispatch(i)}})),this.node=e,this.outerView=t,this.getPos=n,this.dom=document.createElement("footnote"),this.innerView=null}var t=e.prototype;return t.selectNode=function(){this.dom.classList.add("ProseMirror-selectednode"),this.innerView||this.open()},t.deselectNode=function(){this.dom.classList.remove("ProseMirror-selectednode"),this.innerView&&this.close()},t.open=function(){var e=this,t=this.dom.appendChild(document.createElement("div"));t.className="footnote-tooltip",this.innerView=new r.tk(t,{state:o.EditorState.create({doc:this.node,plugins:[(0,a.h)({"Mod-z":function(){return(0,i.Yw)(e.outerView.state,e.outerView.dispatch)},"Mod-y":function(){return(0,i.KX)(e.outerView.state,e.outerView.dispatch)}})]}),dispatchTransaction:this.dispatchInner,handleDOMEvents:{mousedown:function(){e.outerView.hasFocus()&&e.innerView.focus()}}})},t.close=function(){this.innerView.destroy(),this.innerView=null,this.dom.textContent=""},t.update=function(e){if(!e.sameMarkup(this.node))return!1;if(this.node=e,this.innerView){var t=this.innerView.state,n=e.content.findDiffStart(t.doc.content);if(!c()(n)){var r=e.content.findDiffEnd(t.doc.content),o=r.a,i=r.b,a=n-d()(o,i);a>0&&(o+=a,i+=a),this.innerView.dispatch(t.tr.replace(n,i,e.slice(n,o)).setMeta("fromOutside",!0))}}return!0},t.destroy=function(){this.innerView&&this.close()},t.stopEvent=function(e){return this.innerView&&this.innerView.dom.contains(e.target)},t.ignoreMutation=function(){return!0},e}();t.Z=f},218696:function(e,t,n){var r=n(44383);t.Z=function e(t,n,o,i){if(!(i<=0)){var a=(0,r.Z)(t.style[n]),s=(o-a)/i*10;setTimeout((function(){var a=(0,r.Z)(t.style[n])+s;t.style[n]=a+"px",a!==o&&e(t,n,o,i-10)}),10)}}},489572:function(e,t){t.Z=function(e){return!e||null===e.offsetParent}},916035:function(e,t){t.Z=function(e,t){for(var n=e.members,r=0;r<n.length;r++){if(n[r].email===t)return!0}return!1}},188777:function(e,t){t.Z=function(e){return new Promise((function(t,n){var r=window.FileReader;if(r){var o=new r;o.onload=function(e){var n=e.target.result;t({src:n,height:0,width:0,id:""})},o.onerror=function(){n(new Error("FileReader failed"))},o.readAsDataURL(e)}else n(new Error("FileReader is not available"))}))}},44383:function(e,t,n){var r=n(302467),o=n.n(r),i=n(792424),a=n.n(i);t.Z=function(e){return a()(e,"px")&&(e=parseFloat(o()(e,"px",""))),e}},432257:function(e,t){t.Z=function(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})}},705193:function(e,t){t.Z=function e(t,n,r){if(!(r<=0)){var o=(n-t.scrollTop)/r*10;setTimeout((function(){t.scrollTop=t.scrollTop+o,t.scrollTop!==n&&e(t,n,r-10)}),10)}}},77461:function(e,t){t.Z=function(e){var t=1;return function(){return e+"-"+(t+=1)}}},78708:function(e){e.exports=JSON.parse("[8,9,10,11,12,14,18,24,30,36,48,60,72]")}}]);
/*! For license information please see TextEditor.f7cd2a0c.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3553],{371538:function(e,t){t.Z=function(e,t,n,r){if(!e.selection||!e.doc||!n)return e;var o=e.selection,i=o.empty,a=o.$cursor,s=o.ranges;if(i&&!a||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,a=o.$to,s=0===i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,a.pos,(function(e){return!s&&(s=e.inlineContent&&e.type.allowsMarkType(n),!0)})),s)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if("object"==typeof i)return i.v}return!1}(e.doc,s,n))return e;if(a)return e=e.removeStoredMark(n),r?e.addStoredMark(n.create(r)):e;for(var l=!1,c=0;!l&&c<s.length;c++){var u=s[c],d=u.$from,p=u.$to;l=e.doc.rangeHasMark(d.pos,p.pos,n)}for(var f=0;f<s.length;f++){var m=s[f],h=m.$from,v=m.$to;l&&(e=e.removeMark(h.pos,v.pos,n)),r&&(e=e.addMark(h.pos,v.pos,n.create(r)))}return e}},286618:function(e,t,n){n.d(t,{yz:function(){return s},wM:function(){return l}});var r=n(887757),o=n.n(r),i=n(516037),a=new i.PluginKey("cursor-parking");t.ZP=function(){return new i.Plugin({key:a,state:{init:function(){return{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null,pos:null}},apply:function(e,t){var n=e.getMeta(this);return n?n.inCursorParking?{inCursorParking:!0,pos:n.pos,storedMarks:e.storedMarks,bookmarkToRestore:e.selection.getBookmark()}:{inCursorParking:!1,pos:n.pos,storedMarks:null,bookmarkToRestore:null}:e.docChanged&&t.inCursorParking&&t.bookmarkToRestore?{inCursorParking:!0,pos:null,storedMarks:t.storedMarks,bookmarkToRestore:t.bookmarkToRestore.map(e.mapping)}:t}},view:function(){var e=document.createElement("cursor-parking");e.setAttribute("style","width:0px;height:0px;position:fixed;top:50%,left:50%;"),e.setAttribute("tabIndex","-1"),e.setAttribute("contenteditable","true");var t=function(){e.innerHTML="<div><br/></div>"};return t(),document.body.appendChild(e),{update:function(n,r){var o=a.getState(r),s=a.getState(n.state);if(!o.inCursorParking&&s.inCursorParking&&function(){var t=document.createRange();t.selectNodeContents(e.firstChild);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}(),o.inCursorParking&&!s.inCursorParking){var l=n.dispatch,c=n.state.tr;if(o.bookmarkToRestore&&c.setSelection(o.bookmarkToRestore.resolve(c.doc)),o.storedMarks&&c.setStoredMarks(o.storedMarks),n.focus(),s.pos){var u=s.pos;c=c.setSelection(i.TextSelection.create(c.doc,u,u))}else l(c);t()}},destroy:function(){e.parentNode.removeChild(e)}}}})};var s=function(e,t){return n=void 0,r=null,i=o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.dispatch(e.state.tr.setMeta(a,{inCursorParking:!0,pos:t})),n.next=3,new Promise((function(e){return setTimeout(e,0)}));case 3:e.dispatch(e.state.tr.setMeta(a,{inCursorParking:!1,pos:t}));case 4:case"end":return n.stop()}}),n)})),new Promise((function(e,t){var o=function(e){try{s(i.next(e))}catch(n){t(n)}},a=function(e){try{s(i.throw(e))}catch(n){t(n)}},s=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(o,a)};s((i=i.apply(n,r)).next())}));var n,r,i},l=function(e){e.dispatch(e.state.tr.setMeta(a,{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null,pos:null}))}},685261:function(e,t,n){n.d(t,{NV:function(){return f},ud:function(){return m}});var r=n(497326),o=n(894578),i=n(516037),a=n(506565),s={name:"CursorPlaceholderPlugin"},l=null,c={state:{init:function(){return a.EH.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(!n)return t;if(n.add){var r=document.createElement("editor-cursor-placeholder");r.className="editor-cursor-placeholder";var o=a.p.widget(n.add.pos,r,{id:s});t=t.add(e.doc,[o])}else if(n.remove){var i=t.find(null,null,d);t=t.remove(i)}return t}},props:{decorations:function(e){return l?l.getState(e):null}}},u=function(e){function t(){var t;return t=e.call(this,c)||this,l?l||(0,r.Z)(t):(l=(0,r.Z)(t),t)}return(0,o.Z)(t,e),t}(i.Plugin);function d(e){return e.id===s}function p(e){if(!l)return null;var t=l.getState(e).find(null,null,d);return(t.length?t[0].from:null)||null}function f(e){var t=l,n=e.tr;return t&&n.selection?(null===p(e)&&(n.selection.empty||(n=n.deleteSelection()),n=n.setMeta(t,{add:{pos:n.selection.from}})),n):n}function m(e){var t=l,n=e.tr;return t?(null!==p(e)&&(n=n.setMeta(t,{remove:{}})),n):n}t.ZP=u},654603:function(e,t,n){function r(e,t,n,r){for(var o=t,i=function(e){return e.type===r},a=null,s=null,l=null;o<=n;){var c=e.nodeAt(o);if(!c||!c.marks)return null;var u=c.marks.find(i);if(!u)return null;if(a&&u!==a)return null;s=s||c,a=a||u,l=c,o++}var d=t,p=n,f=0;for(o=t-1;o>f;){var m=e.nodeAt(o),h=m&&m.marks.find(i);if(!h||h!==a)break;d=o,s=m,o--}for(o=n+1,f=e.nodeSize-2;o<f;){var v=e.nodeAt(o),g=v&&v.marks.find(i);if(!g||g!==a)break;p=o,l=v,o++}return{mark:a,from:{node:s,pos:d},to:{node:l,pos:p}}}n.d(t,{Z:function(){return r}})},970693:function(e,t,n){var r=n(202784),o={alignLeft:r.createElement("i",{className:"prosemirror-icon fas fa-align-left"}),alignCenter:r.createElement("i",{className:"prosemirror-icon fas fa-align-center"}),alignRight:r.createElement("i",{className:"prosemirror-icon fas fa-align-right"}),alignJustify:r.createElement("i",{className:"prosemirror-icon fas fa-align-justify"}),annotation:r.createElement("i",{className:"prosemirror-icon fas fa-comment"}),blockquote:r.createElement("i",{className:"prosemirror-icon fas fa-quote-left"}),bold:r.createElement("i",{className:"prosemirror-icon fas fa-bold"}),bullet_list:r.createElement("i",{className:"prosemirror-icon fas fa-list-ul"}),code_block:r.createElement("i",{className:"prosemirror-icon fas fa-file-code"}),code:r.createElement("i",{className:"prosemirror-icon fas fa-code"}),color:r.createElement("i",{className:"prosemirror-icon fas fa-palette"}),editTable:r.createElement("i",{className:"prosemirror-icon fas fa-table"}),em:r.createElement("i",{className:"prosemirror-icon fas fa-italic"}),error:r.createElement("i",{className:"prosemirror-icon fas fa-bug"}),fullscreen:r.createElement("i",{className:"prosemirror-icon fas fa-expand"}),guides:r.createElement("i",{className:"prosemirror-icon fa fa-question-circle"}),history:r.createElement("i",{className:"prosemirror-icon fas fa-history"}),insert:r.createElement("i",{className:"prosemirror-icon fa fa-plus-square"}),link:r.createElement("i",{className:"prosemirror-icon fa fa-link"}),open:r.createElement("i",{className:"prosemirror-icon fa fa-folder-open"}),ordered_list:r.createElement("i",{className:"prosemirror-icon fas fa-list-ol"}),paragraph:r.createElement("i",{className:"prosemirror-icon fas fa-paragraph"}),pdf:r.createElement("i",{className:"prosemirror-icon fas fa-file-pdf"}),redo:r.createElement("i",{className:"prosemirror-icon fas fa-redo"}),reset:r.createElement("i",{className:"prosemirror-icon fa fa-eraser"}),save:r.createElement("i",{className:"prosemirror-icon fa fa-save"}),selectParent:r.createElement("i",{className:"prosemirror-icon far fa-object-group"}),strikethrough:r.createElement("i",{className:"prosemirror-icon fas fa-strikethrough"}),strong:r.createElement("i",{className:"prosemirror-icon fas fa-bold"}),submit:r.createElement("i",{className:"prosemirror-icon fa fa-share-square"}),subscript:r.createElement("i",{className:"prosemirror-icon fas fa-subscript"}),table:r.createElement("i",{className:"prosemirror-icon fas fa-table"}),superscript:r.createElement("i",{className:"prosemirror-icon fas fa-superscript"}),underline:r.createElement("i",{className:"prosemirror-icon fas fa-underline"}),undo:r.createElement("i",{className:"prosemirror-icon fas fa-undo"})};t.Z=o},743766:function(e,t,n){n.d(t,{q:function(){return h}});var r=n(894578),o=n(516037),i=n(506565),a=n(409961),s=n.n(a),l=n(77461),c=n(188777),u=(0,l.Z)("image_upload"),d=new Set(["image/jpeg","image/gif","image/png","image/jpg"]),p=new Array(4).join('<div class="editor-image-upload-placeholder-child"></div>');function f(e){return e instanceof v}function m(e){return e&&d.has(e.type)}function h(e,t,r){var i=e.state,a=e.readOnly,l=e.disabled,d=i.schema,p=i.plugins;if(a||l)return!1;var h=d.nodes.image;if(!h)return!1;var v=Array.from(t).filter(m);if(!v.length)return!1;var g=p.find(f);if(!g)return!1;var b,y={debugId:u()},w=(b=function(){var t=function(t){var n=function(e,t,n){var r=e.getState(t).find(null,null,(function(e){return e.id===n}));return r.length?r[0].from:null}(g,e.state,y),r=e.state.tr;if(!n||e.readOnly||e.disabled)v.length=0;else{var o=h.create(t);r=r.replaceWith(n,n,o)}v.length?w():r=r.setMeta(g,{remove:{id:y}}),e.dispatch(r)},r=v.shift();if(s()(r))throw new Error("unexpected null value");var o=n.g.session;if(o.server&&o.uploadFile){var i=new FormData;i.append("file",r),o.uploadFile({formData:i,callback:function(e,n){return e?t({src:null}):n&&n.filename?t({src:o.server+"/"+n.filename}):t({src:null})},showNotification:!1})}else(0,c.Z)(r).then(t).catch(t.bind(null,{src:null}))},function(){setTimeout(b,0)});w();var E=i.tr,_=0;if(r){var Z=e.posAtCoords({left:r.x,top:r.y});if(!Z)return!1;_=Z.pos,E=E.setSelection(o.TextSelection.create(E.doc,_,_))}else _=E.selection.to,E=E.setSelection(o.TextSelection.create(E.doc,_,_));var S={add:{id:y,pos:_}};return E=E.setMeta(g,S),e.dispatch(E),!0}var v=function(e){function t(){return e.call(this,{state:{init:function(){return i.EH.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(n&&n.add){var r=document.createElement("div");r.title="Uploading...",r.className="editor-image-upload-placeholder",r.innerHTML=p;var o=i.p.widget(n.add.pos,r,{id:n.add.id});t=t.add(e.doc,[o])}else if(n&&n.remove){t=t.remove(t.find(null,null,(function(e){return e.id===n.remove.id})))}return t}},props:{decorations:function(e){return this.getState(e)}}})||this}return(0,r.Z)(t,e),t}(o.Plugin);t.Z=v},508838:function(e,t,n){var r=n(516037);t.Z=function(e,t){var n=e.selection,o=e.schema,i=e.tr;if(!o.marks[t])return!1;if(!(n instanceof r.TextSelection||n instanceof r.AllSelection))return!1;var a=e.selection,s=a.from;if(a.to===s+1){var l=i.doc.nodeAt(s);if(l.isAtom&&!l.isText&&l.isLeaf)return!1}return!0}},339925:function(e,t,n){n.d(t,{ZP:function(){return ot},$T:function(){return tt},EI:function(){return Ke},Uy:function(){return Qe}});var r=n(919353),o=n(141396),i=n(516037),a=n(135428),s=n(414256),l=n(603423),c=n(970693),u=n(381629),d=function(e){return function(t){for(var n=t.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,e))return!0}return!1}},p=n(37900),f=n(371538),m=n(78708),h=n(508838),v=n(497326),g=n(894578),b=n(676065),y=n.n(b),w=n(838322),E=n(654603),_=n(674577),Z=n(96899),S=n(120914),k=Object.defineProperty,x=function(e,t,n){return function(e,t,n){t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},C=function(e){function t(){var t;return t=e.apply(this,arguments)||this,x((0,v.Z)(t),"_popUp",null),x((0,v.Z)(t),"title","apply-link"),x((0,v.Z)(t),"content",c.Z.link),x((0,v.Z)(t),"enable",(function(e){if(!(e.selection instanceof i.TextSelection))return!1;if(!e.schema.marks.link)return!1;var t=e.selection;return t.from<t.to})),x((0,v.Z)(t),"waitForUserInput",(function(e,n,r,o){if(t._popUp)return Promise.resolve(void 0);n&&n((0,w.tk)(e));var i=e.doc,a=e.schema,s=e.selection,l=a.marks.link;if(!l)return Promise.resolve(void 0);var c=s.from,u=s.to,d=(0,E.Z)(i,c,u,l),p=d?d.mark.attrs.href:null;return new Promise((function(e){t._popUp=(0,S.Z)(_.Z,{href:p},{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})}))})),x((0,v.Z)(t),"executeWithUserInput",(function(e,t,n,r){if(t){var o=e.selection,i=e.schema,a=e.tr;if(a=(a=n?(0,w.be)(n.state):a).setSelection(o),!y()(r)){var s=i.marks.link,l=r?{href:r}:null;a=(0,f.Z)(a.setSelection(e.selection),i,s,l)}t(a)}return n&&n.focus(),!0})),t}return(0,g.Z)(t,e),t}(Z.Z),M=C,O=n(202784),D=n(109025),P=n(685261),N=Object.defineProperty,I=function(e,t,n){return function(e,t,n){t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n};function j(e,t,n){var r=e.selection;if(!r)return e;var o=r.from;if(o!==r.to)return e;var i=t.nodes.image;if(!i)return e;var a={src:n||"",alt:"",title:""},s=i.create(a,null,null),l=D.Fragment.from(s);return e=e.insert(o,l)}var T=function(e){function t(){var t;return t=e.apply(this,arguments)||this,I((0,v.Z)(t),"_popUp",null),I((0,v.Z)(t),"enable",(function(e,n){return t.__isEnabled(e,n)})),I((0,v.Z)(t),"waitForUserInput",(function(e,n,r,o){return t._popUp?Promise.resolve(void 0):(n&&n((0,P.NV)(e)),new Promise((function(e){var n={runtime:r?r.runtime:null};t._popUp=(0,S.Z)(t.getEditor(),n,{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})})))})),I((0,v.Z)(t),"executeWithUserInput",(function(e,t,n,r){if(t){var o=e.selection,i=e.schema,a=e.tr;if(a=(a=n?(0,P.ud)(n.state):a).setSelection(o),r)a=j(a,i,r.src);t(a),n&&n.focus()}return!1})),I((0,v.Z)(t),"__isEnabled",(function(e,t){var n=e.selection;return n instanceof i.TextSelection&&n.from===n.to})),t}return(0,g.Z)(t,e),t}(Z.Z),A=T,R=n(867855),V=n(585208),z=n(409856),L=n(213955),F=n(761540),U=Object.defineProperty,H=Object.defineProperties,W=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,$=function(e,t,n){return t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},K=function(e,t,n){return $(e,"symbol"!=typeof t?t+"":t,n),n},G=function(e){function t(t){var n,r;return n=e.call(this,t)||this,K((0,v.Z)(n),"_onSrcChange",(function(e){var t=e.target.value;n.setState({src:t,validValue:null},n._didSrcChange)})),K((0,v.Z)(n),"_didSrcChange",(function(){(0,F.Z)(n.state.src).then((function(e){if(n.state.src===e.src&&!n._unmounted){var t=e.complete?e:null;n.setState({validValue:t})}}))})),K((0,v.Z)(n),"_cancel",(function(){n.props.close()})),K((0,v.Z)(n),"_insert",(function(){var e=n.state.validValue;n.props.close(e)})),n._img=null,n._unmounted=!1,n.state=(r=function(e,t){for(var n in t||(t={}))q.call(t,n)&&$(e,n,t[n]);if(B)for(var r,o=(0,R.Z)(B(t));!(r=o()).done;)n=r.value,J.call(t,n)&&$(e,n,t[n]);return e}({},n.props.initialValue||{}),H(r,W({validValue:null}))),n}(0,g.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._unmounted=!0},n.render=function(){var e=this.state,t=e.src,n=e.validValue,r=n?O.createElement("div",{className:"editor-image-url-editor-input-preview",style:{backgroundImage:"url("+String(n.src)}}):null;return O.createElement("div",{className:"editor-image-url-editor"},O.createElement("form",{className:"editor-form",onSubmit:L.Z},O.createElement("fieldset",null,O.createElement("legend",null,V.a.t("text-editor:insert-image")),O.createElement("div",{className:"editor-image-url-editor-src-input-row"},O.createElement("input",{autoFocus:!0,className:"editor-image-url-editor-src-input",onChange:this._onSrcChange,placeholder:"Paste URL of Image...",type:"text",value:t||""}),r),O.createElement("em",null,V.a.t("text-editor:require-license"))),O.createElement("div",{className:"editor-form-buttons"},O.createElement(z.Z,{label:V.a.t("text-editor:cancel"),onClick:this._cancel}),O.createElement(z.Z,{active:!!n,disabled:!n,label:V.a.t("text-editor:insert"),onClick:this._insert}))))},t}(O.PureComponent),Y=Object.defineProperty,X=function(e,t,n){return function(e,t,n){t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Q=function(e){function t(){var t;return t=e.apply(this,arguments)||this,X((0,v.Z)(t),"title","insert-image-url"),X((0,v.Z)(t),"content","insert-image-url"),t}return(0,g.Z)(t,e),t.prototype.getEditor=function(){return G},t}(A),ee=Q,te=n(72779),ne=n.n(te),re=n(294325),oe=n(77461),ie=n(188777),ae=Object.defineProperty,se=function(e,t,n){return function(e,t,n){t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},le=(0,oe.Z)("image-upload-editor"),ce=function(e){function t(t){var r;return r=e.call(this,t)||this,se((0,v.Z)(r),"_onSelectFile",(function(e){var t=e.target.files&&e.target.files[0];t&&"object"==typeof t&&r._upload(t)})),se((0,v.Z)(r),"_onSuccess",(function(e){r._unmounted||r.props.close(e)})),se((0,v.Z)(r),"_onError",(function(e){r._unmounted||r.setState({error:e,id:le(),pending:!1})})),se((0,v.Z)(r),"_upload",(function(e){r.setState({pending:!0,error:null});var t=n.g.session;if(t.server&&t.uploadFile){var o=new FormData;o.append("file",e),t.uploadFile({formData:o,callback:function(e,n){return e?r._onError(e):n&&n.filename?r._onSuccess({src:t.server+"/"+n.filename}):r._onSuccess({src:null})},showNotification:!1})}else(0,ie.Z)(e).then((function(e){r._onSuccess(e)})).catch((function(e){r._onError(e)}))})),se((0,v.Z)(r),"_cancel",(function(){r.props.close()})),r._img=null,r._unmounted=!1,r.state={error:null,id:le(),pending:!1},r}(0,g.Z)(t,e);var r=t.prototype;return r.componentWillUnmount=function(){this._unmounted=!0},r.render=function(){var e=this.state,t=e.id,n=e.error,r=e.pending,o=ne()("editor-image-upload-editor",{pending:r,error:n}),i=V.a.t("text-editor:choose-an-image-file");return r?i=O.createElement(re.Z,{animation:"border",role:"status"}):n&&(i=V.a.t("text-editor:error-while-uploading")),O.createElement("div",{className:o},O.createElement("form",{className:"editor-form"},O.createElement("fieldset",null,O.createElement("legend",null,V.a.t("text-editor:upload-image")),O.createElement("div",{className:"editor-image-upload-editor-body"},O.createElement("div",{className:"editor-image-upload-editor-label"},i),O.createElement("input",{accept:"image/png,image/gif,image/jpeg,image/jpg",className:"editor-image-upload-editor-input",disabled:r,id:t,key:t,onChange:this._onSelectFile,type:"file"}))),O.createElement("div",{className:"editor-form-buttons"},O.createElement(z.Z,{label:V.a.t("text-editor:cancel"),onClick:this._cancel}))))},t}(O.PureComponent),ue=Object.defineProperty,de=function(e,t,n){return function(e,t,n){t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},pe=function(e){function t(){var t;return t=e.apply(this,arguments)||this,de((0,v.Z)(t),"title","upload-image"),de((0,v.Z)(t),"content","upload-image"),t}return(0,g.Z)(t,e),t.prototype.getEditor=function(){return ce},t}(A),fe=pe,me=n(575175),he=n(928316),ve=n(306830),ge=n.n(ve),be=n(877119),ye=n.n(be),we=n(686605),Ee=n.n(we),_e=n(521536),Ze=n.n(_e),Se=n(557106),ke=n.n(Se),xe=n(783158),Ce=n.n(xe),Me=n(111994),Oe=Object.defineProperty,De=function(e,t,n){return function(e,t,n){t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Pe=16;var Ne=function(e){function t(){return e.apply(this,arguments)||this}return(0,g.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.x,n=e.y,r=e.selected,o={left:t+"px",top:n+"px",width:"16px",height:"16px"},i=ne()("editor-table-grid-size-editor-cell",{selected:r});return O.createElement("div",{className:i,style:o})},t}(O.PureComponent),Ie=function(e){function t(t){var n;return n=e.call(this,t)||this,De((0,v.Z)(n),"_onRef",(function(e){n._ref=e})),De((0,v.Z)(n),"_onMouseEnter",(function(e){var t=e.currentTarget;if(t instanceof HTMLElement){var r=(0,Me.hs)(t),o=Ee()(e.clientX),i=Ee()(e.clientY);n._ex=r.x,n._ey=r.y,n._mx=o,n._my=i,n._entered||(n._entered=!0,document.addEventListener("mousemove",n._onMouseMove,!0))}})),De((0,v.Z)(n),"_onMouseMove",(function(e){var t=n._ref&&he.findDOMNode(n._ref),r=t?function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}}(t):null,o=(0,Me.mv)(e.screenX,e.screenY,10);r&&o&&(0,Me.vY)(r,o,50)&&(e.preventDefault(),e.stopImmediatePropagation());var i=Ee()(e.clientX),a=Ee()(e.clientY);i===n._mx&&a===n._my||(n._mx=i,n._my=a,n._rafID&&cancelAnimationFrame(n._rafID),n._rafID=requestAnimationFrame(n._updateGridSize))})),De((0,v.Z)(n),"_updateGridSize",(function(){n._rafID=0;var e=n._mx,t=n._my,r=e-n._ex,o=t-n._ey,i=ye()(Ze()(o/21),1,20),a=ye()(Ze()(r/21),1,20),s=n.state,l=s.rows,c=s.cols;l===i&&c===a||n.setState({rows:i,cols:a})})),De((0,v.Z)(n),"_onMouseDown",(function(e){e.preventDefault(),n.props.close(n.state)})),n._ex=0,n._ey=0,n._mx=0,n._my=0,n._rafID=0,n._ref=null,n._entered=!1,n.state={rows:1,cols:1},n}(0,g.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._entered&&document.removeEventListener("mousemove",this._onMouseMove,!0),this._rafID&&cancelAnimationFrame(this._rafID)},n.render=function(){var e=this.state,t=e.rows,n=e.cols,r=ke()(5,t),o=ke()(5,n);r===t&&(r=Ce()(20,r+1)),o===n&&(o=Ce()(20,o+1));for(var i=[],a=0,s=0,l=0,c=0;a<r;){s+=5;for(var u=0,d=0;u<o;){d+=5;var p=a<t&&u<n;i.push(O.createElement(Ne,{key:String(a)+"-"+String(u),selected:p,x:d,y:s})),l=(d+=Pe)+5,u++}c=(s+=Pe)+5,a++}var f={width:l+"px",height:c+"px"};return O.createElement("div",{className:"editor-table-grid-size-editor",ref:this._onRef},O.createElement("div",{className:"editor-table-grid-size-editor-body",onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter,style:f,role:"button",tabIndex:0},i),O.createElement("div",{className:"editor-table-grid-size-editor-footer"},O.createElement("b",null,t)," ",O.createElement("i",{className:"fa fa-times"})," ",O.createElement("b",null,n)))},t}(O.PureComponent);Ie.defaultProps={close:ge()};var je=Ie,Te=n(871199),Ae=n.n(Te),Re=Object.defineProperty,Ve=function(e,t,n){return function(e,t,n){t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n};function ze(e){if(!Ae()(e))return e;var t=new Error("Received unexpected "+e);throw t.framesToPop=1,t}var Le=function(e){function t(){var t;return t=e.apply(this,arguments)||this,Ve((0,v.Z)(t),"_popUp",null),Ve((0,v.Z)(t),"title","insert-table"),Ve((0,v.Z)(t),"content","insert-table"),Ve((0,v.Z)(t),"enable",(function(e){var t=e.selection;return t instanceof i.TextSelection&&t.from===t.to})),Ve((0,v.Z)(t),"waitForUserInput",(function(e,n,r,o){if(t._popUp)return Promise.resolve(void 0);if(!(ze(o).target instanceof HTMLElement))return Promise.resolve(void 0);var i=o?o.target.parentElement.parentElement:null;return new Promise((function(e){t._popUp=(0,S.Z)(je,null,{anchor:i,position:me.SC,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})}))})),Ve((0,v.Z)(t),"executeWithUserInput",(function(e,t,n,r){if(t){var o=e.schema;if(r){for(var i=r.rows,a=r.cols,s=[];a--;)s.push(o.nodes.table_cell.createAndFill());for(var l=[];i--;)l.push(o.nodes.table_row.createAndFill(void 0,s));var c=o.nodes.table.createAndFill(void 0,l);t(e.tr.replaceSelectionWith(c))}}return!1})),t}return(0,g.Z)(t,e),t}(Z.Z),Fe=Le,Ue=function(e){var t=e.selection;return t instanceof i.TextSelection||t instanceof i.AllSelection},He=function(e){var t=e.selection;return t instanceof i.TextSelection&&t.from===t.to},We=function(e){return function(t){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?!!e.isInSet(t.storedMarks||o.marks()):!!t.doc.rangeHasMark(r,i,e)}},Be=function(e,t){return void 0===t&&(t={}),function(n){var r=n.selection,o=r.$from,i=r.to,a=r.node;return a?a.hasMarkup(e,t):i<=o.end()&&o.parent.hasMarkup(e,t)}},qe=function(e){return function(t,n){var r=t.schema,o=t.selection,i=function(e,t,n){var r=t.marks.fontSize;if(!r)return e;var o=n?{pt:n}:null;return(0,f.Z)(e,t,r,o)}(t.tr.setSelection(o),r,e);return!(!i.docChanged&&!i.storedMarksSet)&&(!n||n(i))}},Je=function(e){return(0,h.Z)(e,"fontSize")},$e=function(e){return function(t){var n,r=t.schema.nodes.heading;return(n=r?(0,o.Tr)(r)(t.selection):t.selection)&&n.node&&n.node.attrs&&n.node.attrs.level===e}},Ke=[{title:"strong",content:c.Z.strong,enable:Ue,active:We(u.Z.marks.strong),run:(0,r.w9)(u.Z.marks.strong),hotkey:"Ctrl+B"},{title:"emphasis",content:c.Z.em,enable:Ue,active:We(u.Z.marks.em),run:(0,r.w9)(u.Z.marks.em),hotkey:"Ctrl+I"},new M],Ge=[{title:"underline",content:c.Z.underline,enable:Ue,active:We(u.Z.marks.underline),run:(0,r.w9)(u.Z.marks.underline),hotkey:"Ctrl+U"},{title:"strikethrough",content:c.Z.strikethrough,enable:Ue,active:We(u.Z.marks.strikethrough),run:(0,r.w9)(u.Z.marks.strikethrough),hotkey:"Ctrl+S"},{title:"code",content:c.Z.code,enable:Ue,active:We(u.Z.marks.code),run:(0,r.w9)(u.Z.marks.code),hotkey:"Ctrl+M"},{title:"subscript",content:c.Z.subscript,enable:Ue,active:We(u.Z.marks.subscript),run:(0,r.w9)(u.Z.marks.subscript),hotkey:"Ctrl+L"},{title:"superscript",content:c.Z.superscript,enable:Ue,active:We(u.Z.marks.superscript),run:(0,r.w9)(u.Z.marks.superscript),hotkey:"Ctrl+P"}],Ye=[{title:"change-paragraph",content:c.Z.paragraph,active:Be(u.Z.nodes.paragraph),enable:(0,r.uJ)(u.Z.nodes.paragraph),run:(0,r.uJ)(u.Z.nodes.paragraph)},{title:"change-heading-1",content:"H1",active:$e(1),enable:(0,r.uJ)(u.Z.nodes.heading,{level:1}),run:(0,r.uJ)(u.Z.nodes.heading,{level:1}),hotkey:"Shift+Ctrl+1"},{title:"change-heading-2",content:"H2",active:$e(2),enable:(0,r.uJ)(u.Z.nodes.heading,{level:2}),run:(0,r.uJ)(u.Z.nodes.heading,{level:2}),hotkey:"Shift+Ctrl+2"}],Xe=[{title:"change-heading-3",content:"Heading 3",enable:(0,r.uJ)(u.Z.nodes.heading,{level:3}),run:(0,r.uJ)(u.Z.nodes.heading,{level:3}),hotkey:"Shift+Ctrl+3"},{title:"change-heading-4",content:"Heading 4",enable:(0,r.uJ)(u.Z.nodes.heading,{level:4}),run:(0,r.uJ)(u.Z.nodes.heading,{level:4}),hotkey:"Shift+Ctrl+4"},{title:"change-heading-5",content:"Heading 5",enable:(0,r.uJ)(u.Z.nodes.heading,{level:5}),run:(0,r.uJ)(u.Z.nodes.heading,{level:5}),hotkey:"Shift+Ctrl+5"}],Qe=[{title:"wrap-block-quote",content:c.Z.blockquote,active:Be(u.Z.nodes.blockquote),enable:(0,r.ym)(u.Z.nodes.blockquote),run:(0,r.ym)(u.Z.nodes.blockquote),hotkey:"Ctrl+>"},{title:"wrap-bullet-list",content:c.Z.bullet_list,active:Be(u.Z.nodes.bullet_list),enable:(0,s.KI)(u.Z.nodes.bullet_list),run:(0,s.KI)(u.Z.nodes.bullet_list),hotkey:"Shift+Ctrl+8"},{title:"wrap-ordered-list",content:c.Z.ordered_list,active:Be(u.Z.nodes.ordered_list),enable:(0,s.KI)(u.Z.nodes.ordered_list),run:(0,s.KI)(u.Z.nodes.ordered_list),hotkey:"Shift+Ctrl+9"}],et=[{title:"lift-out-enclosing",content:"lift-out-enclosing",enable:r.xb,run:r.xb},{title:"join-with-above",content:"join-with-above",enable:r.MI,run:r.MI},{title:"join-with-below",content:"join-with-below",enable:r.Ig,run:r.Ig}],tt=[new ee,new fe,{title:"insert-footnote",content:"insert-footnote",enable:d(u.Z.nodes.footnote),run:function(e,t){var n=u.Z.nodes.footnote.create();t(e.tr.replaceSelectionWith(n))}},{title:"insert-figure-caption",content:"insert-figure-caption",enable:He,run:function(e,t){var n=u.Z.nodes.figureCaption.create();t(e.tr.replaceSelectionWith(n))}},{title:"insert-table-caption",content:"insert-table-caption",enable:He,run:function(e,t){var n=u.Z.nodes.tableCaption.create();t(e.tr.replaceSelectionWith(n))}},{title:"insert-code-block",content:"insert-code-block",enable:d(u.Z.nodes.code_block),run:function(e,t){var n=u.Z.nodes.code_block.create();t(e.tr.replaceSelectionWith(n))}}],nt=[{title:"undo-last-change",content:c.Z.undo,enable:a.Yw,run:a.Yw,hotkey:"Ctrl+Z"},{title:"redo-last-undone-change",content:c.Z.redo,enable:a.KX,run:a.KX,hotkey:"Ctrl+Y"},{title:"select-parent-node",content:c.Z.selectParent,run:r.N0,select:function(e){return(0,r.N0)(e)},hotkey:"Escape"}],rt=[new Fe,{title:"insert-column-before",content:"insert-column-before",run:l.addColumnBefore},{title:"insert-column-after",content:"insert-column-after",run:l.addColumnAfter},{title:"insert-row-before",content:"insert-row-before",run:l.addRowBefore},{title:"insert-row-after",content:"insert-row-after",run:l.addRowAfter},{title:"delete-column",content:"delete-column",run:l.deleteColumn},{title:"delete-row",content:"delete-row",run:l.deleteRow},{title:"merge-cells",content:"merge-cells",run:l.mergeCells},{title:"split-cells",content:"split-cells",run:l.splitCell},{title:"toggle-header-column",content:"toggle-header-column",run:l.toggleHeaderColumn},{title:"toggle-header-row",content:"toggle-header-row",run:l.toggleHeaderRow},{title:"delete-table",content:"delete-table",run:l.deleteTable}],ot={marks:Ke,extraMarks:Ge,blocks:Ye,headers:Xe,alignment:p.ZP,wraps:Qe,fontSizes:m.map((function(e){return{title:String(e),content:String(e),run:qe(e),enable:Je}})),actions:et,insert:tt,history:nt,tableEdits:rt}},473103:function(e,t,n){n.d(t,{Z:function(){return ve}});var r=n(305250),o=n(960703),i=n(135428),a=n(603423),s=n(894578),l=n(516037),c=n(676065),u=n.n(c),d=n(838322),p=n(371538),f=n(654603);var m=function(e,t){for(;e&&e.nodeName;){if(t(e))return e;e=e.parentElement}return null},h=n(497326),v=n(887757),g=n.n(v),b=n(202784),y=n(175676),w=n(37615),E=n(409856),_=Object.defineProperty,Z=function(e,t,n){return function(e,t,n){t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},S=function(e,t,n){return new Promise((function(r,o){var i=function(e){try{s(n.next(e))}catch(t){o(t)}},a=function(e){try{s(n.throw(e))}catch(t){o(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,a)};s((n=n.apply(e,t)).next())}))},k=function(e){function t(){var t;return t=e.apply(this,arguments)||this,Z((0,h.Z)(t),"_openLink",(function(e){if(e&&0===e.indexOf("#")){var n=e.substr(1),r=document.getElementById(n);if(r){var o=t.props;(0,o.onCancel)(o.editorView),S((0,h.Z)(t),null,g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)(r,{scrollMode:"if-needed",behavior:"smooth"});case 2:case"end":return e.stop()}}),e)})))}}else e&&window.open((0,w.Z)(e))})),t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.href,n=e.editorView,r=e.onEdit,o=e.onRemove;return b.createElement("div",{className:"editor-link-tooltip"},b.createElement("div",{className:"editor-link-tooltip-body"},b.createElement("div",{className:"editor-link-tooltip-row"},b.createElement(E.Z,{className:"editor-link-tooltip-href",label:t,onClick:this._openLink,target:"new",title:t,value:t}),b.createElement(E.Z,{label:"Change",onClick:r,value:n}),b.createElement(E.Z,{label:"Remove",onClick:o,value:n}))))},t}(b.PureComponent),x=k,C=n(674577),M=n(575175),O=n(120914),D=Object.defineProperty,P=function(e,t,n){return function(e,t,n){t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},N={view:function(e){return new j(e)}},I=function(e){function t(){return e.call(this,N)||this}return(0,s.Z)(t,e),t}(l.Plugin),j=function(){function e(e){var t=this;P(this,"_anchorEl",null),P(this,"_popup",null),P(this,"_editor",null),P(this,"_onCancel",(function(e){t.destroy(),e.focus()})),P(this,"_onClose",(function(){t._anchorEl=null,t._editor=null,t._popup=null})),P(this,"_onEdit",(function(e){if(!t._editor){var n=e.state,r=n.schema,o=n.doc,i=n.selection,a=i.from,s=i.to,c=r.marks.link,u=(0,f.Z)(o,a,s,c);if(u){var p=n.tr,m=l.TextSelection.create(p.doc,u.from.pos,u.to.pos+1);p=p.setSelection(m),p=(0,d.tk)(n,p),e.dispatch(p);var h=u?u.mark.attrs.href:null;t._editor=(0,O.Z)(C.Z,{href:h},{onClose:function(n){t._editor=null,t._onEditEnd(e,i,n)}})}}})),P(this,"_onRemove",(function(e){t._onEditEnd(e,e.state.selection,null)})),P(this,"_onEditEnd",(function(e,t,n){var r=e.state,o=e.dispatch,i=(0,d.be)(r);if(!u()(n)){var a=r.schema,s=a.marks.link;if(s){var c=(0,f.Z)(i.doc,t.from,t.to,s);if(c){var m=l.TextSelection.create(i.doc,c.from.pos,c.to.pos+1);i=i.setSelection(m);var h=n?{href:n}:null;i=(0,p.Z)(i,a,s,h)}}}i.setSelection(t.map(i.doc,i.mapping)),o(i),e.focus()})),this.update(e,null)}var t=e.prototype;return t.update=function(e,t){if(e.readOnly)this.destroy();else{var n=e.state,r=n.doc,o=n.selection,i=n.schema.marks.link;if(i){var a=o.from,s=o.to,l=(0,f.Z)(r,a,s,i);if(l){var c=e.domAtPos(a);if(c){var u=m(c.node,(function(e){return"A"===e.nodeName}));if(u){var d=this._popup,p={editorState:n,editorView:e,href:l.mark.attrs.href,onCancel:this._onCancel,onEdit:this._onEdit,onRemove:this._onRemove};d&&u===this._anchorEl?d.update(p):(d&&d.close(),this._anchorEl=u,this._popup=(0,O.Z)(x,p,{anchor:u,autoDismiss:!1,onClose:this._onClose,position:M.DL}))}else this.destroy()}else this.destroy()}else this.destroy()}}},t.destroy=function(){this._popup&&this._popup.close(),this._editor&&this._editor.close()},e}(),T=I,A=n(685261),R=n(743766),V=n(141396);function z(e){var t=e.doc,n=e.selection,r=e.schema,o=r.nodes.table_cell,i=r.nodes.table_header;if(!o&&!i)return null;var s=n;if(s instanceof l.TextSelection){var c=o&&(0,V.Tr)(o)(n)||i&&(0,V.Tr)(i)(n);if(!c)return null;s=a.CellSelection.create(t,c.pos)}return s instanceof a.CellSelection?function(e){var t,n=e.$anchorCell,r=n.start(-1),o=n.node(-1),i=a.TableMap.get(o),s=null,l=null;return e.forEachCell((function(e,n){var o=i.findCell(n-r);(!t||o.top>=t.top&&o.left>t.left)&&(t=o,s=n,l=e)})),null===s?null:{node:l,pos:s}}(s):null}var L=n(185610),F=n(155061),U=n(585208),H=n(970693),W=n(339925),B=Object.defineProperty,q=function(e,t,n){return function(e,t,n){t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},J=function(e){function t(){var t;return t=e.apply(this,arguments)||this,q((0,h.Z)(t),"onMenuMouseDown",(function(e){return function(n){n.preventDefault(),e.run&&e.run(t.props.editorState,t.props.editorView.dispatch,t.props.editorView,n.nativeEvent)}})),q((0,h.Z)(t),"createDropdownButtons",(function(e,n){return b.createElement(F.Z,{key:"dropdown-item-"+n,onMouseDown:t.onMenuMouseDown(e)},U.a.t("text-editor:"+e.content))})),t}return(0,s.Z)(t,e),t.prototype.render=function(){return b.createElement(L.Z,{title:H.Z.table,variant:"outline-secondary",size:"sm",style:{display:"inline-block"}},W.ZP.tableEdits.map(this.createDropdownButtons))},t}(b.PureComponent),$=J;var K=n(111994);function G(e){var t=(0,K.hs)(e),n=t.x,r=t.y,o=t.w,i=t.h,a=o&&i&&e?e.ownerDocument.elementFromPoint(n+1,r+1):null;return!!a&&(a===e||!!e.contains(a))}var Y=Object.defineProperty,X=function(e,t,n){return function(e,t,n){t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Q=function(){function e(e){var t=this;X(this,"destroy",(function(){t._popUp&&t._popUp.close(),t._popUp=null})),X(this,"_onOpen",(function(){var e=t._cellElement;e&&(t._scrollHandle=function(e,t){if(e){for(var n=e.ownerDocument.defaultView,r=[],o=0,i=function(){o&&cancelAnimationFrame(o),o=requestAnimationFrame(t)},a=e;a;){var s=n.getComputedStyle(a).overflow;(i&&"auto"===s||"scroll"===s)&&(a.addEventListener("scroll",i,!1),r.push(a)),a=a.parentElement}return{dispose:function(){for(;i&&r.length;)(a=r.pop())&&a.removeEventListener("scroll",i,!1);i=null,o&&window.cancelAnimationFrame(o),o=0}}}}(e,t._onScroll))})),X(this,"_onClose",(function(){t._popUp=null,t._scrollHandle&&t._scrollHandle.dispose(),t._scrollHandle=null})),X(this,"_onScroll",(function(){var e=t._popUp,n=t._cellElement;e&&n&&(G(n)||e.close())})),this._cellElement=null,this._popUp=null,this._scrollHandle=null,this.update(e,null)}return e.prototype.update=function(e,t){var n=e.state,r=e.readOnly,o=z(n);if(o&&!r){var i=e.domAtPos(o.pos+1);if(i){var a=i.node,s=this._popUp,l={editorState:n,editorView:e};a&&!G(a)&&(a=null),a?s&&a===this._cellElement?s.update(l):(s&&s.close(),this._cellElement=a,this._popUp=(0,O.Z)($,l,{anchor:a,autoDismiss:!1,onClose:this._onClose,position:M.ID}),this._onOpen()):(s&&s.close(),this._cellElement=null)}else this.destroy()}else this.destroy()},e}(),ee={view:function(e){return new Q(e)}},te=function(e){function t(){return e.call(this,ee)||this}return(0,s.Z)(t,e),t}(l.Plugin),ne=n(286618),re=n(919353),oe=n(642777),ie=n(182996),ae=n(414256),se=n(437069),le=n.n(se),ce=n(37900),ue=n(381629),de=function(e,t){var n=ue.Z.nodes.hard_break.create();return t(e.tr.replaceSelectionWith(n).scrollIntoView()),!0},pe={"Alt-ArrowDown":re.Ig,"Alt-ArrowUp":re.MI,"Ctrl-Enter":(0,re.QF)(re.uo,de),"Mod->":(0,re.ym)(ue.Z.nodes.blockquote),"Mod-_":function(e,t){var n=ue.Z.nodes.horizontal_rule.create();return t(e.tr.replaceSelectionWith(n).scrollIntoView()),!0},"Mod-[":(0,ae.IB)(ue.Z.nodes.list_item),"Mod-]":(0,ae.bw)(ue.Z.nodes.list_item),"Mod-b":(0,re.w9)(ue.Z.marks.strong),"Mod-BracketLeft":re.xb,"Mod-Enter":(0,re.QF)(re.uo,de),"Mod-i":(0,re.w9)(ue.Z.marks.em),"Mod-u":(0,re.w9)(ue.Z.marks.underline),"Mod-m":(0,re.w9)(ue.Z.marks.code),"Mod-l":(0,re.w9)(ue.Z.marks.subscript),"Mod-s":(0,re.w9)(ue.Z.marks.strikethrough),"Mod-p":(0,re.w9)(ue.Z.marks.superscript),"Mod-y":i.KX,"Mod-z":i.Yw,"Shift-Ctrl-\\":(0,re.uJ)(ue.Z.nodes.code_block),"Shift-Ctrl-0":(0,re.uJ)(ue.Z.nodes.paragraph),"Shift-Ctrl-1":(0,re.uJ)(ue.Z.nodes.heading,{level:1}),"Shift-Ctrl-2":(0,re.uJ)(ue.Z.nodes.heading,{level:2}),"Shift-Ctrl-3":(0,re.uJ)(ue.Z.nodes.heading,{level:3}),"Shift-Ctrl-4":(0,re.uJ)(ue.Z.nodes.heading,{level:4}),"Shift-Ctrl-5":(0,re.uJ)(ue.Z.nodes.heading,{level:5}),"Shift-Ctrl-6":(0,re.uJ)(ue.Z.nodes.heading,{level:6}),"Shift-Ctrl-8":(0,ae.KI)(ue.Z.nodes.bullet_list),"Shift-Ctrl-9":(0,ae.KI)(ue.Z.nodes.ordered_list),"Shift-Enter":(0,re.QF)(re.uo,de),"Alt-Ctrl-l":ce.H_,"Alt-Ctrl-r":ce.cP,"Alt-Ctrl-c":ce.A8,"Alt-Ctrl-j":ce.nx,"Shift-Mod-z":i.KX,"Shift-Tab":(0,a.goToNextCell)(-1),Backspace:oe.dU,Enter:(0,ae.s6)(ue.Z.nodes.list_item),Escape:re.N0,Tab:(0,a.goToNextCell)(1)};le()(re.YR).forEach((function(e){pe[e]?pe[e]=(0,re.QF)(pe[e],re.YR[e]):pe[e]=re.YR[e]}));var fe=(0,ie.h)(pe);function me(e,t,n){return new oe.VK(e,(function(e,r,o,i){var a=n instanceof Function?n(r):n,s=e.tr;if(r[1]){var l=o+r[0].indexOf(r[1]),c=l+r[1].length;c<i&&s.delete(c,i),l>o&&s.delete(o,l),i=o+r[1].length}return s.addMark(o,i,t.create(a)),s.removeStoredMark(t),s}))}var he=(0,oe.Hw)({rules:[].concat(oe.yR,[oe.LH,oe.pR,(0,oe.S0)(/^\s*>\s$/,ue.Z.nodes.blockquote),(0,oe.S0)(/^(\d+)\.\s$/,ue.Z.nodes.ordered_list,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]})),(0,oe.S0)(/^\s*([-+*])\s$/,ue.Z.nodes.bullet_list),(0,oe.zK)(/^```$/,ue.Z.nodes.code_block),me(/(?:^|[^`])`([^`]+)`$/,ue.Z.marks.code),me(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,ue.Z.marks.strong),me(/(?:^|[^*_])(?:\*|_)([^*_]+)(?:\*|_)$/,ue.Z.marks.em),me(/(?:\+\+)([^+]+)(?:\+\+)$/,ue.Z.marks.underline),me(/(?:~~)([^~]+)(?:~~)$/,ue.Z.marks.strikethrough),(0,oe.zK)(new RegExp("^(#{1,6})\\s$"),ue.Z.nodes.heading,(function(e){return{level:e[1].length}}))])}),ve=[new R.Z,new T,new d.ZP,new A.ZP,he,fe,(0,r.q)(),(0,o.d)(),(0,i.m8)(),(0,a.columnResizing)({}),new te,(0,a.tableEditing)(),(0,ne.ZP)()];document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)},37615:function(e,t,n){n.d(t,{Z:function(){return o}});var r=/^http(s?):*\/\//i;function o(e){return e?r.test(e)?e:"http://"+e:"http://"}},381629:function(e,t,n){n.d(t,{Z:function(){return gt}});var r=n(109025),o={attrs:{href:{},target:{default:"blank"},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=e.getAttribute("href"),n=t&&0===t.indexOf("#")?"":"blank";return{href:e.getAttribute("href"),title:e.getAttribute("title"),target:n}}}],toDOM:function(e){var t=e.attrs;return["a",{href:t.href,title:t.title,target:t.target},0]}},i={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},a={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}},s={parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}},l={excludes:"superscript",parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM:function(){return["sub"]}},c={attrs:{color:""},inline:!0,group:"inline",parseDOM:[{style:"color",getAttrs:function(e){return{color:e}}}],toDOM:function(e){var t=e.attrs.color,n="";return t&&(n+="color: "+t+";"),["span",{style:n},0]}},u=n(32593),d=n.n(u),p=n(395465),f=n.n(p),m=n(78708),h=/([\d.]+)(px|pt)/i;function v(e){var t=function(e){var t=e.match(h);if(!t)return 0;var n=parseFloat(t[1]),r=t[2];return n&&r?("px"===r&&(n*=.7518796992481203),n):0}(e);return m.includes(t)?t:m.reduce((function(e,n){return d()(n-t)<d()(e-t)?n:e}),f())}var g={link:o,code:s,em:i,fontSize:{attrs:{pt:{default:null}},inline:!0,group:"inline",parseDOM:[{style:"font-size",getAttrs:function(e){var t={};if(!e)return t;var n=v(e);if(!n)return t;return{pt:n}}}],toDOM:function(e){var t=e.attrs.pt;return["span",t?{style:"font-size: "+t+"pt;",class:"pm-font-size-mark"}:null,0]}},strikethrough:{parseDOM:[{tag:"strike"},{style:"text-decoration:line-through"},{style:"text-decoration-line:line-through"}],toDOM:function(){return["strike"]}},strong:a,subscript:l,superscript:{excludes:"subscript",parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM:function(){return["sup"]}},textColor:c,underline:{parseDOM:[{tag:"u"},{style:"text-decoration:underline",getAttrs:function(e){return"underline"===e&&null}}],toDOM:function(){return["u",0]}}},b=n(867855),y=n(603423),w=/(left|right|center|justify)/,E="data-indent",_=new Set(["","0%","0pt","0px"]);function Z(e){var t=e.style,n=t.textAlign,r=t.paddingTop,o=t.paddingBottom,i=e.getAttribute("align")||n||"";return{align:i=w.test(i)?i:null,indent:parseInt(e.getAttribute(E),10),paddingTop:r,paddingBottom:o,id:e.getAttribute("id")||""}}function S(e){var t=e.attrs,n=t.align,r=t.indent,o=t.paddingTop,i=t.paddingBottom,a=t.id,s={},l="";return n&&"left"!==n&&(l+="text-align: "+n+";"),o&&!_.has(o)&&(l+="padding-top: "+o+";"),i&&!_.has(i)&&(l+="padding-bottom: "+i+";"),l&&(s.style=l),r&&(s["data-indent"]=String(r)),a&&(s.id=a),["p",s,0]}var k=S,x=Z,C={attrs:{align:{default:null},color:{default:null},id:{default:null},indent:{default:null},lineSpacing:{default:null},paddingBottom:{default:null},paddingTop:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p",getAttrs:Z}],toDOM:S},M=Object.defineProperty,O=Object.defineProperties,D=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,j=function(e,t,n){return t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T=function(e,t){for(var n in t||(t={}))N.call(t,n)&&j(e,n,t[n]);if(P)for(var r,o=(0,b.Z)(P(t));!(r=o()).done;){n=r.value;I.call(t,n)&&j(e,n,t[n])}return e},A=function(e,t){return O(e,D(t))},R={H1:1,H2:2,H3:3,H4:4,H5:5,H6:6};function V(e){var t=x(e),n=R[e.nodeName.toUpperCase()]||1;return t.level=n,t}var z=A(T({},C),{attrs:A(T({},C.attrs),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:V},{tag:"h2",getAttrs:V},{tag:"h3",getAttrs:V},{tag:"h4",getAttrs:V},{tag:"h5",getAttrs:V},{tag:"h6",getAttrs:V}],toDOM:function(e){var t=k(e),n=e.attrs.level||1;return t[0]="h"+n,t}}),L={group:"inline",content:"inline*",inline:!0,atom:!0,toDOM:function(){return["footnote",0]},parseDOM:[{tag:"footnote"}]},F=Object.defineProperty,U=Object.defineProperties,H=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,J=function(e,t,n){return t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},$=function(e,t){for(var n in t||(t={}))B.call(t,n)&&J(e,n,t[n]);if(W)for(var r,o=(0,b.Z)(W(t));!(r=o()).done;){n=r.value;q.call(t,n)&&J(e,n,t[n])}return e};var K,G,Y=(K=$({},C),G={attrs:$({},C.attrs),content:"inline*",group:"block",defining:!0,toDOM:function(e){var t=k(e);return t[0]="legend",t[1].class="figure-caption",t},parseDOM:[{tag:"legend",getAttrs:function(e){return x(e)}}]},U(K,H(G))),X=Object.defineProperty,Q=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,oe=function(e,t,n){return t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ie=function(e,t){for(var n in t||(t={}))ne.call(t,n)&&oe(e,n,t[n]);if(te)for(var r,o=(0,b.Z)(te(t));!(r=o()).done;){n=r.value;re.call(t,n)&&oe(e,n,t[n])}return e};var ae=function(e,t){return Q(e,ee(t))}(ie({},C),{attrs:ie({},C.attrs),content:"inline*",group:"block",defining:!0,toDOM:function(e){var t=k(e);return t[0]="legend",t[1].class="table-caption",t},parseDOM:[{tag:"legend",getAttrs:function(e){return x(e)}}]}),se=ae,le=/rotate\(([0-9.]+)rad\)/i,ce=new Set(["0%","0pt","0px"]);function ue(e){var t=e.style,n=t.cssFloat,r=t.display,o=t.marginTop,i=t.marginLeft,a=e.style,s=a.width,l=a.height,c=e.getAttribute("data-align")||e.getAttribute("align");c?c=/(left|right|center)/.test(c)?c:null:"left"!==n||r?"right"!==n||r?n||"block"!==r||(c="block"):c="right":c="left",s=s||e.getAttribute("width"),l=l||e.getAttribute("height");var u=null,d=null,p=e.parentElement;if(p instanceof HTMLElement){var f=p.style;if("inline-block"===f.display&&"hidden"===f.overflow&&f.width&&f.height&&i&&!ce.has(i)&&o&&!ce.has(o)&&(u={width:parseInt(f.width,10)||0,height:parseInt(f.height,10)||0,left:parseInt(i,10)||0,top:parseInt(o,10)||0}),f.transform){var m=f.transform.match(le);m&&m[1]&&(d=parseFloat(m[1])||null)}}return{align:c,alt:e.getAttribute("alt")||null,crop:u,height:parseInt(l,10)||null,rotate:d,src:e.getAttribute("src")||null,title:e.getAttribute("title")||null,width:parseInt(s,10)||null}}var de=ue,pe={inline:!0,attrs:{align:{default:null},alt:{default:"An inserted image"},crop:{default:null},height:{default:null},rotate:{default:null},src:{default:null},title:{default:"None"},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:ue}],toDOM:function(e){return["img",e.attrs]}},fe=Object.defineProperty,me=Object.defineProperties,he=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,ye=function(e,t,n){return t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},we={attrs:{src:{},plotID:{default:null},align:{default:null},alt:{default:""},crop:{default:null},title:{default:""},meta:{default:null},width:{default:null},height:{default:null},rotate:{default:null}},inline:!0,group:"inline",draggable:!0,toDOM:function(e){return["div",{class:"img-container","data-plot-id":e.attrs.plotID,align:e.attrs.align},["img",{src:e.attrs.src,align:e.attrs.align,alt:e.attrs.alt,crop:e.attrs.crop,title:e.attrs.title,width:e.attrs.width,height:e.attrs.height,rotate:e.attrs.rotate}],["pre",{class:"img-tooltip"},e.attrs.meta]]},parseDOM:[{priority:51,tag:"div[data-plot-id]",getAttrs:function(e){var t=e.getAttribute("data-plot-id"),n=e.firstChild,r=de(n),o=e.lastChild.innerText;return function(e,t){return me(e,he(t))}(function(e,t){for(var n in t||(t={}))ge.call(t,n)&&ye(e,n,t[n]);if(ve)for(var r,o=(0,b.Z)(ve(t));!(r=o()).done;)n=r.value,be.call(t,n)&&ye(e,n,t[n]);return e}({},r),{meta:o,plotID:t})}}]},Ee=we,_e=Object.defineProperty,Ze=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,Me=function(e,t,n){return t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Oe={attrs:{src:{},plotID:{default:null},align:{default:null},alt:{default:""},crop:{default:null},title:{default:""},meta:{default:null},width:{default:null},height:{default:null},rotate:{default:null}},inline:!0,group:"inline",draggable:!0,toDOM:function(e){return["div",{class:"img-container","data-plot-id":e.attrs.plotID,align:e.attrs.align},["img",{src:e.attrs.src,align:e.attrs.align,alt:e.attrs.alt,crop:e.attrs.crop,title:e.attrs.title,width:e.attrs.width,height:e.attrs.height,rotate:e.attrs.rotate}],["pre",{class:"img-tooltip"},e.attrs.meta]]},parseDOM:[{priority:51,tag:"img[data-plot-id]",getAttrs:function(e){var t=e.getAttribute("align"),n=e.getAttribute("width"),r=de(e);t||(r.align="center"),n||(r.width=550);var o=e.getAttribute("data-plot-id"),i=e.getAttribute("data-plot-meta");return function(e,t){return Ze(e,Se(t))}(function(e,t){for(var n in t||(t={}))xe.call(t,n)&&Me(e,n,t[n]);if(ke)for(var r,o=(0,b.Z)(ke(t));!(r=o()).done;)n=r.value,Ce.call(t,n)&&Me(e,n,t[n]);return e}({},r),{meta:i,plotID:o})}}]},De=Oe,Pe={content:"block+"},Ne={content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},Ie={group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},je={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},Te={group:"inline"},Ae={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},Re=n(414256),Ve=Object.defineProperty,ze=Object.defineProperties,Le=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,We=function(e,t,n){return t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Be=function(e,t){return ze(e,Le(t))}(function(e,t){for(var n in t||(t={}))Ue.call(t,n)&&We(e,n,t[n]);if(Fe)for(var r,o=(0,b.Z)(Fe(t));!(r=o()).done;){n=r.value;He.call(t,n)&&We(e,n,t[n])}return e}({},Re.dq),{content:"list_item+",group:"block"}),qe=Be,Je=Object.defineProperty,$e=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Qe=function(e,t,n){return t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},et=function(e,t){return $e(e,Ke(t))}(function(e,t){for(var n in t||(t={}))Ye.call(t,n)&&Qe(e,n,t[n]);if(Ge)for(var r,o=(0,b.Z)(Ge(t));!(r=o()).done;){n=r.value;Xe.call(t,n)&&Qe(e,n,t[n])}return e}({},Re.iI),{content:"list_item+",group:"block"}),tt=et,nt=Object.defineProperty,rt=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,lt=function(e,t,n){return t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ct=function(e,t){return rt(e,ot(t))}(function(e,t){for(var n in t||(t={}))at.call(t,n)&&lt(e,n,t[n]);if(it)for(var r,o=(0,b.Z)(it(t));!(r=o()).done;){n=r.value;st.call(t,n)&&lt(e,n,t[n])}return e}({},Re.qb),{content:"paragraph block*",group:"block"}),ut=ct,dt=Object.defineProperty,pt=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,ht=function(e,t,n){return t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},vt=function(e,t){for(var n in t||(t={}))ft.call(t,n)&&ht(e,n,t[n]);if(pt)for(var r,o=(0,b.Z)(pt(t));!(r=o()).done;){n=r.value;mt.call(t,n)&&ht(e,n,t[n])}return e}({doc:Pe,plot:De,plotContainer:Ee,footnote:L,paragraph:C,ordered_list:qe,bullet_list:tt,list_item:ut,blockquote:Ne,horizontal_rule:Ie,heading:z,code_block:je,text:Te,image:pe,hard_break:Ae,figureCaption:Y,tableCaption:se},(0,y.tableNodes)({tableGroup:"block",cellContent:"block+"})),gt=new r.Schema({nodes:vt,marks:g})},838322:function(e,t,n){n.d(t,{tk:function(){return f},be:function(){return m}});var r=n(497326),o=n(894578),i=n(516037),a=n(506565),s={name:"SelectionPlaceholderPlugin"},l=null,c={state:{init:function(){return a.EH.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(!n)return t;if(n.add){var r=a.p.inline(n.add.from,n.add.to,{class:"selection-placeholder"},{id:s});t=t.add(e.doc,[r])}else if(n.remove){var o=t.find(null,null,d);t=t.remove(o)}return t}},props:{decorations:function(e){return l?l.getState(e):null}}},u=function(e){function t(){var t;return t=e.call(this,c)||this,l?l||(0,r.Z)(t):(l=(0,r.Z)(t),t)}return(0,o.Z)(t,e),t}(i.Plugin);function d(e){return e.id===s}function p(e){if(!l)return null;if(!e.plugins.includes(l))return null;var t=l.getState(e).find(null,null,d);return(t.length?t[0]:null)||null}function f(e,t){t=t||e.tr;var n=l;return n&&t.selection&&!t.selection.empty?(null===p(e)&&(t=t.setMeta(n,{add:{from:t.selection.from,to:t.selection.to}})),t):t}function m(e,t){t=t||e.tr;var n=l;return n?(p(e)&&(t=t.setMeta(n,{remove:{}})),t):t}t.ZP=u},37900:function(e,t,n){n.d(t,{H_:function(){return b},A8:function(){return y},cP:function(){return w},nx:function(){return E}});var r=n(867855),o=n(516037),i=n(970693),a=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=function(e,t,n){return t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},f=function(e,t){for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(c)for(var o,i=(0,r.Z)(c(t));!(o=i()).done;){n=o.value;d.call(t,n)&&p(e,n,t[n])}return e},m=function(e,t){return s(e,l(t))},h=function(e){var t=e.selection;return t instanceof o.TextSelection||t instanceof o.AllSelection},v=function(e,t,n){var r=e,o=r.selection,i=r.doc;if(!o||!i)return e;var a=o.from,s=o.to,l=t.nodes,c=l.blockquote,u=l.list_item,d=l.heading,p=l.paragraph,h=[];n=n||null;var v=new Set([c,d,u,p]);return i.nodesBetween(a,s,(function(e,t,r){var o=e.type;return(e.attrs.align||null)!==n&&v.has(o)&&h.push({node:e,pos:t,nodeType:o}),!0})),h.length?(h.forEach((function(t){var r=t.node,o=t.pos,i=t.nodeType,a=r.attrs;a=m(f({},a),n?{align:n}:{align:null}),e=e.setNodeMarkup(o,i,a,r.marks)})),e):e},g=function(e){return function(t){var n=t.selection,r=t.doc,o=n.from,i=n.to,a=!0,s=!1;return r.nodesBetween(o,i,(function(t,n){return a&&t.attrs.align===e&&(a=!1,s=!0),a})),s}};function b(e,t){var n=e.schema,r=e.selection,o=v(e.tr.setSelection(r),n,"left");return!!o.docChanged&&(t&&t(o))}function y(e,t){var n=e.schema,r=e.selection,o=v(e.tr.setSelection(r),n,"center");return!!o.docChanged&&(t&&t(o))}function w(e,t){var n=e.schema,r=e.selection,o=v(e.tr.setSelection(r),n,"right");return!!o.docChanged&&(t&&t(o))}function E(e,t){var n=e.schema,r=e.selection,o=v(e.tr.setSelection(r),n,"justify");return!!o.docChanged&&(t&&t(o))}var _=[{title:"align-left",content:i.Z.alignLeft,enable:h,active:g("left"),run:b,hotkey:"Ctrl+Alt+L"},{title:"align-center",content:i.Z.alignCenter,enable:h,active:g("center"),run:y,hotkey:"Ctrl+Alt+C"},{title:"align-right",content:i.Z.alignRight,enable:h,active:g("right"),run:w,hotkey:"Ctrl+Alt+R"},{title:"justified",content:i.Z.alignJustify,enable:h,active:g("justify"),run:E,hotkey:"Ctrl+Alt+J"}];t.ZP=_},120914:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(202784),o=n(928316),i=n(497326),a=n(894578),s=n(867855),l=n(111994),c=n(877119),u=n.n(c),d=Object.defineProperty,p=function(e,t,n){return function(e,t,n){t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},f={x:-1e4,y:-1e4,w:0,h:0},m=new(function(){function e(){var e=this;p(this,"_bridges",new Map),p(this,"_positions",new Map),p(this,"_mx",0),p(this,"_my",0),p(this,"_rafID",0),p(this,"_onScroll",(function(){e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),p(this,"_onResize",(function(t){e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),p(this,"_onMouseChange",(function(t){e._mx=Math.round(t.clientX),e._my=Math.round(t.clientY),e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),p(this,"_onClick",(function(t){for(var n,r,o=Date.now(),i=(0,s.Z)(e._bridges);!(r=i()).done;){var a=r.value,c=a[0];if(o-a[1]>350){var u=c.getDetails();u.modal&&u.autoDismiss&&(n=u)}}if(n){var d=n,p=d.body,f=d.close,m=(0,l.mv)(t.clientX,t.clientY,1),h=p?(0,l.hs)(p):null;h&&(0,l.vY)(m,h)||f()}})),p(this,"_syncPosition",(function(){e._rafID=0;for(var t,n=new Map,r=(0,s.Z)(e._bridges);!(t=r()).done;){var o=t.value,i=o[0],a=(o[1],i.getDetails());n.set(i,a);var c=a.anchor,d=a.body;d instanceof HTMLElement&&(a.bodyRect=(0,l.hs)(d)),c instanceof HTMLElement&&(a.anchorRect=(0,l.hs)(c))}for(var p,m=(0,l.mv)(e._mx,e._my,2),h=new Set,v=(0,s.Z)(n);!(p=v()).done;){var g=p.value,b=g[0],y=g[1],w=y.anchor,E=y.bodyRect,_=y.anchorRect,Z=y.position,S=y.body;if(E||_){var k=Z(_,E),x=k.x,C=k.y,M=x+"-"+C;if(S&&E&&e._positions.get(b)!==M){var O=_?u()(0,_.x-x+_.w/2,E.w-_.w/2):0;e._positions.set(b,M);var D=S.style;D.position="absolute",D.left=x+"px",D.top=C+"px",D.setProperty("--editor-pop-up-anchor-offset-left",O+"px"),E.x=x,E.y=C}((0,l.vY)(m,E||f,0)||(0,l.vY)(m,_||f,0))&&w&&h.add(w)}}for(;;){for(var P,N=h.size,I=(0,s.Z)(n);!(P=I()).done;)for(var j,T=P.value,A=(T[0],T[1]),R=A.anchor,V=A.body,z=(0,s.Z)(h);!(j=z()).done;){var L=j.value;R&&V&&!h.has(R)&&V.contains(L)&&h.add(R)}if(h.size===N)break}for(var F,U=Date.now(),H=(0,s.Z)(e._bridges);!(F=H()).done;){var W=F.value,B=W[0],q=W[1],J=n.get(B);if(J){var $=J.autoDismiss,K=J.anchor,G=J.close,Y=J.modal;$&&!Y&&U-q>350&&!h.has(K)&&G()}}}))}var t=e.prototype;return t.register=function(e){this._bridges.set(e,Date.now()),this._positions.set(e,null),1===this._bridges.size&&this._observe(),this._rafID=requestAnimationFrame(this._syncPosition)},t.unregister=function(e){this._bridges.delete(e),this._positions.delete(e),0===this._bridges.size&&this._unobserve(),this._rafID&&cancelAnimationFrame(this._rafID)},t._observe=function(){document.addEventListener("mousemove",this._onMouseChange,!1),document.addEventListener("mouseup",this._onMouseChange,!1),document.addEventListener("click",this._onClick,!1),window.addEventListener("scroll",this._onScroll,!0),window.addEventListener("resize",this._onResize,!0)},t._unobserve=function(){document.removeEventListener("mousemove",this._onMouseChange,!1),document.removeEventListener("mouseup",this._onMouseChange,!1),document.removeEventListener("click",this._onClick,!1),window.removeEventListener("scroll",this._onScroll,!0),window.removeEventListener("resize",this._onResize,!0),this._rafID&&cancelAnimationFrame(this._rafID)},e}()),h=n(575175),v=n(77461),g=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,Z=function(e,t,n){return t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},S=(0,v.Z)("popup"),k=function(e){function t(t){var n,r,o;return n=e.call(this,t)||this,r=(0,i.Z)(n),Z(r,"symbol"!=typeof(o="_getDetails")?o+"":o,(function(){var e=n.props,t=e.close,r=e.popUpParams,o=r.anchor,i=r.autoDismiss,a=r.position,s=r.modal;return{anchor:o,autoDismiss:!1!==i,body:document.getElementById(n._id),close:t,modal:!0===s,position:a||(s?h.Oi:h.SC)}})),n._bridge=null,n._id=S(),n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._bridge={getDetails:this._getDetails},m.register(this._bridge)},n.componentWillUnmount=function(){this._bridge&&m.unregister(this._bridge)},n.render=function(){var e,t=this.props,n=t.View,o=t.viewProps,i=t.close;return r.createElement("div",{"data-pop-up-id":this._id,id:this._id},r.createElement(n,(e=function(e,t){for(var n in t||(t={}))E.call(t,n)&&Z(e,n,t[n]);if(w)for(var r,o=(0,s.Z)(w(t));!(r=o()).done;)n=r.value,_.call(t,n)&&Z(e,n,t[n]);return e}({},o||{}),b(e,y({close:i})))))},t}(r.PureComponent),x=(0,v.Z)("create-popup"),C=0,M=0,O="pop-up-modal-mask-"+x();function D(){var e=document.getElementById(O);e&&e.parentElement&&e.parentElement.removeChild(e)}function P(e,t,n,r){var o=n&&n.container||document.body||document.documentElement,i=document.getElementById(e);if(!i&&t&&(i=document.createElement("div")),!i)return null;n&&n.modal&&i.setAttribute("data-pop-up-modal","y"),i.className="pop-up-element vars",i.id=e;var a=i.style,s=n&&n.modal?1:0;return n&&n.container||(a.zIndex=1005+3*M+s),r&&(a.zIndex+=r),i.setAttribute("role","dialog"),i.setAttribute("aria-modal","true"),o&&!i.parentElement&&o.appendChild(i),i}function N(e,t,i,a,s){var l=0,c=document.getElementsByClassName("editorview-wrapper fullscreen");n.g.DOM=c,c[0]&&(l+=1e3);var u=P(e,!0,s,l);if(u){var d=r.createElement(k,{View:i,close:t,popUpParams:s,viewProps:a});o.render(d,u)}C>0?function(){var e=document.body||document.documentElement,t=document.getElementById(O);t||((t=document.createElement("div")).id=O,t.className="pop-up-modal-mask",t.setAttribute("data-mask-type","pop-up-modal-mask"),t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true")),e&&!t.parentElement&&e.appendChild(t);var n=t.style,r=Array.from(document.querySelectorAll(".pop-up-element[data-pop-up-modal]")).reduce((function(e,t){return Math.max(e,Number(t.style.zIndex))}),0);n.zIndex=r-1}():D()}function I(e,t,n){var r=x(),i=null,a=t;t=t||{};var s=(n=n||{}).modal||!n.anchor;n.modal=s,M++,s&&C++;var l=function(e){if(i){s&&C--,M--,i=null,function(e){var t=P(e,!1);t&&(o.unmountComponentAtNode(t),t.parentElement&&t.parentElement.removeChild(t)),0===C&&D()}(r);var t=n&&n.onClose;t&&t(e)}},c=N.bind(null,r,l,e),u={};return i={close:l,update:function(e){c((a=e)||u,n||u)}},c(a||u,n||u),i}},409856:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(894578),o=n(867855),i=n(497326),a=n(72779),s=n.n(a),l=n(202784),c=n(213955),u=Object.defineProperty,d=function(e,t,n){return function(e,t,n){t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},p=function(e){function t(t){var n;return n=e.call(this,t)||this,d((0,i.Z)(n),"_onMouseEnter",(function(e){n._pressedTarget=null,e.preventDefault();var t=n.props,r=t.onMouseEnter,o=t.value;r&&r(o,e)})),d((0,i.Z)(n),"_onMouseLeave",(function(e){n._pressedTarget=null;var t=e;n._onMouseUpCapture(t)})),d((0,i.Z)(n),"_onMouseDown",(function(e){e.preventDefault(),n._pressedTarget=null,n._clicked=!1,3!==e.which&&2!==e.button&&(n.setState({pressed:!0}),n._pressedTarget=e.currentTarget,n._clicked=!1,n._mul||(document.addEventListener("mouseup",n._onMouseUpCapture,!0),n._mul=!0))})),d((0,i.Z)(n),"_onMouseUp",(function(e){if(e.preventDefault(),n._clicked||"keypress"===e.type){var t=n.props,r=t.onClick,o=t.value;!t.disabled&&r&&r(o,e)}n._pressedTarget=null,n._clicked=!1})),d((0,i.Z)(n),"_onMouseUpCapture",(function(e){n._mul&&(n._mul=!1,document.removeEventListener("mouseup",n._onMouseUpCapture,!0));var t=e.target;n._clicked=n._pressedTarget instanceof HTMLElement&&t instanceof HTMLElement&&(t===n._pressedTarget||t.contains(n._pressedTarget)||n._pressedTarget.contains(t)),n.setState({pressed:!1})})),n._clicked=!1,n._mul=!1,n._pressedTarget=null,n._unmounted=!1,n.state={pressed:!1},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._unmounted=!0,this._mul&&(this._mul=!1,document.removeEventListener("mouseup",this._onMouseUpCapture,!0))},n.render=function(){var e=this.props,t=e.className,n=e.disabled,r=e.active,o=e.id,i=e.style,a=e.title,u=e.children,d=this.state.pressed,p=s()(t,{active:r,disabled:n,pressed:d});return l.createElement("span",{"aria-disabled":n,"aria-pressed":d,className:p,disabled:n,id:o,onKeyPress:n?c.Z:this._onMouseUp,onMouseDown:n?c.Z:this._onMouseDown,onMouseEnter:n?c.Z:this._onMouseEnter,onMouseLeave:n?null:this._onMouseLeave,onMouseUp:n?c.Z:this._onMouseUp,role:"button",style:i,tabIndex:n?null:0,title:a},u)},t}(l.PureComponent),f=n(77461),m=n(120914),h=n(575175),v=Object.defineProperty,g=function(e,t,n){return function(e,t,n){t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},b=(0,f.Z)("tooltip-surface"),y=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props.tooltip;return l.createElement("div",{className:"editor-tooltip-view editor-animation-fade-in"},e)},t}(l.PureComponent),w=function(e){function t(t){var n;return n=e.call(this,t)||this,g((0,i.Z)(n),"_onMouseEnter",(function(){if(!n._popUp){var e=n.props.tooltip;n._popUp=(0,m.Z)(y,{tooltip:e},{anchor:document.getElementById(n._id),onClose:n._onClose,position:h.lS})}})),g((0,i.Z)(n),"_onMouseLeave",(function(){n._popUp&&n._popUp.close(),n._popUp=null})),g((0,i.Z)(n),"_onClose",(function(){n._popUp=null})),n._id=b(),n._popUp=null,n}(0,r.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._popUp&&this._popUp.close()},n.render=function(){var e=this.props,t=e.tooltip,n=e.children;return l.createElement("span",{"aria-label":t,className:"editor-tooltip-surface","data-tooltip":t,id:this._id,onMouseDown:t&&this._onMouseLeave,onMouseEnter:t&&this._onMouseEnter,onMouseLeave:t&&this._onMouseLeave,role:"tooltip"},n)},t}(l.PureComponent),E=Object.defineProperty,_=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=function(e,t,n){return t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},M=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.icon,r=t.label,i=t.className,a=t.title,c=function(e,t){var n={};for(var r in e)k.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&S)for(var i,a=(0,o.Z)(S(e));!(i=a()).done;)r=i.value,t.indexOf(r)<0&&x.call(e,r)&&(n[r]=e[r]);return n}(t,["icon","label","className","title"]),u=s()(i,"editor-custom-button",{"use-icon":!!n});return l.createElement(w,{tooltip:a},l.createElement(p,(e=function(e,t){for(var n in t||(t={}))k.call(t,n)&&C(e,n,t[n]);if(S)for(var r,i=(0,o.Z)(S(t));!(r=i()).done;)n=r.value,x.call(t,n)&&C(e,n,t[n]);return e}({},c),_(e,Z({className:u}))),n,r))},t}(l.PureComponent),O=M},100636:function(e,t,n){n.d(t,{Z:function(){return Oe}});var r=n(497326),o=n(894578),i=n(867855),a=n(887757),s=n.n(a),l=n(72779),c=n.n(l),u=n(202784),d=n(928316),p=n(77461),f=n(585208),m=Object.defineProperty,h=function(e,t,n){return function(e,t,n){t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},v=Object.freeze({from:0,to:0});function g(e){if(!window.getSelection)return console.warn("window.getSelection() is not supported"),v;var t=window.getSelection();if(!t.containsNode)return console.warn("selection.containsNode() is not supported"),v;if(!t.rangeCount)return v;var n=t.getRangeAt(0);if(!n)return v;var r=n.startContainer,o=n.endContainer,i=n.startOffset,a=n.endOffset;return r===e||o===e||r&&e.contains(r)||o&&e.contains(o)?{from:i,to:a}:v}var b=function(){function e(e){var t=this;h(this,"_observables",[]),h(this,"_callback",null),h(this,"_onClick",(function(){var e=t._callback;if(t._observables=t._observables.map((function(e){var t=e.target;return{target:t,selection:g(t)}})),e)return e(t.takeRecords(),t)})),h(this,"_check",(function(){var e=!1,n=t._callback;if(t._observables=t._observables.map((function(t){var n=t.target,r=t.selection,o=g(n);return r===o||r.from===o.from&&r.to===o.to?t:(e=!0,{target:n,selection:o})})),e&&n)return n(t.takeRecords(),t)})),this._callback=e}var t=e.prototype;return t.disconnect=function(){var e=this;this._observables.forEach((function(t){var n=t.target;n.removeEventListener("click",e._check,!1),n.removeEventListener("selectionchange",e._check,!1)})),this._observables=[]},t.observe=function(e){if(window.getSelection){if(!this._observables.some((function(t){return t.target===e}))){var t={target:e,selection:g(e)};e.addEventListener("click",this._check,!1),e.addEventListener("selectionchange",this._check,!1),this._observables.push(t)}}else console.warn("window.getSelection() is not supported")},t.takeRecords=function(){return this._observables.slice(0)},e}(),y=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,k=function(e,t,n){return t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x="ProseMirror-selectednode",C=new Set,M=new Set;var O=new b((function(e,t){if(!window.getSelection)return console.warn("window.getSelection() is not supported"),void t.disconnect();var n=window.getSelection();if(!n.containsNode)return console.warn("selection.containsNode() is not supported"),void t.disconnect();for(var r,o=(0,i.Z)(C);!(r=o()).done;){var a=r.value,s=a.dom;n.containsNode(s)?a.selectNode():a.deselectNode()}0===C.size&&t.disconnect()})),D=new MutationObserver((function(e,t){var n=document.body;if(n){for(var r,o=[],a=(0,i.Z)(M);!(r=a()).done;){var s=r.value,l=s.dom;n.contains(l)&&(M.delete(s),o.push(s),s.__renderReactComponent())}for(var c,u=(0,i.Z)(C);!(c=u()).done;){var p=c.value.dom;n.contains(p)||(C.delete(p),d.unmountComponentAtNode(p))}o.forEach((function(e){return C.add(e)})),0===C.size&&t.disconnect()}})),P=function(){function e(e,t,n,r){this.props={decorations:r,editorView:t,getPos:n,node:e,selected:!1,focused:!1},M.add(this);var o=this.createDOMElement();this.dom=o,this._selected=null,o.onClick=this._onClick,1===M.size&&(D.observe(document,{childList:!0,subtree:!0}),O.observe(document))}var t=e.prototype;return t.update=function(e,t){var n;return this.props=(n=function(e,t){for(var n in t||(t={}))Z.call(t,n)&&k(e,n,t[n]);if(_)for(var r,o=(0,i.Z)(_(t));!(r=o()).done;)n=r.value,S.call(t,n)&&k(e,n,t[n]);return e}({},this.props),w(n,E({node:e}))),this.__renderReactComponent(),!0},t.stopEvent=function(){return!1},t.selectNode=function(){this._selected=!0,this.dom.classList.add(x),this.__renderReactComponent()},t.deselectNode=function(){this._selected=!1,this.dom.classList.remove(x),this.__renderReactComponent()},t.createDOMElement=function(){throw new Error("not implemented")},t.renderReactComponent=function(){throw new Error("not implemented")},t.destroy=function(){},t.__renderReactComponent=function(){var e=this.props,t=e.editorView,n=e.getPos;if(t.state&&t.state.selection){var r=t.state.selection.from,o=n();this.props.selected=this._selected,this.props.focused=t.focused&&o===r}else this.props.selected=!1,this.props.focused=!1;d.render(this.renderReactComponent(),this.dom)},e}(),N=n(871199),I=n.n(N),j=n(676065),T=n.n(j),A="text-editor-frame-body";function R(e){return"number"==typeof e?e+"px":I()(e)?"auto":String(e)}u.PureComponent;var V=n(970693),z=n(409856),L=Object.defineProperty,F=function(e,t,n){return function(e,t,n){t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},U={NONE:{value:null,text:"Inline"},LEFT:{value:"left",text:"Float left"},CENTER:{value:"center",text:"Center"},RIGHT:{value:"right",text:"Float right"}},H=function(e){function t(){var t;return t=e.apply(this,arguments)||this,F((0,r.Z)(t),"_onClick",(function(e){t.props.onSelect({align:e})})),t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props.value?this.props.value.align:null,t=this._onClick,n=Object.keys(U).map((function(n){var r=U[n],o=r.value,i=r.text;return u.createElement(z.Z,{active:e===o,key:n,label:i,onClick:t,value:o})}));return u.createElement("div",{className:"editor-inline-editor"},n)},t}(u.PureComponent),W=H,B=n(877119),q=n.n(B),J=n(409961),$=n.n(J),K=Object.defineProperty,G=function(e,t,n){return function(e,t,n){t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},Y=(0,p.Z)("image-resize-box"),X=20,Q={top:te,top_right:ne,right:ee,bottom_right:ne,bottom:te,bottom_left:ne,left:ee,top_left:ne};function ee(e,t,n){e.style.width=t+"px"}function te(e,t,n){e.style.height=n+"px"}function ne(e,t,n){e.style.width=Math.round(t)+"px",e.style.height=Math.round(n)+"px"}var re=function(e){function t(t){var n;return n=e.call(this,t)||this,G((0,r.Z)(n),"_syncSize",(function(){if(n._active){var e=n.props,t=e.direction,r=e.width,o=e.height,i=(n._x2-n._x1)*(/left/.test(t)?-1:1),a=(n._y2-n._y1)*(/top/.test(t)?-1:1),s=n._el;if($()(s))throw new Error("Encountered an error: `el` should not be null.");var l=Q[t];if($()(l))throw new Error("Encountered an error: `fn` should not be null.");var c=r/o,u=q()(X,r+Math.round(i),1e4),d=q()(X,o+Math.round(a),1e4);l===ne&&(u=(d=Math.max(u/c,X))*c),l(s,Math.round(u),Math.round(d)),n._ww=u,n._hh=d}})),G((0,r.Z)(n),"_onMouseDown",(function(e){e.preventDefault(),e.stopPropagation(),n._end(),n._start(e)})),G((0,r.Z)(n),"_onMouseMove",(function(e){e.preventDefault(),e.stopPropagation(),n._x2=e.clientX,n._y2=e.clientY,n._rafID=requestAnimationFrame(n._syncSize)})),G((0,r.Z)(n),"_onMouseUp",(function(e){e.preventDefault(),e.stopPropagation(),n._x2=e.clientX,n._y2=e.clientY;var t=n.props.direction,r=n._el;if($()(r))throw new Error("Encountered an error: `el` should not be null.");r.classList.remove(t),n._end(),n.props.onResizeEnd(n._ww,n._hh)})),n._active=!1,n._el=null,n._h="",n._rafID=0,n._w="",n._x1=0,n._x2=0,n._y1=0,n._y2=0,n._ww=0,n._hh=0,n}(0,o.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._end()},n._start=function(e){this._active&&this._end(),this._active=!0;var t=this.props,n=t.boxID,r=t.direction,o=t.width,i=t.height,a=document.getElementById(n);if($()(a))throw new Error("Encountered an error: `el` should not be null.");a.className+=" "+r,this._el=a,this._x1=e.clientX,this._y1=e.clientY,this._x2=this._x1,this._y2=this._y1,this._w=this._el.style.width,this._h=this._el.style.height,this._ww=o,this._hh=i,document.addEventListener("mousemove",this._onMouseMove,!0),document.addEventListener("mouseup",this._onMouseUp,!0)},n._end=function(){if(this._active){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!0),document.removeEventListener("mouseup",this._onMouseUp,!0);var e=this._el;if($()(e))throw new Error("Encountered an error: `el` should not be null.");e.style.width=this._w,e.style.height=this._h,e.className="editor-image-resize-box",this._el=null,this._rafID&&cancelAnimationFrame(this._rafID),this._rafID=null}},n.render=function(){var e,t=this.props.direction,n=c()(((e={"editor-image-resize-box-control":!0})[t]=!0,e));return u.createElement("span",{role:"button",tabIndex:-1,className:n,onMouseDown:this._onMouseDown})},t}(u.PureComponent),oe=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=Y(),n}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.onResizeEnd,n=e.width,r=e.height,o=e.src,i={height:r+"px",width:n+"px"},a=this._id,s=Object.keys(Q).map((function(e){return u.createElement(re,{boxID:a,config:Q[e],direction:e,height:r,key:e,onResizeEnd:t,width:n})}));return u.createElement("span",{className:"editor-image-resize-box",id:a,style:i},s,u.createElement("img",{className:"editor-image-resize-box-image",alt:"Resize Box",src:o}))},t}(u.PureComponent),ie=n(575175),ae=n(297209),se=null,le=new Map;function ce(e){e.forEach(ue)}function ue(e){var t=e.target,n=le.get(t);n&&n.forEach((function(t){return t(e)}))}var de={observe:function(e,t){var n=e,r=se||(se=new ae.default(ce));if(le.has(n)){var o=le.get(n);if($()(o))throw new Error("Encountered an error: callbacks are missing.");o.push(t)}else{var i=[t];le.set(n,i),r.observe(n)}},unobserve:function(e,t){var n=se;if(n){var r=e;if(n.unobserve(r),t){var o=null;if(le.has(r)){if(o=le.get(r),$()(o))throw new Error("Encountered an error: callbacks are missing.");o=o.filter((function(e){return e!==t}))}o&&o.length?le.set(r,o):le.delete(r)}else le.delete(r);le.size||(n.disconnect(),se=null)}}},pe=n(120914),fe=n(761540),me=Object.defineProperty,he=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,we=function(e,t,n){return t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ee=function(e,t){for(var n in t||(t={}))be.call(t,n)&&we(e,n,t[n]);if(ge)for(var r,o=(0,i.Z)(ge(t));!(r=o()).done;){n=r.value;ye.call(t,n)&&we(e,n,t[n])}return e},_e=function(e,t){return he(e,ve(t))},Ze=function(e,t,n){return we(e,"symbol"!=typeof t?t+"":t,n),n},Se=(0,p.Z)("image-node-view"),ke=1e5,xe={src:"",complete:!1,height:0,width:0};var Ce=function(e){function t(t){var n;return n=e.call(this,t)||this,Ze((0,r.Z)(n),"_resolveOriginalSize",(function(){return e=(0,r.Z)(n),t=null,o=s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mounted){e.next=2;break}return e.abrupt("return");case 2:return this.setState({originalSize:xe}),t=this.props.node.attrs.src,n=t,e.next=7,(0,fe.Z)(n);case 7:if(r=e.sent,this._mounted){e.next=10;break}return e.abrupt("return");case 10:if(this.props.node.attrs.src===t){e.next=12;break}return e.abrupt("return");case 12:r.complete||(r.width=X,r.height=X),this.setState({originalSize:r});case 14:case"end":return e.stop()}}),e,this)})),new Promise((function(n,r){var i=function(e){try{s(o.next(e))}catch(t){r(t)}},a=function(e){try{s(o.throw(e))}catch(t){r(t)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,a)};s((o=o.apply(e,t)).next())}));var e,t,o})),Ze((0,r.Z)(n),"_onResizeEnd",(function(e,t){var r=n.props,o=r.getPos,i=r.node,a=r.editorView,s=o(),l=_e(Ee({},i.attrs),{crop:null,width:e,height:t}),c=a.state.tr,u=a.state.selection;c=(c=c.setNodeMarkup(s,null,l)).setSelection(u.map(c.doc,c.mapping)),a.dispatch(c)})),Ze((0,r.Z)(n),"_onChange",(function(e){if(n._mounted){var t=e?e.align:null,r=n.props,o=r.getPos,i=r.node,a=r.editorView,s=o(),l=_e(Ee({},i.attrs),{align:t}),c=a.state.tr,u=a.state.selection;c=(c=c.setNodeMarkup(s,null,l)).setSelection(u.map(c.doc,c.mapping)),a.dispatch(c)}})),Ze((0,r.Z)(n),"_onBodyRef",(function(e){if(e){n._body=e;var t=d.findDOMNode(e);t instanceof HTMLElement&&de.observe(t,n._onBodyResize)}else{var r=n._body&&d.findDOMNode(n._body);r instanceof HTMLElement&&de.unobserve(r),n._body=null}})),Ze((0,r.Z)(n),"_onBodyResize",(function(e){var t=n._body?function(e){for(var t=e.parentElement;t&&!t.offsetParent;)t=t.parentElement;if(t&&t.offsetParent&&t.offsetParent.offsetWidth&&t.offsetParent.offsetWidth>0){var n=t.offsetParent,r=e.ownerDocument.defaultView.getComputedStyle(n),o=n.clientWidth-4;return"border-box"===r.boxSizing&&(o-=parseInt(r.paddingLeft,10)+parseInt(r.paddingRight,10)),Math.max(o,X)}return ke}(d.findDOMNode(n._body)):ke;n.setState({maxSize:{width:t,height:ke,complete:!!n._body}})})),n._body=null,n._id=Se(),n._inlineEditor=null,n._mounted=!1,n.state={maxSize:{width:ke,height:ke,complete:!1},originalSize:xe},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._mounted=!0,this._resolveOriginalSize(),this._renderInlineEditor()},n.componentDidUpdate=function(e){e.node.attrs.src!==this.props.node.attrs.src&&this._resolveOriginalSize(),this._renderInlineEditor()},n.componentWillUnmount=function(){this._mounted=!1,this._inlineEditor&&this._inlineEditor.close(),this._inlineEditor=null},n._renderInlineEditor=function(){var e=this,t=document.getElementById(this._id);if(t&&"true"===t.getAttribute("data-active")){var n={value:this.props.node.attrs,onSelect:this._onChange};this._inlineEditor?this._inlineEditor.update(n):this._inlineEditor=(0,pe.Z)(W,n,{anchor:t,autoDismiss:!1,container:t.closest?t.closest(".text-editor-frame-body"):null,position:ie.lS,onClose:function(){e._inlineEditor=null}})}else this._inlineEditor&&this._inlineEditor.close()},n.render=function(){var e=this.state,t=e.originalSize,n=e.maxSize,r=this.props,o=r.editorView,i=r.node,a=r.selected,s=r.focused,l=o.readOnly,d=i.attrs,p=d.align,m=d.crop,h=d.rotate,v=t===xe,g=!v&&s&&!l&&t.complete,b=t.complete?t.src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",y=v?1:t.width/t.height,w=!v&&!t.complete,E=d.width,_=d.height;v&&(E=E||24,_=_||24),E&&!_?_=E/y:_&&!E?E=_*y:E||_||(E=t.width,_=t.height);var Z=1;E>n.width&&(!m||m.width>n.width)&&(_=(E=n.width)/y,Z=n.width/E);var S=c()("editor-image-view-body",{active:g,error:w,focused:s,loading:v,selected:a}),k=!g||m||h?null:u.createElement(oe,{height:_,onResizeEnd:this._onResizeEnd,src:b,width:E}),x={display:"inline-block",height:_+"px",left:"0",top:"0",width:E+"px",position:"relative"},C={};if(m){var M=Ee({},m);1!==Z&&(Z=n.width/M.width,M.width*=Z,M.height*=Z,M.left*=Z,M.top*=Z),C.width=M.width+"px",C.height=M.height+"px",x.left=M.left+"px",x.top=M.top+"px"}h&&(C.transform="rotate("+h+"rad)");var O=null;d.meta&&(O=u.createElement("pre",{className:"img-tooltip"},d.meta));var D=w?u.createElement("span",{className:"editor-image-view-error"},V.Z.error," "):null,P=w?f.a.t("text-editor:unable-to-load-image")+" "+(d.src||""):void 0,N=u.createElement("img",{alt:"",className:"editor-image-view-body-img","data-align":p,height:_,id:this._id+"-img",src:b,width:E});return u.createElement(u.Fragment,null,O,u.createElement("span",{className:S,"data-active":g?"true":void 0,"data-original-src":String(d.src),id:this._id,ref:this._onBodyRef,title:P},u.createElement("span",{className:"editor-image-view-body-img-clip",style:C},u.createElement("span",{style:x},D,N)),k))},t}(u.PureComponent),Me=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.createDOMElement=function(){var e=this,t=document.createElement("span");return t.className="editor-image-view",t.addEventListener("dragstart",(function(t){var n=document.createElement("img");n.src=e.props.node.attrs.src,t.dataTransfer.setDragImage(n,0,0)}),!1),this._updateDOM(t),t},n.update=function(t,n){return e.prototype.update.call(this,t,n),this._updateDOM(this.dom),!0},n.renderReactComponent=function(){return u.createElement(Ce,Ee({},this.props))},n._updateDOM=function(e){var t=this.props.node.attrs.align,n="editor-image-view";t&&(n+=" align-"+t),e.className=n},t}(P),Oe=Me},674577:function(e,t,n){var r=n(497326),o=n(894578),i=n(202784),a=n(585208),s=n(37615),l=n(409856),c=n(213955),u=Object.defineProperty,d=function(e,t,n){return function(e,t,n){t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},p=/\s/,f=function(e){function t(){var t;return t=e.apply(this,arguments)||this,d((0,r.Z)(t),"state",{url:t.props.href}),d((0,r.Z)(t),"_onKeyDown",(function(e){13===e.keyCode&&(e.preventDefault(),t._apply())})),d((0,r.Z)(t),"_onURLChange",(function(e){var n=e.target.value;t.setState({url:n})})),d((0,r.Z)(t),"_cancel",(function(){t.props.close()})),d((0,r.Z)(t),"_apply",(function(){var e=t.state.url;e&&!p.test(e)&&t.props.close((0,s.Z)(e))})),t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props.href,t=this.state.url,n=!!t&&p.test(t),r=a.a.t("text-editor:apply"),o=!!n;return e?(r=t?a.a.t("text-editor:apply"):a.a.t("text-editor:remove"),o=n):o=n||!t,i.createElement("div",{className:"image-url-editor"},i.createElement("form",{className:"editor-form",onSubmit:c.Z},i.createElement("fieldset",null,i.createElement("legend",null,a.a.t("text-editor:add-link")),i.createElement("input",{autoFocus:!0,onChange:this._onURLChange,onKeyDown:this._onKeyDown,placeholder:a.a.t("text-editor:paste-url"),spellCheck:!1,type:"text",value:t||""})),i.createElement("div",{className:"editor-form-buttons"},i.createElement(l.Z,{label:a.a.t("text-editor:cancel"),onClick:this._cancel}),i.createElement(l.Z,{active:!0,disabled:o,label:r,onClick:this._apply}))))},t}(i.PureComponent);t.Z=f},575175:function(e,t,n){n.d(t,{SC:function(){return o},lS:function(){return i},Oi:function(){return a},ID:function(){return s},DL:function(){return l}});var r=n(111994);function o(e,t){var n={x:0,y:0,w:0,h:0};if(e&&t){n.x=e.x,n.y=e.y+e.h;var o=window.innerWidth,i=window.innerHeight;n.x+t.w>o&&(n.x=e.x-t.w+e.w),n.y+t.h>i&&(n.y=Math.max(e.y-t.h,2))}return e&&!(0,r.zb)(e)||(n.x=-1e4),n}function i(e,t){var n={x:0,y:0,w:0,h:0};return e&&t&&(n.x=Math.max(e.x-(t.w-e.w)/2,10),n.y=e.y+e.h),e&&!(0,r.zb)(e)||(n.x=-1e4),n}function a(e,t){var n={x:0,y:0,w:0,h:0};return t&&(n.x=(window.innerWidth-t.w)/2,n.y=(window.innerHeight-t.h)/2),t&&!(0,r.zb)(t)||(n.x=-1e4),n}function s(e,t){var n={x:0,y:0,w:0,h:0};return e&&t&&(n.x=e.x+e.w+1-t.w,n.y=e.y),e&&!(0,r.zb)(e)||(n.x=-1e4),n}function l(e,t){var n={x:0,y:0,w:0,h:0};return e&&t&&(n.x=e.x+(e.w-t.w)/2,n.y=e.y),e&&!(0,r.zb)(e)||(n.x=-1e4),n}},213955:function(e,t,n){function r(e){e.preventDefault()}n.d(t,{Z:function(){return r}})},111994:function(e,t,n){function r(e){return 0===e.w||0===e.h}function o(e,t,n){var r=n||0;return!(t.x-r>e.x+e.w+r||t.x+t.w+r<e.x-r||t.y-r>e.y+e.h+r||t.y+t.h+r<e.y-r)}function i(e,t,n){return{x:e-(n=n||0),y:t-n,w:2*n,h:2*n}}function a(e){if("contents"===document.defaultView.getComputedStyle(e).display&&1===e.children.length)return a(e.children[0]);var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}}n.d(t,{zb:function(){return r},vY:function(){return o},mv:function(){return i},hs:function(){return a}})},761540:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(867855),o=n(900883),i=n(700601),a=n.n(i);var s=function(){return!!a()(window.navigator,"onLine")&&!window.navigator.onLine},l=Object.defineProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},f={},m=[];function h(){var e=m.shift();e&&function(e,t,n){var i={complete:!1,height:0,naturalHeight:0,naturalWidth:0,src:e||"",width:0};if(s())return void t(i);var a=e||"";if(!a)return void t(i);if(f[a]){var l=Object.assign({},f[a]);return void t(l)}var m,v=o.parse(a),g=v.protocol,b=v.port;if(!/(http:|https:|data:)/.test(g||window.location.protocol)||b)return void t(i);var y=function(){m&&(i.width=m.width,i.height=m.height,i.naturalWidth=m.width,i.naturalHeight=m.height,i.complete=!0),t(i),E(),f[a]=function(e,t){for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(c)for(var o,i=(0,r.Z)(c(t));!(o=i()).done;)n=o.value,d.call(t,n)&&p(e,n,t[n]);return e}({},i)},w=function(){t(i),E()};function E(){if(m){if(m instanceof HTMLElement){var e=m.parentNode;e&&e.removeChild(m)}m.onload=null,m.onerror=null,m=null}h()}var _=document.body;_?((m=document.createElement("img")).style.cssText="position:fixed;left:-10000000000px;width:auto;height:auto;",m.onload=y,m.onerror=w,m.src=a,_.appendChild(m)):((m=new Image).onload=y,m.onerror=w,m.src=a)}(e.src,e.resolve,e.reject)}var v=function(e){return new Promise((function(t,n){var r={src:e,resolve:t,reject:n};m.push(r),h()}))}},96899:function(e,t,n){var r=n(630709),o=Object.defineProperty,i=function(e,t,n){return function(e,t,n){t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n};function a(e,t){var n=e[t];return"tr"===t&&n instanceof r.wx?n.setMeta("dryrun",!0):n}function s(e,t,n){return e[t]=n,!0}var l=function(){function e(){var t=this;i(this,"shouldRespondToUIEvent",(function(t){return t.type===e.EventType.CLICK})),i(this,"active",(function(e){return!1})),i(this,"enable",(function(e,n){return t.dryRun(e,n)})),i(this,"dryRun",(function(e,n){var r=window.Proxy,o=r?new r(e,{get:a,set:s}):e;return t.run(o,null,n)})),i(this,"run",(function(e,n,r,o){return t.waitForUserInput(e,n,r,o).then((function(o){t.executeWithUserInput(e,n,r,o)})).catch((function(e){console.error(e)})),!1})),i(this,"waitForUserInput",(function(e,t,n,r){return Promise.resolve(void 0)})),i(this,"executeWithUserInput",(function(e,t,n,r){return!1}))}return e.prototype.cancel=function(){},e}();i(l,"EventType",{CLICK:"mouseup",MOUSEENTER:"mouseenter"}),t.Z=l},974556:function(e,t){t.Z=function(e){var t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),n=0;if(null===t)return n;for(var r=0;r<t.length;r++)t[r].charCodeAt(0)>=19968?n+=t[r].length:n+=1;return n}},73811:function(e,t,n){var r=n(690299),o=n.n(r),i=n(286618),a=n(743766),s=o()("isle:text-editor");t.Z=function(e,t){s("Handle drop event...");var n={x:t.clientX,y:t.clientY},r=e.posAtCoords({left:n.x,top:n.y}),o=r?r.pos:null,l=t.dataTransfer;if(l&&l.files&&l.files.length>0){t.preventDefault();var c=l.files,u=Array.from(c);(0,a.q)(e,u,n)&&(0,i.wM)(e)}else(0,i.yz)(e,o)}},783345:function(e,t,n){n.r(t),n.d(t,{default:function(){return Jt}});var r=n(497326),o=n(894578),i=n(867855),a=n(887757),s=n.n(a),l=n(202784),c=n(213980),u=n.n(c),d=n(313054),p=n.n(d),f=n(912895),m=n.n(f),h=n(198),v=n(780594),g=n.n(v),b=n(708717),y=n(220809),w=n(476709),E=n(941695),_=n(690299),Z=n.n(_),S=n(109025),k=n(207315),x=n.n(k),C=n(224008),M=n.n(C),O=n(306830),D=n.n(O),P=n(294565),N=n(302467),I=n.n(N),j=n(569257),T=n.n(j),A=n(24551),R=n(675252),V=n(652501),z=n(264797),L=n(289973),F=n(267682),U=n(339925),H=n(970693),W=n(467174),B=n(516037),q=function(e,t,n){this.step=e,this.inverted=t,this.origin=n};var J=function(e,t){this.version=e,this.unconfirmed=t};var $=new B.PluginKey("collab");function K(e){return void 0===e&&(e={}),e={version:e.version||0,clientID:null==e.clientID?Math.floor(4294967295*Math.random()):e.clientID},new B.Plugin({key:$,state:{init:function(){return new J(e.version,[])},apply:function(e,t){var n=e.getMeta($);return n||(e.docChanged?new J(t.version,t.unconfirmed.concat(function(e){for(var t=[],n=0;n<e.steps.length;n++)t.push(new q(e.steps[n],e.steps[n].invert(e.docs[n]),e));return t}(e))):t)}},config:e,historyPreserveItems:!0})}function G(e,t,n,r){for(var o=$.getState(e),i=o.version+t.length,a=$.get(e).spec.config.clientID,s=0;s<n.length&&n[s]==a;)++s;var l=o.unconfirmed.slice(s);if(!(t=s?t.slice(s):t).length)return e.tr.setMeta($,new J(i,l));var c=l.length,u=e.tr;if(c)l=function(e,t,n){for(var r=e.length-1;r>=0;r--)n.step(e[r].inverted);for(var o=0;o<t.length;o++)n.step(t[o]);for(var i=[],a=0,s=e.length;a<e.length;a++){var l=e[a].step.map(n.mapping.slice(s));s--,l&&!n.maybeStep(l).failed&&(n.mapping.setMirror(s,n.steps.length-1),i.push(new q(l,l.invert(n.docs[n.docs.length-1]),e[a].origin)))}return i}(l,t,u);else{for(var d=0;d<t.length;d++)u.step(t[d]);l=[]}var p=new J(i,l);return r&&r.mapSelectionBackward&&e.selection instanceof B.TextSelection&&(u.setSelection(B.TextSelection.between(u.doc.resolve(u.mapping.map(e.selection.anchor,-1)),u.doc.resolve(u.mapping.map(e.selection.head,-1)),-1)),u.updated&=-2),u.setMeta("rebased",c).setMeta("addToHistory",!1).setMeta($,p)}function Y(e){return $.getState(e).version}var X=n(630709),Q=n(506565),ee=n(603423),te=n(151300),ne=n.n(te),re=n(437069),oe=n.n(re),ie=n(708579),ae=n(505429),se=n(473103),le=n(611713),ce=n(381629),ue=function(e,t){this.id=t,this.text=e};function de(e,t,n){return Q.p.inline(e,t,{class:"comment"},{comment:n})}var pe=function(){function e(e,t,n){this.version=e,this.decos=t,this.unsent=n}var t=e.prototype;return t.findComment=function(e){for(var t=this.decos.find(),n=0;n<t.length;n++)if(t[n].spec.comment.id===e)return t[n]},t.commentsAt=function(e){return this.decos.find(e,e)},t.apply=function(t){var n=t.getMeta(fe),r=n&&n.type;if(!n&&!t.docChanged)return this;var o=this;"receive"===r&&(o=o.receive(n,t.doc));var i=o.decos,a=o.unsent;return i=i.map(t.mapping,t.doc),"newComment"===r?(i=i.add(t.doc,[de(n.from,n.to,n.comment)]),a=a.concat(n)):"deleteComment"===r&&(i=i.remove([this.findComment(n.comment.id)]),a=a.concat(n)),new e(o.version,i,a)},t.receive=function(t,n){for(var r=t.version,o=t.events,i=t.sent,a=this.decos,s=0;s<o.length;s++){var l=o[s];if("delete"===l.type){var c=this.findComment(l.id);c&&(a=a.remove([c]))}else this.findComment(l.id)||(a=a.add(n,[de(l.from,l.to,new ue(l.text,l.id))]))}return new e(r,a,this.unsent.slice(i))},t.unsentEvents=function(){for(var e=[],t=0;t<this.unsent.length;t++){var n=this.unsent[t];if("newComment"===n.type){var r=this.findComment(n.comment.id);r&&e.push({type:"create",id:n.comment.id,from:r.from,to:r.to,text:n.comment.text})}else e.push({type:"delete",id:n.comment.id})}return e},e.init=function(t){var n=t.comments.comments.map((function(e){return de(e.from,e.to,new ue(e.text,e.id))}));return new e(t.comments.version,Q.EH.create(t.doc,n),[])},e}(),fe=new B.Plugin({state:{init:pe.init,apply:function(e,t){return t.apply(e)}},props:{decorations:function(e){return this.getState(e).decos}}}),me=function(e){return new B.Plugin({props:{decorations:function(t){return function(e,t){var n=e.selection;if(!n.empty)return null;var r=fe.getState(e).commentsAt(n.from);if(!r.length)return null;return Q.EH.create(e.doc,[Q.p.widget(n.from,he(r,t,e))])}(t,e)}}})};function he(e,t,n){var r=document.createElement("div");r.className="tooltip-wrapper";var o=document.createElement("ul");o.className="commentList";for(var i=0;i<e.length;i++){var a=ve(e[i].spec.comment,t,n);o.appendChild(a)}return r.appendChild(o),r}function ve(e,t,n){var r=document.createElement("button");r.className="commentDelete",r.title="Delete annotation",r.innerHTML="x",r.addEventListener("click",(function(){return t(n.tr.setMeta(fe,{type:"deleteComment",comment:e}))}));var o=document.createElement("li");return o.className="commentText",o.innerHTML=e.text,o.appendChild(r),o}var ge=Z()("isle:text-editor"),be="cursor-widget",ye=ae.D.length,we=new B.Plugin({state:{init:function(){return{decorations:Q.EH.empty,version:0}},apply:function(e,t){var n,r=e.getMeta(this);if(r&&r.cursors){var o=oe()(r.cursors);n=Q.EH.empty;for(var i=0;i<o.length;i++){var a=o[i];if(a!==r.clientID){var s=document.createElement("span");s.className="editor-collaborative-cursor";var l=document.createElement("span");l.className="editor-collaborative-cursor-line",l.style="background-color: "+ae.D[i%ye],s.appendChild(l);var c=document.createElement("span");c.innerHTML=a,c.className="editor-collaborative-cursor-text",c.style="background-color: "+ae.D[i%ye],s.appendChild(c);var u=r.cursors[a],d=u.from,p=u.to;if(ge("Should display cursor at position: "+d),d!==p){if(d>p){var f=p;p=d,d=f}n=n.add(e.doc,[Q.p.widget(d,s,{PLACEHOLDER_ID:be}),Q.p.inline(d,p,{style:"background-color: "+ae.b[i%ye]+";"})])}else n=n.add(e.doc,[Q.p.widget(d,s,{PLACEHOLDER_ID:be})])}}return{decorations:n,version:r.version||t.version+1}}return t}},props:{decorations:function(e){return this.getState(e).decorations}}}),Ee=n(893121),_e=n(286618),Ze=n(100636),Se=n(974556),ke=n(73811),xe=n(416515),Ce=n(10206),Me=Object.defineProperty,Oe=function(e,t,n){return function(e,t,n){t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},De=Z()("isle:collaborative-view"),Pe={mapSelectionBackward:!0};var Ne=function(e,t){this.edit=e,this.comm=t};var Ie=function(e){return l.createElement("div",{className:"prose-statusbar"},e.nUsers&&e.docname?l.createElement("span",{className:"docinfo"},e.t("connected-to"),":",l.createElement("span",{className:"connected",style:{marginLeft:5}},l.createElement("span",{className:"docname"},e.docname,", "),l.createElement("span",{className:"users",style:{marginLeft:5}},(t=e.nUsers)+" user"+(1===t?"":"s")+":",e.userList.map((function(e,t){return l.createElement(ie.Z,{key:e+"-"+t,tooltip:e,placement:"top"},l.createElement("span",{className:"prose-statusbar-user-badge",style:{backgroundColor:ae.D[t%ae.D.length]}}))}))))):null,e.nWords?l.createElement("span",null,e.t("words"),": ",e.nWords):null,e.nChars?l.createElement("span",{style:{marginLeft:5}},e.t("characters"),": ",e.nChars):null);var t},je=function(e){function t(t){var n;return n=e.call(this,t)||this,Oe((0,r.Z)(n),"replaceEditorState",(function(){if(!n.dispatchState)return setTimeout(n.replaceEditorState,100);var e=n.dispatchState.edit,t=new B.AllSelection(e.doc),r=ne()(n.props.defaultValue)?Node.fromJSON(ce.Z,JSON.parse(n.props.defaultValue)):(0,xe.Z)(n.props.defaultValue);n.dispatch({type:"transaction",transaction:e.tr.replaceWith(t.from,t.to,r)})})),Oe((0,r.Z)(n),"send",(function(e,t){var r=t.steps,o=t.comments,i=t.cursor;De("Send current actions to server...");var a={version:Y(e),steps:r?r.steps.map((function(e){return e.toJSON()})):[],cursor:i,clientID:n.props.session.user.name||n.props.session.anonymousIdentifier,comment:o||[]};n.props.session.sendCollaborativeEvents(n.props.id,a)})),Oe((0,r.Z)(n),"onEditorState",(function(e){var t=0,r=0;e.doc.forEach((function(e){e.forEach((function(e){e.text&&(t+=e.text.length,r+=(0,Se.Z)(e.text))}))})),n.nWords=r,n.nChars=t,n.props.onEditorState(e),n.forceUpdate()})),Oe((0,r.Z)(n),"dispatchTransaction",(function(e){n.dispatch({type:"transaction",transaction:e})})),n.doc=ne()(t.defaultValue)?t.defaultValue:(0,xe.Z)(t.defaultValue).toJSON(),n.lastCursor={from:null,to:null},n.state={nUsers:null,userList:[]},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props.session;this.unsubscribe=t.subscribe((function(n,r){n!==Ce.At&&n!==Ce.E7||e.dispatchState||e.props.session.joinCollaborativeEditing(e.props.id,e.doc),n===Ce.qG&&r.id===t.namespaceID+"-"+t.lessonID+"-"+e.props.id?(De("Joined collaborative editing..."),e.handleStart(r.data)):n===Ce.ug&&r.id===t.namespaceID+"-"+t.lessonID+"-"+e.props.id?"polling"===e.dispatchState.comm&&e.handlePollResponse(r.data):n===Ce.t0&&r.id===t.namespaceID+"-"+t.lessonID+"-"+e.props.id?(De("Received response after sending collaborative editing events..."),"send"===e.dispatchState.comm&&e.handleSendResponse(r.data)):n===Ce.q$&&r.id===t.namespaceID+"-"+t.lessonID+"-"+e.props.id&&(De("Received info that other user updated the document "+JSON.stringify(r.data)+"[comm="+e.dispatchState.comm+"]"),"listening"===e.dispatchState.comm&&e.dispatch({type:"polling"}))})),this.dispatchState||this.props.session.joinCollaborativeEditing(this.props.id,this.doc)},n.componentDidUpdate=function(e){this.props.defaultValue===e.defaultValue&&this.props.docId===e.docId||this.replaceEditorState()},n.componentWillUnmount=function(){this.view&&this.view.destroy(),this.unsubscribe&&this.unsubscribe()},n.dispatch=function(e){var t,n=this,r=null;if("loaded"===e.type){var o=B.EditorState.create({doc:e.doc,schema:ce.Z,plugins:se.Z.concat([K({version:e.version,clientID:this.props.session.user.name||this.props.session.anonymousIdentifier}),fe,me((function(e){return n.dispatch({type:"transaction",transaction:e})})),we]),comments:e.comments});this.dispatchState=new Ne(o,"listening"),this.setState({nUsers:e.users,userList:oe()(e.cursors)})}else if("restart"===e.type)this.dispatchState=new Ne(null,"start"),this.props.session.joinCollaborativeEditing(this.props.id);else if("listening"===e.type)this.dispatchState=new Ne(this.dispatchState.edit,"listening");else if("polling"===e.type)this.dispatchState=new Ne(this.dispatchState.edit,"polling"),this.poll();else if("recover"===e.type)this.dispatchState=new Ne(this.dispatchState.edit,"recover"),this.recover();else if("transaction"===e.type){r=this.dispatchState.edit.apply(e.transaction);var i=(0,ee.fixTables)(r);i&&(r=r.apply(i.setMeta("addToHistory",!1)))}r&&(r.doc.content.size>4e4?("detached"!==this.dispatchState.comm&&De("Document too big. Detached."),this.dispatchState=new Ne(r,"detached")):("listening"===this.dispatchState.comm||e.requestDone)&&(t=this.sendable(r))?(this.dispatchState=new Ne(r,"send"),this.send(r,t)):e.requestDone?this.dispatchState=new Ne(r,"listening"):this.dispatchState=new Ne(r,this.dispatchState.comm),this.onEditorState(this.dispatchState.edit));this.dispatchState.edit?this.view?this.view.updateState(this.dispatchState.edit):(De("Create editor view..."),this.setView(new Q.tk(this.editorDiv,{state:this.dispatchState.edit,nodeViews:{footnote:function(e,t,n,r){return new Ee.Z(e,t,n,r)},image:function(e,t,n,r){return new Ze.Z(e,t,n,r)},plot:function(e,t,n,r){return new Ze.Z(e,t,n,r)}},dispatchTransaction:this.dispatchTransaction,handleDOMEvents:{dragenter:function(e){De("Handle drag enter event..."),(0,_e.yz)(e)},drop:ke.Z}}))):this.setView(null)},n.recover=function(){De("Try to recover from an error..."),"recover"===this.dispatchState.comm&&this.dispatch({type:"polling"})},n.poll=function(){var e=fe.getState(this.dispatchState.edit),t=we.getState(this.dispatchState.edit),n={version:Y(this.dispatchState.edit),commentVersion:e.version,cursorVersion:t.version};De("Ask for collaborative editing events "+JSON.stringify(n)+"[comm="+this.dispatchState.comm+"]"),this.props.session.pollCollaborativeEditingEvents(this.props.id,n)},n.setView=function(e){this.view&&this.view.destroy(),this.view=e},n.handleSendResponse=function(e){if(De("Handle send response..."),"invalid version"===e)De("Went out of sync, trying to restart... "),this.dispatch({type:"restart"});else if("version not current"===e)De("Version is not current, wait for new data..."),this.dispatch({type:"polling"}),this.poll();else if(e){var t=e.steps.map((function(e){return X.h8.fromJSON(ce.Z,e)})),n=t?G(this.dispatchState.edit,t,function(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}(e.clientID,t.length),Pe):this.dispatchState.edit.tr;n.setMeta(fe,{type:"receive",version:e.commentVersion||0,events:[],sent:e.comment.length}),this.dispatch({type:"transaction",transaction:n,requestDone:!0})}else this.dispatch({type:"recover"})},n.handlePollResponse=function(e){if("invalid version"===e||"history no longer available"===e)De("Too far behind, reverting to server version of document..."),this.dispatch({type:"restart"});else if(e)if(De("Received response for version: "+e.version+" and commentVersion: "+e.commentVersion),e.steps){var t=we.getState(this.dispatchState.edit).version,n=G(this.dispatchState.edit,e.steps.map((function(e){return X.h8.fromJSON(ce.Z,e)})),e.clientIDs,Pe);n.setMeta(we,{cursors:e.cursors,version:e.cursorVersion,clientID:this.props.session.user.name||this.props.session.anonymousIdentifier}),this.dispatch({type:"transaction",transaction:n,requestDone:!0}),e.cursorVersion!==t&&this.setState({nUsers:e.users,userList:oe()(e.cursors)})}else this.dispatchTransaction({type:"listening"});else this.dispatch({type:"recover"})},n.sendable=function(e){var t,n,r=(t=e,0==(n=$.getState(t)).unconfirmed.length?null:{version:n.version,steps:n.unconfirmed.map((function(e){return e.step})),clientID:$.get(t).spec.config.clientID,get origins(){return this._origins||(this._origins=n.unconfirmed.map((function(e){return e.origin})))}}),o=e.selection,i={from:(o=o.toJSON()).head,to:o.anchor},a=fe.getState(e).unsentEvents();return r||a.length||i.from!==this.lastCursor.from||i.to!==this.lastCursor.to?(this.lastCursor=i,{steps:r,comments:a,cursor:i}):null},n.handleStart=function(e){if(!e)return De("Encountered error while starting. Aborting.");De("Starting with version: "+e.version+" and commentVersion: "+e.commentVersion),this.dispatch({type:"loaded",doc:ce.Z.nodeFromJSON(e.doc),version:e.version,users:e.users,cursors:e.cursors,comments:{version:e.commentVersion,comments:e.comments}})},n.render=function(){var e=this;return l.createElement(l.Fragment,null,l.createElement(le.Z,{menu:this.props.menu,state:this.dispatchState?this.dispatchState.edit:null,dispatch:this.dispatchTransaction,view:this.view,fullscreen:this.props.fullscreen,showColorPicker:this.props.showColorPicker,onColorChoice:this.props.onColorChoice}),l.createElement("div",{ref:function(t){e.editorDiv=t,e.props.onMount(e.editorDiv)}}),l.createElement(Ie,{nWords:this.nWords,nChars:this.nChars,nUsers:this.state.nUsers,userList:this.state.userList,docname:this.props.id,t:this.props.t}))},t}(l.Component);je.propTypes={defaultValue:u().string.isRequired,fullscreen:u().bool.isRequired,menu:u().object.isRequired,showColorPicker:u().bool.isRequired,session:u().object.isRequired,onColorChoice:u().func,onEditorState:u().func,onMount:u().func},je.defaultProps={onColorChoice:function(){},onEditorState:function(){},onMount:function(){}};var Te=(0,h.Z)("text-editor")(je),Ae=n(770561),Re=n(423184),Ve=n(294942),ze=n(537133),Le=Object.defineProperty,Fe=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,qe=function(e,t,n){return t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Je=function(e,t){for(var n in t||(t={}))We.call(t,n)&&qe(e,n,t[n]);if(He)for(var r,o=(0,i.Z)(He(t));!(r=o()).done;){n=r.value;Be.call(t,n)&&qe(e,n,t[n])}return e},$e=function(e,t){return Fe(e,Ue(t))},Ke=function(e,t,n){return qe(e,"symbol"!=typeof t?t+"":t,n),n},Ge=function(e){function t(t){var n;n=e.call(this,t)||this,Ke((0,r.Z)(n),"_createEditorView",(function(e){n.editorDiv=e,null!==e&&(n.editorView=new Q.tk(e,{state:n.state.editorState,dispatchTransaction:n.dispatchTransaction,editable:function(){return!1},nodeViews:{footnote:function(e,t,n,r){return new Ee.Z(e,t,n,r)},image:function(e,t,n,r){return new Ze.Z(e,t,n,r)},plot:function(e,t,n,r){return new Ze.Z(e,t,n,r)},plotContainer:function(e,t,n,r){return new Ze.Z(e,t,n,r)}}}))})),Ke((0,r.Z)(n),"addStep",(function(){var e;if(n.state.running){var t=n.state.editorState,r=t.tr,o=n.state.document.steps[n.state.counter],i=$e(Je({},n.state.cursors),((e={})[o.clientID]={from:o.from,to:o.to},e));r.setMeta(we,{cursors:i,version:1,clientID:""});var a=X.h8.fromJSON(ce.Z,o),s=a.invert(r.doc);s.clientID=o.clientID,r.maybeStep(a);var l=t.apply(r);n.editorView.updateState(l);var c=n.state.counter+1,u=n.state.invertedSteps.slice();u[n.state.counter]=s;var d=0,p=0;l.doc.forEach((function(e){e.forEach((function(e){e.text&&(d+=e.text.length,p+=(0,Se.Z)(e.text))}))})),n.setState({counter:c,editorState:l,nChars:d,nWords:p,invertedSteps:u,cursors:i},(function(){c<n.state.document.steps.length&&(n.timeoutID=setTimeout(n.addStep,n.state.interval))}))}})),Ke((0,r.Z)(n),"fastForward",(function(){if(n.state.running)return n.reset(null,n.fastForward);for(var e=n.state.editorState,t=n.state.invertedSteps.slice(),r=0;r<n.state.document.steps.length;r++){var o=e.tr,i=n.state.document.steps[r],a=X.h8.fromJSON(ce.Z,i),s=a.invert(o.doc);s.clientID=i.clientID,o.maybeStep(a),e=e.apply(o),t[r]=s}n.editorView.updateState(e);var l=0,c=0;e.doc.forEach((function(e){e.forEach((function(e){e.text&&(l+=e.text.length,c+=(0,Se.Z)(e.text))}))})),n.setState({counter:n.state.document.steps.length,editorState:e,nWords:c,nChars:l,invertedSteps:t,running:!1})})),Ke((0,r.Z)(n),"subtractStep",(function(){var e;if(n.state.running){var t=n.state.editorState,r=t.tr,o=n.state.counter-1,i=n.state.invertedSteps[o],a=$e(Je({},n.state.cursors),((e={})[i.clientID]={from:i.from,to:i.to},e));r.setMeta(we,{cursors:a,version:1,clientID:""}),r.maybeStep(i);var s=t.apply(r);n.editorView.updateState(s);var l=0,c=0;s.doc.forEach((function(e){e.forEach((function(e){e.text&&(l+=e.text.length,c+=(0,Se.Z)(e.text))}))})),n.setState({counter:o,editorState:s,nChars:l,nWords:c},(function(){o>0&&(n.timeoutID=setTimeout(n.subtractStep,n.state.interval))}))}})),Ke((0,r.Z)(n),"reset",(function(e,t){void 0===t&&(t=D()),n.timeoutID&&clearTimeout(n.timeoutID);var r=n.props.defaultValue,o=ne()(r)?Node.fromJSON(ce.Z,JSON.parse(r)):(0,xe.Z)(r),i=B.EditorState.create({doc:o,schema:ce.Z,plugins:se.Z.concat([we]),cursors:{}});n.editorView.updateState(i),n.setState({editorState:i,counter:0,nChars:0,nWords:0,running:!1},t)})),Ke((0,r.Z)(n),"playBackward",(function(){n.setState({running:!0},n.subtractStep)})),Ke((0,r.Z)(n),"playForward",(function(){n.setState({running:!0},n.addStep)})),Ke((0,r.Z)(n),"stop",(function(){n.setState({running:!1}),n.timeoutID&&clearTimeout(n.timeoutID)})),Ke((0,r.Z)(n),"handleRestore",(function(){n.props.onRestore(n.state.editorState.doc.content)}));var o=t.defaultValue,i=ne()(o)?Node.fromJSON(ce.Z,JSON.parse(o)):(0,xe.Z)(o);return n.state={editorState:B.EditorState.create({doc:i,schema:ce.Z,plugins:se.Z.concat([we])}),document:null,counter:0,interval:100,running:!1,nWords:0,nChars:0,invertedSteps:[],cursors:{}},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){return e=this,t=null,n=s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.props.session).anonymous){e.next=6;break}return e.next=4,t.getTextEditorDocument(this.props.docId);case 4:"ok"===(n=e.sent).data.message&&this.setState({document:n.data.document});case 6:case"end":return e.stop()}}),e,this)})),new Promise((function(r,o){var i=function(e){try{s(n.next(e))}catch(t){o(t)}},a=function(e){try{s(n.throw(e))}catch(t){o(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,a)};s((n=n.apply(e,t)).next())}));var e,t,n},n.componentWillUnmount=function(){this.timeoutID&&clearTimeout(this.timeoutID)},n.render=function(){var e,t=this,n=this.state,r=n.document,o=n.counter,i=this.props,a=i.t,s=i.session.anonymous;return e=s?l.createElement("div",{className:"text-editor-jumbotron"},a("history-only-available-for-users")):l.createElement("div",{ref:this._createEditorView}),l.createElement(l.Fragment,null,l.createElement(ie.Z,{tooltip:a("close")},l.createElement(Ae.Z,{"aria-label":a("close"),variant:"light",onClick:this.props.onClose},l.createElement("i",{className:"fas fa-arrow-left"}))),l.createElement("span",{className:"title text-editor-playback-title"},a("document-history")),l.createElement(Re.Z,null,l.createElement(ie.Z,{tooltip:a("jump-to-beginning"),show:!s,placement:"bottom"},l.createElement(Ae.Z,{"aria-label":a("jump-to-beginning"),variant:"light",onClick:this.reset,disabled:s},l.createElement("i",{className:"fas fa-fast-backward"}))),l.createElement(ie.Z,{tooltip:a("play-in-reverse"),show:!s&&r&&0!==o&&!this.state.running,placement:"bottom"},l.createElement(Ae.Z,{"aria-label":a("play-in-reverse"),variant:"light",onClick:this.playBackward,disabled:s||!r||0===o||this.state.running},l.createElement("i",{className:"fas fa-play fa-rotate-180"}))),l.createElement(ie.Z,{tooltip:a("stop"),show:!s&&this.state.running,placement:"bottom"},l.createElement(Ae.Z,{"aria-label":a("stop"),variant:"light",onClick:this.stop,disabled:s||!this.state.running},l.createElement("i",{className:"fas fa-pause"}))),l.createElement(ie.Z,{tooltip:a("play"),show:!s&&r&&r.steps.length>o&&!this.state.running,placement:"bottom"},l.createElement(Ae.Z,{"aria-label":a("play"),variant:"light",onClick:this.playForward,disabled:s||!r||r.steps.length<=o||this.state.running},l.createElement("i",{className:"fas fa-play"}))),l.createElement(ie.Z,{tooltip:a("jump-to-end"),show:!s&&r&&r.steps.length>o,placement:"bottom"},l.createElement(Ae.Z,{"aria-label":a("jump-to-end"),variant:"light",onClick:this.fastForward,disabled:s||!r||r.steps.length<=o},l.createElement("i",{className:"fas fa-fast-forward"})))),l.createElement("span",{style:{marginLeft:20,marginRight:10}},a("update-time")),l.createElement(Ve.Z,{inline:!0,defaultValue:this.state.interval,min:50,max:1e3,onChange:function(e){t.setState({interval:e})},numberInputStyle:{display:"none"}}),l.createElement("span",null,this.state.interval+"ms"),l.createElement(ie.Z,{tooltip:a("restore-tooltip"),placement:"bottom"},l.createElement(Ae.Z,{variant:"secondary",style:{margin:4,marginLeft:8},onClick:this.handleRestore},a("restore"))),e,l.createElement(ze.Z,{nWords:this.state.nWords,nChars:this.state.nChars,t:a}))},t}(l.Component);Ge.propTypes={onClose:u().func.isRequired,onRestore:u().func.isRequired,defaultValue:u().string.isRequired,docId:u().string.isRequired},Ge.defaultProps={};var Ye=Ge,Xe=function(e,t){return"<!doctype html>\n<html lang=en>\n\t<head>\n\t\t<meta charset=utf-8>\n\t\t<title>"+e+"</title>\n\t\t<link rel=\"shortcut icon\" href=\"favicon.ico\" />\n\t\t<style media=\"screen\" type=\"text/css\">\n\t\t\tbody {\n\t\t\t\tfont-family: 'Open Sans', sans-serif;\n\t\t\t\tfont-size: 12pt;\n\t\t\t\tmargin-left: auto;\n\t\t\t\tmargin-right: auto;\n\t\t\t\tpadding: 10px;\n\t\t\t\twidth: 100%;\n\t\t\t\tmax-width: 1200px;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\th1 {\n\t\t\t\tcolor: #2e4468;\n\t\t\t\tfont-size: 26pt;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tletter-spacing: 1px;\n\t\t\t}\n\n\t\t\th2 {\n\t\t\t\tfont-size: 20pt;\n\t\t\t\tcolor: #3c763d;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\th3 {\n\t\t\t\tfont-size: 18pt;\n\t\t\t\tcolor: #2e4468;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\th4 {\n\t\t\t\tfont-size: 15pt;\n\t\t\t\tcolor: #ca5800;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\th5 {\n\t\t\t\tfont-size: 12pt;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\ttr {\n\t\t\t\tdisplay: table-row;\n\t\t\t\tvertical-align: inherit;\n\t\t\t\tborder-color: inherit;\n\t\t\t}\n\n\t\t\tth {\n\t\t\t\tcolor: #464a4c;\n\t\t\t\tbackground-color: #eceeef;\n\t\t\t\tpadding: .3rem;\n\t\t\t\tborder-top: 1px solid #eceeef;\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\tth, td {\n\t\t\t\tdisplay: table-cell;\n\t\t\t}\n\n\t\t\ttd {\n\t\t\t\tpadding: .3rem;\n\t\t\t\tvertical-align: top;\n\t\t\t\tborder-top: 1px solid #eceeef;\n\t\t\t}\n\n\t\t\tthead {\n\t\t\t\tdisplay: table-header-group;\n\t\t\t\tvertical-align: middle;\n\t\t\t}\n\n\t\t\ttable {\n\t\t\t\twidth: 100%;\n\t\t\t\tmax-width: 100%;\n\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\tdisplay: table;\n\t\t\t\tborder-spacing: 2px;\n\t\t\t\tborder-color: grey;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\n\t\t\ta {\n\t\t\t\tcolor: #2e4468;\n\t\t\t}\n\n\t\t\tpre {\n\t\t\t\tdisplay: block;\n\t\t\t\tpadding: 9.5px;\n\t\t\t\tmargin: 0 0 10px;\n\t\t\t\tline-height: 1.42857143;\n\t\t\t\tcolor: #333;\n\t\t\t\tword-break: break-all;\n\t\t\t\tword-wrap: break-word;\n\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\tborder-radius: 4px;\n\t\t\t}\n\n\t\t\tcode {\n\t\t\t\twhite-space: pre-wrap;\n\t\t\t}\n\n\t\t\tblockquote {\n\t\t\t\tfont-size: 22px;\n\t\t\t\tpadding: 10px 20px;\n\t\t\t\tmargin: 0px 0px 20px;\n\t\t\t\tborder-left: 5px solid lightgray;\n\t\t\t\tbackground-color: rgb(238, 238, 238);\n\t\t\t}\n\n\t\t\t.img-tooltip {\n\t\t\t\ttop: 24px;\n\t\t\t\tright: 24px;\n\t\t\t\twidth: max-content;\n\t\t\t\tbackground-color: lightgray;\n\t\t\t\tcolor: black;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\ttext-align: left;\n\t\t\t\topacity: 0;\n\t\t\t\tpadding: 15px;\n\t\t\t\tposition: fixed;\n\t\t\t\tfont-size: 22px;\n\t\t\t\t-webkit-transition: opacity 0.5s;\n\t\t\t\t-moz-transition: opacity 0.5s;\n\t\t\t\t-ms-transition: opacity 0.5s;\n\t\t\t\t-o-transition: opacity 0.5s;\n\t\t\t\ttransition: opacity 0.5s;\n\t\t\t\tz-index: 9999;\n\t\t\t}\n\n\t\t\t.img-container {\n\t\t\t\tposition: relative;\n\t\t\t}\n\n\t\t\t.img-container:hover .img-tooltip {\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t</style>\n\t\t<script>\n\t\t\tMathJax = {\n\t\t\t\tloader: { load: [] }\n\t\t\t\toptions: {}\n\t\t\t\ttex: {\n\t\t\t\t\tinlineMath: [\n\t\t\t\t\t\t['$', '$'],\n\t\t\t\t\t\t[ '\\(', '\\)' ]\n\t\t\t\t\t],\n\t\t\t\t\tdisplayMath: [\n\t\t\t\t\t\t['$$', '$$'],\n\t\t\t\t\t\t['\\[', '\\]']\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t};\n\t\t<\/script>\n\t\t<script src=\"https://kit.fontawesome.com/3a7c01b4b9.js\" crossorigin=\"anonymous\"><\/script>\n\t\t<script id=\"MathJax-script\" async src=\"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js\"><\/script>\n\t</head>\n\t<body>\n\t"+t+"\n\t</body>\n</html>"},Qe=n(371538),et=n(838322),tt=n(585208),nt=n(26266),rt=n(409856),ot=n(213955),it=Object.defineProperty,at=function(e,t,n){return function(e,t,n){t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},st=function(e){function t(){var t;return t=e.apply(this,arguments)||this,at((0,r.Z)(t),"state",{annotation:""}),at((0,r.Z)(t),"_onKeyDown",(function(e){13===e.keyCode&&(e.preventDefault(),t._apply())})),at((0,r.Z)(t),"_onTextChange",(function(e){var n=e.target.value;t.setState({annotation:n})})),at((0,r.Z)(t),"_cancel",(function(){t.props.close()})),at((0,r.Z)(t),"_apply",(function(){t.props.close(t.state.annotation)})),t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.state.annotation;return l.createElement("div",{className:"annotation-editor"},l.createElement("form",{className:"editor-form",onSubmit:ot.Z},l.createElement("fieldset",null,l.createElement("legend",null,tt.a.t("text-editor:annotation-text")),l.createElement(nt.Z,{autoFocus:!0,onChange:this._onTextChange,onKeyDown:this._onKeyDown,placeholder:tt.a.t("text-editor:enter-annotation"),spellCheck:!1,as:"textarea",rows:5,value:e||"",style:{marginBottom:20}})),l.createElement("div",{className:"editor-form-buttons"},l.createElement(rt.Z,{label:tt.a.t("text-editor:cancel"),onClick:this._cancel}),l.createElement(rt.Z,{active:!0,disabled:0===e.length,label:tt.a.t("text-editor:submit"),onClick:this._apply}))))},t}(l.PureComponent),lt=st,ct=n(96899),ut=n(120914),dt=Object.defineProperty,pt=function(e,t,n){return function(e,t,n){t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n};function ft(){return Math.floor(4294967295*Math.random())}var mt=function(e){function t(){var t;return t=e.apply(this,arguments)||this,pt((0,r.Z)(t),"_popUp",null),pt((0,r.Z)(t),"title","add-annotation"),pt((0,r.Z)(t),"content",H.Z.annotation),pt((0,r.Z)(t),"enable",(function(e){if(!(e.selection instanceof B.TextSelection))return!1;var t=e.selection;return t.from<t.to})),pt((0,r.Z)(t),"waitForUserInput",(function(e,n,r,o){return t._popUp?Promise.resolve(void 0):(n&&n((0,et.tk)(e)),new Promise((function(e){t._popUp=(0,ut.Z)(lt,{},{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})})))})),pt((0,r.Z)(t),"executeWithUserInput",(function(e,t,n,r){if(t){var o=e.selection,i=e.tr;t(i=(i=(i=n?(0,et.be)(n.state):i).setSelection(o)).setMeta(fe,{type:"newComment",from:o.from,to:o.to,comment:new ue(r,ft())}))}return n&&n.focus(),!0})),t}return(0,o.Z)(t,e),t}(ct.Z),ht=mt,vt=n(508838),gt=n(782963),bt=n.n(gt),yt=n(557106),wt=n.n(yt),Et=/width: (.+)px/g,_t=/<pre class="img-tooltip">[\s\S]*?<\/pre>/g;function Zt(e,t){void 0===e&&(e=12),void 0===t&&(t=!1);var n=e-4;return{"html-h1":{fontSize:n+16,color:"#2e4468",bold:!0,alignment:t?"center":null},"html-h2":{fontSize:n+14,color:"#3c763d",bold:!0,alignment:t?"center":null},"html-h3":{fontSize:n+8,color:"#2e4468",bold:!0,alignment:t?"center":null},"html-h4":{fontSize:n+4,color:"#ca5800",bold:!0,alignment:t?"center":null},"html-img":{alignment:"center"},"html-table":{alignment:"center"}}}var St=function(e,t,n,r){e=I()(e,Et,(function(e,n){return"width: "+parseFloat(n)*wt()(t.pageSize.width/r,1)+"px"})),e=I()(e,_t,"");var o=bt()(e,{defaultStyles:{img:""}}),i=function(e){return 3024===e.pageSize.width&&2160===e.pageSize.height}(t),a={styles:Zt(n,i),pageSize:t.pageSize,pageOrientation:t.pageOrientation,defaultStyle:{fontSize:n-4},pageMargins:[40,60,40,60]};return a.content=o,a},kt=n(382617),xt=Z()("isle:img-to-str");var Ct,Mt=function(e,t,n,r){void 0===r&&(r="png"),xt("Generate base64 encoded "+r+" string of "+t+" x "+n+" image...");var o=document.createElement("canvas"),i=o.getContext("2d");return o.width=t,o.height=n,i.clearRect(0,0,t,n),i.drawImage(e,0,0,t,n),o.toDataURL("image/"+r)},Ot=(n(697927),Object.defineProperty),Dt=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,It=function(e,t,n){return t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jt=function(e,t,n){return It(e,"symbol"!=typeof t?t+"":t,n),n},Tt=function(e,t,n){return new Promise((function(r,o){var i=function(e){try{s(n.next(e))}catch(t){o(t)}},a=function(e){try{s(n.throw(e))}catch(t){o(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,a)};s((n=n.apply(e,t)).next())}))},At=(0,b.Z)((function(){return Promise.all([n.e(1882),n.e(1948)]).then(n.bind(n,368845))})),Rt=(0,b.Z)((function(){return Promise.all([n.e(1882),n.e(337)]).then(n.bind(n,960550))})),Vt=(0,b.Z)((function(){return Promise.all([n.e(1882),n.e(9325)]).then(n.bind(n,545336))})),zt=(0,b.Z)((function(){return Promise.all([n.e(3312),n.e(1882),n.e(3159)]).then(n.bind(n,763926))})),Lt=Z()("isle:text-editor"),Ft=/<body[^>]*>((.|[\n\r])*)<\/body>/im,Ut=(0,A.Z)("text-editor"),Ht=x()("\n",15),Wt=p()({html:!0,xhtmlOut:!0,breaks:!0,typographer:!1});function Bt(e){return Tt(this,null,s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(e){return e.blob()})).then(z.Z);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))}var qt=function(e){function t(t,n){var o,i;if(o=e.call(this,t)||this,jt((0,r.Z)(o),"recordedText",(function(e){e+=" ",document.execCommand("insertText",!1,e)})),jt((0,r.Z)(o),"handleFileSelect",(function(e){Lt("Opening file...");var t=e.target.files,n=new FileReader;n.onload=function(){Lt("Successfully read file...");var e=n.result,t=Ft.exec(e)[1];o.setState({value:t,docId:o.state.docId+1})},n.onerror=function(){Lt("Encountered an error...")},n.readAsText(t[0])})),jt((0,r.Z)(o),"toggleSubmitModal",(function(e,t){void 0===t&&(t=D()),o.setState({showSubmitModal:!o.state.showSubmitModal},t)})),jt((0,r.Z)(o),"toggleGuides",(function(){o.setState({showGuides:!o.state.showGuides})})),jt((0,r.Z)(o),"toggleResetModal",(function(e,t){void 0===t&&(t=D()),o.setState({showResetModal:!o.state.showResetModal},t)})),jt((0,r.Z)(o),"togglePDFModal",(function(e){void 0===e&&(e=D()),o.setState({showPDFModal:!o.state.showPDFModal},e)})),jt((0,r.Z)(o),"toggleHistory",(function(){o.setState({showHistory:!o.state.showHistory})})),jt((0,r.Z)(o),"submitReport",(function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),Tt((0,r.Z)(o),null,s().mark((function n(){var r,o,i,a,l,c,u,d,p,f,h=this;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.context).anonymous){n.next=3;break}return n.abrupt("return",r.addNotification({title:this.props.t("sign-in"),message:this.props.t("sign-in-required"),level:"warning",position:"tr"}));case 3:o=S.DOMSerializer.fromSchema(ce.Z).serializeFragment(this.editorState.doc.content),(i=document.createElement("div")).appendChild(o),a=i.getElementsByTagName("img"),l=0;case 8:if(!(l<a.length)){n.next=23;break}if((c=a[l]).crossOrigin="Anonymous",!T()(c.src,"data:image/svg+xml")){n.next=16;break}Lt("Convert from SVG to PNG..."),c.src=Mt(c,c.naturalWidth,c.naturalHeight),n.next=20;break;case 16:if(T()(c.src,"data:")){n.next=20;break}return n.next=19,Bt(c.src);case 19:c.src=n.sent;case 20:l++,n.next=8;break;case 23:u=I()(i.innerHTML,"<p></p>","<p> </p>"),d=document.title||"provisoric",p=Xe(d,u),f=St(u,{pageSize:{width:612,height:792},pageOrientation:"portrait"},16,this.editorDiv.clientWidth),m().createPdf(f).getBase64((function(n){if(h.props.sendSubmissionEmails){var o={text:h.props.t("report-submitted-message",{name:r.user.name}),subject:h.props.t("report-submitted"),attachments:[{filename:"report.html",content:p,contentType:"text/html"},{filename:"report.pdf",content:n,contentType:"application/pdf",encoding:"base64"}]};r.sendMail(o,r.user.email),e&&(o.text=t,r.sendMail(o,e.email))}var a=new FormData,s=new FormData,l="report.html";h.id&&(l=h.id+"_"+l);var c=new File([p],l,{type:"text/html"});a.append("file",c),l="report.pdf",l=h.id+"_"+l;var u=(0,V.Z)(n,"application/pdf"),d=new File([u],l,{type:"application/pdf"});s.append("file",d),r.uploadFile({formData:a,showNotification:!1}),r.uploadFile({formData:s,showNotification:!1}),r.addNotification({title:h.props.t("submitted"),message:h.props.t("submitted-msg"),level:"success",position:"tr"}),r.log({id:h.id,type:kt.W,value:i.innerText})}));case 30:case"end":return n.stop()}}),n,this)})))})),jt((0,r.Z)(o),"resetEditor",(function(){var e,t;o.setState({value:Wt.render(o.props.defaultValue),docId:o.state.docId+1});var n=o.props.resetModal;e=n&&n.notificationTitle?n.notificationTitle:"Reset",t=n&&n.notification?n.notification:o.props.t("report-deleted-msg"),o.context.addNotification({title:e,message:t,level:"success",position:"tr"})})),jt((0,r.Z)(o),"requestTextDocuments",(function(){var e=o.context;o.getTextEditorDocuments||(o.getTextEditorDocuments=g()(e.getTextEditorDocuments,1e3)),o.getTextEditorDocuments()})),o.id=t.id||Ut(t),i||(i=Wt.render(t.defaultValue)),o.state={showResetModal:!1,showSubmitModal:!1,showPDFModal:!1,showColorPicker:!1,showGuides:!1,isFullscreen:!1,value:i,originalDefaultValue:t.defaultValue,docId:0,group:null,allGroups:null,selectedUserReport:null,showHistory:!1},o.menu=M()(U.ZP,2),o.menu.marks.push({title:"font-color",content:H.Z.color,enable:function(e){return(0,vt.Z)(e,"textColor")},run:function(e,t){o.setState({showColorPicker:!o.state.showColorPicker}),o.onColorChoice=function(n){var r=e.schema,i=e.tr,a=r.marks.textColor,s=n?{color:n.hex}:null;return(i=(0,Qe.Z)(e.tr.setSelection(e.selection),r,a,s)).docChanged||i.storedMarksSet?(t&&t(i),o.setState({showColorPicker:!o.state.showColorPicker}),!0):(o.setState({showColorPicker:!o.state.showColorPicker}),!1)}}}),o.menu.addons=[{title:"save-html",content:H.Z.save,run:function(e,t){var n=S.DOMSerializer.fromSchema(ce.Z).serializeFragment(e.doc.content),r=document.createElement("div");r.appendChild(n);var i=document.title||"provisoric",a=Xe(i,r.innerHTML),s=new Blob([a],{type:"text/html"});(0,R.Z)(s,i+"_"+o.state.docId+".html"),o.setState({docId:o.state.docId+1})}},{title:"export-pdf",content:H.Z.pdf,run:function(e,t){return o.togglePDFModal(),o.exportPDF=function(t){return Tt((0,r.Z)(o),null,s().mark((function n(){var r,o,i,a,l,c,u,d,p=this;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=document.title||"provisoric",n.prev=1,i=S.DOMSerializer.fromSchema(ce.Z).serializeFragment(e.doc.content),(a=document.createElement("div")).appendChild(i),l=a.getElementsByTagName("img"),c=0;case 7:if(!(c<l.length)){n.next=22;break}if((u=l[c]).crossOrigin="Anonymous",!T()(u.src,"data:image/svg+xml")){n.next=15;break}Lt("Convert from SVG to PNG..."),u.src=Mt(u,u.naturalWidth,u.naturalHeight),n.next=19;break;case 15:if(T()(u.src,"data:")){n.next=19;break}return n.next=18,Bt(u.src);case 18:u.src=n.sent;case 19:c++,n.next=7;break;case 22:d=I()(a.innerHTML,"<p></p>","<p> </p>"),o=St(d,t,16,this.editorDiv.clientWidth),n.next=30;break;case 26:n.prev=26,n.t0=n.catch(1),this.context.addNotification({title:this.props.t("error-serializing-html"),message:n.t0.message+". "+this.props.t("check-syntax"),level:"error",position:"tr"});case 30:this.togglePDFModal((function(){try{m().createPdf(o).download(r)}catch(e){p.context.addNotification({title:p.props.t("error-generating-pdf"),message:e+". "+p.props.t("check-syntax"),level:"error",position:"tr"})}}));case 31:case"end":return n.stop()}}),n,this,[[1,26]])})))},!1}}],o.props.canLoadHTML&&o.menu.addons.unshift({title:"open-html",run:function(e,t){var n=document.createElement("input");return n.type="file",n.accept=".html",n.addEventListener("change",o.handleFileSelect,!1),n.click(),!1},content:H.Z.open}),o.props.allowSubmissions&&o.menu.addons.push({title:"submit",content:H.Z.submit,run:function(e,t){return o.editorState=e,o.toggleSubmitModal(),!1}}),o.menu.addons=o.menu.addons.concat([{title:"toggle-fullscreen",run:function(){/fullscreen/.test(o.editorWrapper.className)?o.editorWrapper.className=o.editorWrapper.className.replace(/\s*fullscreen\b/,""):o.editorWrapper.className+=" fullscreen",o.state.isFullscreen?document.body.style.overflow=Ct:(Ct=document.body.style.overflow,document.body.style.overflow="hidden"),o.setState({isFullscreen:!o.state.isFullscreen})},content:H.Z.fullscreen},{title:"",content:l.createElement(y.Z,{mode:"microphone",timeout:o.props.voiceTimeout,width:26,height:26,onFinalText:o.recordedText})},{title:"open-tutorials",run:o.toggleGuides,content:H.Z.guides},new ht,{title:"show-history",content:H.Z.history,run:o.toggleHistory}]),t.defaultValue!==Ht){var a,c,u=o.props.resetModal;a=u&&u.tooltip?u.tooltip:"reset-to-default",c=u&&u.icon?u.icon:H.Z.reset,o.menu.addons.push({title:a,run:function(){o.toggleResetModal()},content:c})}return o}(0,o.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.defaultValue!==t.originalDefaultValue?(Lt("Default value has changed..."),{value:e.defaultValue?Wt.render(e.defaultValue):e.defaultValue,originalDefaultValue:e.defaultValue}):null};var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(n,r){if(n===Ce.Fw||n===Ce.E7||n===Ce.Ys)e.forceUpdate();else if(n===Ce.WF){var o=t.allGroups.map((function(e){return e.name}));e.setState({group:t.group?t.group.name:o[0],allGroups:o})}else n===Ce.vB&&e.setState({group:null,allGroups:null})}))},n.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},n.generateDocumentId=function(){if("group"===this.props.mode)return this.state.group+"-"+this.id;var e=this.context;return this.state.selectedUserReport?this.id+"-"+this.state.selectedUserReport:"individual"===this.props.mode?this.id+"-"+(e.user.email||e.anonymousIdentifier):"cohort"===this.props.mode&&e.cohort?this.id+"-"+e.cohort:this.id},n.renderView=function(){var e=this,t=this.context,n=(0,P.isPrimitive)(t.server),r=this.generateDocumentId();return this.state.showHistory?l.createElement(Ye,{defaultValue:this.props.defaultValue,onClose:this.toggleHistory,onRestore:function(t){e.setState({showHistory:!e.state.showHistory},(function(){var n=S.DOMSerializer.fromSchema(ce.Z).serializeFragment(t),r=document.createElement("div");r.appendChild(n),e.setState({value:r.innerHTML,docId:e.state.docId+1})}))},editorState:this.editorState,docId:r,session:t,t:this.props.t,key:r}):n?l.createElement(Te,{defaultValue:this.state.value,menu:this.menu,onMount:function(t){e.editorDiv=t},session:t,fullscreen:this.state.isFullscreen,showColorPicker:this.state.showColorPicker,onColorChoice:this.onColorChoice,id:r,key:r+"-{session.anonymous}",onEditorState:function(t){e.editorState=t}}):l.createElement(W.Z,{defaultValue:this.state.value,menu:this.menu,className:"cancel",onMount:function(t){e.editorDiv=t},t:this.props.t,fullscreen:this.state.isFullscreen,showColorPicker:this.state.showColorPicker,onColorChoice:this.onColorChoice,id:L.Z?null:this.id,onEditorState:function(t){e.editorState=t},docId:this.state.docId})},n.render=function(){var e=this,t=this.context;return"group"!==this.props.mode||this.state.group?l.createElement(l.Fragment,null,l.createElement("div",{id:this.id,className:"editorview-wrapper",ref:function(t){e.editorWrapper=t},style:this.props.style},this.renderView(),"group"===this.props.mode?l.createElement(w.Z,{owner:!0,banner:null},l.createElement(E.Z,{placeholder:this.props.t("select-group"),options:this.state.allGroups,value:this.state.group,onChange:function(t){e.setState({group:t})},style:{marginLeft:"20px",width:"320px",display:"inline-block"}})):null,"individual"===this.props.mode?l.createElement(w.Z,{owner:!0,banner:null},l.createElement("div",{onFocus:this.requestTextDocuments,onMouseOver:this.requestTextDocuments},l.createElement(E.Z,{placeholder:this.props.t("select-document-to-display"),options:t.textEditorDocuments.filter((function(t){return t.startsWith(e.id)})).map((function(t){return t.slice(e.id.length+1)})),value:this.state.selectedUserReport,onChange:function(t){e.setState({selectedUserReport:t})},clearable:!0,style:{marginLeft:"20px",width:"320px",display:"inline-block"}}))):null),this.state.showResetModal?l.createElement(Rt,function(e,t){for(var n in t||(t={}))Pt.call(t,n)&&It(e,n,t[n]);if(Dt)for(var r,o=(0,i.Z)(Dt(t));!(r=o()).done;)n=r.value,Nt.call(t,n)&&It(e,n,t[n]);return e}({show:this.state.showResetModal,onHide:this.toggleResetModal,onSubmit:this.resetEditor,t:this.props.t},this.props.resetModal)):null,this.state.showSubmitModal?l.createElement(At,{show:this.state.showSubmitModal,onHide:this.toggleSubmitModal,onSubmit:this.submitReport,t:this.props.t}):null,l.createElement(Vt,{show:this.state.showGuides,onHide:this.toggleGuides,target:this.id,t:this.props.t}),this.state.showPDFModal?l.createElement(zt,{show:this.state.showPDFModal,onHide:this.togglePDFModal,exportPDF:this.exportPDF,t:this.props.t}):null):l.createElement("h3",{style:this.props.style},this.props.t("available-when-grouped"))},t}(l.Component);qt.propTypes={allowSubmissions:u().bool,canLoadHTML:u().bool,defaultValue:u().string,mode:u().oneOf(["group","collaborative","individual","cohort"]),resetModal:u().shape({title:u().string,body:u().string,buttonLabel:u().string,notificationTitle:u().string,notification:u().string,tooltip:u().string}),sendSubmissionEmails:u().bool,voiceTimeout:u().number,style:u().object},qt.defaultProps={allowSubmissions:!0,canLoadHTML:!0,defaultValue:Ht,mode:"individual",sendSubmissionEmails:!1,voiceTimeout:5e3,resetModal:null,style:{}},qt.contextType=F.Z;var Jt=(0,h.Z)("text-editor")(qt)},611713:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(202784),o=n(690299),i=n.n(o),a=n(198),s=n(581440),l=n(185610),c=n(153446),u=n(836663),d=n(296781),p=n(155061),f=n(294565),m=n(708579),h=n(970693),v=n(141396),g=n(557106),b=n.n(g),y=n(783158),w=n.n(y);var E=function(e,t,n,r){var o=t;if(e.nodeSize<=2)return null;var i=function(e){return e.type===r};for(t=b()(2,t),n=w()(n,e.nodeSize-2);o<=n;){var a=e.nodeAt(o);if(a&&a.marks){var s=a.marks.find(i);if(s)return s;o+=1}else o++}return null},_={1:26,2:20,3:18,4:15,5:12};var Z=function(e){var t=e.schema,n=e.doc,r=e.selection,o=e.tr,i=t.marks.fontSize,a=t.nodes.heading,s=String(12);if(!i)return s;var l=r.from,c=r.to;if(r.empty){var u=(o.storedMarks||e.storedMarks||r.$cursor&&r.$cursor.marks&&r.$cursor.marks()||[]).find((function(e){return e.type===i}));return u?String(u.attrs.pt||s):s}var d=i?E(n,l,c,i):null;if(d)return String(d.attrs.pt);if(!a)return s;var p=(0,v.Tr)(a)(e.selection);if(!p)return s;var f=String(p.node.attrs.level);return _[f]||s},S=n(508838),k=JSON.parse('["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b","#000000"]'),x=i()("isle:text-editor"),C="#6e6e6e",M=function(e){if(e.disabled)return r.createElement("button",{onClick:e.onClick,style:{active:e.active,color:e.active?"black":C,opacity:.2},disabled:!0,className:"menu-item","aria-label":e.t(e.title)},e.children);var t=e.t(e.title);return e.hotkey&&(t+=" ("+e.hotkey+")"),r.createElement(m.Z,{key:e.itemKey+"-tooltip",tooltip:t,placement:"bottom"},r.createElement("button",{onClick:e.onClick,style:{active:e.active,color:e.active?"black":C},className:"menu-item","aria-label":e.t(e.title)},e.children))},O=(0,a.Z)("text-editor")((function(e){var t=e.menu,n=e.children,o=e.state,i=e.dispatch,a=e.view,m=e.fullscreen,v=e.showColorPicker,g=e.onColorChoice,b=(e.container,e.t),y=function(e){return function(t){t.preventDefault(),e.run&&(x("Run command",e,t),e.run(o,i,a,t.nativeEvent))}},w=function(e,t){return r.createElement(M,{key:t,itemKey:t,type:"button",active:!(!e.active||!o)&&e.active(o),disabled:!(!e.enable||!o)&&!e.enable(o),title:"string"==typeof e.title?b(e.title):"",hotkey:e.hotkey,onClick:y(e),t:b},(0,f.isPrimitive)(e.content)?b(e.content):e.content)},E=function(e,t){return e.enable&&o&&!e.enable(o)?r.createElement(p.Z,{key:"dropdown-item-"+t,disabled:!0},(0,f.isPrimitive)(e.content)?b(e.content):e.content):r.createElement(p.Z,{key:"dropdown-item-"+t,onClick:y(e)},(0,f.isPrimitive)(e.content)?b(e.content):e.content)},_=function(e){return e?e.map(w):null};return r.createElement("div",{className:"prose-menu-bar cancel"},n,_(t.blocks),t.headers?r.createElement(r.Fragment,null,r.createElement(l.Z,{title:r.createElement("span",{className:"screenreader"},b("headers")),variant:"outline-secondary",size:"sm",style:{display:"inline-block",marginRight:4}},t.headers.map(E)),r.createElement("i",{className:"prose-separator"},"|")):null,_(t.marks),m?_(t.extraMarks):null,r.createElement("div",{style:{display:v?"initial":"none",position:"absolute",top:"50px",left:"100px",zIndex:2}},r.createElement(s.Z,{width:"600px",colors:k,circleSize:16,onChangeComplete:g})),r.createElement("i",{className:"prose-separator"},"|"),t.fontSizes?r.createElement(c.Z,{style:{display:"inline-block",marginLeft:4}},r.createElement(d.Z,{size:"sm",variant:"outline-secondary",disabled:!o||!(0,S.Z)(o,"fontSize")},o?Z(o):"12"),r.createElement(u.Z,{style:{minWidth:"24px"}},t.fontSizes.map((function(e,t){return r.createElement(p.Z,{key:"font-buttons-"+t,style:{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3},onClick:y(e)},e.content)})))):null,_(t.wraps),m&&t.alignment?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),_(t.alignment)):null,t.insert?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),r.createElement(l.Z,{title:r.createElement(r.Fragment,null,h.Z.insert,r.createElement("span",{className:"screenreader"},b("insert"))),variant:"outline-secondary",size:"sm",style:{display:"inline-block"},name:"Insert"},t.insert.map(E))):null,t.tableEdits?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),r.createElement(l.Z,{title:r.createElement(r.Fragment,null,h.Z.table,r.createElement("span",{className:"screenreader"},b("table"))),variant:"outline-secondary",size:"sm",style:{display:"inline-block"},name:"Table"},t.tableEdits.map(E))):null,m&&t.history?r.createElement(r.Fragment,null,r.createElement("i",{className:"prose-separator"},"|"),t.history.map(w)):null,t.addons?r.createElement("i",{className:"prose-separator"},"|"):null,_(t.addons))}))},416515:function(e,t,n){var r=n(109025),o=n(381629);t.Z=function(e){var t=document.createElement("div");return t.innerHTML=e,r.DOMParser.fromSchema(o.Z).parse(t)}},537133:function(e,t,n){var r=n(202784);t.Z=function(e){return r.createElement("div",{className:"prose-statusbar"},r.createElement("span",null,e.t("words"),": ",e.nWords),r.createElement("span",{style:{marginLeft:5}},e.t("characters"),": ",e.nChars))}},467174:function(e,t,n){var r=n(143144),o=n(497326),i=n(894578),a=n(202784),s=n(213980),l=n.n(s),c=n(690299),u=n.n(c),d=n(109025),p=n(506565),f=n(516037),m=n(603423),h=n(956842),v=n(151300),g=n.n(v),b=n(473103),y=n(611713),w=n(381629),E=n(893121),_=n(100636),Z=n(286618),S=n(537133),k=n(974556),x=n(73811),C=n(416515),M=Object.defineProperty,O=function(e,t,n){return function(e,t,n){t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},D=u()("isle:text-editor"),P=function(e){function t(t){var n,r;n=e.call(this,t)||this,O((0,o.Z)(n),"_createEditorView",(function(e){n.editorDiv=e,null!==e&&(n.editorView=new p.tk(e,{state:n.state.editorState,dispatchTransaction:n.dispatchTransaction,nodeViews:{footnote:function(e,t,n,r){return new E.Z(e,t,n,r)},image:function(e,t,n,r){return new _.Z(e,t,n,r)},plot:function(e,t,n,r){return new _.Z(e,t,n,r)},plotContainer:function(e,t,n,r){return new _.Z(e,t,n,r)}},handleDOMEvents:{dragenter:function(e){D("Handle drag enter event..."),(0,Z.yz)(e)},drop:x.Z,keydown:n.props.onKeyDown}})),n.props.onMount(n.editorDiv)})),O((0,o.Z)(n),"onEditorState",(function(e){var t=0,r=0;n.props.showStatusBar&&e.doc.forEach((function(e){e.forEach((function(e){e.text&&(t+=e.text.length,r+=(0,k.Z)(e.text))}))})),n.props.onEditorState(e),n.setState({editorState:e,nWords:r,nChars:t})})),O((0,o.Z)(n),"dispatchTransaction",(function(e){var t=n.state.editorState.apply(e);null!==n.editorView&&n.editorView.updateState(t);var r=(0,m.fixTables)(n.state.editorState);r&&(t=t.apply(r.setMeta("addToHistory",!1))),n.onEditorState(t)})),O((0,o.Z)(n),"saveInBrowser",(function(){D("Saving document state to local storage..."),n.state.editorState&&localStorage.setItem(n.props.id,JSON.stringify(n.state.editorState.doc.toJSON()))})),t.id&&(r=localStorage.getItem(t.id)),r||(r=t.defaultValue);var i=g()(r)?d.Node.fromJSON(w.Z,JSON.parse(r)):(0,C.Z)(r);return n.state={editorState:f.EditorState.create({doc:i,schema:w.Z,plugins:b.Z})},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.autoSave&&this.props.id&&(this.saveInterval=setInterval(this.saveInBrowser,this.props.intervalTime)),window.addEventListener("unload",this.saveInBrowser)},n.componentDidUpdate=function(e){var t=this;if(this.props.defaultValue!==e.defaultValue||this.props.docId!==e.docId){D("Re-creating editor state...");var n=g()(this.props.defaultValue)?d.Node.fromJSON(w.Z,JSON.parse(this.props.defaultValue)):(0,C.Z)(this.props.defaultValue);this.setState({editorState:f.EditorState.create({doc:n,schema:w.Z,plugins:b.Z})},(function(){t.editorView.destroy(),t._createEditorView(t.editorDiv)}))}},n.componentWillUnmount=function(){this.editorView&&this.editorView.destroy(),this.saveInterval&&clearInterval(this.saveInterval),window.removeEventListener("unload",this.saveInBrowser)},n.focus=function(){this.editorView&&this.editorView.focus()},n.render=function(){return a.createElement(a.Fragment,null,a.createElement(y.Z,{menu:this.props.menu,state:this.state.editorState,dispatch:this.dispatchTransaction,view:this.editorView,fullscreen:this.props.fullscreen,showColorPicker:this.props.showColorPicker,onColorChoice:this.props.onColorChoice}),a.createElement("div",{className:this.props.className,ref:this._createEditorView}),this.props.showStatusBar?a.createElement(S.Z,{nWords:this.state.nWords,nChars:this.state.nChars,t:this.props.t}):null)},(0,r.Z)(t,[{key:"markdown",get:function(){return h.Dm.serialize(this.state.editorState.doc)}}]),t}(a.Component);P.propTypes={autoSave:l().bool,intervalTime:l().number,defaultValue:l().string.isRequired,docId:l().number.isRequired,fullscreen:l().bool.isRequired,showColorPicker:l().bool.isRequired,menu:l().object.isRequired,showStatusBar:l().bool,t:l().func,onColorChoice:l().func,onEditorState:l().func,onKeyDown:l().func,onMount:l().func},P.defaultProps={autoSave:!0,intervalTime:1e4,showStatusBar:!0,t:function(){},onColorChoice:function(){},onEditorState:function(){},onKeyDown:function(){},onMount:function(){}},t.Z=P},893121:function(e,t,n){var r=n(506565),o=n(516037),i=n(135428),a=n(182996),s=n(630709),l=n(409961),c=n.n(l),u=n(783158),d=n.n(u),p=Object.defineProperty,f=function(e,t,n){return function(e,t,n){t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},m=function(){function e(e,t,n){var r=this;f(this,"dispatchInner",(function(e){var t=r.innerView.state.applyTransaction(e),n=t.state,o=t.transactions;if(r.innerView.updateState(n),!e.getMeta("fromOutside")){for(var i=r.outerView.state.tr,a=s.KS.offset(r.getPos()+1),l=0;l<o.length;l++)for(var c=o[l].steps,u=0;u<c.length;u++)i.step(c[u].map(a));i.docChanged&&r.outerView.dispatch(i)}})),this.node=e,this.outerView=t,this.getPos=n,this.dom=document.createElement("footnote"),this.innerView=null}var t=e.prototype;return t.selectNode=function(){this.dom.classList.add("ProseMirror-selectednode"),this.innerView||this.open()},t.deselectNode=function(){this.dom.classList.remove("ProseMirror-selectednode"),this.innerView&&this.close()},t.open=function(){var e=this,t=this.dom.appendChild(document.createElement("div"));t.className="footnote-tooltip",this.innerView=new r.tk(t,{state:o.EditorState.create({doc:this.node,plugins:[(0,a.h)({"Mod-z":function(){return(0,i.Yw)(e.outerView.state,e.outerView.dispatch)},"Mod-y":function(){return(0,i.KX)(e.outerView.state,e.outerView.dispatch)}})]}),dispatchTransaction:this.dispatchInner,handleDOMEvents:{mousedown:function(){e.outerView.hasFocus()&&e.innerView.focus()}}})},t.close=function(){this.innerView.destroy(),this.innerView=null,this.dom.textContent=""},t.update=function(e){if(!e.sameMarkup(this.node))return!1;if(this.node=e,this.innerView){var t=this.innerView.state,n=e.content.findDiffStart(t.doc.content);if(!c()(n)){var r=e.content.findDiffEnd(t.doc.content),o=r.a,i=r.b,a=n-d()(o,i);a>0&&(o+=a,i+=a),this.innerView.dispatch(t.tr.replace(n,i,e.slice(n,o)).setMeta("fromOutside",!0))}}return!0},t.destroy=function(){this.innerView&&this.close()},t.stopEvent=function(e){return this.innerView&&this.innerView.dom.contains(e.target)},t.ignoreMutation=function(){return!0},e}();t.Z=m},652501:function(e,t){t.Z=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=512);for(var r=atob(e),o=[],i=0;i<r.length;i+=n){for(var a=r.slice(i,i+n),s=new Array(a.length),l=0;l<a.length;l++)s[l]=a.charCodeAt(l);var c=new Uint8Array(s);o.push(c)}return new Blob(o,{type:t})}},264797:function(e,t){t.Z=function(e){var t=new(0,window.FileReader);return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))}},675252:function(e,t){var n=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i;function r(e){setImmediate((function(){throw e}),0)}function o(e){return n.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}var i=function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t,n=e.document,i=!1;n&&n.createElementNS&&(t=n.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in t);var a=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=e.setImmediate||e.setTimeout,c=p.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=o(e)),navigator.msSaveOrOpenBlob(e,t)}:(c.abort=function(){},c.readyState=c.INIT=0,c.WRITING=1,c.DONE=2,c.error=null,c.onwritestart=null,c.onprogress=null,c.onwrite=null,c.onabort=null,c.onerror=null,c.onwriteend=null,function(e,t,n){return new p(e,t||e.name||"download",n)})}function u(){return e.URL||e.webkitURL||e}function d(e){setTimeout((function(){"string"==typeof e?u().revokeObjectURL(e):e.remove()}),4e4)}function p(n,c,p){p||(n=o(n));var f,m=this,h="application/octet-stream"===n.type;function v(){!function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var i=e["on"+t[o]];if("function"==typeof i)try{i.call(e,n||e)}catch(a){r(a)}}}(m,"writestart progress write writeend".split(" "))}if(m.readyState=m.INIT,i)return f=u().createObjectURL(n),void l((function(){var e,n;t.href=f,t.download=c,e=t,n=new MouseEvent("click"),e.dispatchEvent(n),v(),d(f),m.readyState=m.DONE}),0);!function(){if((s||h&&a)&&e.FileReader){var t=new FileReader;return t.onloadend=function(){var n=s?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(n,"_blank")||(e.location.href=n),n=void 0,m.readyState=m.DONE,v()},t.readAsDataURL(n),void(m.readyState=m.INIT)}f||(f=u().createObjectURL(n)),h?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),m.readyState=m.DONE,v(),d(f)}()}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);t.Z=i},188777:function(e,t){t.Z=function(e){return new Promise((function(t,n){var r=window.FileReader;if(r){var o=new r;o.onload=function(e){var n=e.target.result;t({src:n,height:0,width:0,id:""})},o.onerror=function(){n(new Error("FileReader failed"))},o.readAsDataURL(e)}else n(new Error("FileReader is not available"))}))}},77461:function(e,t){t.Z=function(e){var t=1;return function(){return e+"-"+(t+=1)}}},423184:function(e,t,n){var r=n(72779),o=n.n(r),i=n(202784),a=n(429658),s=n(552322);const l=i.forwardRef((({bsPrefix:e,size:t,vertical:n,className:r,as:i="div",...l},c)=>{const u=(0,a.vE)(e,"btn-group");let d=u;return n&&(d=`${u}-vertical`),(0,s.jsx)(i,{...l,ref:c,className:o()(r,d,t&&`${u}-${t}`)})}));l.displayName="ButtonGroup",l.defaultProps={vertical:!1,role:"group"},t.Z=l},78708:function(e){e.exports=JSON.parse("[8,9,10,11,12,14,18,24,30,36,48,60,72]")}}]);
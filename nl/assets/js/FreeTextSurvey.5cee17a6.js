/*! For license information please see FreeTextSurvey.5cee17a6.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[73872],{839916:function(e,t,n){var a=n(669710);e.exports=a},669710:function(e,t,n){var a=n(571388),r=n(552770);e.exports=function(e){var t,n,s,l,o,c,u;if(!a(e))throw new TypeError("invalid argument. First argument must be a collection. Value: `"+e+"`.");for(t=0,n=[],l=[],s=e.length,c=0;c<s;c++)o=e[c],t+=1,-1===(u=r(n,o))?(n.push(o),l.push([o,1,0])):l[u][1]+=1;for(s=l.length,c=0;c<s;c++)l[c][2]=l[c][1]/t;return l}},378165:function(e,t,n){n.r(t);var a=n(202784),r=n(213980),s=n.n(r),l=n(376699),o=n(790817),c=n(471275),u=n(312594),i=n(458264),m=n(46739),d=n(426214),f=n(690299),p=n.n(f),b=n(308669),y=n.n(b),v=n(839916),E=n.n(v),g=n(417332),w=n(430391),h=n(956260),N=n(466621),Z=n(70366),x=n(123103),k=n(691334),P=n(741082);const $=p()("isle:free-text-survey"),C=(0,g.Z)("free-text-survey"),O=e=>{const t=(0,a.useRef)(e.id||C(e)),{t:n}=(0,l.$)("surveys"),r=(0,a.useContext)(x.Z),[s,f]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[v,g]=(0,a.useState)(null),[P,O]=(0,a.useState)({counts:[],freqTable:null}),{anonymous:q,onSubmit:j}=e,S=(0,a.useCallback)((e=>{$("FreeTextQuestion is receiving data: "+JSON.stringify(e));const t=E()(e),r=t.map((e=>({x:e[0],y:e[1]}))),s=a.createElement("table",{className:"table table-bordered"},a.createElement("tr",null,a.createElement("th",null,n("category")),a.createElement("th",null,n("count")),a.createElement("th",null,n("relative-frequency"))),t.map(((e,t)=>a.createElement("tr",{key:t},e.map(((e,t)=>(2===t&&(e=e.toFixed(3)),a.createElement("td",{key:t},e))))))));O({counts:r,freqTable:s})}),[n]),T=(0,a.useCallback)((()=>{r.log({id:t.current,type:k.Mgq,value:v,anonymous:q},"members"),f(!0),r.addNotification({title:n("submitted"),message:n("answer-submitted"),level:"success"}),j(v)}),[q,j,r,n,v]),z=s&&!e.allowMultipleAnswers;return a.createElement(d.Z,{id:t.current,className:e.className,style:e.style},a.createElement(c.Z,null,a.createElement(i.Z,null,a.createElement(u.Z,{md:6},a.createElement(o.Z,{className:"free-text-survey",body:!0},a.createElement("label",null,e.question),p?a.createElement("i",{className:"fas fa-lock",style:{float:"right"}}):null,a.createElement(w.Z,{value:v,inline:!0,disabled:z,onChange:g,rows:e.rows}),a.createElement(Z.Z,{id:t.current,disabled:!v||z,onClick:T,onPaused:b},n(z?"submitted":"submit")))),a.createElement(u.Z,{md:6},a.createElement(N.Z,{for:[t.current],onData:S}),y()(P.counts)?a.createElement("h3",null,n("no-responses-yet")):a.createElement(m.Z,{data:[{x:P.counts.map((e=>e.x)),y:P.counts.map((e=>e.y)),type:"bar"}],layout:{width:400,height:300},removeButtons:!0}),P.freqTable))),a.createElement(h.Z,{buttonLabel:n("responses"),id:t.current,info:k.Mgq}))};O.defaultProps={question:"",allowMultipleAnswers:!1,anonymous:!1,rows:4,className:"",style:{},onSubmit(){}},O.propTypes={question:s().oneOfType([s().string,s().node]),allowMultipleAnswers:s().bool,anonymous:s().bool,rows:s().number,className:s().string,style:s().object,onSubmit:s().func},t.default=(0,P.W)(O)},956260:function(e,t,n){var a=n(202784),r=n(213980),s=n.n(r),l=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,i=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const m=e=>{const t=e,{children:n}=t,r=((e,t)=>{var n={};for(var a in e)c.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&o)for(var a of o(e))t.indexOf(a)<0&&u.call(e,a)&&(n[a]=e[a]);return n})(t,["children"]);return a.createElement("div",((e,t)=>{for(var n in t||(t={}))c.call(t,n)&&i(e,n,t[n]);if(o)for(var n of o(t))u.call(t,n)&&i(e,n,t[n]);return e})({},r),n)};m.defaultProps={className:"",style:{}},m.propTypes={className:s().string,style:s().object},t.Z=m},70366:function(e,t,n){var a=n(202784),r=n(213980),s=n.n(r),l=n(376699),o=n(822736),c=n(770561),u=n(770149),i=n(123103),m=n(691334),d=n(302108);const f=({children:e,disabled:t,id:n,size:r,variant:s,onClick:f,onPaused:p})=>{const[b,y]=(0,a.useState)(!1),{t:v}=(0,l.$)("general"),E=(0,a.useContext)(i.Z);(0,a.useEffect)((()=>{let e;return E&&(e=E.subscribe(((e,t)=>{e===d.Wh&&t.id===n+"-stoppable-button"&&(t.type===m.rzq?(y(!0),p(!0)):t.type===m.nt6&&(y(!1),p(!1)))}))),()=>{e&&e()}}),[n,E,p]);const g=(0,a.useCallback)((()=>{E.log({id:n+"-stoppable-button",type:b?m.nt6:m.rzq,value:!0},"members"),y(!b),p&&p(!b)}),[n,b,E,p]);return n?a.createElement("div",{className:"d-grid gap-2"},a.createElement(c.Z,{className:"stoppable-button",size:r,variant:s,onClick:f,disabled:t||b},e),a.createElement(u.Z,{owner:!0,banner:null,showOwnerInPresentationMode:!1},a.createElement(c.Z,{size:r,variant:b?"warning":"secondary",onClick:g},b?a.createElement("span",null,v("resume")):a.createElement("span",null,v("pause"))))):a.createElement(o.Z,{variant:"danger"},v("supply-component-id"))};f.defaultProps={size:"small",variant:"success"},f.propTypes={size:s().oneOf(["small","sm","large","lg"]),variant:s().string},t.Z=f},770561:function(e,t,n){var a=n(72779),r=n.n(a),s=n(202784),l=n(247830),o=n(429658),c=n(552322);const u=s.forwardRef((({as:e,bsPrefix:t,variant:n,size:a,active:s,className:u,...i},m)=>{const d=(0,o.vE)(t,"btn"),[f,{tagName:p}]=(0,l.FT)({tagName:e,...i}),b=p;return(0,c.jsx)(b,{...f,...i,ref:m,className:r()(u,d,s&&"active",n&&`${d}-${n}`,a&&`${d}-${a}`,i.href&&i.disabled&&"disabled")})}));u.displayName="Button",u.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=u},471275:function(e,t,n){var a=n(72779),r=n.n(a),s=n(202784),l=n(429658),o=n(552322);const c=s.forwardRef((({bsPrefix:e,fluid:t,as:n="div",className:a,...s},c)=>{const u=(0,l.vE)(e,"container"),i="string"==typeof t?`-${t}`:"-fluid";return(0,o.jsx)(n,{ref:c,...s,className:r()(a,t?`${u}${i}`:u)})}));c.displayName="Container",c.defaultProps={fluid:!1},t.Z=c},458264:function(e,t,n){var a=n(72779),r=n.n(a),s=n(202784),l=n(429658),o=n(552322);const c=s.forwardRef((({bsPrefix:e,className:t,as:n="div",...a},s)=>{const c=(0,l.vE)(e,"row"),u=(0,l.pi)(),i=`${c}-cols`,m=[];return u.forEach((e=>{const t=a[e];let n;delete a[e],null!=t&&"object"==typeof t?({cols:n}=t):n=t;const r="xs"!==e?`-${e}`:"";null!=n&&m.push(`${i}${r}-${n}`)})),(0,o.jsx)(n,{ref:s,...a,className:r()(t,c,...m)})}));c.displayName="Row",t.Z=c}}]);